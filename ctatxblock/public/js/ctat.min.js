var $jscomp = {scope:{}, getGlobal:function(a) {
  return "undefined" != typeof window && window === a ? a : "undefined" != typeof global ? global : a;
}};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.initSymbol = function() {
  $jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol);
  $jscomp.initSymbol = function() {
  };
};
$jscomp.symbolCounter_ = 0;
$jscomp.Symbol = function(a) {
  return "jscomp_symbol_" + a + $jscomp.symbolCounter_++;
};
$jscomp.initSymbolIterator = function() {
  $jscomp.initSymbol();
  $jscomp.global.Symbol.iterator || ($jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));
  $jscomp.initSymbolIterator = function() {
  };
};
$jscomp.makeIterator = function(a) {
  $jscomp.initSymbolIterator();
  if (a[$jscomp.global.Symbol.iterator]) {
    return a[$jscomp.global.Symbol.iterator]();
  }
  var b = 0;
  return {next:function() {
    return b == a.length ? {done:!0} : {done:!1, value:a[b++]};
  }};
};
$jscomp.arrayFromIterator = function(a) {
  for (var b, d = [];!(b = a.next()).done;) {
    d.push(b.value);
  }
  return d;
};
$jscomp.arrayFromIterable = function(a) {
  return a instanceof Array ? a : $jscomp.arrayFromIterator($jscomp.makeIterator(a));
};
$jscomp.inherits = function(a, b) {
  function d() {
  }
  d.prototype = b.prototype;
  a.prototype = new d;
  a.prototype.constructor = a;
  for (var f in b) {
    if ($jscomp.global.Object.defineProperties) {
      var g = $jscomp.global.Object.getOwnPropertyDescriptor(b, f);
      g && $jscomp.global.Object.defineProperty(a, f, g);
    } else {
      a[f] = b[f];
    }
  }
};
$jscomp.array = $jscomp.array || {};
$jscomp.array.done_ = function() {
  return {done:!0, value:void 0};
};
$jscomp.array.arrayIterator_ = function(a, b) {
  a instanceof String && (a = String(a));
  var d = 0;
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  var f = {}, g = (f.next = function() {
    if (d < a.length) {
      var c = d++;
      return {value:b(c, a[c]), done:!1};
    }
    g.next = $jscomp.array.done_;
    return $jscomp.array.done_();
  }, f[Symbol.iterator] = function() {
    return g;
  }, f);
  return g;
};
$jscomp.array.findInternal_ = function(a, b, d) {
  a instanceof String && (a = String(a));
  for (var f = a.length, g = 0;g < f;g++) {
    var c = a[g];
    if (b.call(d, c, g, a)) {
      return {i:g, v:c};
    }
  }
  return {i:-1, v:void 0};
};
$jscomp.array.from = function(a, b, d) {
  b = void 0 === b ? function(a) {
    return a;
  } : b;
  var f = [];
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  if (a[Symbol.iterator]) {
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    a = a[Symbol.iterator]();
    for (var g;!(g = a.next()).done;) {
      f.push(b.call(d, g.value));
    }
  } else {
    g = a.length;
    for (var c = 0;c < g;c++) {
      f.push(b.call(d, a[c]));
    }
  }
  return f;
};
$jscomp.array.of = function(a) {
  for (var b = [], d = 0;d < arguments.length;++d) {
    b[d - 0] = arguments[d];
  }
  return $jscomp.array.from(b);
};
$jscomp.array.entries = function() {
  return $jscomp.array.arrayIterator_(this, function(a, b) {
    return [a, b];
  });
};
$jscomp.array.entries$install = function() {
  Array.prototype.entries || (Array.prototype.entries = $jscomp.array.entries);
};
$jscomp.array.keys = function() {
  return $jscomp.array.arrayIterator_(this, function(a) {
    return a;
  });
};
$jscomp.array.keys$install = function() {
  Array.prototype.keys || (Array.prototype.keys = $jscomp.array.keys);
};
$jscomp.array.values = function() {
  return $jscomp.array.arrayIterator_(this, function(a, b) {
    return b;
  });
};
$jscomp.array.values$install = function() {
  Array.prototype.values || (Array.prototype.values = $jscomp.array.values);
};
$jscomp.array.copyWithin = function(a, b, d) {
  var f = this.length;
  a = Number(a);
  b = Number(b);
  d = Number(null != d ? d : f);
  if (a < b) {
    for (d = Math.min(d, f);b < d;) {
      b in this ? this[a++] = this[b++] : (delete this[a++], b++);
    }
  } else {
    for (d = Math.min(d, f + b - a), a += d - b;d > b;) {
      --d in this ? this[--a] = this[d] : delete this[a];
    }
  }
  return this;
};
$jscomp.array.copyWithin$install = function() {
  Array.prototype.copyWithin || (Array.prototype.copyWithin = $jscomp.array.copyWithin);
};
$jscomp.array.fill = function(a, b, d) {
  null != d && a.length || (d = this.length || 0);
  d = Number(d);
  for (b = Number((void 0 === b ? 0 : b) || 0);b < d;b++) {
    this[b] = a;
  }
  return this;
};
$jscomp.array.fill$install = function() {
  Array.prototype.fill || (Array.prototype.fill = $jscomp.array.fill);
};
$jscomp.array.find = function(a, b) {
  return $jscomp.array.findInternal_(this, a, b).v;
};
$jscomp.array.find$install = function() {
  Array.prototype.find || (Array.prototype.find = $jscomp.array.find);
};
$jscomp.array.findIndex = function(a, b) {
  return $jscomp.array.findInternal_(this, a, b).i;
};
$jscomp.array.findIndex$install = function() {
  Array.prototype.findIndex || (Array.prototype.findIndex = $jscomp.array.findIndex);
};
$jscomp.Map = function(a) {
  a = void 0 === a ? [] : a;
  this.data_ = {};
  this.head_ = $jscomp.Map.createHead_();
  this.size = 0;
  if (a) {
    a = $jscomp.makeIterator(a);
    for (var b = a.next();!b.done;b = a.next()) {
      b = b.value, this.set(b[0], b[1]);
    }
  }
};
$jscomp.Map.checkBrowserConformance_ = function() {
  var a = $jscomp.global.Map;
  if (!a || !a.prototype.entries || !Object.seal) {
    return !1;
  }
  try {
    var b = Object.seal({x:4}), d = new a($jscomp.makeIterator([[b, "s"]]));
    if ("s" != d.get(b) || 1 != d.size || d.get({x:4}) || d.set({x:4}, "t") != d || 2 != d.size) {
      return !1;
    }
    var f = d.entries(), g = f.next();
    if (g.done || g.value[0] != b || "s" != g.value[1]) {
      return !1;
    }
    g = f.next();
    return g.done || 4 != g.value[0].x || "t" != g.value[1] || !f.next().done ? !1 : !0;
  } catch (c) {
    return !1;
  }
};
$jscomp.Map.createHead_ = function() {
  var a = {};
  return a.previous = a.next = a.head = a;
};
$jscomp.Map.getId_ = function(a) {
  if (!(a instanceof Object)) {
    return String(a);
  }
  $jscomp.Map.key_ in a || a instanceof Object && Object.isExtensible && Object.isExtensible(a) && $jscomp.Map.defineProperty_(a, $jscomp.Map.key_, ++$jscomp.Map.index_);
  return $jscomp.Map.key_ in a ? a[$jscomp.Map.key_] : " " + a;
};
$jscomp.Map.prototype.set = function(a, b) {
  var d = this.maybeGetEntry_(a), f = d.id, g = d.list, d = d.entry;
  g || (g = this.data_[f] = []);
  d ? d.value = b : (d = {next:this.head_, previous:this.head_.previous, head:this.head_, key:a, value:b}, g.push(d), this.head_.previous.next = d, this.head_.previous = d, this.size++);
  return this;
};
$jscomp.Map.prototype["delete"] = function(a) {
  var b = this.maybeGetEntry_(a);
  a = b.id;
  var d = b.list, f = b.index;
  return (b = b.entry) && d ? (d.splice(f, 1), d.length || delete this.data_[a], b.previous.next = b.next, b.next.previous = b.previous, b.head = null, this.size--, !0) : !1;
};
$jscomp.Map.prototype.clear = function() {
  this.data_ = {};
  this.head_ = this.head_.previous = $jscomp.Map.createHead_();
  this.size = 0;
};
$jscomp.Map.prototype.has = function(a) {
  return !!this.maybeGetEntry_(a).entry;
};
$jscomp.Map.prototype.get = function(a) {
  return (a = this.maybeGetEntry_(a).entry) && a.value;
};
$jscomp.Map.prototype.maybeGetEntry_ = function(a) {
  var b = $jscomp.Map.getId_(a), d = this.data_[b];
  if (d) {
    for (var f = 0;f < d.length;f++) {
      var g = d[f];
      if (a !== a && g.key !== g.key || a === g.key) {
        return {id:b, list:d, index:f, entry:g};
      }
    }
  }
  return {id:b, list:d, index:-1, entry:void 0};
};
$jscomp.Map.prototype.entries = function() {
  return this.iter_(function(a) {
    return [a.key, a.value];
  });
};
$jscomp.Map.prototype.keys = function() {
  return this.iter_(function(a) {
    return a.key;
  });
};
$jscomp.Map.prototype.values = function() {
  return this.iter_(function(a) {
    return a.value;
  });
};
$jscomp.Map.prototype.forEach = function(a, b) {
  for (var d = $jscomp.makeIterator(this.entries()), f = d.next();!f.done;f = d.next()) {
    f = f.value, a.call(b, f[1], f[0], this);
  }
};
$jscomp.Map.prototype.iter_ = function(a) {
  var b = this, d = this.head_;
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  var f = {};
  return f.next = function() {
    if (d) {
      for (;d.head != b.head_;) {
        d = d.previous;
      }
      for (;d.next != d.head;) {
        return d = d.next, {done:!1, value:a(d)};
      }
      d = null;
    }
    return {done:!0, value:void 0};
  }, f[Symbol.iterator] = function() {
    return this;
  }, f;
};
$jscomp.Map.index_ = 0;
$jscomp.Map.defineProperty_ = Object.defineProperty ? function(a, b, d) {
  Object.defineProperty(a, b, {value:String(d)});
} : function(a, b, d) {
  a[b] = String(d);
};
$jscomp.Map.Entry_ = function() {
};
$jscomp.Map.ASSUME_NO_NATIVE = !1;
$jscomp.Map$install = function() {
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  !$jscomp.Map.ASSUME_NO_NATIVE && $jscomp.Map.checkBrowserConformance_() ? $jscomp.Map = $jscomp.global.Map : ($jscomp.initSymbol(), $jscomp.initSymbolIterator(), $jscomp.Map.prototype[Symbol.iterator] = $jscomp.Map.prototype.entries, $jscomp.initSymbol(), $jscomp.Map.key_ = Symbol("map-id-key"));
  $jscomp.Map$install = function() {
  };
};
$jscomp.math = $jscomp.math || {};
$jscomp.math.clz32 = function(a) {
  a = Number(a) >>> 0;
  if (0 === a) {
    return 32;
  }
  var b = 0;
  0 === (a & 4294901760) && (a <<= 16, b += 16);
  0 === (a & 4278190080) && (a <<= 8, b += 8);
  0 === (a & 4026531840) && (a <<= 4, b += 4);
  0 === (a & 3221225472) && (a <<= 2, b += 2);
  0 === (a & 2147483648) && b++;
  return b;
};
$jscomp.math.imul = function(a, b) {
  a = Number(a);
  b = Number(b);
  var d = a & 65535, f = b & 65535;
  return d * f + ((a >>> 16 & 65535) * f + d * (b >>> 16 & 65535) << 16 >>> 0) | 0;
};
$jscomp.math.sign = function(a) {
  a = Number(a);
  return 0 === a || isNaN(a) ? a : 0 < a ? 1 : -1;
};
$jscomp.math.log10 = function(a) {
  return Math.log(a) / Math.LN10;
};
$jscomp.math.log2 = function(a) {
  return Math.log(a) / Math.LN2;
};
$jscomp.math.log1p = function(a) {
  a = Number(a);
  if (.25 > a && -.25 < a) {
    for (var b = a, d = 1, f = a, g = 0, c = 1;g != f;) {
      b *= a, c *= -1, f = (g = f) + c * b / ++d;
    }
    return f;
  }
  return Math.log(1 + a);
};
$jscomp.math.expm1 = function(a) {
  a = Number(a);
  if (.25 > a && -.25 < a) {
    for (var b = a, d = 1, f = a, g = 0;g != f;) {
      b *= a / ++d, f = (g = f) + b;
    }
    return f;
  }
  return Math.exp(a) - 1;
};
$jscomp.math.cosh = function(a) {
  a = Number(a);
  return (Math.exp(a) + Math.exp(-a)) / 2;
};
$jscomp.math.sinh = function(a) {
  a = Number(a);
  return 0 === a ? a : (Math.exp(a) - Math.exp(-a)) / 2;
};
$jscomp.math.tanh = function(a) {
  a = Number(a);
  if (0 === a) {
    return a;
  }
  var b = Math.exp(2 * -Math.abs(a)), b = (1 - b) / (1 + b);
  return 0 > a ? -b : b;
};
$jscomp.math.acosh = function(a) {
  a = Number(a);
  return Math.log(a + Math.sqrt(a * a - 1));
};
$jscomp.math.asinh = function(a) {
  a = Number(a);
  if (0 === a) {
    return a;
  }
  var b = Math.log(Math.abs(a) + Math.sqrt(a * a + 1));
  return 0 > a ? -b : b;
};
$jscomp.math.atanh = function(a) {
  a = Number(a);
  return ($jscomp.math.log1p(a) - $jscomp.math.log1p(-a)) / 2;
};
$jscomp.math.hypot = function(a, b, d) {
  for (var f = [], g = 2;g < arguments.length;++g) {
    f[g - 2] = arguments[g];
  }
  a = Number(a);
  b = Number(b);
  for (var c = Math.max(Math.abs(a), Math.abs(b)), e = $jscomp.makeIterator(f), g = e.next();!g.done;g = e.next()) {
    c = Math.max(c, Math.abs(g.value));
  }
  if (1E100 < c || 1E-100 > c) {
    a /= c;
    b /= c;
    e = a * a + b * b;
    f = $jscomp.makeIterator(f);
    for (g = f.next();!g.done;g = f.next()) {
      g = g.value, g = Number(g) / c, e += g * g;
    }
    return Math.sqrt(e) * c;
  }
  c = a * a + b * b;
  f = $jscomp.makeIterator(f);
  for (g = f.next();!g.done;g = f.next()) {
    g = g.value, g = Number(g), c += g * g;
  }
  return Math.sqrt(c);
};
$jscomp.math.trunc = function(a) {
  a = Number(a);
  if (isNaN(a) || Infinity === a || -Infinity === a || 0 === a) {
    return a;
  }
  var b = Math.floor(Math.abs(a));
  return 0 > a ? -b : b;
};
$jscomp.math.cbrt = function(a) {
  if (0 === a) {
    return a;
  }
  a = Number(a);
  var b = Math.pow(Math.abs(a), 1 / 3);
  return 0 > a ? -b : b;
};
$jscomp.number = $jscomp.number || {};
$jscomp.number.isFinite = function(a) {
  return "number" !== typeof a ? !1 : !isNaN(a) && Infinity !== a && -Infinity !== a;
};
$jscomp.number.isInteger = function(a) {
  return $jscomp.number.isFinite(a) ? a === Math.floor(a) : !1;
};
$jscomp.number.isNaN = function(a) {
  return "number" === typeof a && isNaN(a);
};
$jscomp.number.isSafeInteger = function(a) {
  return $jscomp.number.isInteger(a) && Math.abs(a) <= $jscomp.number.MAX_SAFE_INTEGER;
};
$jscomp.number.EPSILON = Math.pow(2, -52);
$jscomp.number.MAX_SAFE_INTEGER = 9007199254740991;
$jscomp.number.MIN_SAFE_INTEGER = -9007199254740991;
$jscomp.object = $jscomp.object || {};
$jscomp.object.assign = function(a, b) {
  for (var d = [], f = 1;f < arguments.length;++f) {
    d[f - 1] = arguments[f];
  }
  d = $jscomp.makeIterator(d);
  for (f = d.next();!f.done;f = d.next()) {
    if (f = f.value) {
      for (var g in f) {
        Object.prototype.hasOwnProperty.call(f, g) && (a[g] = f[g]);
      }
    }
  }
  return a;
};
$jscomp.object.is = function(a, b) {
  return a === b ? 0 !== a || 1 / a === 1 / b : a !== a && b !== b;
};
$jscomp.Set = function(a) {
  a = void 0 === a ? [] : a;
  this.map_ = new $jscomp.Map;
  if (a) {
    a = $jscomp.makeIterator(a);
    for (var b = a.next();!b.done;b = a.next()) {
      this.add(b.value);
    }
  }
  this.size = this.map_.size;
};
$jscomp.Set.checkBrowserConformance_ = function() {
  var a = $jscomp.global.Set;
  if (!a || !a.prototype.entries || !Object.seal) {
    return !1;
  }
  var b = Object.seal({x:4}), a = new a($jscomp.makeIterator([b]));
  if (a.has(b) || 1 != a.size || a.add(b) != a || 1 != a.size || a.add({x:4}) != a || 2 != a.size) {
    return !1;
  }
  var a = a.entries(), d = a.next();
  if (d.done || d.value[0] != b || d.value[1] != b) {
    return !1;
  }
  d = a.next();
  return d.done || d.value[0] == b || 4 != d.value[0].x || d.value[1] != d.value[0] ? !1 : a.next().done;
};
$jscomp.Set.prototype.add = function(a) {
  this.map_.set(a, a);
  this.size = this.map_.size;
  return this;
};
$jscomp.Set.prototype["delete"] = function(a) {
  a = this.map_["delete"](a);
  this.size = this.map_.size;
  return a;
};
$jscomp.Set.prototype.clear = function() {
  this.map_.clear();
  this.size = 0;
};
$jscomp.Set.prototype.has = function(a) {
  return this.map_.has(a);
};
$jscomp.Set.prototype.entries = function() {
  return this.map_.entries();
};
$jscomp.Set.prototype.values = function() {
  return this.map_.values();
};
$jscomp.Set.prototype.forEach = function(a, b) {
  var d = this;
  this.map_.forEach(function(f) {
    return a.call(b, f, f, d);
  });
};
$jscomp.Set.ASSUME_NO_NATIVE = !1;
$jscomp.Set$install = function() {
  !$jscomp.Set.ASSUME_NO_NATIVE && $jscomp.Set.checkBrowserConformance_() ? $jscomp.Set = $jscomp.global.Set : ($jscomp.Map$install(), $jscomp.initSymbol(), $jscomp.initSymbolIterator(), $jscomp.Set.prototype[Symbol.iterator] = $jscomp.Set.prototype.values);
  $jscomp.Set$install = function() {
  };
};
$jscomp.string = $jscomp.string || {};
$jscomp.string.noRegExp_ = function(a, b) {
  if (a instanceof RegExp) {
    throw new TypeError("First argument to String.prototype." + b + " must not be a regular expression");
  }
};
$jscomp.string.fromCodePoint = function(a) {
  for (var b = [], d = 0;d < arguments.length;++d) {
    b[d - 0] = arguments[d];
  }
  for (var d = "", b = $jscomp.makeIterator(b), f = b.next();!f.done;f = b.next()) {
    f = f.value;
    f = +f;
    if (0 > f || 1114111 < f || f !== Math.floor(f)) {
      throw new RangeError("invalid_code_point " + f);
    }
    65535 >= f ? d += String.fromCharCode(f) : (f -= 65536, d += String.fromCharCode(f >>> 10 & 1023 | 55296), d += String.fromCharCode(f & 1023 | 56320));
  }
  return d;
};
$jscomp.string.repeat = function(a) {
  var b = this.toString();
  if (0 > a || 1342177279 < a) {
    throw new RangeError("Invalid count value");
  }
  a |= 0;
  for (var d = "";a;) {
    if (a & 1 && (d += b), a >>>= 1) {
      b += b;
    }
  }
  return d;
};
$jscomp.string.repeat$install = function() {
  String.prototype.repeat || (String.prototype.repeat = $jscomp.string.repeat);
};
$jscomp.string.codePointAt = function(a) {
  var b = this.toString(), d = b.length;
  a = Number(a) || 0;
  if (0 <= a && a < d) {
    a |= 0;
    var f = b.charCodeAt(a);
    if (55296 > f || 56319 < f || a + 1 === d) {
      return f;
    }
    a = b.charCodeAt(a + 1);
    return 56320 > a || 57343 < a ? f : 1024 * (f - 55296) + a + 9216;
  }
};
$jscomp.string.codePointAt$install = function() {
  String.prototype.codePointAt || (String.prototype.codePointAt = $jscomp.string.codePointAt);
};
$jscomp.string.includes = function(a, b) {
  b = void 0 === b ? 0 : b;
  $jscomp.string.noRegExp_(a, "includes");
  return -1 !== this.toString().indexOf(a, b);
};
$jscomp.string.includes$install = function() {
  String.prototype.includes || (String.prototype.includes = $jscomp.string.includes);
};
$jscomp.string.startsWith = function(a, b) {
  b = void 0 === b ? 0 : b;
  $jscomp.string.noRegExp_(a, "startsWith");
  var d = this.toString();
  a += "";
  for (var f = d.length, g = a.length, c = Math.max(0, Math.min(b | 0, d.length)), e = 0;e < g && c < f;) {
    if (d[c++] != a[e++]) {
      return !1;
    }
  }
  return e >= g;
};
$jscomp.string.startsWith$install = function() {
  String.prototype.startsWith || (String.prototype.startsWith = $jscomp.string.startsWith);
};
$jscomp.string.endsWith = function(a, b) {
  $jscomp.string.noRegExp_(a, "endsWith");
  var d = this.toString();
  a += "";
  void 0 === b && (b = d.length);
  for (var f = Math.max(0, Math.min(b | 0, d.length)), g = a.length;0 < g && 0 < f;) {
    if (d[--f] != a[--g]) {
      return !1;
    }
  }
  return 0 >= g;
};
$jscomp.string.endsWith$install = function() {
  String.prototype.endsWith || (String.prototype.endsWith = $jscomp.string.endsWith);
};
!function(a, b) {
  "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
    if (!a.document) {
      throw Error("jQuery requires a window with a document");
    }
    return b(a);
  } : b(a);
}("undefined" != typeof window ? window : this, function(a, b) {
  function d(a) {
    var b = !!a && "length" in a && a.length, c = n.type(a);
    return "function" === c || n.isWindow(a) ? !1 : "array" === c || 0 === b || "number" == typeof b && 0 < b && b - 1 in a;
  }
  function f(a, b, c) {
    if (n.isFunction(b)) {
      return n.grep(a, function(a, e) {
        return !!b.call(a, e, a) !== c;
      });
    }
    if (b.nodeType) {
      return n.grep(a, function(a) {
        return a === b !== c;
      });
    }
    if ("string" == typeof b) {
      if (ib.test(b)) {
        return n.filter(b, a, c);
      }
      b = n.filter(b, a);
    }
    return n.grep(a, function(a) {
      return -1 < wa.call(b, a) !== c;
    });
  }
  function g(a, b) {
    for (;(a = a[b]) && 1 !== a.nodeType;) {
    }
    return a;
  }
  function c(a) {
    var b = {};
    return n.each(a.match(X) || [], function(a, c) {
      b[c] = !0;
    }), b;
  }
  function e() {
    N.removeEventListener("DOMContentLoaded", e);
    a.removeEventListener("load", e);
    n.ready();
  }
  function h() {
    this.expando = n.expando + h.uid++;
  }
  function k(a, b, c) {
    var e;
    if (void 0 === c && 1 === a.nodeType) {
      if (e = "data-" + b.replace(Ma, "-$&").toLowerCase(), c = a.getAttribute(e), "string" == typeof c) {
        try {
          c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : jb.test(c) ? n.parseJSON(c) : c;
        } catch (d) {
        }
        U.set(a, b, c);
      } else {
        c = void 0;
      }
    }
    return c;
  }
  function l(a, b, c, e) {
    var d, f = 1, g = 20, h = e ? function() {
      return e.cur();
    } : function() {
      return n.css(a, b, "");
    }, k = h(), l = c && c[3] || (n.cssNumber[b] ? "" : "px"), m = (n.cssNumber[b] || "px" !== l && +k) && ka.exec(n.css(a, b));
    if (m && m[3] !== l) {
      l = l || m[3];
      c = c || [];
      m = +k || 1;
      do {
        f = f || ".5", m /= f, n.style(a, b, m + l);
      } while (f !== (f = h() / k) && 1 !== f && --g);
    }
    return c && (m = +m || +k || 0, d = c[1] ? m + (c[1] + 1) * c[2] : +c[2], e && (e.unit = l, e.start = m, e.end = d)), d;
  }
  function q(a, b) {
    var c = "undefined" != typeof a.getElementsByTagName ? a.getElementsByTagName(b || "*") : "undefined" != typeof a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
    return void 0 === b || b && n.nodeName(a, b) ? n.merge([a], c) : c;
  }
  function p(a, b) {
    for (var c = 0, e = a.length;e > c;c++) {
      L.set(a[c], "globalEval", !b || L.get(b[c], "globalEval"));
    }
  }
  function m(a, b, c, e, f) {
    for (var d, g, h, k, l = b.createDocumentFragment(), m = [], r = 0, A = a.length;A > r;r++) {
      if (d = a[r], d || 0 === d) {
        if ("object" === n.type(d)) {
          n.merge(m, d.nodeType ? [d] : d);
        } else {
          if (lb.test(d)) {
            g = g || l.appendChild(b.createElement("div"));
            h = (Na.exec(d) || ["", ""])[1].toLowerCase();
            h = Z[h] || Z._default;
            g.innerHTML = h[1] + n.htmlPrefilter(d) + h[2];
            for (h = h[0];h--;) {
              g = g.lastChild;
            }
            n.merge(m, g.childNodes);
            g = l.firstChild;
            g.textContent = "";
          } else {
            m.push(b.createTextNode(d));
          }
        }
      }
    }
    l.textContent = "";
    for (r = 0;d = m[r++];) {
      if (e && -1 < n.inArray(d, e)) {
        f && f.push(d);
      } else {
        if (k = n.contains(d.ownerDocument, d), g = q(l.appendChild(d), "script"), k && p(g), c) {
          for (h = 0;d = g[h++];) {
            Oa.test(d.type || "") && c.push(d);
          }
        }
      }
    }
    return l;
  }
  function w() {
    return !0;
  }
  function t() {
    return !1;
  }
  function z() {
    try {
      return N.activeElement;
    } catch (a) {
    }
  }
  function y(a, b, c, e, d, f) {
    var g, h;
    if ("object" == typeof b) {
      "string" != typeof c && (e = e || c, c = void 0);
      for (h in b) {
        y(a, h, c, e, b[h], f);
      }
      return a;
    }
    if (null == e && null == d ? (d = c, e = c = void 0) : null == d && ("string" == typeof c ? (d = e, e = void 0) : (d = e, e = c, c = void 0)), !1 === d) {
      d = t;
    } else {
      if (!d) {
        return a;
      }
    }
    return 1 === f && (g = d, d = function(a) {
      return n().off(a), g.apply(this, arguments);
    }, d.guid = g.guid || (g.guid = n.guid++)), a.each(function() {
      n.event.add(this, b, d, e, c);
    });
  }
  function r(a, b) {
    return n.nodeName(a, "table") && n.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a;
  }
  function A(a) {
    return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a;
  }
  function E(a) {
    var b = mb.exec(a.type);
    return b ? a.type = b[1] : a.removeAttribute("type"), a;
  }
  function G(a, b) {
    var c, e, d, f, g, h;
    if (1 === b.nodeType) {
      if (L.hasData(a) && (c = L.access(a), e = L.set(b, c), h = c.events)) {
        for (d in delete e.handle, e.events = {}, h) {
          for (c = 0, e = h[d].length;e > c;c++) {
            n.event.add(b, d, h[d][c]);
          }
        }
      }
      U.hasData(a) && (f = U.access(a), g = n.extend({}, f), U.set(b, g));
    }
  }
  function F(a, b, c, e) {
    b = xa.apply([], b);
    var d, f, g, h, k = 0, l = a.length, r = l - 1, p = b[0], w = n.isFunction(p);
    if (w || 1 < l && "string" == typeof p && !P.checkClone && nb.test(p)) {
      return a.each(function(d) {
        var f = a.eq(d);
        w && (b[0] = p.call(this, d, f.html()));
        F(f, b, c, e);
      });
    }
    if (l && (d = m(b, a[0].ownerDocument, !1, a, e), f = d.firstChild, 1 === d.childNodes.length && (d = f), f || e)) {
      f = n.map(q(d, "script"), A);
      for (g = f.length;l > k;k++) {
        h = d, k !== r && (h = n.clone(h, !0, !0), g && n.merge(f, q(h, "script"))), c.call(a[k], h, k);
      }
      if (g) {
        for (d = f[f.length - 1].ownerDocument, n.map(f, E), k = 0;g > k;k++) {
          h = f[k], Oa.test(h.type || "") && !L.access(h, "globalEval") && n.contains(d, h) && (h.src ? n._evalUrl && n._evalUrl(h.src) : n.globalEval(h.textContent.replace(ob, "")));
        }
      }
    }
    return a;
  }
  function x(a, b, c) {
    for (var e = b ? n.filter(b, a) : a, d = 0;null != (b = e[d]);d++) {
      c || 1 !== b.nodeType || n.cleanData(q(b)), b.parentNode && (c && n.contains(b.ownerDocument, b) && p(q(b, "script")), b.parentNode.removeChild(b));
    }
    return a;
  }
  function H(a, b) {
    var c = n(b.createElement(a)).appendTo(b.body), e = n.css(c[0], "display");
    return c.detach(), e;
  }
  function u(a) {
    var b = N, c = Pa[a];
    return c || (c = H(a, b), "none" !== c && c || (ya = (ya || n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = ya[0].contentDocument, b.write(), b.close(), c = H(a, b), ya.detach()), Pa[a] = c), c;
  }
  function D(a, b, c) {
    var e, d, f, g, h = a.style;
    return c = c || za(a), g = c ? c.getPropertyValue(b) || c[b] : void 0, "" !== g && void 0 !== g || n.contains(a.ownerDocument, a) || (g = n.style(a, b)), c && !P.pixelMarginRight() && Ea.test(g) && Qa.test(b) && (e = h.width, d = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = e, h.minWidth = d, h.maxWidth = f), void 0 !== g ? g + "" : g;
  }
  function C(a, b) {
    return {get:function() {
      return a() ? void delete this.get : (this.get = b).apply(this, arguments);
    }};
  }
  function B(a) {
    if (a in Ra) {
      return a;
    }
    for (var b = a[0].toUpperCase() + a.slice(1), c = Sa.length;c--;) {
      if (a = Sa[c] + b, a in Ra) {
        return a;
      }
    }
  }
  function J(a, b, c) {
    return (a = ka.exec(b)) ? Math.max(0, a[2] - (c || 0)) + (a[3] || "px") : b;
  }
  function I(a, b, c, e, d) {
    b = c === (e ? "border" : "content") ? 4 : "width" === b ? 1 : 0;
    for (var f = 0;4 > b;b += 2) {
      "margin" === c && (f += n.css(a, c + ga[b], !0, d)), e ? ("content" === c && (f -= n.css(a, "padding" + ga[b], !0, d)), "margin" !== c && (f -= n.css(a, "border" + ga[b] + "Width", !0, d))) : (f += n.css(a, "padding" + ga[b], !0, d), "padding" !== c && (f += n.css(a, "border" + ga[b] + "Width", !0, d)));
    }
    return f;
  }
  function M(b, c, e) {
    var d = !0, f = "width" === c ? b.offsetWidth : b.offsetHeight, g = za(b), h = "border-box" === n.css(b, "boxSizing", !1, g);
    if (N.msFullscreenElement && a.top !== a && b.getClientRects().length && (f = Math.round(100 * b.getBoundingClientRect()[c])), 0 >= f || null == f) {
      if (f = D(b, c, g), (0 > f || null == f) && (f = b.style[c]), Ea.test(f)) {
        return f;
      }
      d = h && (P.boxSizingReliable() || f === b.style[c]);
      f = parseFloat(f) || 0;
    }
    return f + I(b, c, e || (h ? "border" : "content"), d, g) + "px";
  }
  function O(a, b) {
    for (var c, e, d, f = [], g = 0, h = a.length;h > g;g++) {
      e = a[g], e.style && (f[g] = L.get(e, "olddisplay"), c = e.style.display, b ? (f[g] || "none" !== c || (e.style.display = ""), "" === e.style.display && ea(e) && (f[g] = L.access(e, "olddisplay", u(e.nodeName)))) : (d = ea(e), "none" === c && d || L.set(e, "olddisplay", d ? c : n.css(e, "display"))));
    }
    for (g = 0;h > g;g++) {
      e = a[g], e.style && (b && "none" !== e.style.display && "" !== e.style.display || (e.style.display = b ? f[g] || "" : "none"));
    }
    return a;
  }
  function V(a, b, c, e, d) {
    return new V.prototype.init(a, b, c, e, d);
  }
  function Q() {
    return a.setTimeout(function() {
      la = void 0;
    }), la = n.now();
  }
  function R(a, b) {
    var c, e = 0, d = {height:a};
    for (b = b ? 1 : 0;4 > e;e += 2 - b) {
      c = ga[e], d["margin" + c] = d["padding" + c] = a;
    }
    return b && (d.opacity = d.width = a), d;
  }
  function T(a, b, c) {
    for (var e, d = (S.tweeners[b] || []).concat(S.tweeners["*"]), f = 0, g = d.length;g > f;f++) {
      if (e = d[f].call(c, b, a)) {
        return e;
      }
    }
  }
  function Y(a, b) {
    var c, e, d, f, g;
    for (c in a) {
      if (e = n.camelCase(c), d = b[e], f = a[c], n.isArray(f) && (d = f[1], f = a[c] = f[0]), c !== e && (a[e] = f, delete a[c]), g = n.cssHooks[e], g && "expand" in g) {
        for (c in f = g.expand(f), delete a[e], f) {
          c in a || (a[c] = f[c], b[c] = d);
        }
      } else {
        b[e] = d;
      }
    }
  }
  function S(a, b, c) {
    var e, d = 0, f = S.prefilters.length, g = n.Deferred().always(function() {
      delete h.elem;
    }), h = function() {
      if (e) {
        return !1;
      }
      for (var b = la || Q(), b = Math.max(0, k.startTime + k.duration - b), c = 1 - (b / k.duration || 0), d = 0, f = k.tweens.length;f > d;d++) {
        k.tweens[d].run(c);
      }
      return g.notifyWith(a, [k, c, b]), 1 > c && f ? b : (g.resolveWith(a, [k]), !1);
    }, k = g.promise({elem:a, props:n.extend({}, b), opts:n.extend(!0, {specialEasing:{}, easing:n.easing._default}, c), originalProperties:b, originalOptions:c, startTime:la || Q(), duration:c.duration, tweens:[], createTween:function(b, c) {
      var e = n.Tween(a, k.opts, b, c, k.opts.specialEasing[b] || k.opts.easing);
      return k.tweens.push(e), e;
    }, stop:function(b) {
      var c = 0, d = b ? k.tweens.length : 0;
      if (e) {
        return this;
      }
      for (e = !0;d > c;c++) {
        k.tweens[c].run(1);
      }
      return b ? (g.notifyWith(a, [k, 1, 0]), g.resolveWith(a, [k, b])) : g.rejectWith(a, [k, b]), this;
    }});
    c = k.props;
    for (Y(c, k.opts.specialEasing);f > d;d++) {
      if (b = S.prefilters[d].call(k, a, c, k.opts)) {
        return n.isFunction(b.stop) && (n._queueHooks(k.elem, k.opts.queue).stop = n.proxy(b.stop, b)), b;
      }
    }
    return n.map(c, T, k), n.isFunction(k.opts.start) && k.opts.start.call(a, k), n.fx.timer(n.extend(h, {elem:a, anim:k, queue:k.opts.queue})), k.progress(k.opts.progress).done(k.opts.done, k.opts.complete).fail(k.opts.fail).always(k.opts.always);
  }
  function W(a) {
    return a.getAttribute && a.getAttribute("class") || "";
  }
  function ta(a) {
    return function(b, c) {
      "string" != typeof b && (c = b, b = "*");
      var e, d = 0, f = b.toLowerCase().match(X) || [];
      if (n.isFunction(c)) {
        for (;e = f[d++];) {
          "+" === e[0] ? (e = e.slice(1) || "*", (a[e] = a[e] || []).unshift(c)) : (a[e] = a[e] || []).push(c);
        }
      }
    };
  }
  function ca(a, b, c, e) {
    function d(h) {
      var k;
      return f[h] = !0, n.each(a[h] || [], function(a, h) {
        var K = h(b, c, e);
        return "string" != typeof K || g || f[K] ? g ? !(k = K) : void 0 : (b.dataTypes.unshift(K), d(K), !1);
      }), k;
    }
    var f = {}, g = a === Fa;
    return d(b.dataTypes[0]) || !f["*"] && d("*");
  }
  function ma(a, b) {
    var c, e, d = n.ajaxSettings.flatOptions || {};
    for (c in b) {
      void 0 !== b[c] && ((d[c] ? a : e || (e = {}))[c] = b[c]);
    }
    return e && n.extend(!0, a, e), a;
  }
  function ua(a, b, c, e) {
    var d;
    if (n.isArray(b)) {
      n.each(b, function(b, d) {
        c || pb.test(a) ? e(a, d) : ua(a + "[" + ("object" == typeof d && null != d ? b : "") + "]", d, c, e);
      });
    } else {
      if (c || "object" !== n.type(b)) {
        e(a, b);
      } else {
        for (d in b) {
          ua(a + "[" + d + "]", b[d], c, e);
        }
      }
    }
  }
  function Aa(a) {
    return n.isWindow(a) ? a : 9 === a.nodeType && a.defaultView;
  }
  var aa = [], N = a.document, fa = aa.slice, xa = aa.concat, va = aa.push, wa = aa.indexOf, Ba = {}, qb = Ba.toString, qa = Ba.hasOwnProperty, P = {}, n = function(a, b) {
    return new n.fn.init(a, b);
  }, rb = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, sb = /^-ms-/, tb = /-([\da-z])/gi, ub = function(a, b) {
    return b.toUpperCase();
  };
  $jscomp.initSymbol();
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  n.fn = n.prototype = {jquery:"2.2.2", constructor:n, selector:"", length:0, toArray:function() {
    return fa.call(this);
  }, get:function(a) {
    return null != a ? 0 > a ? this[a + this.length] : this[a] : fa.call(this);
  }, pushStack:function(a) {
    a = n.merge(this.constructor(), a);
    return a.prevObject = this, a.context = this.context, a;
  }, each:function(a) {
    return n.each(this, a);
  }, map:function(a) {
    return this.pushStack(n.map(this, function(b, c) {
      return a.call(b, c, b);
    }));
  }, slice:function() {
    return this.pushStack(fa.apply(this, arguments));
  }, first:function() {
    return this.eq(0);
  }, last:function() {
    return this.eq(-1);
  }, eq:function(a) {
    var b = this.length;
    a = +a + (0 > a ? b : 0);
    return this.pushStack(0 <= a && b > a ? [this[a]] : []);
  }, end:function() {
    return this.prevObject || this.constructor();
  }, push:va, sort:aa.sort, splice:aa.splice};
  n.extend = n.fn.extend = function() {
    var a, b, c, e, d, f, g = arguments[0] || {}, h = 1, k = arguments.length, l = !1;
    "boolean" == typeof g && (l = g, g = arguments[h] || {}, h++);
    "object" == typeof g || n.isFunction(g) || (g = {});
    for (h === k && (g = this, h--);k > h;h++) {
      if (null != (a = arguments[h])) {
        for (b in a) {
          c = g[b], e = a[b], g !== e && (l && e && (n.isPlainObject(e) || (d = n.isArray(e))) ? (d ? (d = !1, f = c && n.isArray(c) ? c : []) : f = c && n.isPlainObject(c) ? c : {}, g[b] = n.extend(l, f, e)) : void 0 !== e && (g[b] = e));
        }
      }
    }
    return g;
  };
  n.extend({expando:"jQuery" + ("2.2.2" + Math.random()).replace(/\D/g, ""), isReady:!0, error:function(a) {
    throw Error(a);
  }, noop:function() {
  }, isFunction:function(a) {
    return "function" === n.type(a);
  }, isArray:Array.isArray, isWindow:function(a) {
    return null != a && a === a.window;
  }, isNumeric:function(a) {
    var b = a && a.toString();
    return !n.isArray(a) && 0 <= b - parseFloat(b) + 1;
  }, isPlainObject:function(a) {
    var b;
    if ("object" !== n.type(a) || a.nodeType || n.isWindow(a) || a.constructor && !qa.call(a, "constructor") && !qa.call(a.constructor.prototype || {}, "isPrototypeOf")) {
      return !1;
    }
    for (b in a) {
    }
    return void 0 === b || qa.call(a, b);
  }, isEmptyObject:function(a) {
    for (var b in a) {
      return !1;
    }
    return !0;
  }, type:function(a) {
    return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? Ba[qb.call(a)] || "object" : typeof a;
  }, globalEval:function(a) {
    var b, c = eval;
    (a = n.trim(a)) && (1 === a.indexOf("use strict") ? (b = N.createElement("script"), b.text = a, N.head.appendChild(b).parentNode.removeChild(b)) : c(a));
  }, camelCase:function(a) {
    return a.replace(sb, "ms-").replace(tb, ub);
  }, nodeName:function(a, b) {
    return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase();
  }, each:function(a, b) {
    var c, e = 0;
    if (d(a)) {
      for (c = a.length;c > e && !1 !== b.call(a[e], e, a[e]);e++) {
      }
    } else {
      for (e in a) {
        if (!1 === b.call(a[e], e, a[e])) {
          break;
        }
      }
    }
    return a;
  }, trim:function(a) {
    return null == a ? "" : (a + "").replace(rb, "");
  }, makeArray:function(a, b) {
    var c = b || [];
    return null != a && (d(Object(a)) ? n.merge(c, "string" == typeof a ? [a] : a) : va.call(c, a)), c;
  }, inArray:function(a, b, c) {
    return null == b ? -1 : wa.call(b, a, c);
  }, merge:function(a, b) {
    for (var c = +b.length, e = 0, d = a.length;c > e;e++) {
      a[d++] = b[e];
    }
    return a.length = d, a;
  }, grep:function(a, b, c) {
    for (var e = [], d = 0, f = a.length, g = !c;f > d;d++) {
      c = !b(a[d], d), c !== g && e.push(a[d]);
    }
    return e;
  }, map:function(a, b, c) {
    var e, f, g = 0, h = [];
    if (d(a)) {
      for (e = a.length;e > g;g++) {
        f = b(a[g], g, c), null != f && h.push(f);
      }
    } else {
      for (g in a) {
        f = b(a[g], g, c), null != f && h.push(f);
      }
    }
    return xa.apply([], h);
  }, guid:1, proxy:function(a, b) {
    var c, e, d;
    return "string" == typeof b && (c = a[b], b = a, a = c), n.isFunction(a) ? (e = fa.call(arguments, 2), d = function() {
      return a.apply(b || this, e.concat(fa.call(arguments)));
    }, d.guid = a.guid = a.guid || n.guid++, d) : void 0;
  }, now:Date.now, support:P});
  "function" == typeof Symbol && (n.fn[Symbol.iterator] = aa[Symbol.iterator]);
  n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(a, b) {
    Ba["[object " + b + "]"] = b.toLowerCase();
  });
  var na = function(a) {
    function b(a, c, e, d) {
      var f, g, h, k, l, K = c && c.ownerDocument, q = c ? c.nodeType : 9;
      if (e = e || [], "string" != typeof a || !a || 1 !== q && 9 !== q && 11 !== q) {
        return e;
      }
      if (!d && ((c ? c.ownerDocument || c : W) !== I && H(c), c = c || I, T)) {
        if (11 !== q && (k = ra.exec(a))) {
          if (f = k[1]) {
            if (9 === q) {
              if (!(g = c.getElementById(f))) {
                return e;
              }
              if (g.id === f) {
                return e.push(g), e;
              }
            } else {
              if (K && (g = K.getElementById(f)) && V(c, g) && g.id === f) {
                return e.push(g), e;
              }
            }
          } else {
            if (k[2]) {
              return U.apply(e, c.getElementsByTagName(a)), e;
            }
            if ((f = k[3]) && D.getElementsByClassName && c.getElementsByClassName) {
              return U.apply(e, c.getElementsByClassName(f)), e;
            }
          }
        }
        if (!(!D.qsa || ma[a + " "] || O && O.test(a))) {
          if (1 !== q) {
            K = c, l = a;
          } else {
            if ("object" !== c.nodeName.toLowerCase()) {
              (h = c.getAttribute("id")) ? h = h.replace(sa, "\\$&") : c.setAttribute("id", h = Q);
              k = E(a);
              f = k.length;
              for (g = ka.test(h) ? "#" + h : "[id='" + h + "']";f--;) {
                k[f] = g + " " + r(k[f]);
              }
              l = k.join(",");
              K = ja.test(a) && m(c.parentNode) || c;
            }
          }
          if (l) {
            try {
              return U.apply(e, K.querySelectorAll(l)), e;
            } catch (p) {
            } finally {
              h === Q && c.removeAttribute("id");
            }
          }
        }
      }
      return J(a.replace(ba, "$1"), c, e, d);
    }
    function c() {
      function a(c, e) {
        return b.push(c + " ") > C.cacheLength && delete a[b.shift()], a[c + " "] = e;
      }
      var b = [];
      return a;
    }
    function e(a) {
      return a[Q] = !0, a;
    }
    function d(a) {
      var b = I.createElement("div");
      try {
        return !!a(b);
      } catch (c) {
        return !1;
      } finally {
        b.parentNode && b.parentNode.removeChild(b);
      }
    }
    function f(a, b) {
      for (var c = a.split("|"), e = c.length;e--;) {
        C.attrHandle[c[e]] = b;
      }
    }
    function g(a, b) {
      var c = b && a, e = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || -2147483648) - (~a.sourceIndex || -2147483648);
      if (e) {
        return e;
      }
      if (c) {
        for (;c = c.nextSibling;) {
          if (c === b) {
            return -1;
          }
        }
      }
      return a ? 1 : -1;
    }
    function h(a) {
      return function(b) {
        return "input" === b.nodeName.toLowerCase() && b.type === a;
      };
    }
    function k(a) {
      return function(b) {
        var c = b.nodeName.toLowerCase();
        return ("input" === c || "button" === c) && b.type === a;
      };
    }
    function l(a) {
      return e(function(b) {
        return b = +b, e(function(c, e) {
          for (var d, f = a([], c.length, b), g = f.length;g--;) {
            c[d = f[g]] && (c[d] = !(e[d] = c[d]));
          }
        });
      });
    }
    function m(a) {
      return a && "undefined" != typeof a.getElementsByTagName && a;
    }
    function q() {
    }
    function r(a) {
      for (var b = 0, c = a.length, e = "";c > b;b++) {
        e += a[b].value;
      }
      return e;
    }
    function p(a, b, c) {
      var e = b.dir, d = c && "parentNode" === e, f = N++;
      return b.first ? function(b, c, f) {
        for (;b = b[e];) {
          if (1 === b.nodeType || d) {
            return a(b, c, f);
          }
        }
      } : function(b, c, g) {
        var h, k, l, m = [ca, f];
        if (g) {
          for (;b = b[e];) {
            if ((1 === b.nodeType || d) && a(b, c, g)) {
              return !0;
            }
          }
        } else {
          for (;b = b[e];) {
            if (1 === b.nodeType || d) {
              if (l = b[Q] || (b[Q] = {}), k = l[b.uniqueID] || (l[b.uniqueID] = {}), (h = k[e]) && h[0] === ca && h[1] === f) {
                return m[2] = h[2];
              }
              if (k[e] = m, m[2] = a(b, c, g)) {
                return !0;
              }
            }
          }
        }
      };
    }
    function A(a) {
      return 1 < a.length ? function(b, c, e) {
        for (var d = a.length;d--;) {
          if (!a[d](b, c, e)) {
            return !1;
          }
        }
        return !0;
      } : a[0];
    }
    function w(a, b, c, e, d) {
      for (var f, g = [], h = 0, k = a.length, l = null != b;k > h;h++) {
        (f = a[h]) && (c && !c(f, e, d) || (g.push(f), l && b.push(h)));
      }
      return g;
    }
    function t(a, c, d, f, g, h) {
      return f && !f[Q] && (f = t(f)), g && !g[Q] && (g = t(g, h)), e(function(e, h, k, l) {
        var m, K, q = [], r = [], p = h.length, A;
        if (!(A = e)) {
          A = c || "*";
          for (var t = k.nodeType ? [k] : k, z = [], y = 0, n = t.length;n > y;y++) {
            b(A, t[y], z);
          }
          A = z;
        }
        A = !a || !e && c ? A : w(A, q, a, k, l);
        t = d ? g || (e ? a : p || f) ? [] : h : A;
        if (d && d(A, t, k, l), f) {
          for (m = w(t, r), f(m, [], k, l), k = m.length;k--;) {
            (K = m[k]) && (t[r[k]] = !(A[r[k]] = K));
          }
        }
        if (e) {
          if (g || a) {
            if (g) {
              m = [];
              for (k = t.length;k--;) {
                (K = t[k]) && m.push(A[k] = K);
              }
              g(null, t = [], m, l);
            }
            for (k = t.length;k--;) {
              (K = t[k]) && -1 < (m = g ? X(e, K) : q[k]) && (e[m] = !(h[m] = K));
            }
          }
        } else {
          t = w(t === h ? t.splice(p, t.length) : t), g ? g(null, h, t, l) : U.apply(h, t);
        }
      });
    }
    function z(a) {
      var b, c, e, d = a.length, f = C.relative[a[0].type];
      c = f || C.relative[" "];
      for (var g = f ? 1 : 0, h = p(function(a) {
        return a === b;
      }, c, !0), k = p(function(a) {
        return -1 < X(b, a);
      }, c, !0), l = [function(a, c, e) {
        a = !f && (e || c !== u) || ((b = c).nodeType ? h(a, c, e) : k(a, c, e));
        return b = null, a;
      }];d > g;g++) {
        if (c = C.relative[a[g].type]) {
          l = [p(A(l), c)];
        } else {
          if (c = C.filter[a[g].type].apply(null, a[g].matches), c[Q]) {
            for (e = ++g;d > e && !C.relative[a[e].type];e++) {
            }
            return t(1 < g && A(l), 1 < g && r(a.slice(0, g - 1).concat({value:" " === a[g - 2].type ? "*" : ""})).replace(ba, "$1"), c, e > g && z(a.slice(g, e)), d > e && z(a = a.slice(e)), d > e && r(a));
          }
          l.push(c);
        }
      }
      return A(l);
    }
    function y(a, c) {
      var d = 0 < c.length, f = 0 < a.length, g = function(e, g, h, k, l) {
        var m, K, q, r = 0, p = "0", A = e && [], t = [], z = u, y = e || f && C.find.TAG("*", l), n = ca += null == z ? 1 : Math.random() || .1, D = y.length;
        for (l && (u = g === I || g || l);p !== D && null != (m = y[p]);p++) {
          if (f && m) {
            K = 0;
            for (g || m.ownerDocument === I || (H(m), h = !T);q = a[K++];) {
              if (q(m, g || I, h)) {
                k.push(m);
                break;
              }
            }
            l && (ca = n);
          }
          d && ((m = !q && m) && r--, e && A.push(m));
        }
        if (r += p, d && p !== r) {
          for (K = 0;q = c[K++];) {
            q(A, t, g, h);
          }
          if (e) {
            if (0 < r) {
              for (;p--;) {
                A[p] || t[p] || (t[p] = xa.call(k));
              }
            }
            t = w(t);
          }
          U.apply(k, t);
          l && !e && 0 < t.length && 1 < r + c.length && b.uniqueSort(k);
        }
        return l && (ca = n, u = z), A;
      };
      return d ? e(g) : g;
    }
    var n, D, C, G, B, E, x, J, u, M, R, H, I, F, T, O, Y, S, V, Q = "sizzle" + 1 * new Date, W = a.document, ca = 0, N = 0, ta = c(), L = c(), ma = c(), P = function(a, b) {
      return a === b && (R = !0), 0;
    }, fa = {}.hasOwnProperty, aa = [], xa = aa.pop, ua = aa.push, U = aa.push, Z = aa.slice, X = function(a, b) {
      for (var c = 0, e = a.length;e > c;c++) {
        if (a[c] === b) {
          return c;
        }
      }
      return -1;
    }, Aa = RegExp("[\\x20\\t\\r\\n\\f]+", "g"), ba = RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$", "g"), ga = /^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/, la = /^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/, na = RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]", "g"), oa = /:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/, 
    ka = /^(?:\\.|[\w-]|[^\x00-\xa0])+$/, ea = {ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/, CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/, TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/, ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/, PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/, 
    CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i, bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i, needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i}, va = /^(?:input|select|textarea|button)$/i, qa = 
    /^h\d$/i, da = /^[^{]+\{\s*\[native \w/, ra = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ja = /[+~]/, sa = /'|\\/g, ha = RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)", "ig"), ia = function(a, b, c) {
      a = "0x" + b - 65536;
      return a !== a || c ? b : 0 > a ? String.fromCharCode(a + 65536) : String.fromCharCode(a >> 10 | 55296, 1023 & a | 56320);
    }, pa = function() {
      H();
    };
    try {
      U.apply(aa = Z.call(W.childNodes), W.childNodes), aa[W.childNodes.length].nodeType;
    } catch (Ub) {
      U = {apply:aa.length ? function(a, b) {
        ua.apply(a, Z.call(b));
      } : function(a, b) {
        for (var c = a.length, e = 0;a[c++] = b[e++];) {
        }
        a.length = c - 1;
      }};
    }
    D = b.support = {};
    B = b.isXML = function(a) {
      return (a = a && (a.ownerDocument || a).documentElement) ? "HTML" !== a.nodeName : !1;
    };
    H = b.setDocument = function(a) {
      var b, c;
      a = a ? a.ownerDocument || a : W;
      return a !== I && 9 === a.nodeType && a.documentElement ? (I = a, F = I.documentElement, T = !B(I), (c = I.defaultView) && c.top !== c && (c.addEventListener ? c.addEventListener("unload", pa, !1) : c.attachEvent && c.attachEvent("onunload", pa)), D.attributes = d(function(a) {
        return a.className = "i", !a.getAttribute("className");
      }), D.getElementsByTagName = d(function(a) {
        return a.appendChild(I.createComment("")), !a.getElementsByTagName("*").length;
      }), D.getElementsByClassName = da.test(I.getElementsByClassName), D.getById = d(function(a) {
        return F.appendChild(a).id = Q, !I.getElementsByName || !I.getElementsByName(Q).length;
      }), D.getById ? (C.find.ID = function(a, b) {
        if ("undefined" != typeof b.getElementById && T) {
          var c = b.getElementById(a);
          return c ? [c] : [];
        }
      }, C.filter.ID = function(a) {
        var b = a.replace(ha, ia);
        return function(a) {
          return a.getAttribute("id") === b;
        };
      }) : (delete C.find.ID, C.filter.ID = function(a) {
        var b = a.replace(ha, ia);
        return function(a) {
          return (a = "undefined" != typeof a.getAttributeNode && a.getAttributeNode("id")) && a.value === b;
        };
      }), C.find.TAG = D.getElementsByTagName ? function(a, b) {
        return "undefined" != typeof b.getElementsByTagName ? b.getElementsByTagName(a) : D.qsa ? b.querySelectorAll(a) : void 0;
      } : function(a, b) {
        var c, e = [], d = 0, f = b.getElementsByTagName(a);
        if ("*" === a) {
          for (;c = f[d++];) {
            1 === c.nodeType && e.push(c);
          }
          return e;
        }
        return f;
      }, C.find.CLASS = D.getElementsByClassName && function(a, b) {
        return "undefined" != typeof b.getElementsByClassName && T ? b.getElementsByClassName(a) : void 0;
      }, Y = [], O = [], (D.qsa = da.test(I.querySelectorAll)) && (d(function(a) {
        F.appendChild(a).innerHTML = "<a id='" + Q + "'></a><select id='" + Q + "-\r\\' msallowcapture=''><option selected=''></option></select>";
        a.querySelectorAll("[msallowcapture^='']").length && O.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
        a.querySelectorAll("[selected]").length || O.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
        a.querySelectorAll("[id~=" + Q + "-]").length || O.push("~=");
        a.querySelectorAll(":checked").length || O.push(":checked");
        a.querySelectorAll("a#" + Q + "+*").length || O.push(".#.+[+~]");
      }), d(function(a) {
        var b = I.createElement("input");
        b.setAttribute("type", "hidden");
        a.appendChild(b).setAttribute("name", "D");
        a.querySelectorAll("[name=d]").length && O.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");
        a.querySelectorAll(":enabled").length || O.push(":enabled", ":disabled");
        a.querySelectorAll("*,:x");
        O.push(",.*:");
      })), (D.matchesSelector = da.test(S = F.matches || F.webkitMatchesSelector || F.mozMatchesSelector || F.oMatchesSelector || F.msMatchesSelector)) && d(function(a) {
        D.disconnectedMatch = S.call(a, "div");
        S.call(a, "[s!='']:x");
        Y.push("!=", ":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)");
      }), O = O.length && new RegExp(O.join("|")), Y = Y.length && new RegExp(Y.join("|")), b = da.test(F.compareDocumentPosition), V = b || da.test(F.contains) ? function(a, b) {
        var c = 9 === a.nodeType ? a.documentElement : a, e = b && b.parentNode;
        return a === e || !(!e || 1 !== e.nodeType || !(c.contains ? c.contains(e) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(e)));
      } : function(a, b) {
        if (b) {
          for (;b = b.parentNode;) {
            if (b === a) {
              return !0;
            }
          }
        }
        return !1;
      }, P = b ? function(a, b) {
        if (a === b) {
          return R = !0, 0;
        }
        var c = !a.compareDocumentPosition - !b.compareDocumentPosition;
        return c ? c : (c = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & c || !D.sortDetached && b.compareDocumentPosition(a) === c ? a === I || a.ownerDocument === W && V(W, a) ? -1 : b === I || b.ownerDocument === W && V(W, b) ? 1 : M ? X(M, a) - X(M, b) : 0 : 4 & c ? -1 : 1);
      } : function(a, b) {
        if (a === b) {
          return R = !0, 0;
        }
        var c, e = 0;
        c = a.parentNode;
        var d = b.parentNode, f = [a], h = [b];
        if (!c || !d) {
          return a === I ? -1 : b === I ? 1 : c ? -1 : d ? 1 : M ? X(M, a) - X(M, b) : 0;
        }
        if (c === d) {
          return g(a, b);
        }
        for (c = a;c = c.parentNode;) {
          f.unshift(c);
        }
        for (c = b;c = c.parentNode;) {
          h.unshift(c);
        }
        for (;f[e] === h[e];) {
          e++;
        }
        return e ? g(f[e], h[e]) : f[e] === W ? -1 : h[e] === W ? 1 : 0;
      }, I) : I;
    };
    b.matches = function(a, c) {
      return b(a, null, null, c);
    };
    b.matchesSelector = function(a, c) {
      if ((a.ownerDocument || a) !== I && H(a), c = c.replace(na, "='$1']"), !(!D.matchesSelector || !T || ma[c + " "] || Y && Y.test(c) || O && O.test(c))) {
        try {
          var e = S.call(a, c);
          if (e || D.disconnectedMatch || a.document && 11 !== a.document.nodeType) {
            return e;
          }
        } catch (d) {
        }
      }
      return 0 < b(c, I, null, [a]).length;
    };
    b.contains = function(a, b) {
      return (a.ownerDocument || a) !== I && H(a), V(a, b);
    };
    b.attr = function(a, b) {
      (a.ownerDocument || a) !== I && H(a);
      var c = C.attrHandle[b.toLowerCase()], c = c && fa.call(C.attrHandle, b.toLowerCase()) ? c(a, b, !T) : void 0;
      return void 0 !== c ? c : D.attributes || !T ? a.getAttribute(b) : (c = a.getAttributeNode(b)) && c.specified ? c.value : null;
    };
    b.error = function(a) {
      throw Error("Syntax error, unrecognized expression: " + a);
    };
    b.uniqueSort = function(a) {
      var b, c = [], e = 0, d = 0;
      if (R = !D.detectDuplicates, M = !D.sortStable && a.slice(0), a.sort(P), R) {
        for (;b = a[d++];) {
          b === a[d] && (e = c.push(d));
        }
        for (;e--;) {
          a.splice(c[e], 1);
        }
      }
      return M = null, a;
    };
    G = b.getText = function(a) {
      var b, c = "", e = 0;
      if (b = a.nodeType) {
        if (1 === b || 9 === b || 11 === b) {
          if ("string" == typeof a.textContent) {
            return a.textContent;
          }
          for (a = a.firstChild;a;a = a.nextSibling) {
            c += G(a);
          }
        } else {
          if (3 === b || 4 === b) {
            return a.nodeValue;
          }
        }
      } else {
        for (;b = a[e++];) {
          c += G(b);
        }
      }
      return c;
    };
    C = b.selectors = {cacheLength:50, createPseudo:e, match:ea, attrHandle:{}, find:{}, relative:{">":{dir:"parentNode", first:!0}, " ":{dir:"parentNode"}, "+":{dir:"previousSibling", first:!0}, "~":{dir:"previousSibling"}}, preFilter:{ATTR:function(a) {
      return a[1] = a[1].replace(ha, ia), a[3] = (a[3] || a[4] || a[5] || "").replace(ha, ia), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4);
    }, CHILD:function(a) {
      return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]), a;
    }, PSEUDO:function(a) {
      var b, c = !a[6] && a[2];
      return ea.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && oa.test(c) && (b = E(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3));
    }}, filter:{TAG:function(a) {
      var b = a.replace(ha, ia).toLowerCase();
      return "*" === a ? function() {
        return !0;
      } : function(a) {
        return a.nodeName && a.nodeName.toLowerCase() === b;
      };
    }, CLASS:function(a) {
      var b = ta[a + " "];
      return b || (b = new RegExp("(^|[\\x20\\t\\r\\n\\f])" + a + "([\\x20\\t\\r\\n\\f]|$)"), ta(a, function(a) {
        return b.test("string" == typeof a.className && a.className || "undefined" != typeof a.getAttribute && a.getAttribute("class") || "");
      }));
    }, ATTR:function(a, c, e) {
      return function(d) {
        d = b.attr(d, a);
        return null == d ? "!=" === c : c ? (d += "", "=" === c ? d === e : "!=" === c ? d !== e : "^=" === c ? e && 0 === d.indexOf(e) : "*=" === c ? e && -1 < d.indexOf(e) : "$=" === c ? e && d.slice(-e.length) === e : "~=" === c ? -1 < (" " + d.replace(Aa, " ") + " ").indexOf(e) : "|=" === c ? d === e || d.slice(0, e.length + 1) === e + "-" : !1) : !0;
      };
    }, CHILD:function(a, b, c, e, d) {
      var f = "nth" !== a.slice(0, 3), g = "last" !== a.slice(-4), h = "of-type" === b;
      return 1 === e && 0 === d ? function(a) {
        return !!a.parentNode;
      } : function(b, c, k) {
        var l, m, K, q, r, p;
        c = f !== g ? "nextSibling" : "previousSibling";
        var A = b.parentNode, t = h && b.nodeName.toLowerCase();
        k = !k && !h;
        var w = !1;
        if (A) {
          if (f) {
            for (;c;) {
              for (q = b;q = q[c];) {
                if (h ? q.nodeName.toLowerCase() === t : 1 === q.nodeType) {
                  return !1;
                }
              }
              p = c = "only" === a && !p && "nextSibling";
            }
            return !0;
          }
          if (p = [g ? A.firstChild : A.lastChild], g && k) {
            for (q = A, K = q[Q] || (q[Q] = {}), m = K[q.uniqueID] || (K[q.uniqueID] = {}), l = m[a] || [], w = (r = l[0] === ca && l[1]) && l[2], q = r && A.childNodes[r];q = ++r && q && q[c] || (w = r = 0) || p.pop();) {
              if (1 === q.nodeType && ++w && q === b) {
                m[a] = [ca, r, w];
                break;
              }
            }
          } else {
            if (k && (q = b, K = q[Q] || (q[Q] = {}), m = K[q.uniqueID] || (K[q.uniqueID] = {}), l = m[a] || [], r = l[0] === ca && l[1], w = r), !1 === w) {
              for (;(q = ++r && q && q[c] || (w = r = 0) || p.pop()) && ((h ? q.nodeName.toLowerCase() !== t : 1 !== q.nodeType) || !++w || (k && (K = q[Q] || (q[Q] = {}), m = K[q.uniqueID] || (K[q.uniqueID] = {}), m[a] = [ca, w]), q !== b));) {
              }
            }
          }
          return w -= d, w === e || 0 === w % e && 0 <= w / e;
        }
      };
    }, PSEUDO:function(a, c) {
      var d, f = C.pseudos[a] || C.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
      return f[Q] ? f(c) : 1 < f.length ? (d = [a, a, "", c], C.setFilters.hasOwnProperty(a.toLowerCase()) ? e(function(a, b) {
        for (var e, d = f(a, c), g = d.length;g--;) {
          e = X(a, d[g]), a[e] = !(b[e] = d[g]);
        }
      }) : function(a) {
        return f(a, 0, d);
      }) : f;
    }}, pseudos:{not:e(function(a) {
      var b = [], c = [], d = x(a.replace(ba, "$1"));
      return d[Q] ? e(function(a, b, c, e) {
        var f;
        c = d(a, null, e, []);
        for (e = a.length;e--;) {
          (f = c[e]) && (a[e] = !(b[e] = f));
        }
      }) : function(a, e, f) {
        return b[0] = a, d(b, null, f, c), b[0] = null, !c.pop();
      };
    }), has:e(function(a) {
      return function(c) {
        return 0 < b(a, c).length;
      };
    }), contains:e(function(a) {
      return a = a.replace(ha, ia), function(b) {
        return -1 < (b.textContent || b.innerText || G(b)).indexOf(a);
      };
    }), lang:e(function(a) {
      return ka.test(a || "") || b.error("unsupported lang: " + a), a = a.replace(ha, ia).toLowerCase(), function(b) {
        var c;
        do {
          if (c = T ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) {
            return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-");
          }
        } while ((b = b.parentNode) && 1 === b.nodeType);
        return !1;
      };
    }), target:function(b) {
      var c = a.location && a.location.hash;
      return c && c.slice(1) === b.id;
    }, root:function(a) {
      return a === F;
    }, focus:function(a) {
      return a === I.activeElement && (!I.hasFocus || I.hasFocus()) && !!(a.type || a.href || ~a.tabIndex);
    }, enabled:function(a) {
      return !1 === a.disabled;
    }, disabled:function(a) {
      return !0 === a.disabled;
    }, checked:function(a) {
      var b = a.nodeName.toLowerCase();
      return "input" === b && !!a.checked || "option" === b && !!a.selected;
    }, selected:function(a) {
      return a.parentNode && a.parentNode.selectedIndex, !0 === a.selected;
    }, empty:function(a) {
      for (a = a.firstChild;a;a = a.nextSibling) {
        if (6 > a.nodeType) {
          return !1;
        }
      }
      return !0;
    }, parent:function(a) {
      return !C.pseudos.empty(a);
    }, header:function(a) {
      return qa.test(a.nodeName);
    }, input:function(a) {
      return va.test(a.nodeName);
    }, button:function(a) {
      var b = a.nodeName.toLowerCase();
      return "input" === b && "button" === a.type || "button" === b;
    }, text:function(a) {
      var b;
      return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase());
    }, first:l(function() {
      return [0];
    }), last:l(function(a, b) {
      return [b - 1];
    }), eq:l(function(a, b, c) {
      return [0 > c ? c + b : c];
    }), even:l(function(a, b) {
      for (var c = 0;b > c;c += 2) {
        a.push(c);
      }
      return a;
    }), odd:l(function(a, b) {
      for (var c = 1;b > c;c += 2) {
        a.push(c);
      }
      return a;
    }), lt:l(function(a, b, c) {
      for (b = 0 > c ? c + b : c;0 <= --b;) {
        a.push(b);
      }
      return a;
    }), gt:l(function(a, b, c) {
      for (c = 0 > c ? c + b : c;++c < b;) {
        a.push(c);
      }
      return a;
    })}};
    C.pseudos.nth = C.pseudos.eq;
    for (n in{radio:!0, checkbox:!0, file:!0, password:!0, image:!0}) {
      C.pseudos[n] = h(n);
    }
    for (n in{submit:!0, reset:!0}) {
      C.pseudos[n] = k(n);
    }
    q.prototype = C.filters = C.pseudos;
    C.setFilters = new q;
    E = b.tokenize = function(a, c) {
      var e, d, f, g, h, k, l;
      if (h = L[a + " "]) {
        return c ? 0 : h.slice(0);
      }
      h = a;
      k = [];
      for (l = C.preFilter;h;) {
        e && !(d = ga.exec(h)) || (d && (h = h.slice(d[0].length) || h), k.push(f = []));
        e = !1;
        (d = la.exec(h)) && (e = d.shift(), f.push({value:e, type:d[0].replace(ba, " ")}), h = h.slice(e.length));
        for (g in C.filter) {
          !(d = ea[g].exec(h)) || l[g] && !(d = l[g](d)) || (e = d.shift(), f.push({value:e, type:g, matches:d}), h = h.slice(e.length));
        }
        if (!e) {
          break;
        }
      }
      return c ? h.length : h ? b.error(a) : L(a, k).slice(0);
    };
    return x = b.compile = function(a, b) {
      var c, e = [], d = [], f = ma[a + " "];
      if (!f) {
        b || (b = E(a));
        for (c = b.length;c--;) {
          f = z(b[c]), f[Q] ? e.push(f) : d.push(f);
        }
        f = ma(a, y(d, e));
        f.selector = a;
      }
      return f;
    }, J = b.select = function(a, b, c, e) {
      var d, f, g, h, k, l = "function" == typeof a && a, K = !e && E(a = l.selector || a);
      if (c = c || [], 1 === K.length) {
        if (f = K[0] = K[0].slice(0), 2 < f.length && "ID" === (g = f[0]).type && D.getById && 9 === b.nodeType && T && C.relative[f[1].type]) {
          if (b = (C.find.ID(g.matches[0].replace(ha, ia), b) || [])[0], !b) {
            return c;
          }
          l && (b = b.parentNode);
          a = a.slice(f.shift().value.length);
        }
        for (d = ea.needsContext.test(a) ? 0 : f.length;d-- && (g = f[d], !C.relative[h = g.type]);) {
          if ((k = C.find[h]) && (e = k(g.matches[0].replace(ha, ia), ja.test(f[0].type) && m(b.parentNode) || b))) {
            if (f.splice(d, 1), a = e.length && r(f), !a) {
              return U.apply(c, e), c;
            }
            break;
          }
        }
      }
      return (l || x(a, K))(e, b, !T, c, !b || ja.test(a) && m(b.parentNode) || b), c;
    }, D.sortStable = Q.split("").sort(P).join("") === Q, D.detectDuplicates = !!R, H(), D.sortDetached = d(function(a) {
      return 1 & a.compareDocumentPosition(I.createElement("div"));
    }), d(function(a) {
      return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href");
    }) || f("type|href|height|width", function(a, b, c) {
      return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2);
    }), D.attributes && d(function(a) {
      return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value");
    }) || f("value", function(a, b, c) {
      return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue;
    }), d(function(a) {
      return null == a.getAttribute("disabled");
    }) || f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", function(a, b, c) {
      var e;
      return c ? void 0 : !0 === a[b] ? b.toLowerCase() : (e = a.getAttributeNode(b)) && e.specified ? e.value : null;
    }), b;
  }(a);
  n.find = na;
  n.expr = na.selectors;
  n.expr[":"] = n.expr.pseudos;
  n.uniqueSort = n.unique = na.uniqueSort;
  n.text = na.getText;
  n.isXMLDoc = na.isXML;
  n.contains = na.contains;
  var oa = function(a, b, c) {
    for (var e = [], d = void 0 !== c;(a = a[b]) && 9 !== a.nodeType;) {
      if (1 === a.nodeType) {
        if (d && n(a).is(c)) {
          break;
        }
        e.push(a);
      }
    }
    return e;
  }, Ta = function(a, b) {
    for (var c = [];a;a = a.nextSibling) {
      1 === a.nodeType && a !== b && c.push(a);
    }
    return c;
  }, Ua = n.expr.match.needsContext, Va = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/, ib = /^.[^:#\[\.,]*$/;
  n.filter = function(a, b, c) {
    var e = b[0];
    return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === e.nodeType ? n.find.matchesSelector(e, a) ? [e] : [] : n.find.matches(a, n.grep(b, function(a) {
      return 1 === a.nodeType;
    }));
  };
  n.fn.extend({find:function(a) {
    var b, c = this.length, e = [], d = this;
    if ("string" != typeof a) {
      return this.pushStack(n(a).filter(function() {
        for (b = 0;c > b;b++) {
          if (n.contains(d[b], this)) {
            return !0;
          }
        }
      }));
    }
    for (b = 0;c > b;b++) {
      n.find(a, d[b], e);
    }
    return e = this.pushStack(1 < c ? n.unique(e) : e), e.selector = this.selector ? this.selector + " " + a : a, e;
  }, filter:function(a) {
    return this.pushStack(f(this, a || [], !1));
  }, not:function(a) {
    return this.pushStack(f(this, a || [], !0));
  }, is:function(a) {
    return !!f(this, "string" == typeof a && Ua.test(a) ? n(a) : a || [], !1).length;
  }});
  var Wa, vb = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
  (n.fn.init = function(a, b, c) {
    var e, d;
    if (!a) {
      return this;
    }
    if (c = c || Wa, "string" == typeof a) {
      if (e = "<" === a[0] && ">" === a[a.length - 1] && 3 <= a.length ? [null, a, null] : vb.exec(a), !e || !e[1] && b) {
        return !b || b.jquery ? (b || c).find(a) : this.constructor(b).find(a);
      }
      if (e[1]) {
        if (b = b instanceof n ? b[0] : b, n.merge(this, n.parseHTML(e[1], b && b.nodeType ? b.ownerDocument || b : N, !0)), Va.test(e[1]) && n.isPlainObject(b)) {
          for (e in b) {
            n.isFunction(this[e]) ? this[e](b[e]) : this.attr(e, b[e]);
          }
        }
        return this;
      }
      return d = N.getElementById(e[2]), d && d.parentNode && (this.length = 1, this[0] = d), this.context = N, this.selector = a, this;
    }
    return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : n.isFunction(a) ? void 0 !== c.ready ? c.ready(a) : a(n) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), n.makeArray(a, this));
  }).prototype = n.fn;
  Wa = n(N);
  var wb = /^(?:parents|prev(?:Until|All))/, xb = {children:!0, contents:!0, next:!0, prev:!0};
  n.fn.extend({has:function(a) {
    var b = n(a, this), c = b.length;
    return this.filter(function() {
      for (var a = 0;c > a;a++) {
        if (n.contains(this, b[a])) {
          return !0;
        }
      }
    });
  }, closest:function(a, b) {
    for (var c, e = 0, d = this.length, f = [], g = Ua.test(a) || "string" != typeof a ? n(a, b || this.context) : 0;d > e;e++) {
      for (c = this[e];c && c !== b;c = c.parentNode) {
        if (11 > c.nodeType && (g ? -1 < g.index(c) : 1 === c.nodeType && n.find.matchesSelector(c, a))) {
          f.push(c);
          break;
        }
      }
    }
    return this.pushStack(1 < f.length ? n.uniqueSort(f) : f);
  }, index:function(a) {
    return a ? "string" == typeof a ? wa.call(n(a), this[0]) : wa.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
  }, add:function(a, b) {
    return this.pushStack(n.uniqueSort(n.merge(this.get(), n(a, b))));
  }, addBack:function(a) {
    return this.add(null == a ? this.prevObject : this.prevObject.filter(a));
  }});
  n.each({parent:function(a) {
    return (a = a.parentNode) && 11 !== a.nodeType ? a : null;
  }, parents:function(a) {
    return oa(a, "parentNode");
  }, parentsUntil:function(a, b, c) {
    return oa(a, "parentNode", c);
  }, next:function(a) {
    return g(a, "nextSibling");
  }, prev:function(a) {
    return g(a, "previousSibling");
  }, nextAll:function(a) {
    return oa(a, "nextSibling");
  }, prevAll:function(a) {
    return oa(a, "previousSibling");
  }, nextUntil:function(a, b, c) {
    return oa(a, "nextSibling", c);
  }, prevUntil:function(a, b, c) {
    return oa(a, "previousSibling", c);
  }, siblings:function(a) {
    return Ta((a.parentNode || {}).firstChild, a);
  }, children:function(a) {
    return Ta(a.firstChild);
  }, contents:function(a) {
    return a.contentDocument || n.merge([], a.childNodes);
  }}, function(a, b) {
    n.fn[a] = function(c, e) {
      var d = n.map(this, b, c);
      return "Until" !== a.slice(-5) && (e = c), e && "string" == typeof e && (d = n.filter(e, d)), 1 < this.length && (xb[a] || n.uniqueSort(d), wb.test(a) && d.reverse()), this.pushStack(d);
    };
  });
  var X = /\S+/g;
  n.Callbacks = function(a) {
    a = "string" == typeof a ? c(a) : n.extend({}, a);
    var b, e, d, f, g = [], h = [], k = -1, l = function() {
      f = a.once;
      for (d = b = !0;h.length;k = -1) {
        for (e = h.shift();++k < g.length;) {
          !1 === g[k].apply(e[0], e[1]) && a.stopOnFalse && (k = g.length, e = !1);
        }
      }
      a.memory || (e = !1);
      b = !1;
      f && (g = e ? [] : "");
    }, m = {add:function() {
      return g && (e && !b && (k = g.length - 1, h.push(e)), function kb(b) {
        n.each(b, function(b, c) {
          n.isFunction(c) ? a.unique && m.has(c) || g.push(c) : c && c.length && "string" !== n.type(c) && kb(c);
        });
      }(arguments), e && !b && l()), this;
    }, remove:function() {
      return n.each(arguments, function(a, b) {
        for (var c;-1 < (c = n.inArray(b, g, c));) {
          g.splice(c, 1), k >= c && k--;
        }
      }), this;
    }, has:function(a) {
      return a ? -1 < n.inArray(a, g) : 0 < g.length;
    }, empty:function() {
      return g && (g = []), this;
    }, disable:function() {
      return f = h = [], g = e = "", this;
    }, disabled:function() {
      return !g;
    }, lock:function() {
      return f = h = [], e || (g = e = ""), this;
    }, locked:function() {
      return !!f;
    }, fireWith:function(a, c) {
      return f || (c = c || [], c = [a, c.slice ? c.slice() : c], h.push(c), b || l()), this;
    }, fire:function() {
      return m.fireWith(this, arguments), this;
    }, fired:function() {
      return !!d;
    }};
    return m;
  };
  n.extend({Deferred:function(a) {
    var b = [["resolve", "done", n.Callbacks("once memory"), "resolved"], ["reject", "fail", n.Callbacks("once memory"), "rejected"], ["notify", "progress", n.Callbacks("memory")]], c = "pending", e = {state:function() {
      return c;
    }, always:function() {
      return d.done(arguments).fail(arguments), this;
    }, then:function() {
      var a = arguments;
      return n.Deferred(function(c) {
        n.each(b, function(b, f) {
          var g = n.isFunction(a[b]) && a[b];
          d[f[1]](function() {
            var a = g && g.apply(this, arguments);
            a && n.isFunction(a.promise) ? a.promise().progress(c.notify).done(c.resolve).fail(c.reject) : c[f[0] + "With"](this === e ? c.promise() : this, g ? [a] : arguments);
          });
        });
        a = null;
      }).promise();
    }, promise:function(a) {
      return null != a ? n.extend(a, e) : e;
    }}, d = {};
    return e.pipe = e.then, n.each(b, function(a, f) {
      var g = f[2], h = f[3];
      e[f[1]] = g.add;
      h && g.add(function() {
        c = h;
      }, b[1 ^ a][2].disable, b[2][2].lock);
      d[f[0]] = function() {
        return d[f[0] + "With"](this === d ? e : this, arguments), this;
      };
      d[f[0] + "With"] = g.fireWith;
    }), e.promise(d), a && a.call(d, d), d;
  }, when:function(a) {
    var b = 0, c = fa.call(arguments), e = c.length, d = 1 !== e || a && n.isFunction(a.promise) ? e : 0, f = 1 === d ? a : n.Deferred(), g = function(a, b, c) {
      return function(e) {
        b[a] = this;
        c[a] = 1 < arguments.length ? fa.call(arguments) : e;
        c === h ? f.notifyWith(b, c) : --d || f.resolveWith(b, c);
      };
    }, h, k, l;
    if (1 < e) {
      for (h = Array(e), k = Array(e), l = Array(e);e > b;b++) {
        c[b] && n.isFunction(c[b].promise) ? c[b].promise().progress(g(b, k, h)).done(g(b, l, c)).fail(f.reject) : --d;
      }
    }
    return d || f.resolveWith(l, c), f.promise();
  }});
  var Ca;
  n.fn.ready = function(a) {
    return n.ready.promise().done(a), this;
  };
  n.extend({isReady:!1, readyWait:1, holdReady:function(a) {
    a ? n.readyWait++ : n.ready(!0);
  }, ready:function(a) {
    (!0 === a ? --n.readyWait : n.isReady) || (n.isReady = !0, !0 !== a && 0 < --n.readyWait || (Ca.resolveWith(N, [n]), n.fn.triggerHandler && (n(N).triggerHandler("ready"), n(N).off("ready"))));
  }});
  n.ready.promise = function(b) {
    return Ca || (Ca = n.Deferred(), "complete" === N.readyState || "loading" !== N.readyState && !N.documentElement.doScroll ? a.setTimeout(n.ready) : (N.addEventListener("DOMContentLoaded", e), a.addEventListener("load", e))), Ca.promise(b);
  };
  n.ready.promise();
  var ba = function(a, b, c, e, d, f, g) {
    var h = 0, k = a.length, l = null == c;
    if ("object" === n.type(c)) {
      for (h in d = !0, c) {
        ba(a, b, h, c[h], !0, f, g);
      }
    } else {
      if (void 0 !== e && (d = !0, n.isFunction(e) || (g = !0), l && (g ? (b.call(a, e), b = null) : (l = b, b = function(a, b, c) {
        return l.call(n(a), c);
      })), b)) {
        for (;k > h;h++) {
          b(a[h], c, g ? e : e.call(a[h], h, b(a[h], c)));
        }
      }
    }
    return d ? a : l ? b.call(a) : k ? b(a[0], c) : f;
  }, da = function(a) {
    return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType;
  };
  h.uid = 1;
  h.prototype = {register:function(a, b) {
    var c = b || {};
    return a.nodeType ? a[this.expando] = c : Object.defineProperty(a, this.expando, {value:c, writable:!0, configurable:!0}), a[this.expando];
  }, cache:function(a) {
    if (!da(a)) {
      return {};
    }
    var b = a[this.expando];
    return b || (b = {}, da(a) && (a.nodeType ? a[this.expando] = b : Object.defineProperty(a, this.expando, {value:b, configurable:!0}))), b;
  }, set:function(a, b, c) {
    var e;
    a = this.cache(a);
    if ("string" == typeof b) {
      a[b] = c;
    } else {
      for (e in b) {
        a[e] = b[e];
      }
    }
    return a;
  }, get:function(a, b) {
    return void 0 === b ? this.cache(a) : a[this.expando] && a[this.expando][b];
  }, access:function(a, b, c) {
    var e;
    return void 0 === b || b && "string" == typeof b && void 0 === c ? (e = this.get(a, b), void 0 !== e ? e : this.get(a, n.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b);
  }, remove:function(a, b) {
    var c, e, d = a[this.expando];
    if (void 0 !== d) {
      if (void 0 === b) {
        this.register(a);
      } else {
        for (n.isArray(b) ? e = b.concat(b.map(n.camelCase)) : (c = n.camelCase(b), b in d ? e = [b, c] : (e = c, e = e in d ? [e] : e.match(X) || [])), c = e.length;c--;) {
          delete d[e[c]];
        }
      }
      (void 0 === b || n.isEmptyObject(d)) && (a.nodeType ? a[this.expando] = void 0 : delete a[this.expando]);
    }
  }, hasData:function(a) {
    a = a[this.expando];
    return void 0 !== a && !n.isEmptyObject(a);
  }};
  var L = new h, U = new h, jb = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, Ma = /[A-Z]/g;
  n.extend({hasData:function(a) {
    return U.hasData(a) || L.hasData(a);
  }, data:function(a, b, c) {
    return U.access(a, b, c);
  }, removeData:function(a, b) {
    U.remove(a, b);
  }, _data:function(a, b, c) {
    return L.access(a, b, c);
  }, _removeData:function(a, b) {
    L.remove(a, b);
  }});
  n.fn.extend({data:function(a, b) {
    var c, e, d, f = this[0], g = f && f.attributes;
    if (void 0 === a) {
      if (this.length && (d = U.get(f), 1 === f.nodeType && !L.get(f, "hasDataAttrs"))) {
        for (c = g.length;c--;) {
          g[c] && (e = g[c].name, 0 === e.indexOf("data-") && (e = n.camelCase(e.slice(5)), k(f, e, d[e])));
        }
        L.set(f, "hasDataAttrs", !0);
      }
      return d;
    }
    return "object" == typeof a ? this.each(function() {
      U.set(this, a);
    }) : ba(this, function(b) {
      var c, e;
      if (f && void 0 === b) {
        if ((c = U.get(f, a) || U.get(f, a.replace(Ma, "-$&").toLowerCase()), void 0 !== c) || (e = n.camelCase(a), c = U.get(f, e), void 0 !== c) || (c = k(f, e, void 0), void 0 !== c)) {
          return c;
        }
      } else {
        e = n.camelCase(a), this.each(function() {
          var c = U.get(this, e);
          U.set(this, e, b);
          -1 < a.indexOf("-") && void 0 !== c && U.set(this, a, b);
        });
      }
    }, null, b, 1 < arguments.length, null, !0);
  }, removeData:function(a) {
    return this.each(function() {
      U.remove(this, a);
    });
  }});
  n.extend({queue:function(a, b, c) {
    var e;
    return a ? (b = (b || "fx") + "queue", e = L.get(a, b), c && (!e || n.isArray(c) ? e = L.access(a, b, n.makeArray(c)) : e.push(c)), e || []) : void 0;
  }, dequeue:function(a, b) {
    b = b || "fx";
    var c = n.queue(a, b), e = c.length, d = c.shift(), f = n._queueHooks(a, b), g = function() {
      n.dequeue(a, b);
    };
    "inprogress" === d && (d = c.shift(), e--);
    d && ("fx" === b && c.unshift("inprogress"), delete f.stop, d.call(a, g, f));
    !e && f && f.empty.fire();
  }, _queueHooks:function(a, b) {
    var c = b + "queueHooks";
    return L.get(a, c) || L.access(a, c, {empty:n.Callbacks("once memory").add(function() {
      L.remove(a, [b + "queue", c]);
    })});
  }});
  n.fn.extend({queue:function(a, b) {
    var c = 2;
    return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? n.queue(this[0], a) : void 0 === b ? this : this.each(function() {
      var c = n.queue(this, a, b);
      n._queueHooks(this, a);
      "fx" === a && "inprogress" !== c[0] && n.dequeue(this, a);
    });
  }, dequeue:function(a) {
    return this.each(function() {
      n.dequeue(this, a);
    });
  }, clearQueue:function(a) {
    return this.queue(a || "fx", []);
  }, promise:function(a, b) {
    var c, e = 1, d = n.Deferred(), f = this, g = this.length, h = function() {
      --e || d.resolveWith(f, [f]);
    };
    "string" != typeof a && (b = a, a = void 0);
    for (a = a || "fx";g--;) {
      (c = L.get(f[g], a + "queueHooks")) && c.empty && (e++, c.empty.add(h));
    }
    return h(), d.promise(b);
  }});
  var Xa = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, ka = new RegExp("^(?:([+-])=|)(" + Xa + ")([a-z%]*)$", "i"), ga = ["Top", "Right", "Bottom", "Left"], ea = function(a, b) {
    return a = b || a, "none" === n.css(a, "display") || !n.contains(a.ownerDocument, a);
  }, Ya = /^(?:checkbox|radio)$/i, Na = /<([\w:-]+)/, Oa = /^$|\/(?:java|ecma)script/i, Z = {option:[1, "<select multiple='multiple'>", "</select>"], thead:[1, "<table>", "</table>"], col:[2, "<table><colgroup>", "</colgroup></table>"], tr:[2, "<table><tbody>", "</tbody></table>"], td:[3, "<table><tbody><tr>", "</tr></tbody></table>"], _default:[0, "", ""]};
  Z.optgroup = Z.option;
  Z.tbody = Z.tfoot = Z.colgroup = Z.caption = Z.thead;
  Z.th = Z.td;
  var lb = /<|&#?\w+;/;
  !function() {
    var a = N.createDocumentFragment().appendChild(N.createElement("div")), b = N.createElement("input");
    b.setAttribute("type", "radio");
    b.setAttribute("checked", "checked");
    b.setAttribute("name", "t");
    a.appendChild(b);
    P.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked;
    a.innerHTML = "<textarea>x</textarea>";
    P.noCloneChecked = !!a.cloneNode(!0).lastChild.defaultValue;
  }();
  var yb = /^key/, zb = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, Za = /^([^.]*)(?:\.(.+)|)/;
  n.event = {global:{}, add:function(a, b, c, e, d) {
    var f, g, h, k, l, m, q, r, p, A;
    if (l = L.get(a)) {
      for (c.handler && (f = c, c = f.handler, d = f.selector), c.guid || (c.guid = n.guid++), (k = l.events) || (k = l.events = {}), (g = l.handle) || (g = l.handle = function(b) {
        return "undefined" != typeof n && n.event.triggered !== b.type ? n.event.dispatch.apply(a, arguments) : void 0;
      }), b = (b || "").match(X) || [""], l = b.length;l--;) {
        h = Za.exec(b[l]) || [], p = A = h[1], h = (h[2] || "").split(".").sort(), p && (q = n.event.special[p] || {}, p = (d ? q.delegateType : q.bindType) || p, q = n.event.special[p] || {}, m = n.extend({type:p, origType:A, data:e, handler:c, guid:c.guid, selector:d, needsContext:d && n.expr.match.needsContext.test(d), namespace:h.join(".")}, f), (r = k[p]) || (r = k[p] = [], r.delegateCount = 0, q.setup && !1 !== q.setup.call(a, e, h, g) || a.addEventListener && a.addEventListener(p, g)), q.add && 
        (q.add.call(a, m), m.handler.guid || (m.handler.guid = c.guid)), d ? r.splice(r.delegateCount++, 0, m) : r.push(m), n.event.global[p] = !0);
      }
    }
  }, remove:function(a, b, c, e, d) {
    var f, g, h, k, l, m, q, r, p, A, w, t = L.hasData(a) && L.get(a);
    if (t && (k = t.events)) {
      b = (b || "").match(X) || [""];
      for (l = b.length;l--;) {
        if (h = Za.exec(b[l]) || [], p = w = h[1], A = (h[2] || "").split(".").sort(), p) {
          q = n.event.special[p] || {};
          p = (e ? q.delegateType : q.bindType) || p;
          r = k[p] || [];
          h = h[2] && new RegExp("(^|\\.)" + A.join("\\.(?:.*\\.|)") + "(\\.|$)");
          for (g = f = r.length;f--;) {
            m = r[f], !d && w !== m.origType || c && c.guid !== m.guid || h && !h.test(m.namespace) || e && e !== m.selector && ("**" !== e || !m.selector) || (r.splice(f, 1), m.selector && r.delegateCount--, q.remove && q.remove.call(a, m));
          }
          g && !r.length && (q.teardown && !1 !== q.teardown.call(a, A, t.handle) || n.removeEvent(a, p, t.handle), delete k[p]);
        } else {
          for (p in k) {
            n.event.remove(a, p + b[l], c, e, !0);
          }
        }
      }
      n.isEmptyObject(k) && L.remove(a, "handle events");
    }
  }, dispatch:function(a) {
    a = n.event.fix(a);
    var b, c, e, d, f, g = [], h = fa.call(arguments);
    b = (L.get(this, "events") || {})[a.type] || [];
    var k = n.event.special[a.type] || {};
    if (h[0] = a, a.delegateTarget = this, !k.preDispatch || !1 !== k.preDispatch.call(this, a)) {
      g = n.event.handlers.call(this, a, b);
      for (b = 0;(d = g[b++]) && !a.isPropagationStopped();) {
        for (a.currentTarget = d.elem, c = 0;(f = d.handlers[c++]) && !a.isImmediatePropagationStopped();) {
          a.rnamespace && !a.rnamespace.test(f.namespace) || (a.handleObj = f, a.data = f.data, e = ((n.event.special[f.origType] || {}).handle || f.handler).apply(d.elem, h), void 0 !== e && !1 === (a.result = e) && (a.preventDefault(), a.stopPropagation()));
        }
      }
      return k.postDispatch && k.postDispatch.call(this, a), a.result;
    }
  }, handlers:function(a, b) {
    var c, e, d, f, g = [], h = b.delegateCount, k = a.target;
    if (h && k.nodeType && ("click" !== a.type || isNaN(a.button) || 1 > a.button)) {
      for (;k !== this;k = k.parentNode || this) {
        if (1 === k.nodeType && (!0 !== k.disabled || "click" !== a.type)) {
          e = [];
          for (c = 0;h > c;c++) {
            f = b[c], d = f.selector + " ", void 0 === e[d] && (e[d] = f.needsContext ? -1 < n(d, this).index(k) : n.find(d, this, null, [k]).length), e[d] && e.push(f);
          }
          e.length && g.push({elem:k, handlers:e});
        }
      }
    }
    return h < b.length && g.push({elem:this, handlers:b.slice(h)}), g;
  }, props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks:{}, keyHooks:{props:["char", "charCode", "key", "keyCode"], filter:function(a, b) {
    return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a;
  }}, mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter:function(a, b) {
    var c, e, d, f = b.button;
    return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || N, e = c.documentElement, d = c.body, a.pageX = b.clientX + (e && e.scrollLeft || d && d.scrollLeft || 0) - (e && e.clientLeft || d && d.clientLeft || 0), a.pageY = b.clientY + (e && e.scrollTop || d && d.scrollTop || 0) - (e && e.clientTop || d && d.clientTop || 0)), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a;
  }}, fix:function(a) {
    if (a[n.expando]) {
      return a;
    }
    var b, c, e;
    b = a.type;
    var d = a, f = this.fixHooks[b];
    f || (this.fixHooks[b] = f = zb.test(b) ? this.mouseHooks : yb.test(b) ? this.keyHooks : {});
    e = f.props ? this.props.concat(f.props) : this.props;
    a = new n.Event(d);
    for (b = e.length;b--;) {
      c = e[b], a[c] = d[c];
    }
    return a.target || (a.target = N), 3 === a.target.nodeType && (a.target = a.target.parentNode), f.filter ? f.filter(a, d) : a;
  }, special:{load:{noBubble:!0}, focus:{trigger:function() {
    return this !== z() && this.focus ? (this.focus(), !1) : void 0;
  }, delegateType:"focusin"}, blur:{trigger:function() {
    return this === z() && this.blur ? (this.blur(), !1) : void 0;
  }, delegateType:"focusout"}, click:{trigger:function() {
    return "checkbox" === this.type && this.click && n.nodeName(this, "input") ? (this.click(), !1) : void 0;
  }, _default:function(a) {
    return n.nodeName(a.target, "a");
  }}, beforeunload:{postDispatch:function(a) {
    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result);
  }}}};
  n.removeEvent = function(a, b, c) {
    a.removeEventListener && a.removeEventListener(b, c);
  };
  n.Event = function(a, b) {
    return this instanceof n.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && !1 === a.returnValue ? w : t) : this.type = a, b && n.extend(this, b), this.timeStamp = a && a.timeStamp || n.now(), void(this[n.expando] = !0)) : new n.Event(a, b);
  };
  n.Event.prototype = {constructor:n.Event, isDefaultPrevented:t, isPropagationStopped:t, isImmediatePropagationStopped:t, preventDefault:function() {
    var a = this.originalEvent;
    this.isDefaultPrevented = w;
    a && a.preventDefault();
  }, stopPropagation:function() {
    var a = this.originalEvent;
    this.isPropagationStopped = w;
    a && a.stopPropagation();
  }, stopImmediatePropagation:function() {
    var a = this.originalEvent;
    this.isImmediatePropagationStopped = w;
    a && a.stopImmediatePropagation();
    this.stopPropagation();
  }};
  n.each({mouseenter:"mouseover", mouseleave:"mouseout", pointerenter:"pointerover", pointerleave:"pointerout"}, function(a, b) {
    n.event.special[a] = {delegateType:b, bindType:b, handle:function(a) {
      var c, e = a.relatedTarget, d = a.handleObj;
      return e && (e === this || n.contains(this, e)) || (a.type = d.origType, c = d.handler.apply(this, arguments), a.type = b), c;
    }};
  });
  n.fn.extend({on:function(a, b, c, e) {
    return y(this, a, b, c, e);
  }, one:function(a, b, c, e) {
    return y(this, a, b, c, e, 1);
  }, off:function(a, b, c) {
    var e, d;
    if (a && a.preventDefault && a.handleObj) {
      return e = a.handleObj, n(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler), this;
    }
    if ("object" == typeof a) {
      for (d in a) {
        this.off(d, b, a[d]);
      }
      return this;
    }
    return !1 !== b && "function" != typeof b || (c = b, b = void 0), !1 === c && (c = t), this.each(function() {
      n.event.remove(this, a, c, b);
    });
  }});
  var Ab = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi, Bb = /<script|<style|<link/i, nb = /checked\s*(?:[^=]|=\s*.checked.)/i, mb = /^true\/(.*)/, ob = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
  n.extend({htmlPrefilter:function(a) {
    return a.replace(Ab, "<$1></$2>");
  }, clone:function(a, b, c) {
    var e, d, f, g, h = a.cloneNode(!0), k = n.contains(a.ownerDocument, a);
    if (!(P.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || n.isXMLDoc(a))) {
      for (g = q(h), f = q(a), e = 0, d = f.length;d > e;e++) {
        var l = f[e], m = g[e], r = m.nodeName.toLowerCase();
        "input" === r && Ya.test(l.type) ? m.checked = l.checked : "input" !== r && "textarea" !== r || (m.defaultValue = l.defaultValue);
      }
    }
    if (b) {
      if (c) {
        for (f = f || q(a), g = g || q(h), e = 0, d = f.length;d > e;e++) {
          G(f[e], g[e]);
        }
      } else {
        G(a, h);
      }
    }
    return g = q(h, "script"), 0 < g.length && p(g, !k && q(a, "script")), h;
  }, cleanData:function(a) {
    for (var b, c, e, d = n.event.special, f = 0;void 0 !== (c = a[f]);f++) {
      if (da(c)) {
        if (b = c[L.expando]) {
          if (b.events) {
            for (e in b.events) {
              d[e] ? n.event.remove(c, e) : n.removeEvent(c, e, b.handle);
            }
          }
          c[L.expando] = void 0;
        }
        c[U.expando] && (c[U.expando] = void 0);
      }
    }
  }});
  n.fn.extend({domManip:F, detach:function(a) {
    return x(this, a, !0);
  }, remove:function(a) {
    return x(this, a);
  }, text:function(a) {
    return ba(this, function(a) {
      return void 0 === a ? n.text(this) : this.empty().each(function() {
        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = a);
      });
    }, null, a, arguments.length);
  }, append:function() {
    return F(this, arguments, function(a) {
      1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || r(this, a).appendChild(a);
    });
  }, prepend:function() {
    return F(this, arguments, function(a) {
      if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
        var b = r(this, a);
        b.insertBefore(a, b.firstChild);
      }
    });
  }, before:function() {
    return F(this, arguments, function(a) {
      this.parentNode && this.parentNode.insertBefore(a, this);
    });
  }, after:function() {
    return F(this, arguments, function(a) {
      this.parentNode && this.parentNode.insertBefore(a, this.nextSibling);
    });
  }, empty:function() {
    for (var a, b = 0;null != (a = this[b]);b++) {
      1 === a.nodeType && (n.cleanData(q(a, !1)), a.textContent = "");
    }
    return this;
  }, clone:function(a, b) {
    return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
      return n.clone(this, a, b);
    });
  }, html:function(a) {
    return ba(this, function(a) {
      var b = this[0] || {}, c = 0, e = this.length;
      if (void 0 === a && 1 === b.nodeType) {
        return b.innerHTML;
      }
      if ("string" == typeof a && !Bb.test(a) && !Z[(Na.exec(a) || ["", ""])[1].toLowerCase()]) {
        a = n.htmlPrefilter(a);
        try {
          for (;e > c;c++) {
            b = this[c] || {}, 1 === b.nodeType && (n.cleanData(q(b, !1)), b.innerHTML = a);
          }
          b = 0;
        } catch (d) {
        }
      }
      b && this.empty().append(a);
    }, null, a, arguments.length);
  }, replaceWith:function() {
    var a = [];
    return F(this, arguments, function(b) {
      var c = this.parentNode;
      0 > n.inArray(this, a) && (n.cleanData(q(this)), c && c.replaceChild(b, this));
    }, a);
  }});
  n.each({appendTo:"append", prependTo:"prepend", insertBefore:"before", insertAfter:"after", replaceAll:"replaceWith"}, function(a, b) {
    n.fn[a] = function(a) {
      for (var c = [], e = n(a), d = e.length - 1, f = 0;d >= f;f++) {
        a = f === d ? this : this.clone(!0), n(e[f])[b](a), va.apply(c, a.get());
      }
      return this.pushStack(c);
    };
  });
  var ya, Pa = {HTML:"block", BODY:"block"}, Qa = /^margin/, Ea = new RegExp("^(" + Xa + ")(?!px)[a-z%]+$", "i"), za = function(b) {
    var c = b.ownerDocument.defaultView;
    return c && c.opener || (c = a), c.getComputedStyle(b);
  }, Ga = function(a, b, c, e) {
    var d, f = {};
    for (d in b) {
      f[d] = a.style[d], a.style[d] = b[d];
    }
    c = c.apply(a, e || []);
    for (d in b) {
      a.style[d] = f[d];
    }
    return c;
  }, ra = N.documentElement;
  !function() {
    var b, c, e, d, f = N.createElement("div"), g = N.createElement("div");
    if (g.style) {
      var h = function() {
        g.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
        g.innerHTML = "";
        ra.appendChild(f);
        var h = a.getComputedStyle(g);
        b = "1%" !== h.top;
        d = "2px" === h.marginLeft;
        c = "4px" === h.width;
        g.style.marginRight = "50%";
        e = "4px" === h.marginRight;
        ra.removeChild(f);
      };
      g.style.backgroundClip = "content-box";
      g.cloneNode(!0).style.backgroundClip = "";
      P.clearCloneStyle = "content-box" === g.style.backgroundClip;
      f.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";
      f.appendChild(g);
      n.extend(P, {pixelPosition:function() {
        return h(), b;
      }, boxSizingReliable:function() {
        return null == c && h(), c;
      }, pixelMarginRight:function() {
        return null == c && h(), e;
      }, reliableMarginLeft:function() {
        return null == c && h(), d;
      }, reliableMarginRight:function() {
        var b, c = g.appendChild(N.createElement("div"));
        return c.style.cssText = g.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", c.style.marginRight = c.style.width = "0", g.style.width = "1px", ra.appendChild(f), b = !parseFloat(a.getComputedStyle(c).marginRight), ra.removeChild(f), g.removeChild(c), b;
      }});
    }
  }();
  var Cb = /^(none|table(?!-c[ea]).+)/, Db = {position:"absolute", visibility:"hidden", display:"block"}, $a = {letterSpacing:"0", fontWeight:"400"}, Sa = ["Webkit", "O", "Moz", "ms"], Ra = N.createElement("div").style;
  n.extend({cssHooks:{opacity:{get:function(a, b) {
    if (b) {
      var c = D(a, "opacity");
      return "" === c ? "1" : c;
    }
  }}}, cssNumber:{animationIterationCount:!0, columnCount:!0, fillOpacity:!0, flexGrow:!0, flexShrink:!0, fontWeight:!0, lineHeight:!0, opacity:!0, order:!0, orphans:!0, widows:!0, zIndex:!0, zoom:!0}, cssProps:{"float":"cssFloat"}, style:function(a, b, c, e) {
    if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
      var d, f, g, h = n.camelCase(b), k = a.style;
      return b = n.cssProps[h] || (n.cssProps[h] = B(h) || h), g = n.cssHooks[b] || n.cssHooks[h], void 0 === c ? g && "get" in g && void 0 !== (d = g.get(a, !1, e)) ? d : k[b] : (f = typeof c, "string" === f && (d = ka.exec(c)) && d[1] && (c = l(a, b, d), f = "number"), null != c && c === c && ("number" === f && (c += d && d[3] || (n.cssNumber[h] ? "" : "px")), P.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (k[b] = "inherit"), g && "set" in g && void 0 === (c = g.set(a, c, e)) || 
      (k[b] = c)), void 0);
    }
  }, css:function(a, b, c, e) {
    var d, f, g, h = n.camelCase(b);
    return b = n.cssProps[h] || (n.cssProps[h] = B(h) || h), g = n.cssHooks[b] || n.cssHooks[h], g && "get" in g && (d = g.get(a, !0, c)), void 0 === d && (d = D(a, b, e)), "normal" === d && b in $a && (d = $a[b]), "" === c || c ? (f = parseFloat(d), !0 === c || isFinite(f) ? f || 0 : d) : d;
  }});
  n.each(["height", "width"], function(a, b) {
    n.cssHooks[b] = {get:function(a, c, e) {
      return c ? Cb.test(n.css(a, "display")) && 0 === a.offsetWidth ? Ga(a, Db, function() {
        return M(a, b, e);
      }) : M(a, b, e) : void 0;
    }, set:function(a, c, e) {
      var d, f = e && za(a);
      e = e && I(a, b, e, "border-box" === n.css(a, "boxSizing", !1, f), f);
      return e && (d = ka.exec(c)) && "px" !== (d[3] || "px") && (a.style[b] = c, c = n.css(a, b)), J(a, c, e);
    }};
  });
  n.cssHooks.marginLeft = C(P.reliableMarginLeft, function(a, b) {
    return b ? (parseFloat(D(a, "marginLeft")) || a.getBoundingClientRect().left - Ga(a, {marginLeft:0}, function() {
      return a.getBoundingClientRect().left;
    })) + "px" : void 0;
  });
  n.cssHooks.marginRight = C(P.reliableMarginRight, function(a, b) {
    return b ? Ga(a, {display:"inline-block"}, D, [a, "marginRight"]) : void 0;
  });
  n.each({margin:"", padding:"", border:"Width"}, function(a, b) {
    n.cssHooks[a + b] = {expand:function(c) {
      var e = 0, d = {};
      for (c = "string" == typeof c ? c.split(" ") : [c];4 > e;e++) {
        d[a + ga[e] + b] = c[e] || c[e - 2] || c[0];
      }
      return d;
    }};
    Qa.test(a) || (n.cssHooks[a + b].set = J);
  });
  n.fn.extend({css:function(a, b) {
    return ba(this, function(a, b, c) {
      var e, d = {}, f = 0;
      if (n.isArray(b)) {
        c = za(a);
        for (e = b.length;e > f;f++) {
          d[b[f]] = n.css(a, b[f], !1, c);
        }
        return d;
      }
      return void 0 !== c ? n.style(a, b, c) : n.css(a, b);
    }, a, b, 1 < arguments.length);
  }, show:function() {
    return O(this, !0);
  }, hide:function() {
    return O(this);
  }, toggle:function(a) {
    return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
      ea(this) ? n(this).show() : n(this).hide();
    });
  }});
  n.Tween = V;
  V.prototype = {constructor:V, init:function(a, b, c, e, d, f) {
    this.elem = a;
    this.prop = c;
    this.easing = d || n.easing._default;
    this.options = b;
    this.start = this.now = this.cur();
    this.end = e;
    this.unit = f || (n.cssNumber[c] ? "" : "px");
  }, cur:function() {
    var a = V.propHooks[this.prop];
    return a && a.get ? a.get(this) : V.propHooks._default.get(this);
  }, run:function(a) {
    var b, c = V.propHooks[this.prop];
    return this.options.duration ? this.pos = b = n.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = b = a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : V.propHooks._default.set(this), this;
  }};
  V.prototype.init.prototype = V.prototype;
  V.propHooks = {_default:{get:function(a) {
    var b;
    return 1 !== a.elem.nodeType || null != a.elem[a.prop] && null == a.elem.style[a.prop] ? a.elem[a.prop] : (b = n.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0);
  }, set:function(a) {
    n.fx.step[a.prop] ? n.fx.step[a.prop](a) : 1 !== a.elem.nodeType || null == a.elem.style[n.cssProps[a.prop]] && !n.cssHooks[a.prop] ? a.elem[a.prop] = a.now : n.style(a.elem, a.prop, a.now + a.unit);
  }}};
  V.propHooks.scrollTop = V.propHooks.scrollLeft = {set:function(a) {
    a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now);
  }};
  n.easing = {linear:function(a) {
    return a;
  }, swing:function(a) {
    return .5 - Math.cos(a * Math.PI) / 2;
  }, _default:"swing"};
  n.fx = V.prototype.init;
  n.fx.step = {};
  var la, Da, Eb = /^(?:toggle|show|hide)$/, Fb = /queueHooks$/;
  n.Animation = n.extend(S, {tweeners:{"*":[function(a, b) {
    var c = this.createTween(a, b);
    return l(c.elem, a, ka.exec(b), c), c;
  }]}, tweener:function(a, b) {
    n.isFunction(a) ? (b = a, a = ["*"]) : a = a.match(X);
    for (var c, e = 0, d = a.length;d > e;e++) {
      c = a[e], S.tweeners[c] = S.tweeners[c] || [], S.tweeners[c].unshift(b);
    }
  }, prefilters:[function(a, b, c) {
    var e, d, f, g, h, k, l, m = this, q = {}, r = a.style, p = a.nodeType && ea(a), A = L.get(a, "fxshow");
    c.queue || (g = n._queueHooks(a, "fx"), null == g.unqueued && (g.unqueued = 0, h = g.empty.fire, g.empty.fire = function() {
      g.unqueued || h();
    }), g.unqueued++, m.always(function() {
      m.always(function() {
        g.unqueued--;
        n.queue(a, "fx").length || g.empty.fire();
      });
    }));
    1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [r.overflow, r.overflowX, r.overflowY], k = n.css(a, "display"), l = "none" === k ? L.get(a, "olddisplay") || u(a.nodeName) : k, "inline" === l && "none" === n.css(a, "float") && (r.display = "inline-block"));
    c.overflow && (r.overflow = "hidden", m.always(function() {
      r.overflow = c.overflow[0];
      r.overflowX = c.overflow[1];
      r.overflowY = c.overflow[2];
    }));
    for (e in b) {
      if (d = b[e], Eb.exec(d)) {
        if (delete b[e], f = f || "toggle" === d, d === (p ? "hide" : "show")) {
          if ("show" !== d || !A || void 0 === A[e]) {
            continue;
          }
          p = !0;
        }
        q[e] = A && A[e] || n.style(a, e);
      } else {
        k = void 0;
      }
    }
    if (n.isEmptyObject(q)) {
      "inline" === ("none" === k ? u(a.nodeName) : k) && (r.display = k);
    } else {
      for (e in A ? "hidden" in A && (p = A.hidden) : A = L.access(a, "fxshow", {}), f && (A.hidden = !p), p ? n(a).show() : m.done(function() {
        n(a).hide();
      }), m.done(function() {
        var b;
        L.remove(a, "fxshow");
        for (b in q) {
          n.style(a, b, q[b]);
        }
      }), q) {
        b = T(p ? A[e] : 0, e, m), e in A || (A[e] = b.start, p && (b.end = b.start, b.start = "width" === e || "height" === e ? 1 : 0));
      }
    }
  }], prefilter:function(a, b) {
    b ? S.prefilters.unshift(a) : S.prefilters.push(a);
  }});
  n.speed = function(a, b, c) {
    var e = a && "object" == typeof a ? n.extend({}, a) : {complete:c || !c && b || n.isFunction(a) && a, duration:a, easing:c && b || b && !n.isFunction(b) && b};
    return e.duration = n.fx.off ? 0 : "number" == typeof e.duration ? e.duration : e.duration in n.fx.speeds ? n.fx.speeds[e.duration] : n.fx.speeds._default, null != e.queue && !0 !== e.queue || (e.queue = "fx"), e.old = e.complete, e.complete = function() {
      n.isFunction(e.old) && e.old.call(this);
      e.queue && n.dequeue(this, e.queue);
    }, e;
  };
  n.fn.extend({fadeTo:function(a, b, c, e) {
    return this.filter(ea).css("opacity", 0).show().end().animate({opacity:b}, a, c, e);
  }, animate:function(a, b, c, e) {
    var d = n.isEmptyObject(a), f = n.speed(b, c, e);
    b = function() {
      var b = S(this, n.extend({}, a), f);
      (d || L.get(this, "finish")) && b.stop(!0);
    };
    return b.finish = b, d || !1 === f.queue ? this.each(b) : this.queue(f.queue, b);
  }, stop:function(a, b, c) {
    var e = function(a) {
      var b = a.stop;
      delete a.stop;
      b(c);
    };
    return "string" != typeof a && (c = b, b = a, a = void 0), b && !1 !== a && this.queue(a || "fx", []), this.each(function() {
      var b = !0, d = null != a && a + "queueHooks", f = n.timers, g = L.get(this);
      if (d) {
        g[d] && g[d].stop && e(g[d]);
      } else {
        for (d in g) {
          g[d] && g[d].stop && Fb.test(d) && e(g[d]);
        }
      }
      for (d = f.length;d--;) {
        f[d].elem !== this || null != a && f[d].queue !== a || (f[d].anim.stop(c), b = !1, f.splice(d, 1));
      }
      !b && c || n.dequeue(this, a);
    });
  }, finish:function(a) {
    return !1 !== a && (a = a || "fx"), this.each(function() {
      var b, c = L.get(this), e = c[a + "queue"];
      b = c[a + "queueHooks"];
      var d = n.timers, f = e ? e.length : 0;
      c.finish = !0;
      n.queue(this, a, []);
      b && b.stop && b.stop.call(this, !0);
      for (b = d.length;b--;) {
        d[b].elem === this && d[b].queue === a && (d[b].anim.stop(!0), d.splice(b, 1));
      }
      for (b = 0;f > b;b++) {
        e[b] && e[b].finish && e[b].finish.call(this);
      }
      delete c.finish;
    });
  }});
  n.each(["toggle", "show", "hide"], function(a, b) {
    var c = n.fn[b];
    n.fn[b] = function(a, e, d) {
      return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(R(b, !0), a, e, d);
    };
  });
  n.each({slideDown:R("show"), slideUp:R("hide"), slideToggle:R("toggle"), fadeIn:{opacity:"show"}, fadeOut:{opacity:"hide"}, fadeToggle:{opacity:"toggle"}}, function(a, b) {
    n.fn[a] = function(a, c, e) {
      return this.animate(b, a, c, e);
    };
  });
  n.timers = [];
  n.fx.tick = function() {
    var a, b = 0, c = n.timers;
    for (la = n.now();b < c.length;b++) {
      a = c[b], a() || c[b] !== a || c.splice(b--, 1);
    }
    c.length || n.fx.stop();
    la = void 0;
  };
  n.fx.timer = function(a) {
    n.timers.push(a);
    a() ? n.fx.start() : n.timers.pop();
  };
  n.fx.interval = 13;
  n.fx.start = function() {
    Da || (Da = a.setInterval(n.fx.tick, n.fx.interval));
  };
  n.fx.stop = function() {
    a.clearInterval(Da);
    Da = null;
  };
  n.fx.speeds = {slow:600, fast:200, _default:400};
  n.fn.delay = function(b, c) {
    return b = n.fx ? n.fx.speeds[b] || b : b, c = c || "fx", this.queue(c, function(c, e) {
      var d = a.setTimeout(c, b);
      e.stop = function() {
        a.clearTimeout(d);
      };
    });
  };
  (function() {
    var a = N.createElement("input"), b = N.createElement("select"), c = b.appendChild(N.createElement("option"));
    a.type = "checkbox";
    P.checkOn = "" !== a.value;
    P.optSelected = c.selected;
    b.disabled = !0;
    P.optDisabled = !c.disabled;
    a = N.createElement("input");
    a.value = "t";
    a.type = "radio";
    P.radioValue = "t" === a.value;
  })();
  var ab, ja = n.expr.attrHandle;
  n.fn.extend({attr:function(a, b) {
    return ba(this, n.attr, a, b, 1 < arguments.length);
  }, removeAttr:function(a) {
    return this.each(function() {
      n.removeAttr(this, a);
    });
  }});
  n.extend({attr:function(a, b, c) {
    var e, d, f = a.nodeType;
    if (3 !== f && 8 !== f && 2 !== f) {
      return "undefined" == typeof a.getAttribute ? n.prop(a, b, c) : (1 === f && n.isXMLDoc(a) || (b = b.toLowerCase(), d = n.attrHooks[b] || (n.expr.match.bool.test(b) ? ab : void 0)), void 0 !== c ? null === c ? void n.removeAttr(a, b) : d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = n.find.attr(a, b), null == e ? void 0 : e));
    }
  }, attrHooks:{type:{set:function(a, b) {
    if (!P.radioValue && "radio" === b && n.nodeName(a, "input")) {
      var c = a.value;
      return a.setAttribute("type", b), c && (a.value = c), b;
    }
  }}}, removeAttr:function(a, b) {
    var c, e, d = 0, f = b && b.match(X);
    if (f && 1 === a.nodeType) {
      for (;c = f[d++];) {
        e = n.propFix[c] || c, n.expr.match.bool.test(c) && (a[e] = !1), a.removeAttribute(c);
      }
    }
  }});
  ab = {set:function(a, b, c) {
    return !1 === b ? n.removeAttr(a, c) : a.setAttribute(c, c), c;
  }};
  n.each(n.expr.match.bool.source.match(/\w+/g), function(a, b) {
    var c = ja[b] || n.find.attr;
    ja[b] = function(a, b, e) {
      var d, f;
      return e || (f = ja[b], ja[b] = d, d = null != c(a, b, e) ? b.toLowerCase() : null, ja[b] = f), d;
    };
  });
  var Gb = /^(?:input|select|textarea|button)$/i, Hb = /^(?:a|area)$/i;
  n.fn.extend({prop:function(a, b) {
    return ba(this, n.prop, a, b, 1 < arguments.length);
  }, removeProp:function(a) {
    return this.each(function() {
      delete this[n.propFix[a] || a];
    });
  }});
  n.extend({prop:function(a, b, c) {
    var e, d, f = a.nodeType;
    if (3 !== f && 8 !== f && 2 !== f) {
      return 1 === f && n.isXMLDoc(a) || (b = n.propFix[b] || b, d = n.propHooks[b]), void 0 !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : a[b] = c : d && "get" in d && null !== (e = d.get(a, b)) ? e : a[b];
    }
  }, propHooks:{tabIndex:{get:function(a) {
    var b = n.find.attr(a, "tabindex");
    return b ? parseInt(b, 10) : Gb.test(a.nodeName) || Hb.test(a.nodeName) && a.href ? 0 : -1;
  }}}, propFix:{"for":"htmlFor", "class":"className"}});
  P.optSelected || (n.propHooks.selected = {get:function(a) {
    a = a.parentNode;
    return a && a.parentNode && a.parentNode.selectedIndex, null;
  }, set:function(a) {
    a = a.parentNode;
    a && (a.selectedIndex, a.parentNode && a.parentNode.selectedIndex);
  }});
  n.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "), function() {
    n.propFix[this.toLowerCase()] = this;
  });
  var Ha = /[\t\r\n\f]/g;
  n.fn.extend({addClass:function(a) {
    var b, c, e, d, f, g, h = 0;
    if (n.isFunction(a)) {
      return this.each(function(b) {
        n(this).addClass(a.call(this, b, W(this)));
      });
    }
    if ("string" == typeof a && a) {
      for (b = a.match(X) || [];c = this[h++];) {
        if (d = W(c), e = 1 === c.nodeType && (" " + d + " ").replace(Ha, " ")) {
          for (g = 0;f = b[g++];) {
            0 > e.indexOf(" " + f + " ") && (e += f + " ");
          }
          e = n.trim(e);
          d !== e && c.setAttribute("class", e);
        }
      }
    }
    return this;
  }, removeClass:function(a) {
    var b, c, e, d, f, g, h = 0;
    if (n.isFunction(a)) {
      return this.each(function(b) {
        n(this).removeClass(a.call(this, b, W(this)));
      });
    }
    if (!arguments.length) {
      return this.attr("class", "");
    }
    if ("string" == typeof a && a) {
      for (b = a.match(X) || [];c = this[h++];) {
        if (d = W(c), e = 1 === c.nodeType && (" " + d + " ").replace(Ha, " ")) {
          for (g = 0;f = b[g++];) {
            for (;-1 < e.indexOf(" " + f + " ");) {
              e = e.replace(" " + f + " ", " ");
            }
          }
          e = n.trim(e);
          d !== e && c.setAttribute("class", e);
        }
      }
    }
    return this;
  }, toggleClass:function(a, b) {
    var c = typeof a;
    return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : n.isFunction(a) ? this.each(function(c) {
      n(this).toggleClass(a.call(this, c, W(this), b), b);
    }) : this.each(function() {
      var b, e, d, f;
      if ("string" === c) {
        for (e = 0, d = n(this), f = a.match(X) || [];b = f[e++];) {
          d.hasClass(b) ? d.removeClass(b) : d.addClass(b);
        }
      } else {
        void 0 !== a && "boolean" !== c || (b = W(this), b && L.set(this, "__className__", b), this.setAttribute && this.setAttribute("class", b || !1 === a ? "" : L.get(this, "__className__") || ""));
      }
    });
  }, hasClass:function(a) {
    var b, c = 0;
    for (a = " " + a + " ";b = this[c++];) {
      if (1 === b.nodeType && -1 < (" " + W(b) + " ").replace(Ha, " ").indexOf(a)) {
        return !0;
      }
    }
    return !1;
  }});
  var Ib = /\r/g, Jb = /[\x20\t\r\n\f]+/g;
  n.fn.extend({val:function(a) {
    var b, c, e, d = this[0];
    if (arguments.length) {
      return e = n.isFunction(a), this.each(function(c) {
        var d;
        1 === this.nodeType && (d = e ? a.call(this, c, n(this).val()) : a, null == d ? d = "" : "number" == typeof d ? d += "" : n.isArray(d) && (d = n.map(d, function(a) {
          return null == a ? "" : a + "";
        })), b = n.valHooks[this.type] || n.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, d, "value") || (this.value = d));
      });
    }
    if (d) {
      return b = n.valHooks[d.type] || n.valHooks[d.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(d, "value")) ? c : (c = d.value, "string" == typeof c ? c.replace(Ib, "") : null == c ? "" : c);
    }
  }});
  n.extend({valHooks:{option:{get:function(a) {
    var b = n.find.attr(a, "value");
    return null != b ? b : n.trim(n.text(a)).replace(Jb, " ");
  }}, select:{get:function(a) {
    for (var b, c = a.options, e = a.selectedIndex, d = "select-one" === a.type || 0 > e, f = d ? null : [], g = d ? e + 1 : c.length, h = 0 > e ? g : d ? e : 0;g > h;h++) {
      if (b = c[h], !(!b.selected && h !== e || (P.optDisabled ? b.disabled : null !== b.getAttribute("disabled")) || b.parentNode.disabled && n.nodeName(b.parentNode, "optgroup"))) {
        if (a = n(b).val(), d) {
          return a;
        }
        f.push(a);
      }
    }
    return f;
  }, set:function(a, b) {
    for (var c, e, d = a.options, f = n.makeArray(b), g = d.length;g--;) {
      e = d[g], (e.selected = -1 < n.inArray(n.valHooks.option.get(e), f)) && (c = !0);
    }
    return c || (a.selectedIndex = -1), f;
  }}}});
  n.each(["radio", "checkbox"], function() {
    n.valHooks[this] = {set:function(a, b) {
      return n.isArray(b) ? a.checked = -1 < n.inArray(n(a).val(), b) : void 0;
    }};
    P.checkOn || (n.valHooks[this].get = function(a) {
      return null === a.getAttribute("value") ? "on" : a.value;
    });
  });
  var bb = /^(?:focusinfocus|focusoutblur)$/;
  n.extend(n.event, {trigger:function(b, c, e, d) {
    var f, g, h, k, l, m, q, r = [e || N], p = qa.call(b, "type") ? b.type : b;
    f = qa.call(b, "namespace") ? b.namespace.split(".") : [];
    if (g = h = e = e || N, 3 !== e.nodeType && 8 !== e.nodeType && !bb.test(p + n.event.triggered) && (-1 < p.indexOf(".") && (f = p.split("."), p = f.shift(), f.sort()), l = 0 > p.indexOf(":") && "on" + p, b = b[n.expando] ? b : new n.Event(p, "object" == typeof b && b), b.isTrigger = d ? 2 : 3, b.namespace = f.join("."), b.rnamespace = b.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = e), c = null == c ? [b] : n.makeArray(c, 
    [b]), q = n.event.special[p] || {}, d || !q.trigger || !1 !== q.trigger.apply(e, c))) {
      if (!d && !q.noBubble && !n.isWindow(e)) {
        k = q.delegateType || p;
        for (bb.test(k + p) || (g = g.parentNode);g;g = g.parentNode) {
          r.push(g), h = g;
        }
        h === (e.ownerDocument || N) && r.push(h.defaultView || h.parentWindow || a);
      }
      for (f = 0;(g = r[f++]) && !b.isPropagationStopped();) {
        b.type = 1 < f ? k : q.bindType || p, (m = (L.get(g, "events") || {})[b.type] && L.get(g, "handle")) && m.apply(g, c), (m = l && g[l]) && m.apply && da(g) && (b.result = m.apply(g, c), !1 === b.result && b.preventDefault());
      }
      return b.type = p, d || b.isDefaultPrevented() || q._default && !1 !== q._default.apply(r.pop(), c) || !da(e) || l && n.isFunction(e[p]) && !n.isWindow(e) && (h = e[l], h && (e[l] = null), n.event.triggered = p, e[p](), n.event.triggered = void 0, h && (e[l] = h)), b.result;
    }
  }, simulate:function(a, b, c) {
    a = n.extend(new n.Event, c, {type:a, isSimulated:!0});
    n.event.trigger(a, null, b);
    a.isDefaultPrevented() && c.preventDefault();
  }});
  n.fn.extend({trigger:function(a, b) {
    return this.each(function() {
      n.event.trigger(a, b, this);
    });
  }, triggerHandler:function(a, b) {
    var c = this[0];
    return c ? n.event.trigger(a, b, c, !0) : void 0;
  }});
  n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
    n.fn[b] = function(a, c) {
      return 0 < arguments.length ? this.on(b, null, a, c) : this.trigger(b);
    };
  });
  n.fn.extend({hover:function(a, b) {
    return this.mouseenter(a).mouseleave(b || a);
  }});
  P.focusin = "onfocusin" in a;
  P.focusin || n.each({focus:"focusin", blur:"focusout"}, function(a, b) {
    var c = function(a) {
      n.event.simulate(b, a.target, n.event.fix(a));
    };
    n.event.special[b] = {setup:function() {
      var e = this.ownerDocument || this, d = L.access(e, b);
      d || e.addEventListener(a, c, !0);
      L.access(e, b, (d || 0) + 1);
    }, teardown:function() {
      var e = this.ownerDocument || this, d = L.access(e, b) - 1;
      d ? L.access(e, b, d) : (e.removeEventListener(a, c, !0), L.remove(e, b));
    }};
  });
  var sa = a.location, Ia = n.now(), Ja = /\?/;
  n.parseJSON = function(a) {
    return JSON.parse(a + "");
  };
  n.parseXML = function(b) {
    var c;
    if (!b || "string" != typeof b) {
      return null;
    }
    try {
      c = (new a.DOMParser).parseFromString(b, "text/xml");
    } catch (e) {
      c = void 0;
    }
    return c && !c.getElementsByTagName("parsererror").length || n.error("Invalid XML: " + b), c;
  };
  var Kb = /#.*$/, cb = /([?&])_=[^&]*/, Lb = /^(.*?):[ \t]*([^\r\n]*)$/gm, Mb = /^(?:GET|HEAD)$/, Nb = /^\/\//, db = {}, Fa = {}, eb = "*/".concat("*"), Ka = N.createElement("a");
  Ka.href = sa.href;
  n.extend({active:0, lastModified:{}, etag:{}, ajaxSettings:{url:sa.href, type:"GET", isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(sa.protocol), global:!0, processData:!0, async:!0, contentType:"application/x-www-form-urlencoded; charset=UTF-8", accepts:{"*":eb, text:"text/plain", html:"text/html", xml:"application/xml, text/xml", json:"application/json, text/javascript"}, contents:{xml:/\bxml\b/, html:/\bhtml/, json:/\bjson\b/}, responseFields:{xml:"responseXML", text:"responseText", 
  json:"responseJSON"}, converters:{"* text":String, "text html":!0, "text json":n.parseJSON, "text xml":n.parseXML}, flatOptions:{url:!0, context:!0}}, ajaxSetup:function(a, b) {
    return b ? ma(ma(a, n.ajaxSettings), b) : ma(n.ajaxSettings, a);
  }, ajaxPrefilter:ta(db), ajaxTransport:ta(Fa), ajax:function(b, c) {
    function e(b, c, h, l) {
      var q, y, D, G, E = c;
      if (2 !== C) {
        C = 2;
        k && a.clearTimeout(k);
        d = void 0;
        g = l || "";
        B.readyState = 0 < b ? 4 : 0;
        l = 200 <= b && 300 > b || 304 === b;
        if (h) {
          D = r;
          for (var x = B, u, J, M, I, R = D.contents, H = D.dataTypes;"*" === H[0];) {
            H.shift(), void 0 === u && (u = D.mimeType || x.getResponseHeader("Content-Type"));
          }
          if (u) {
            for (J in R) {
              if (R[J] && R[J].test(u)) {
                H.unshift(J);
                break;
              }
            }
          }
          if (H[0] in h) {
            M = H[0];
          } else {
            for (J in h) {
              if (!H[0] || D.converters[J + " " + H[0]]) {
                M = J;
                break;
              }
              I || (I = J);
            }
            M = M || I;
          }
          D = M ? (M !== H[0] && H.unshift(M), h[M]) : void 0;
        }
        var F;
        a: {
          h = r;
          u = D;
          J = B;
          M = l;
          var K, T, O;
          D = {};
          x = h.dataTypes.slice();
          if (x[1]) {
            for (K in h.converters) {
              D[K.toLowerCase()] = h.converters[K];
            }
          }
          for (I = x.shift();I;) {
            if (h.responseFields[I] && (J[h.responseFields[I]] = u), !O && M && h.dataFilter && (u = h.dataFilter(u, h.dataType)), O = I, I = x.shift()) {
              if ("*" === I) {
                I = O;
              } else {
                if ("*" !== O && O !== I) {
                  if (K = D[O + " " + I] || D["* " + I], !K) {
                    for (F in D) {
                      if (T = F.split(" "), T[1] === I && (K = D[O + " " + T[0]] || D["* " + T[0]])) {
                        !0 === K ? K = D[F] : !0 !== D[F] && (I = T[0], x.unshift(T[1]));
                        break;
                      }
                    }
                  }
                  if (!0 !== K) {
                    if (K && h["throws"]) {
                      u = K(u);
                    } else {
                      try {
                        u = K(u);
                      } catch (Y) {
                        F = {state:"parsererror", error:K ? Y : "No conversion from " + O + " to " + I};
                        break a;
                      }
                    }
                  }
                }
              }
            }
          }
          F = {state:"success", data:u};
        }
        D = F;
        l ? (r.ifModified && (G = B.getResponseHeader("Last-Modified"), G && (n.lastModified[f] = G), G = B.getResponseHeader("etag"), G && (n.etag[f] = G)), 204 === b || "HEAD" === r.type ? E = "nocontent" : 304 === b ? E = "notmodified" : (E = D.state, q = D.data, y = D.error, l = !y)) : (y = E, !b && E || (E = "error", 0 > b && (b = 0)));
        B.status = b;
        B.statusText = (c || E) + "";
        l ? w.resolveWith(p, [q, E, B]) : w.rejectWith(p, [B, E, y]);
        B.statusCode(z);
        z = void 0;
        m && A.trigger(l ? "ajaxSuccess" : "ajaxError", [B, r, l ? q : y]);
        t.fireWith(p, [B, E]);
        m && (A.trigger("ajaxComplete", [B, r]), --n.active || n.event.trigger("ajaxStop"));
      }
    }
    "object" == typeof b && (c = b, b = void 0);
    c = c || {};
    var d, f, g, h, k, l, m, q, r = n.ajaxSetup({}, c), p = r.context || r, A = r.context && (p.nodeType || p.jquery) ? n(p) : n.event, w = n.Deferred(), t = n.Callbacks("once memory"), z = r.statusCode || {}, y = {}, D = {}, C = 0, G = "canceled", B = {readyState:0, getResponseHeader:function(a) {
      var b;
      if (2 === C) {
        if (!h) {
          for (h = {};b = Lb.exec(g);) {
            h[b[1].toLowerCase()] = b[2];
          }
        }
        b = h[a.toLowerCase()];
      }
      return null == b ? null : b;
    }, getAllResponseHeaders:function() {
      return 2 === C ? g : null;
    }, setRequestHeader:function(a, b) {
      var c = a.toLowerCase();
      return C || (a = D[c] = D[c] || a, y[a] = b), this;
    }, overrideMimeType:function(a) {
      return C || (r.mimeType = a), this;
    }, statusCode:function(a) {
      var b;
      if (a) {
        if (2 > C) {
          for (b in a) {
            z[b] = [z[b], a[b]];
          }
        } else {
          B.always(a[B.status]);
        }
      }
      return this;
    }, abort:function(a) {
      a = a || G;
      return d && d.abort(a), e(0, a), this;
    }};
    if (w.promise(B).complete = t.add, B.success = B.done, B.error = B.fail, r.url = ((b || r.url || sa.href) + "").replace(Kb, "").replace(Nb, sa.protocol + "//"), r.type = c.method || c.type || r.method || r.type, r.dataTypes = n.trim(r.dataType || "*").toLowerCase().match(X) || [""], null == r.crossDomain) {
      l = N.createElement("a");
      try {
        l.href = r.url, l.href = l.href, r.crossDomain = Ka.protocol + "//" + Ka.host != l.protocol + "//" + l.host;
      } catch (E) {
        r.crossDomain = !0;
      }
    }
    if (r.data && r.processData && "string" != typeof r.data && (r.data = n.param(r.data, r.traditional)), ca(db, r, c, B), 2 === C) {
      return B;
    }
    (m = n.event && r.global) && 0 === n.active++ && n.event.trigger("ajaxStart");
    r.type = r.type.toUpperCase();
    r.hasContent = !Mb.test(r.type);
    f = r.url;
    r.hasContent || (r.data && (f = r.url += (Ja.test(f) ? "&" : "?") + r.data, delete r.data), !1 === r.cache && (r.url = cb.test(f) ? f.replace(cb, "$1_=" + Ia++) : f + (Ja.test(f) ? "&" : "?") + "_=" + Ia++));
    r.ifModified && (n.lastModified[f] && B.setRequestHeader("If-Modified-Since", n.lastModified[f]), n.etag[f] && B.setRequestHeader("If-None-Match", n.etag[f]));
    (r.data && r.hasContent && !1 !== r.contentType || c.contentType) && B.setRequestHeader("Content-Type", r.contentType);
    B.setRequestHeader("Accept", r.dataTypes[0] && r.accepts[r.dataTypes[0]] ? r.accepts[r.dataTypes[0]] + ("*" !== r.dataTypes[0] ? ", " + eb + "; q=0.01" : "") : r.accepts["*"]);
    for (q in r.headers) {
      B.setRequestHeader(q, r.headers[q]);
    }
    if (r.beforeSend && (!1 === r.beforeSend.call(p, B, r) || 2 === C)) {
      return B.abort();
    }
    G = "abort";
    for (q in{success:1, error:1, complete:1}) {
      B[q](r[q]);
    }
    if (d = ca(Fa, r, c, B)) {
      if (B.readyState = 1, m && A.trigger("ajaxSend", [B, r]), 2 === C) {
        return B;
      }
      r.async && 0 < r.timeout && (k = a.setTimeout(function() {
        B.abort("timeout");
      }, r.timeout));
      try {
        C = 1, d.send(y, e);
      } catch (E) {
        if (!(2 > C)) {
          throw E;
        }
        e(-1, E);
      }
    } else {
      e(-1, "No Transport");
    }
    return B;
  }, getJSON:function(a, b, c) {
    return n.get(a, b, c, "json");
  }, getScript:function(a, b) {
    return n.get(a, void 0, b, "script");
  }});
  n.each(["get", "post"], function(a, b) {
    n[b] = function(a, c, e, d) {
      return n.isFunction(c) && (d = d || e, e = c, c = void 0), n.ajax(n.extend({url:a, type:b, dataType:d, data:c, success:e}, n.isPlainObject(a) && a));
    };
  });
  n._evalUrl = function(a) {
    return n.ajax({url:a, type:"GET", dataType:"script", async:!1, global:!1, "throws":!0});
  };
  n.fn.extend({wrapAll:function(a) {
    var b;
    return n.isFunction(a) ? this.each(function(b) {
      n(this).wrapAll(a.call(this, b));
    }) : (this[0] && (b = n(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
      for (var a = this;a.firstElementChild;) {
        a = a.firstElementChild;
      }
      return a;
    }).append(this)), this);
  }, wrapInner:function(a) {
    return n.isFunction(a) ? this.each(function(b) {
      n(this).wrapInner(a.call(this, b));
    }) : this.each(function() {
      var b = n(this), c = b.contents();
      c.length ? c.wrapAll(a) : b.append(a);
    });
  }, wrap:function(a) {
    var b = n.isFunction(a);
    return this.each(function(c) {
      n(this).wrapAll(b ? a.call(this, c) : a);
    });
  }, unwrap:function() {
    return this.parent().each(function() {
      n.nodeName(this, "body") || n(this).replaceWith(this.childNodes);
    }).end();
  }});
  n.expr.filters.hidden = function(a) {
    return !n.expr.filters.visible(a);
  };
  n.expr.filters.visible = function(a) {
    return 0 < a.offsetWidth || 0 < a.offsetHeight || 0 < a.getClientRects().length;
  };
  var Ob = /%20/g, pb = /\[\]$/, fb = /\r?\n/g, Pb = /^(?:submit|button|image|reset|file)$/i, Qb = /^(?:input|select|textarea|keygen)/i;
  n.param = function(a, b) {
    var c, e = [], d = function(a, b) {
      b = n.isFunction(b) ? b() : null == b ? "" : b;
      e[e.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b);
    };
    if (void 0 === b && (b = n.ajaxSettings && n.ajaxSettings.traditional), n.isArray(a) || a.jquery && !n.isPlainObject(a)) {
      n.each(a, function() {
        d(this.name, this.value);
      });
    } else {
      for (c in a) {
        ua(c, a[c], b, d);
      }
    }
    return e.join("&").replace(Ob, "+");
  };
  n.fn.extend({serialize:function() {
    return n.param(this.serializeArray());
  }, serializeArray:function() {
    return this.map(function() {
      var a = n.prop(this, "elements");
      return a ? n.makeArray(a) : this;
    }).filter(function() {
      var a = this.type;
      return this.name && !n(this).is(":disabled") && Qb.test(this.nodeName) && !Pb.test(a) && (this.checked || !Ya.test(a));
    }).map(function(a, b) {
      var c = n(this).val();
      return null == c ? null : n.isArray(c) ? n.map(c, function(a) {
        return {name:b.name, value:a.replace(fb, "\r\n")};
      }) : {name:b.name, value:c.replace(fb, "\r\n")};
    }).get();
  }});
  n.ajaxSettings.xhr = function() {
    try {
      return new a.XMLHttpRequest;
    } catch (b) {
    }
  };
  var Rb = {0:200, 1223:204}, pa = n.ajaxSettings.xhr();
  P.cors = !!pa && "withCredentials" in pa;
  P.ajax = pa = !!pa;
  n.ajaxTransport(function(b) {
    var c, e;
    return P.cors || pa && !b.crossDomain ? {send:function(d, f) {
      var g, h = b.xhr();
      if (h.open(b.type, b.url, b.async, b.username, b.password), b.xhrFields) {
        for (g in b.xhrFields) {
          h[g] = b.xhrFields[g];
        }
      }
      b.mimeType && h.overrideMimeType && h.overrideMimeType(b.mimeType);
      b.crossDomain || d["X-Requested-With"] || (d["X-Requested-With"] = "XMLHttpRequest");
      for (g in d) {
        h.setRequestHeader(g, d[g]);
      }
      c = function(a) {
        return function() {
          c && (c = e = h.onload = h.onerror = h.onabort = h.onreadystatechange = null, "abort" === a ? h.abort() : "error" === a ? "number" != typeof h.status ? f(0, "error") : f(h.status, h.statusText) : f(Rb[h.status] || h.status, h.statusText, "text" !== (h.responseType || "text") || "string" != typeof h.responseText ? {binary:h.response} : {text:h.responseText}, h.getAllResponseHeaders()));
        };
      };
      h.onload = c();
      e = h.onerror = c("error");
      void 0 !== h.onabort ? h.onabort = e : h.onreadystatechange = function() {
        4 === h.readyState && a.setTimeout(function() {
          c && e();
        });
      };
      c = c("abort");
      try {
        h.send(b.hasContent && b.data || null);
      } catch (k) {
        if (c) {
          throw k;
        }
      }
    }, abort:function() {
      c && c();
    }} : void 0;
  });
  n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"}, contents:{script:/\b(?:java|ecma)script\b/}, converters:{"text script":function(a) {
    return n.globalEval(a), a;
  }}});
  n.ajaxPrefilter("script", function(a) {
    void 0 === a.cache && (a.cache = !1);
    a.crossDomain && (a.type = "GET");
  });
  n.ajaxTransport("script", function(a) {
    if (a.crossDomain) {
      var b, c;
      return {send:function(e, d) {
        b = n("<script>").prop({charset:a.scriptCharset, src:a.url}).on("load error", c = function(a) {
          b.remove();
          c = null;
          a && d("error" === a.type ? 404 : 200, a.type);
        });
        N.head.appendChild(b[0]);
      }, abort:function() {
        c && c();
      }};
    }
  });
  var gb = [], La = /(=)\?(?=&|$)|\?\?/;
  n.ajaxSetup({jsonp:"callback", jsonpCallback:function() {
    var a = gb.pop() || n.expando + "_" + Ia++;
    return this[a] = !0, a;
  }});
  n.ajaxPrefilter("json jsonp", function(b, c, e) {
    var d, f, g, h = !1 !== b.jsonp && (La.test(b.url) ? "url" : "string" == typeof b.data && 0 === (b.contentType || "").indexOf("application/x-www-form-urlencoded") && La.test(b.data) && "data");
    return h || "jsonp" === b.dataTypes[0] ? (d = b.jsonpCallback = n.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(La, "$1" + d) : !1 !== b.jsonp && (b.url += (Ja.test(b.url) ? "&" : "?") + b.jsonp + "=" + d), b.converters["script json"] = function() {
      return g || n.error(d + " was not called"), g[0];
    }, b.dataTypes[0] = "json", f = a[d], a[d] = function() {
      g = arguments;
    }, e.always(function() {
      void 0 === f ? n(a).removeProp(d) : a[d] = f;
      b[d] && (b.jsonpCallback = c.jsonpCallback, gb.push(d));
      g && n.isFunction(f) && f(g[0]);
      g = f = void 0;
    }), "script") : void 0;
  });
  n.parseHTML = function(a, b, c) {
    if (!a || "string" != typeof a) {
      return null;
    }
    "boolean" == typeof b && (c = b, b = !1);
    b = b || N;
    var e = Va.exec(a);
    c = !c && [];
    return e ? [b.createElement(e[1])] : (e = m([a], b, c), c && c.length && n(c).remove(), n.merge([], e.childNodes));
  };
  var hb = n.fn.load;
  n.fn.load = function(a, b, c) {
    if ("string" != typeof a && hb) {
      return hb.apply(this, arguments);
    }
    var e, d, f, g = this, h = a.indexOf(" ");
    return -1 < h && (e = n.trim(a.slice(h)), a = a.slice(0, h)), n.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (d = "POST"), 0 < g.length && n.ajax({url:a, type:d || "GET", dataType:"html", data:b}).done(function(a) {
      f = arguments;
      g.html(e ? n("<div>").append(n.parseHTML(a)).find(e) : a);
    }).always(c && function(a, b) {
      g.each(function() {
        c.apply(g, f || [a.responseText, b, a]);
      });
    }), this;
  };
  n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(a, b) {
    n.fn[b] = function(a) {
      return this.on(b, a);
    };
  });
  n.expr.filters.animated = function(a) {
    return n.grep(n.timers, function(b) {
      return a === b.elem;
    }).length;
  };
  n.offset = {setOffset:function(a, b, c) {
    var e, d, f, g, h, k, l = n.css(a, "position"), m = n(a), r = {};
    "static" === l && (a.style.position = "relative");
    h = m.offset();
    f = n.css(a, "top");
    k = n.css(a, "left");
    ("absolute" === l || "fixed" === l) && -1 < (f + k).indexOf("auto") ? (e = m.position(), g = e.top, d = e.left) : (g = parseFloat(f) || 0, d = parseFloat(k) || 0);
    n.isFunction(b) && (b = b.call(a, c, n.extend({}, h)));
    null != b.top && (r.top = b.top - h.top + g);
    null != b.left && (r.left = b.left - h.left + d);
    "using" in b ? b.using.call(a, r) : m.css(r);
  }};
  n.fn.extend({offset:function(a) {
    if (arguments.length) {
      return void 0 === a ? this : this.each(function(b) {
        n.offset.setOffset(this, a, b);
      });
    }
    var b, c, e = this[0], d = {top:0, left:0}, f = e && e.ownerDocument;
    if (f) {
      return b = f.documentElement, n.contains(b, e) ? (d = e.getBoundingClientRect(), c = Aa(f), {top:d.top + c.pageYOffset - b.clientTop, left:d.left + c.pageXOffset - b.clientLeft}) : d;
    }
  }, position:function() {
    if (this[0]) {
      var a, b, c = this[0], e = {top:0, left:0};
      return "fixed" === n.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), n.nodeName(a[0], "html") || (e = a.offset()), e.top += n.css(a[0], "borderTopWidth", !0), e.left += n.css(a[0], "borderLeftWidth", !0)), {top:b.top - e.top - n.css(c, "marginTop", !0), left:b.left - e.left - n.css(c, "marginLeft", !0)};
    }
  }, offsetParent:function() {
    return this.map(function() {
      for (var a = this.offsetParent;a && "static" === n.css(a, "position");) {
        a = a.offsetParent;
      }
      return a || ra;
    });
  }});
  n.each({scrollLeft:"pageXOffset", scrollTop:"pageYOffset"}, function(a, b) {
    var c = "pageYOffset" === b;
    n.fn[a] = function(e) {
      return ba(this, function(a, e, d) {
        var f = Aa(a);
        return void 0 === d ? f ? f[b] : a[e] : void(f ? f.scrollTo(c ? f.pageXOffset : d, c ? d : f.pageYOffset) : a[e] = d);
      }, a, e, arguments.length);
    };
  });
  n.each(["top", "left"], function(a, b) {
    n.cssHooks[b] = C(P.pixelPosition, function(a, c) {
      return c ? (c = D(a, b), Ea.test(c) ? n(a).position()[b] + "px" : c) : void 0;
    });
  });
  n.each({Height:"height", Width:"width"}, function(a, b) {
    n.each({padding:"inner" + a, content:b, "":"outer" + a}, function(c, e) {
      n.fn[e] = function(e, d) {
        var f = arguments.length && (c || "boolean" != typeof e), g = c || (!0 === e || !0 === d ? "margin" : "border");
        return ba(this, function(b, c, e) {
          var d;
          return n.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (d = b.documentElement, Math.max(b.body["scroll" + a], d["scroll" + a], b.body["offset" + a], d["offset" + a], d["client" + a])) : void 0 === e ? n.css(b, c, g) : n.style(b, c, e, g);
        }, b, f ? e : void 0, f, null);
      };
    });
  });
  n.fn.extend({bind:function(a, b, c) {
    return this.on(a, null, b, c);
  }, unbind:function(a, b) {
    return this.off(a, null, b);
  }, delegate:function(a, b, c, e) {
    return this.on(b, a, c, e);
  }, undelegate:function(a, b, c) {
    return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c);
  }, size:function() {
    return this.length;
  }});
  n.fn.andSelf = n.fn.addBack;
  "function" == typeof define && define.amd && define("jquery", [], function() {
    return n;
  });
  var Sb = a.jQuery, Tb = a.$;
  return n.noConflict = function(b) {
    return a.$ === n && (a.$ = Tb), b && a.jQuery === n && (a.jQuery = Sb), n;
  }, b || (a.jQuery = a.$ = n), n;
});
!function(a) {
  var b = function() {
    var a = {"America/Denver":["America/Mazatlan"], "America/Chicago":["America/Mexico_City"], "America/Santiago":["America/Asuncion", "America/Campo_Grande"], "America/Montevideo":["America/Sao_Paulo"], "Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "), "Pacific/Auckland":["Pacific/Fiji"], "America/Los_Angeles":["America/Santa_Isabel"], "America/New_York":["America/Havana"], "America/Halifax":["America/Goose_Bay"], "America/Godthab":["America/Miquelon"], 
    "Asia/Dubai":["Asia/Yerevan"], "Asia/Jakarta":["Asia/Krasnoyarsk"], "Asia/Shanghai":["Asia/Irkutsk", "Australia/Perth"], "Australia/Sydney":["Australia/Lord_Howe"], "Asia/Tokyo":["Asia/Yakutsk"], "Asia/Dhaka":["Asia/Omsk"], "Asia/Baku":["Asia/Yerevan"], "Australia/Brisbane":["Asia/Vladivostok"], "Pacific/Noumea":["Asia/Vladivostok"], "Pacific/Majuro":["Asia/Kamchatka", "Pacific/Fiji"], "Pacific/Tongatapu":["Pacific/Apia"], "Asia/Baghdad":["Europe/Minsk", "Europe/Moscow"], "Asia/Karachi":["Asia/Yekaterinburg"], 
    "Africa/Johannesburg":["Asia/Gaza", "Africa/Cairo"]}, f = function(a) {
      a = -a.getTimezoneOffset();
      return null !== a ? a : 0;
    }, g = function() {
      var a = f(new Date(2014, 0, 2)), b = f(new Date(2014, 5, 2)), c = a - b;
      return 0 > c ? a + ",1" : 0 < c ? b + ",1,s" : a + ",0";
    }, c = function() {
      if ("undefined" != typeof Intl && "undefined" != typeof Intl.DateTimeFormat) {
        var a = Intl.DateTimeFormat();
        if ("undefined" != typeof a && "undefined" != typeof a.resolvedOptions) {
          return a.resolvedOptions().timeZone;
        }
      }
    }, e = function p(a, b, c) {
      "undefined" == typeof b && (b = 864E5, c = 36E5);
      var e = (new Date(a.getTime() - b)).getTime();
      a = a.getTime() + b;
      for (var d = (new Date(e)).getTimezoneOffset(), f = null;a - c > e;) {
        var g = new Date(e);
        if (g.getTimezoneOffset() !== d) {
          f = g;
          break;
        }
        e += c;
      }
      return 864E5 === b ? p(f, 36E5, 6E4) : 36E5 === b ? p(f, 6E4, 1E3) : f;
    }, h = function(a, b, c, e) {
      if ("N/A" !== c) {
        return c;
      }
      if ("Asia/Beirut" === b) {
        if ("Africa/Cairo" === e.name && 13983768E5 === a[6].s && 14116788E5 === a[6].e || "Asia/Jerusalem" === e.name && 13959648E5 === a[6].s && 14118588E5 === a[6].e) {
          return 0;
        }
      } else {
        if ("America/Santiago" === b) {
          if ("America/Asuncion" === e.name && 14124816E5 === a[6].s && 1397358E6 === a[6].e || "America/Campo_Grande" === e.name && 14136912E5 === a[6].s && 13925196E5 === a[6].e) {
            return 0;
          }
        } else {
          if ("America/Montevideo" === b) {
            if ("America/Sao_Paulo" === e.name && 14136876E5 === a[6].s && 1392516E6 === a[6].e) {
              return 0;
            }
          } else {
            if ("Pacific/Auckland" === b && "Pacific/Fiji" === e.name && 14142456E5 === a[6].s && 13961016E5 === a[6].e) {
              return 0;
            }
          }
        }
      }
      return c;
    }, k = function(c, e) {
      for (var f = {}, g = b.olson.dst_rules.zones, k = g.length, l = a[e], r = 0;k > r;r++) {
        var A = g[r], E;
        E = g[r];
        for (var G = 0, F = 0;F < c.length;F++) {
          if (E.rules[F] && c[F]) {
            if (!(c[F].s >= E.rules[F].s && c[F].e <= E.rules[F].e)) {
              G = "N/A";
              break;
            }
            if (G = 0, G += Math.abs(c[F].s - E.rules[F].s), G += Math.abs(E.rules[F].e - c[F].e), 864E6 < G) {
              G = "N/A";
              break;
            }
          }
        }
        E = h(c, e, G, E);
        "N/A" !== E && (f[A.name] = E);
      }
      for (var x in f) {
        if (f.hasOwnProperty(x) && -1 != l.indexOf(x)) {
          return x;
        }
      }
      return e;
    }, l = function(a) {
      var c = function() {
        for (var a = [], c = 0;c < b.olson.dst_rules.years.length;c++) {
          var d;
          d = b.olson.dst_rules.years[c];
          var f = (new Date(d, 0, 1, 0, 0, 1, 0)).getTime();
          d = (new Date(d, 12, 31, 23, 59, 59)).getTime();
          for (var g = (new Date(f)).getTimezoneOffset(), h = null, k = null;d - 864E5 > f;) {
            var l = new Date(f), m = l.getTimezoneOffset();
            m !== g && (g > m && (h = l), m > g && (k = l), g = m);
            f += 864E5;
          }
          d = h && k ? {s:e(h).getTime(), e:e(k).getTime()} : !1;
          a.push(d);
        }
        return a;
      }();
      return function(a) {
        for (var b = 0;b < a.length;b++) {
          if (!1 !== a[b]) {
            return !0;
          }
        }
        return !1;
      }(c) ? k(c, a) : a;
    };
    return {determine:function() {
      var e = c();
      return e || (e = b.olson.timezones[g()], "undefined" != typeof a[e] && (e = l(e))), {name:function() {
        return e;
      }};
    }};
  }();
  b.olson = b.olson || {};
  b.olson.timezones = {"-720,0":"Etc/GMT+12", "-660,0":"Pacific/Pago_Pago", "-660,1,s":"Pacific/Apia", "-600,1":"America/Adak", "-600,0":"Pacific/Honolulu", "-570,0":"Pacific/Marquesas", "-540,0":"Pacific/Gambier", "-540,1":"America/Anchorage", "-480,1":"America/Los_Angeles", "-480,0":"Pacific/Pitcairn", "-420,0":"America/Phoenix", "-420,1":"America/Denver", "-360,0":"America/Guatemala", "-360,1":"America/Chicago", "-360,1,s":"Pacific/Easter", "-300,0":"America/Bogota", "-300,1":"America/New_York", 
  "-270,0":"America/Caracas", "-240,1":"America/Halifax", "-240,0":"America/Santo_Domingo", "-240,1,s":"America/Santiago", "-210,1":"America/St_Johns", "-180,1":"America/Godthab", "-180,0":"America/Argentina/Buenos_Aires", "-180,1,s":"America/Montevideo", "-120,0":"America/Noronha", "-120,1":"America/Noronha", "-60,1":"Atlantic/Azores", "-60,0":"Atlantic/Cape_Verde", "0,0":"UTC", "0,1":"Europe/London", "60,1":"Europe/Berlin", "60,0":"Africa/Lagos", "60,1,s":"Africa/Windhoek", "120,1":"Asia/Beirut", 
  "120,0":"Africa/Johannesburg", "180,0":"Asia/Baghdad", "180,1":"Europe/Moscow", "210,1":"Asia/Tehran", "240,0":"Asia/Dubai", "240,1":"Asia/Baku", "270,0":"Asia/Kabul", "300,1":"Asia/Yekaterinburg", "300,0":"Asia/Karachi", "330,0":"Asia/Kolkata", "345,0":"Asia/Kathmandu", "360,0":"Asia/Dhaka", "360,1":"Asia/Omsk", "390,0":"Asia/Rangoon", "420,1":"Asia/Krasnoyarsk", "420,0":"Asia/Jakarta", "480,0":"Asia/Shanghai", "480,1":"Asia/Irkutsk", "525,0":"Australia/Eucla", "525,1,s":"Australia/Eucla", "540,1":"Asia/Yakutsk", 
  "540,0":"Asia/Tokyo", "570,0":"Australia/Darwin", "570,1,s":"Australia/Adelaide", "600,0":"Australia/Brisbane", "600,1":"Asia/Vladivostok", "600,1,s":"Australia/Sydney", "630,1,s":"Australia/Lord_Howe", "660,1":"Asia/Kamchatka", "660,0":"Pacific/Noumea", "690,0":"Pacific/Norfolk", "720,1,s":"Pacific/Auckland", "720,0":"Pacific/Majuro", "765,1,s":"Pacific/Chatham", "780,0":"Pacific/Tongatapu", "780,1,s":"Pacific/Apia", "840,0":"Pacific/Kiritimati"};
  b.olson.dst_rules = {years:[2008, 2009, 2010, 2011, 2012, 2013, 2014], zones:[{name:"Africa/Cairo", rules:[{e:12199572E5, s:12090744E5}, {e:1250802E6, s:1240524E6}, {e:12858804E5, s:12840696E5}, !1, !1, !1, {e:14116788E5, s:1406844E6}]}, {name:"America/Asuncion", rules:[{e:12050316E5, s:12243888E5}, {e:12364812E5, s:12558384E5}, {e:12709548E5, s:12860784E5}, {e:13024044E5, s:1317528E6}, {e:1333854E6, s:13495824E5}, {e:1364094E6, s:1381032E6}, {e:13955436E5, s:14124816E5}]}, {name:"America/Campo_Grande", 
  rules:[{e:12032172E5, s:12243888E5}, {e:12346668E5, s:12558384E5}, {e:12667212E5, s:1287288E6}, {e:12981708E5, s:13187376E5}, {e:13302252E5, s:1350792E6}, {e:136107E7, s:13822416E5}, {e:13925196E5, s:14136912E5}]}, {name:"America/Goose_Bay", rules:[{e:122559486E4, s:120503526E4}, {e:125704446E4, s:123648486E4}, {e:128909886E4, s:126853926E4}, {e:13205556E5, s:129998886E4}, {e:13520052E5, s:13314456E5}, {e:13834548E5, s:13628952E5}, {e:14149044E5, s:13943448E5}]}, {name:"America/Havana", rules:[{e:12249972E5, 
  s:12056436E5}, {e:12564468E5, s:12364884E5}, {e:12885012E5, s:12685428E5}, {e:13211604E5, s:13005972E5}, {e:13520052E5, s:13332564E5}, {e:13834548E5, s:13628916E5}, {e:14149044E5, s:13943412E5}]}, {name:"America/Mazatlan", rules:[{e:1225008E6, s:12074724E5}, {e:12564576E5, s:1238922E6}, {e:1288512E6, s:12703716E5}, {e:13199616E5, s:13018212E5}, {e:13514112E5, s:13332708E5}, {e:13828608E5, s:13653252E5}, {e:14143104E5, s:13967748E5}]}, {name:"America/Mexico_City", rules:[{e:12250044E5, s:12074688E5}, 
  {e:1256454E6, s:12389184E5}, {e:12885084E5, s:1270368E6}, {e:1319958E6, s:13018176E5}, {e:13514076E5, s:13332672E5}, {e:13828572E5, s:13653216E5}, {e:14143068E5, s:13967712E5}]}, {name:"America/Miquelon", rules:[{e:12255984E5, s:12050388E5}, {e:1257048E6, s:12364884E5}, {e:12891024E5, s:12685428E5}, {e:1320552E6, s:12999924E5}, {e:13520016E5, s:1331442E6}, {e:13834512E5, s:13628916E5}, {e:14149008E5, s:13943412E5}]}, {name:"America/Santa_Isabel", rules:[{e:12250116E5, s:1207476E6}, {e:12564612E5, 
  s:12389256E5}, {e:12885156E5, s:12703752E5}, {e:13199652E5, s:13018248E5}, {e:13514148E5, s:13332744E5}, {e:13828644E5, s:13653288E5}, {e:1414314E6, s:13967784E5}]}, {name:"America/Sao_Paulo", rules:[{e:12032136E5, s:12243852E5}, {e:12346632E5, s:12558348E5}, {e:12667176E5, s:12872844E5}, {e:12981672E5, s:1318734E6}, {e:13302216E5, s:13507884E5}, {e:13610664E5, s:1382238E6}, {e:1392516E6, s:14136876E5}]}, {name:"Asia/Amman", rules:[{e:1225404E6, s:12066552E5}, {e:12568536E5, s:12381048E5}, {e:12883032E5, 
  s:12695544E5}, {e:13197528E5, s:13016088E5}, !1, !1, {e:14147064E5, s:13959576E5}]}, {name:"Asia/Damascus", rules:[{e:12254868E5, s:120726E7}, {e:125685E7, s:12381048E5}, {e:12882996E5, s:12701592E5}, {e:13197492E5, s:13016088E5}, {e:13511988E5, s:13330584E5}, {e:13826484E5, s:1364508E6}, {e:14147028E5, s:13959576E5}]}, {name:"Asia/Dubai", rules:[!1, !1, !1, !1, !1, !1, !1]}, {name:"Asia/Gaza", rules:[{e:12199572E5, s:12066552E5}, {e:12520152E5, s:12381048E5}, {e:1281474E6, s:126964086E4}, {e:1312146E6, 
  s:130160886E4}, {e:13481784E5, s:13330584E5}, {e:13802292E5, s:1364508E6}, {e:14116788E5, s:13959576E5}]}, {name:"Asia/Irkutsk", rules:[{e:12249576E5, s:12068136E5}, {e:12564072E5, s:12382632E5}, {e:12884616E5, s:12697128E5}, !1, !1, !1, !1]}, {name:"Asia/Jerusalem", rules:[{e:12231612E5, s:12066624E5}, {e:1254006E6, s:1238112E6}, {e:1284246E6, s:12695616E5}, {e:131751E7, s:1301616E6}, {e:13483548E5, s:13330656E5}, {e:13828284E5, s:13645152E5}, {e:1414278E6, s:13959648E5}]}, {name:"Asia/Kamchatka", 
  rules:[{e:12249432E5, s:12067992E5}, {e:12563928E5, s:12382488E5}, {e:12884508E5, s:12696984E5}, !1, !1, !1, !1]}, {name:"Asia/Krasnoyarsk", rules:[{e:12249612E5, s:12068172E5}, {e:12564108E5, s:12382668E5}, {e:12884652E5, s:12697164E5}, !1, !1, !1, !1]}, {name:"Asia/Omsk", rules:[{e:12249648E5, s:12068208E5}, {e:12564144E5, s:12382704E5}, {e:12884688E5, s:126972E7}, !1, !1, !1, !1]}, {name:"Asia/Vladivostok", rules:[{e:12249504E5, s:12068064E5}, {e:12564E8, s:1238256E6}, {e:12884544E5, s:12697056E5}, 
  !1, !1, !1, !1]}, {name:"Asia/Yakutsk", rules:[{e:1224954E6, s:120681E7}, {e:12564036E5, s:12382596E5}, {e:1288458E6, s:12697092E5}, !1, !1, !1, !1]}, {name:"Asia/Yekaterinburg", rules:[{e:12249684E5, s:12068244E5}, {e:1256418E6, s:1238274E6}, {e:12884724E5, s:12697236E5}, !1, !1, !1, !1]}, {name:"Asia/Yerevan", rules:[{e:1224972E6, s:1206828E6}, {e:12564216E5, s:12382776E5}, {e:1288476E6, s:12697272E5}, {e:13199256E5, s:13011768E5}, !1, !1, !1]}, {name:"Australia/Lord_Howe", rules:[{e:12074076E5, 
  s:12231342E5}, {e:12388572E5, s:12545838E5}, {e:12703068E5, s:12860334E5}, {e:13017564E5, s:1317483E6}, {e:1333206E6, s:13495374E5}, {e:13652604E5, s:1380987E6}, {e:139671E7, s:14124366E5}]}, {name:"Australia/Perth", rules:[{e:12068136E5, s:12249576E5}, !1, !1, !1, !1, !1, !1]}, {name:"Europe/Helsinki", rules:[{e:12249828E5, s:12068388E5}, {e:12564324E5, s:12382884E5}, {e:12884868E5, s:1269738E6}, {e:13199364E5, s:13011876E5}, {e:1351386E6, s:13326372E5}, {e:13828356E5, s:13646916E5}, {e:14142852E5, 
  s:13961412E5}]}, {name:"Europe/Minsk", rules:[{e:12249792E5, s:12068352E5}, {e:12564288E5, s:12382848E5}, {e:12884832E5, s:12697344E5}, !1, !1, !1, !1]}, {name:"Europe/Moscow", rules:[{e:12249756E5, s:12068316E5}, {e:12564252E5, s:12382812E5}, {e:12884796E5, s:12697308E5}, !1, !1, !1, !1]}, {name:"Pacific/Apia", rules:[!1, !1, !1, {e:13017528E5, s:13168728E5}, {e:13332024E5, s:13489272E5}, {e:13652568E5, s:13803768E5}, {e:13967064E5, s:14118264E5}]}, {name:"Pacific/Fiji", rules:[!1, !1, {e:12696984E5, 
  s:12878424E5}, {e:13271544E5, s:1319292E6}, {e:1358604E6, s:13507416E5}, {e:139005E7, s:1382796E6}, {e:14215032E5, s:14148504E5}]}]};
  "undefined" != typeof exports ? exports.jstz = b : a.jstz = b;
}(this);
!function(a, b) {
  "object" == typeof module && module.exports ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.Spinner = b();
}(this, function() {
  function a(a, b) {
    var c, e = document.createElement(a || "div");
    for (c in b) {
      e[c] = b[c];
    }
    return e;
  }
  function b(a) {
    for (var b = 1, c = arguments.length;c > b;b++) {
      a.appendChild(arguments[b]);
    }
    return a;
  }
  function d(a, b, c, e) {
    var d = ["opacity", b, ~~(100 * a), c, e].join("-");
    c = .01 + c / e * 100;
    e = Math.max(1 - (1 - a) / b * (100 - c), a);
    var f = l.substring(0, l.indexOf("Animation")).toLowerCase();
    return m[d] || (q.insertRule("@" + (f && "-" + f + "-" || "") + "keyframes " + d + "{0%{opacity:" + e + "}" + c + "%{opacity:" + a + "}" + (c + .01) + "%{opacity:1}" + (c + b) % 100 + "%{opacity:" + a + "}100%{opacity:" + e + "}}", q.cssRules.length), m[d] = 1), d;
  }
  function f(a, b) {
    var c, e, d = a.style;
    if (b = b.charAt(0).toUpperCase() + b.slice(1), void 0 !== d[b]) {
      return b;
    }
    for (e = 0;e < p.length;e++) {
      if (c = p[e] + b, void 0 !== d[c]) {
        return c;
      }
    }
  }
  function g(a, b) {
    for (var c in b) {
      a.style[f(a, c) || c] = b[c];
    }
    return a;
  }
  function c(a) {
    for (var b = 1;b < arguments.length;b++) {
      var c = arguments[b], e;
      for (e in c) {
        void 0 === a[e] && (a[e] = c[e]);
      }
    }
    return a;
  }
  function e(a, b) {
    return "string" == typeof a ? a : a[b % a.length];
  }
  function h(a) {
    this.opts = c(a || {}, h.defaults, w);
  }
  function k() {
    function c(b, e) {
      return a("<" + b + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', e);
    }
    q.addRule(".spin-vml", "behavior:url(#default#VML)");
    h.prototype.lines = function(a, d) {
      function f() {
        return g(c("group", {coordsize:m + " " + m, coordorigin:-l + " " + -l}), {width:m, height:m});
      }
      function h(a, k, m) {
        b(q, b(g(f(), {rotation:360 / d.lines * a + "deg", left:~~k}), b(g(c("roundrect", {arcsize:d.corners}), {width:l, height:d.scale * d.width, left:d.scale * d.radius, top:-d.scale * d.width >> 1, filter:m}), c("fill", {color:e(d.color, a), opacity:d.opacity}), c("stroke", {opacity:0}))));
      }
      var k, l = d.scale * (d.length + d.width), m = 2 * d.scale * l;
      k = -(d.width + d.length) * d.scale * 2 + "px";
      var q = g(f(), {position:"absolute", top:k, left:k});
      if (d.shadow) {
        for (k = 1;k <= d.lines;k++) {
          h(k, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
        }
      }
      for (k = 1;k <= d.lines;k++) {
        h(k);
      }
      return b(a, q);
    };
    h.prototype.opacity = function(a, b, c, e) {
      a = a.firstChild;
      e = e.shadow && e.lines || 0;
      a && b + e < a.childNodes.length && (a = a.childNodes[b + e], a = a && a.firstChild, a = a && a.firstChild, a && (a.opacity = c));
    };
  }
  var l, q, p = ["webkit", "Moz", "ms", "O"], m = {}, w = {lines:12, length:7, width:5, radius:10, scale:1, corners:1, color:"#000", opacity:.25, rotate:0, direction:1, speed:1, trail:100, fps:20, zIndex:2E9, className:"spinner", top:"50%", left:"50%", shadow:!1, hwaccel:!1, position:"absolute"};
  if (h.defaults = {}, c(h.prototype, {spin:function(b) {
    this.stop();
    var c = this, e = c.opts, d = c.el = a(null, {className:e.className});
    if (g(d, {position:e.position, width:0, zIndex:e.zIndex, left:e.left, top:e.top}), b && b.insertBefore(d, b.firstChild || null), d.setAttribute("role", "progressbar"), c.lines(d, c.opts), !l) {
      var f, h = 0, k = (e.lines - 1) * (1 - e.direction) / 2, m = e.fps, q = m / e.speed, p = (1 - e.opacity) / (q * e.trail / 100), w = q / e.lines;
      !function B() {
        h++;
        for (var a = 0;a < e.lines;a++) {
          f = Math.max(1 - (h + (e.lines - a) * w) % q * p, e.opacity), c.opacity(d, a * e.direction + k, f, e);
        }
        c.timeout = c.el && setTimeout(B, ~~(1E3 / m));
      }();
    }
    return c;
  }, stop:function() {
    var a = this.el;
    return a && (clearTimeout(this.timeout), a.parentNode && a.parentNode.removeChild(a), this.el = void 0), this;
  }, lines:function(c, f) {
    function h(b, c) {
      return g(a(), {position:"absolute", width:f.scale * (f.length + f.width) + "px", height:f.scale * f.width + "px", background:b, boxShadow:c, transformOrigin:"left", transform:"rotate(" + ~~(360 / f.lines * m + f.rotate) + "deg) translate(" + f.scale * f.radius + "px,0)", borderRadius:(f.corners * f.scale * f.width >> 1) + "px"});
    }
    for (var k, m = 0, q = (f.lines - 1) * (1 - f.direction) / 2;m < f.lines;m++) {
      k = g(a(), {position:"absolute", top:1 + ~(f.scale * f.width / 2) + "px", transform:f.hwaccel ? "translate3d(0,0,0)" : "", opacity:f.opacity, animation:l && d(f.opacity, f.trail, q + m * f.direction, f.lines) + " " + 1 / f.speed + "s linear infinite"}), f.shadow && b(k, g(h("#000", "0 0 4px #000"), {top:"2px"})), b(c, b(k, h(e(f.color, m), "0 0 1px rgba(0,0,0,.1)")));
    }
    return c;
  }, opacity:function(a, b, c) {
    b < a.childNodes.length && (a.childNodes[b].style.opacity = c);
  }}), "undefined" != typeof document) {
    q = function() {
      var c = a("style", {type:"text/css"});
      return b(document.getElementsByTagName("head")[0], c), c.sheet || c.styleSheet;
    }();
    var t = g(a("group"), {behavior:"url(#default#VML)"});
    !f(t, "transform") && t.adj ? k() : l = f(t, "animation");
  }
  return h;
});
var CTATGlobals = {tutorRunning:!1, Visual:{}, Font:{}, Tab:{Tracker:1, Focus:null, previousFocus:null}, NameSpace:{svg:"http://www.w3.org/2000/svg", xml:"http://www.w3.org/2000/xmlns/", xlink:"http://www.w3.org/1999/xlink", ev:"http://www.w3.org/2001/xml-events", mathml:"http://www.w3.org/1998/Math/MathML"}, EncodedParams:{authenticity_token:"authenticity_token", info:"info", question_file:"question_file", skills:"skills"}}, useDebugging;
void 0 === useDebugging && (useDebugging = !1);
var useDebuggingBasic;
void 0 === useDebuggingBasic && (useDebuggingBasic = !1);
var debugPointer = null, globalCommDisabled = !1, customconsole = null, lastMessage = !1;
if ("undefined" == typeof noScrim) {
  var noScrim = !1
}
var version = "4.0.0-alpha.1", contextGUID = "", orientation = "portrait", ctatcontainer = "container", ctatcanvas = null, lineCounter = 0, windowPadding = 4, currentComponentPointer = null, movieclips = [], startStateHandlers = [], inStartState = !1, inProcessStartStateActions = !1, globalDebugger = null, correctColor = "#00cc00", incorrectColor = "#ff0000", highlightColor = "#ffff00", hintColor = "#ffff00", canvasCalibrate = 5, scriptElement = "", flashVars = null, commShell = null, mobileAPI = 
null, skillSet = null, aVars = null;
CTATGlobals.interfaceElement = null;
var commLibrary = CTATGlobals.selectedTextInput = null, commLMSService = null, commMessageBuilder = null, commMessageHandler = null, commLogMessageBuilder = null, commLoggingLibrary = null, logHintSAI = null, nameTranslator = null, hints = [], hintIndex = 0, caseInsensitive = !0, unordered = !0, lockWidget = !0, highlightRightSelection = !0;
CTATGlobals.suppressStudentFeedback = !1;
CTATGlobals.confirmDone = !1;
var globalGlowStringContent = "0px 0px 15px 5px rgba(255, 255, 0, 1.0)", globalGlowString = "-webkit-box-shadow: " + globalGlowStringContent + "; -moz-box-shadow: " + globalGlowStringContent + "; box-shadow: " + globalGlowStringContent + "; ", globalCorrectString = "-webkit-box-shadow: 0px 0px 15px 5px rgba(0, 255, 0, 1.0); -moz-box-shadow: 0px 0px 15px 5px rgba(0, 255, 0, 1.0); box-shadow: 0px 0px 15px 5px rgba(0, 255, 0, 1.0); ", globalInCorrectString = "-webkit-box-shadow: 0px 0px 15px 5px rgba(255, 0, 0, 1.0); -moz-box-shadow: 0px 0px 15px 5px rgba(255, 0, 0, 1.0); box-shadow: 0px 0px 15px 5px rgba(255, 0, 0, 1.0); ";
CTATGlobals.Visual = {hint_color:hintColor, highlight_color:highlightColor, correct_color:correctColor, incorrect_color:incorrectColor, hint_glow:"0px 0px 15px 5px " + hintColor, highlight_glow:"0px 0px 15px 5px " + highlightColor, HintGlowString:globalGlowString, BackgroundColor:"#ffffff", BorderColor:"#cccccc", correct_glow:"0px 0px 15px 5px " + correctColor, incorrect_glow:"0px 0px 15px 5px " + incorrectColor};
var globalBackgroundColor = "#ffffff", globalBorderColor = "#cccccc", globalFontColor = "#000000", globalFontFamily = "Verdana", globalFontSize = 9;
CTATGlobals.Font = {color:globalFontColor, family:globalFontFamily, size:globalFontSize};
var globalShowBorder = !1, globalAlign = "left";
CTATGlobals.Align = globalAlign;
var globalBorderString = "1px solid", dialogDiv = null, incompatibleBrowserMessage = "Your browser does not support CTAT. Please update or replace your browser.", detailedFeedback = !0, oliMessageHandler = null, oliComm = null, oliCommLibrary = null, oliDriver = null;
function enableDetailedFeedback(a) {
  detailedFeedback = a;
}
;var CTAT = {ToolTutor:{interfaceMessages:[], tutorMessages:[]}};
Object.defineProperty(CTAT.ToolTutor, "message_handler", {enumerable:!0, get:function() {
  if (window.hasOwnProperty("getInterfaceObject") && "function" === typeof window.getInterfaceObject) {
    return window.getInterfaceObject();
  }
  if (window.hasOwnProperty("interfaceObject")) {
    return window.interfaceObject;
  }
  this.hasOwnProperty("_interface") || (this._interface = null);
  return this._interface;
}, set:function(a) {
  window.hasOwnProperty("interfaceObject") ? window.interfaceObject = a : this._interface = a;
  return a;
}});
Object.defineProperty(CTAT.ToolTutor, "tutor", {enumerable:!0, get:function() {
  if (window.hasOwnProperty("getTutorObject") && "function" === typeof window.getTutorObject) {
    return window.getTutorObject();
  }
  if (window.hasOwnProperty("tutorObject")) {
    return window.tutorObject;
  }
  this.hasOwnProperty("_tutor") || (this._tutor = null);
  return this._tutor;
}, set:function(a) {
  window.hasOwnProperty("tutorObject") ? window.tutorObject = a : this._tutor = a;
  return a;
}});
CTAT.ToolTutor.registerTutor = function(a) {
  if (window.hasOwnProperty("registerTutor") && "function" === typeof window.registerTutor) {
    return window.registerTutor(a);
  }
  if (this.tutor = a) {
    for (;0 < this.tutorMessages.length;) {
      this.sendToTutor(this.tutorMessages.shift());
    }
  }
};
CTAT.ToolTutor.sendToInterface = function(a) {
  ctatdebug("CTAT.ToolTutor.sendToInterface()\n  " + a);
  return window.hasOwnProperty("sendToInterface") && "function" === typeof window.sendToInterface ? window.sendToInterface.apply(null, arguments) : this.message_handler ? this.message_handler.receiveFromTutor(a) : commMessageHandler ? commMessageHandler.processMessage(a) : this.interfaceMessages.push(a);
};
CTAT.ToolTutor.registerInterfaceMessageHandler = function(a) {
  ctatdebug("CTAT.ToolTutor.registerInterfaceMessageHandler(" + a + ")");
  "string" === typeof a && (a = document.getElementById(a));
  if (this.message_handler = a) {
    for (;0 < this.interfaceMessages.length;) {
      this.sendToInterface(this.interfaceMessages.shift());
    }
  }
};
CTAT.ToolTutor.registerInterface = function(a) {
  if (window.hasOwnProperty("registerInterface") && "function" === typeof window.registerInterface) {
    return window.registerInterface(a);
  }
  this.registerInterfaceMessageHandler(a);
};
CTAT.ToolTutor.sendToTutor = function(a) {
  return window.hasOwnProperty("sendToTutor") && "function" === typeof window.sendToTutor ? window.sendToTutor(a) : this.tutor ? this.tutor.receiveFromInterface(a) : this.tutorMessages.push(a);
};
var CTATSandboxDriver = {};
function getSafeElementById(a) {
  return document.getElementById(a);
}
;var CTATConfig = {Options:{}, addProperty:function(a, b, d, f) {
  d = d || b[0];
  Object.defineProperty(CTATConfig, a, {enumerable:!0, configurable:!1, writable:!f, value:d.toLowerCase()});
  var g = {};
  b.forEach(function(b) {
    g[b] = b.toLowerCase();
    Object.defineProperty(CTATConfig, a + "_is_" + b, {enumerable:!1, writable:!1, value:function() {
      return CTATConfig[this.prop].toLowerCase() == this.val;
    }.bind({prop:a, val:g[b]})});
  });
  CTATConfig.Options[a] = g;
}};
CTATConfig.addProperty("platform", ["CTAT", "Google", "Undefined"], "CTAT", !0);
CTATConfig.addProperty("external", ["Google", "LTI", "SCORM", "None"], "None");
CTATConfig.addProperty("parserType", ["XML", "JSON"], "XML");
"undefined" !== typeof module && (module.exports = CTATConfig);
var CTATGlobalFunctions = {};
window.CTATGlobalFunctions = CTATGlobalFunctions;
function unhighlightall(a) {
  console.log("unhighlightall ()");
  if (CTATShellTools.component_descriptions) {
    a = CTATShellTools.getAllComponents();
    console.log("Calling unhighlight on " + a.length + " components ...");
    for (var b = 0;b < a.length;b++) {
      var d = a[b];
      console.log("Calling ...");
      d.unhighlight();
    }
  } else {
    console.log("No component descriptions available, bump");
  }
}
CTATGlobalFunctions.stringToBoolean = function(a) {
  switch(String(a).toLowerCase()) {
    case "true":
    ;
    case "yes":
    ;
    case "1":
      return !0;
    case "false":
    ;
    case "no":
    ;
    case "0":
    ;
    case "":
    ;
    case null:
      return !1;
    default:
      return !!string;
  }
};
CTATGlobalFunctions.generateDefaultConfiguration = function() {
  var a = CTATGlobalFunctions.decodeTutorShopParams(FlashVars);
  if (a) {
    return ctatdebug("generateDefaultConfiguration() dataParams[authenticity_token] " + a.authenticity_token), a;
  }
};
window.CTATGlobalFunctions.generateDefaultConfiguration = CTATGlobalFunctions.generateDefaultConfiguration;
CTATGlobalFunctions.isInstructorMode = function() {
  var a = flashVars ? flashVars.getRawFlashVars() : null;
  return a && a.deliverymode ? "delivery" == a.deliverymode ? !1 : !0 : !1;
};
CTATGlobalFunctions.getLoggingLibrary = function(a) {
  null == commLoggingLibrary && (commLoggingLibrary = new CTATLoggingLibrary(!0));
  return commLoggingLibrary;
};
CTATGlobalFunctions.setPreviewMode = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setPreviewMode(b) : a.previewMode = b;
};
CTATGlobalFunctions.setCenterTutor = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setCenterTutor(b) : a.centerTutor = b;
};
CTATGlobalFunctions.setTutorWidth = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setTutorWidth(b) : a.width = b;
};
CTATGlobalFunctions.setTutorHeight = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setTutorHeight(b) : a.height = b;
};
CTATGlobalFunctions.setTutorDimensions = function(a, b, d) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setTutorDimensions(b, d) : (a.width = b, a.height = d);
};
CTATGlobalFunctions.setTutorValue = function(a, b, d) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setTutorValue(b, d) : a[b] = d;
};
CTATGlobalFunctions.setCommunicationMode = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setCommunicationMode(b) : a.tutoring_service_communication = b;
};
CTATGlobalFunctions.setRemoteSocketURL = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setRemoteSocketURL(b) : a.remoteSocketURL = b;
};
CTATGlobalFunctions.setRemoteSocketPort = function(a, b) {
  CTATGlobalFunctions.isCTATObject(a) ? a.setRemoteSocketPort(b) : a.remoteSocketPort = b;
};
CTATGlobalFunctions.setProblemSummary = function(a) {
};
CTATGlobalFunctions.isCTATObject = function(a) {
  if ("object" == typeof testConfig) {
    if (testConfig.getClassName) {
      return console.log("Config object is of type: " + testConfig.getClassName()), !0;
    }
    console.log("Config object is not a CTAT object");
  }
  return !1;
};
CTATGlobalFunctions.getCTATClassname = function(a) {
  if ("object" == typeof testConfig) {
    if (testConfig.getClassName) {
      return console.log("Config object is of type: " + testConfig.getClassName()), testConfig.getClassName();
    }
    console.log("Config object is not a CTAT object");
  }
  return "object";
};
CTATGlobalFunctions.toBoolean = function(a) {
  return "boolean" === typeof a ? a : "string" === typeof a ? CTATGlobalFunctions.stringToBoolean(a) : "number" === typeof a ? 0 < a : a ? !0 : !1;
};
function noenter(a) {
  if (CTATConfig.platform_is_Google()) {
    return 0;
  }
  a = a || window.event;
  return 13 !== (a.keyCode || a.charCode);
}
CTATGlobalFunctions.isBlank = function(a) {
  return !a || /^\s*$/.test(a);
};
function componentToHex(a) {
  a = a.toString(16);
  return 1 == a.length ? "0" + a : a;
}
function rgbToHex(a, b, d) {
  return "#" + componentToHex(a) + componentToHex(b) + componentToHex(d);
}
function hexToRgb(a) {
  return (a = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a)) ? {r:parseInt(a[1], 16), g:parseInt(a[2], 16), b:parseInt(a[3], 16)} : null;
}
function parseQueryStringArgs(a) {
  ctatdebug("parseQueryStringArgs ()");
  ctatdebug("Query String: " + a);
  var b = "?" == a.charAt(0) ? a.substring(1) : a;
  a = {};
  if (b) {
    for (var b = b.split("&"), d = 0;d < b.length;d++) {
      var f = b[d].split("=");
      a[decodeURIComponent(f[0])] = decodeURIComponent(f[1].replace(/\+/g, " "));
    }
  }
  return a;
}
function setOrientation(a) {
  ctatdebug("setOrientation (" + a + ")");
  switch(a) {
    case -90:
    ;
    case 90:
      orientation = "landscape";
      mobileAPI && mobileAPI.processOrientationChange(orientation);
      break;
    default:
      orientation = "portrait", mobileAPI && mobileAPI.processOrientationChange(orientation);
  }
}
Object.hasOwnProperty("create") || (Object.create = function() {
  function a() {
  }
  return function(b) {
    if (1 != arguments.length) {
      throw Error("Object.create implementation only accepts one parameter.");
    }
    a.prototype = b;
    return new a;
  };
}());
function thisMovie(a) {
  return -1 != navigator.appName.indexOf("Microsoft") ? window[a] : document[a];
}
function introspect(a, b, d, f) {
  console.log("introspect (" + a + ")");
  d = d || "";
  "number" !== this.typeOf(f) && (f = 1);
  var g = this.typeOf(b);
  a = [d, a, " ", g, " :"].join("");
  if ("object" === g) {
    if (0 < f) {
      d = [d, "  "].join("");
      for (var c in b) {
        g = this.introspect(c, b[c], d, f - 1), a = [a, "\n", g].join("");
      }
      return a;
    }
    return [a, " ..."].join("");
  }
  return "null" === g ? [a, " null"].join("") : [a, " ", b].join("");
}
function findPointOfAttachment(a) {
  ctatdebug("findPointOfAttachment (" + a + ")");
  for (var b = 0;b < movieclips.length;b++) {
    var d = movieclips[b];
    ctatdebug("Examining: " + d.getName() + "...");
    if (!0 === d.isRegistered(a)) {
      return d;
    }
  }
  return null;
}
function findMovieClip(a) {
  a = a.trim();
  ctatdebug("findMovieClip (" + a.trim() + ")");
  for (var b = 0;b < movieclips.length;b++) {
    var d = movieclips[b];
    ctatdebug("Examining: " + d.getName() + "...");
    if (d.getName() == a) {
      return d;
    }
  }
  return null;
}
function colName(a, b) {
  ctatdebug("colName (" + a + ")");
  for (var d = "";0 <= a;) {
    d = String.fromCharCode(a % 26 + 97) + d, a = Math.floor(a / 26) - 1;
  }
  !0 === b && d.toUpperCase();
  return d;
}
function selectText(a) {
}
function urldecode(a) {
  return decodeURIComponent(("" + a).replace(/\+/g, "%20"));
}
function detectIE() {
  var a = window.navigator.userAgent, b = a.indexOf("MSIE "), d = a.indexOf("Trident/");
  return 0 < b ? parseInt(a.substring(b + 5, a.indexOf(".", b)), 10) : 0 < d ? (b = a.indexOf("rv:"), parseInt(a.substring(b + 3, a.indexOf(".", b)), 10)) : !1;
}
function listProperties(a) {
  ctatdebug("listProperties (l: " + a.length + ")");
  for (var b in a) {
    ctatdebug("[" + b + "]");
  }
}
function listPropertiesKV(a, b) {
  ctatdebug("listPropertiesKV (size: " + a.length + ")");
  if (1 == b) {
    for (var d = 0;d < a.length;d++) {
      ctatdebug("[" + d + "]: " + a[d]);
    }
  } else {
    for (d in a) {
      ctatdebug("[" + d + "]: " + a[d]);
    }
  }
}
function getIndicesOf(a, b, d) {
  var f = 0, g = a.length, c = [];
  d || (b = b.toLowerCase(), a = a.toLowerCase());
  for (;-1 < (d = b.indexOf(a, f));) {
    c.push(d), f = d + g;
  }
  return c;
}
CTATGlobalFunctions.formatColor = function(a) {
  if (/^#[0-9a-f]{6}$/i.test(a)) {
    return a;
  }
  var b = a.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);
  if (null !== b) {
    return rgbToHex(Number(b[1]), Number(b[2]), Number(b[3]));
  }
  b = a.match(/^#?([0-9a-f]{0,6})$/i);
  if (null !== b) {
    for (a = b[1];6 > a.length;) {
      a = "0" + a;
    }
    return "#" + a;
  }
  return a;
};
CTATGlobalFunctions.Gensym = function() {
  this.make_gensym = function() {
    var a = "", b = 0;
    return {set_prefix:function(b) {
      a = String(b);
    }, set_index:function(a) {
      b = a;
    }, gensym:function() {
      var g = a + b;
      b += 1;
      return g;
    }};
  };
  var a = this.make_gensym();
  a.set_index(2);
  var b = this.make_gensym();
  b.set_index(1);
  b.set_prefix("ctatdiv");
  return {z_index:a.gensym, div_id:b.gensym};
};
CTATGlobalFunctions.gensym = CTATGlobalFunctions.Gensym();
CTAT.ComponentRegistry = {};
CTAT.ComponentRegistry.addComponentType = function() {
};
Object.defineProperty(CTAT.ComponentRegistry, "addComponentType", {enumerable:!1, value:function(a, b) {
  "string" == typeof a && (this.hasOwnProperty(a) ? alert(a + " is already a registered component") : this[a] = b);
}});
var CTATBase = function(a, b) {
  function d(a, b, c) {
    null === a && (a = "unknownclass");
    null === b && (b = "nullinstance");
    return "[" + a + ":" + b + "] " + c;
  }
  var f = a, g = b, c = this, e = !0;
  "undefined" != CTATBase.DebuggingFilter[f] && CTATBase.DebuggingFilter[f] && (e = !1);
  this.getClassName = function() {
    return f;
  };
  this.setClassName = function(a) {
    f = a;
  };
  this.setName = function(a) {
    g = a;
  };
  this.getName = function() {
    return g;
  };
  this.getUseDebugging = function() {
    return useDebugging;
  };
  this.setUseDebugging = function(a) {
    useDebugging = a;
  };
  this.ctatdebug = function(a) {
    if (e) {
      var b = a;
      useDebuggingBasic ? c.ctatdebugInternal(b, "UnknownClass") : (null === a && (b = "No message provided"), useDebugging && c.ctatdebugInternal(b, c.getClassName()));
    }
  };
  this.ctatdebugObject = function(a) {
    var b = 0, c;
    for (c in a) {
      this.ctatdebug("(" + b + ")" + c + ": " + a[c]), b++;
    }
  };
  this.ctatdebugInternal = function(a, b) {
    var e = a, f = "No msg assigned yet";
    if (null === e || void 0 === e) {
      e = "No message!";
    }
    "" === e && (e = "Empty message!");
    if (useDebuggingBasic) {
      f = d("Unknown", "undefined", e), null === customconsole && (customconsole = getSafeElementById("customconsole")), null !== customconsole ? (customconsole.innerHTML += f + "<br>", customconsole.scrollTop = customconsole.scrollHeight) : console.log(f);
    } else {
      null === b && (b = "UndefinedClass");
      null === e && (e = "No message");
      f = d(b, c.getName(), e);
      try {
        console.trace(f);
      } catch (g) {
      }
      "google" == CTATConfig.platform ? Logger.log(f) : (null === customconsole && (customconsole = getSafeElementById("customconsole")), null !== customconsole && (customconsole.innerHTML += f + "<br>", customconsole.scrollTop = customconsole.scrollHeight));
    }
  };
  this.ctatdebugObjectShallow = function(a) {
    var b = "", e;
    for (e in a) {
      b += e + ", ";
    }
    c.ctatdebugInternal("Object: " + b, "Global");
  };
  this.urldecode = function(a) {
    return decodeURIComponent((a + "").replace(/\+/g, "%20"));
  };
  this.entitiesConvert = function(a) {
    this.ctatdebug("entitiesConvert ()");
    return this.urldecode(unescape(a));
  };
  this.entitiesGenerate = function(a) {
    return a;
  };
};
function formatLogMessageGoogle(a, b, d) {
  d = (new CTATBase(a, b)).htmlEncode(d);
  return "[" + a + ":" + b + "] " + d;
}
function ctatdebug(a) {
  (useDebugging || useDebuggingBasic) && null !== a && ("google" == CTATConfig.platform ? Logger.log(formatLogMessageGoogle("CTATTutor", "tutor", a)) : (null === debugPointer && (debugPointer = new CTATBase("CTATTutor", "tutor")), debugPointer.ctatdebug(a, "CTATTutor")));
}
Object.defineProperty(CTATBase, "DebuggingFilter", {enumerable:!1, configurable:!1, writable:!0, value:[]});
"undefined" !== typeof module && (module.exports = CTATBase);
var CTATShellTools = {ctat_base:new CTATBase("CTATShellTools", "shelltools"), components:{}, component_descriptions:{}, registerComponentDescription:function(a) {
  CTATShellTools.component_descriptions[a.name] = a;
}, listComponents:function() {
  CTATShellTools.ctat_base.ctatdebug("listComponents ()");
  var a = CTATShellTools.component_descriptions, b;
  for (b in a) {
    var d = a[b];
    CTATShellTools.ctat_base.ctatdebug("Obtaining component for " + d.name + " with type: " + d.type);
    d = d.getComponentPointer();
    null !== d ? CTATShellTools.ctat_base.ctatdebug("Component: " + d.getName() + " of instance: " + d.getClassName()) : CTATShellTools.ctat_base.ctatdebug("Error: component pointer is null");
  }
}, feedback_components:[], registerFeedbackComponent:function(a, b, d, f, g) {
  CTATShellTools.feedback_components.push({component:a, next:b, prev:d, showHints:f, showFeedback:g});
}, showNextHint:function() {
  CTATShellTools.feedback_components.forEach(function(a) {
    a.next && a.next.bind(a.component)();
  });
}, showPrevHint:function() {
  CTATShellTools.feedback_components.forEach(function(a) {
    a.prev && a.prev.bind(a.component)();
  });
}, showFeedback:function(a) {
  console.log("showFeedback ()");
  0 == CTATShellTools.feedback_components.length ? CTATScrim.scrim.OKScrimUp(a, null) : CTATShellTools.feedback_components.forEach(function(b) {
    b.showFeedback && b.showFeedback.bind(b.component)(a);
  });
}, showHints:function(a) {
  CTATShellTools.feedback_components.forEach(function(b) {
    b.showHints && b.showHints.bind(b.component)(a);
  });
}, getCurrentMs:function() {
  return (new Date).valueOf();
}, getAllComponents:function() {
  console.log("getAllComponents ()");
  var a = [], b = 0, d;
  for (d in CTAT.ComponentRegistry) {
    console.log(d), $("." + d).each(function() {
      console.log("Pushing component ...");
      a[b] = $(this).data("CTATComponent");
      b++;
    });
  }
  console.log("Found: " + a.length + " instances");
  return a;
}, getNameFromGroup:function(a) {
  CTATShellTools.ctat_base.ctatdebug("getNameFromGroup (" + a + ")");
  var b = a.split(" ");
  return 1 == b.length ? a : b[0].substring(0, b[0].length - 1);
}, findComponent:function(a, b) {
  CTATShellTools.ctat_base.ctatdebug("findComponent(" + a + ")");
  var d = CTATShellTools.component_descriptions, f = [], g = null, g = -1 < a.indexOf(".") ? $('[id="' + a + '"]') : $("#" + a);
  if (0 < g.length) {
    var c = [];
    g.each(function() {
      $(this).data("CTATComponent") && c.push($(this).data("CTATComponent"));
    });
    if (0 < c.length) {
      return c;
    }
  }
  g = $('div[data-ctat-component]:has(input[name="' + a + '"])');
  if (0 < g.length) {
    var e = [];
    g.each(function() {
      $(this).data("CTATComponent") && e.push($(this).data("CTATComponent"));
    });
    if (0 < e.length) {
      return e;
    }
  }
  for (var h in d) {
    g = d[h];
    if (null === g || null === g.name) {
      return null;
    }
    if (g.name == a) {
      if (null === g.getComponentPointer()) {
        return null;
      }
      f = [];
      f.push(g.getComponentPointer());
      return f;
    }
    g.groupName == a && f.push(g.getComponentPointer());
  }
  return null === f ? -1 != a.indexOf(".") ? (d = a.split("."), this.findComponent(d[0])) : f : 0 === f.length && -1 != a.indexOf(".") ? (d = a.split("."), this.findComponent(d[0])) : f;
}, findComponentInstance:function(a, b) {
  var d = CTATShellTools.findComponent(a, b);
  return 1 == d.length ? d[0] : d;
}, findComponentByClass:function(a) {
  var b = CTATShellTools.component_descriptions, d;
  for (d in b) {
    var f = b[d];
    if (null === f) {
      return null;
    }
    if (null !== f.getComponentPointer() && f.getComponentPointer().getClassName() == a) {
      return f.getComponentPointer();
    }
  }
  a = $("." + a);
  return 0 < a.length ? a.first().data("CTATComponent") : null;
}};
var CTATHTMLManager = function() {
  var a = null, b = "";
  this.urldecode = function(a) {
    return decodeURIComponent((a + "").replace(/\+/g, "%20"));
  };
  this.showEntities = function() {
    ctatdebug("showEntities ()");
    for (var b = null, f = 0;f < a.length;f++) {
      b = a[f], ctatdebug(b);
    }
  };
  this.initEntities = function() {
    null == a && (a = [], a["&amp;"] = "*!*", a["&nbsp;"] = "\u00a0", a["&iexcl;"] = "\u00a1", a["&cent;"] = "\u00a2", a["&pound;"] = "\u00a3", a["&curren;"] = "\u00a4", a["&yen;"] = "\u00a5", a["&brvbar;"] = "\u00a6", a["&sect;"] = "\u00a7", a["&uml;"] = "\u00a8", a["&copy;"] = "\u00a9", a["&reg;"] = "\u00ae", a["&deg;"] = "\u00b0", a["&plusmn;"] = "\u00b1", a["&sup1;"] = "\u00b9", a["&sup2;"] = "\u00b2", a["&sup3;"] = "\u00b3", a["&acute;"] = "\u00b4", a["&micro;"] = "\u00b5", a["&frac14;"] = "\u00bc", 
    a["&frac12;"] = "\u00bd", a["&frac34;"] = "\u00be", a["&iquest;"] = "\u00bf", a["&Agrave;"] = "\u00c0", a["&Aacute;"] = "\u00c1", a["&Acirc;"] = "\u00c2", a["&Atilde;"] = "\u00c3", a["&Auml;"] = "\u00c4", a["&Aring;"] = "\u00c5", a["&AElig;"] = "\u00c6", a["&Ccedil;"] = "\u00c7", a["&Egrave;"] = "\u00c8", a["&Eacute;"] = "\u00c9", a["&Ecirc;"] = "\u00ca", a["&Euml;"] = "\u00cb", a["&Igrave;"] = "\u00cc", a["&Iacute;"] = "\u00cd", a["&Icirc;"] = "\u00ce", a["&Iuml;"] = "\u00cf", a["&ETH;"] = "\u00d0", 
    a["&Ntilde;"] = "\u00d1", a["&Ograve;"] = "\u00d2", a["&Oacute;"] = "\u00d3", a["&Ocirc;"] = "\u00d4", a["&Otilde;"] = "\u00d5", a["&Ouml;"] = "\u00d6", a["&Oslash;"] = "\u00d8", a["&Ugrave;"] = "\u00d9", a["&Uacute;"] = "\u00da", a["&Ucirc;"] = "\u00db", a["&Uuml;"] = "\u00dc", a["&Yacute;"] = "\u00dd", a["&THORN;"] = "\u00de", a["&szlig;"] = "\u00df", a["&agrave;"] = "\u00e0", a["&aacute;"] = "\u00e1", a["&acirc;"] = "\u00e2", a["&atilde;"] = "\u00e3", a["&auml;"] = "\u00e4", a["&aring;"] = 
    "\u00e5", a["&aelig;"] = "\u00e6", a["&ccedil;"] = "\u00e7", a["&egrave;"] = "\u00e8", a["&eacute;"] = "\u00e9", a["&ecirc;"] = "\u00ea", a["&euml;"] = "\u00eb", a["&igrave;"] = "\u00ec", a["&iacute;"] = "\u00ed", a["&icirc;"] = "\u00ee", a["&iuml;"] = "\u00ef", a["&eth;"] = "\u00f0", a["&ntilde;"] = "\u00f1", a["&ograve;"] = "\u00f2", a["&oacute;"] = "\u00f3", a["&ocirc;"] = "\u00f4", a["&otilde;"] = "\u00f5", a["&ouml;"] = "\u00f6", a["&oslash;"] = "\u00f8", a["&ugrave;"] = "\u00f9", a["&uacute;"] = 
    "\u00fa", a["&ucirc;"] = "\u00fb", a["&uuml;"] = "\u00fc", a["&yacute;"] = "\u00fd", a["&thorn;"] = "\u00fe", a["&yuml;"] = "\u00ff", a["&gt;"] = ">", a["&lt;"] = "<", a["&#61;"] = "=", a["&361;"] = "=", a["&quot;"] = '"');
    ctatdebug("(singleQuoteEscape==true) Replacing &apos; with: \\'");
    a["&apos;"] = "\\'";
  };
  this.entitiesConvert = function(a) {
    ctatdebug("entitiesConvert ()");
    return this.urldecode(unescape(a));
  };
  this.entitiesGenerate = function(a) {
    return b = a;
  };
  this.htmlEncode = function(a) {
    return a;
  };
  this.htmlDecode = function(a) {
    return "undefined" !== typeof $ ? $("<div/>").html(a).text() : "undefined" !== typeof Entities ? (new Entities).decode(a) : a;
  };
};
"undefined" !== typeof module && (module.exports = CTATHTMLManager);
var CTATXML = function() {
  CTATBase.call(this, "CTATXML", "xml");
  this.parse = function(a) {
    return this.parseXML(a);
  };
  this.parseXML = function(a) {
    this.ctatdebug("parseXML ()");
    var b = null;
    try {
      "undefined" !== typeof $ ? b = $.parseXML(a) : "undefined" !== typeof XMLParser ? b = (new XMLParser).parseFromString(a) : this.ctatdebug("Bottoming out, no parser configured!");
    } catch (d) {
      return null != b ? this.ctatdebug("JQuery could not process the provided XML: " + d.message + " (" + b.parseError.errorCode + ") (" + b.parseError.reason + ") (" + b.parseError.line + ")") : this.ctatdebug("JQuery could not process the provided XML (xmlDoc==null): " + d.message), null;
    }
    return null == b ? (this.ctatdebug("Unspecified error parsing xml message. xmlDoc is null"), null) : b.documentElement;
  };
  this.getElementName = function(a) {
    return a.nodeName;
  };
  this.getElementValue = function(a) {
    return a.nodeValue;
  };
  this.getElementChildren = function(a) {
    for (var b = [], d = 0;d < a.childNodes.length;d++) {
      1 == a.childNodes[d].nodeType && b.push(a.childNodes[d]);
    }
    return b;
  };
  this.getNodeTextValue = function(a) {
    if (null == a) {
      return "";
    }
    if (null == a.childNodes) {
      return a.nodeValue;
    }
    if (0 == a.childNodes.length) {
      return "";
    }
    for (var b = a.childNodes, d = 0;d < b.length;d++) {
      var f = b[d];
      if ("value" == f.nodeName || "Value" == f.nodeName) {
        if (1 == f.childNodes.length) {
          return f.childNodes[0].nodeValue;
        }
        if (0 == f.childNodes.length) {
          break;
        } else {
          return f.childNodes[1].nodeValue;
        }
      }
    }
    return a.childNodes[0].nodeValue;
  };
  this.getElementAttr = function(a, b) {
    if (!a.attributes) {
      return this.ctatdebug("Warning: Element " + a.nodeName + " does not have any attributes"), "";
    }
    for (var d = 0;d < a.attributes.length;d++) {
      if (a.attributes[d].nodeName == b) {
        return a.attributes[d].nodeValue;
      }
    }
    return "";
  };
  this.listElementAttr = function(a) {
    this.ctatdebug("Listing " + a.attributes.length + " attributes for element " + a.nodeName + " ...");
    for (var b = 0;b < a.attributes.length;b++) {
      this.ctatdebug(b + " name: " + a.attributes[b].nodeName + ", value: " + a.attributes[b].nodeValue);
    }
  };
  this.xmlToString = function(a) {
    this.ctatdebug("xmlToString ()");
    return null == a ? (this.ctatdebug("Error: xml data is null"), null) : (new XMLSerializer).serializeToString(a);
  };
};
CTATXML.prototype = Object.create(CTATBase.prototype);
CTATXML.prototype.constructor = CTATXML;
"undefined" !== typeof module && (module.exports = CTATXML);
var CTATStringUtil = function() {
  this.String2Boolean = function(a) {
    switch(a) {
      case "0":
      ;
      case "false":
      ;
      case "no":
      ;
      case "FALSE":
      ;
      case "NO":
      ;
      case "No":
        return !1;
    }
    return !0;
  };
  this.replaceString = function(a, b, d) {
    return a.replace(b, d);
  };
};
"undefined" !== typeof module && (module.exports = CTATStringUtil);
var CTATArgument = function() {
  var a = "Undefined", b = "String", d = "text";
  this.setValue = function(b) {
    a = b;
  };
  this.getValue = function() {
    return a;
  };
  this.setType = function(a) {
    b = a;
  };
  this.getType = function() {
    return b;
  };
  this.setFormat = function(a) {
    d = a;
  };
  this.getFormat = function() {
    return d;
  };
};
CTATArgument.prototype.clone = function() {
  var a = new CTATArgument;
  a.setValue(this.getValue());
  a.setType(this.getType());
  a.setFormat(this.getFormat());
  return a;
};
"undefined" !== typeof module && (module.exports = CTATArgument);
var CTATSAI = function(a, b, d, f) {
  function g(a, b, c, e) {
    e = String(t.getElementName(b)).toLowerCase();
    if (e == a || "value" == e) {
      if (e = t.getElementChildren(b), !Array.isArray(e) || 1 > e.length) {
        c.push(t.getNodeTextValue(b));
      } else {
        for (b = 0;b < e.length;++b) {
          g(a, e[b], c, b);
        }
      }
    }
  }
  CTATBase.call(this, "CTATSAI", "sai");
  var c = "undefined", e = "undefined", h = new CTATStringUtil, k = [], l = [], q = [], p = [], m = [], w = [], t, z = this;
  t = "xml" == CTATConfig.parserType ? new CTATXML : new CTATJSON;
  this.getArguments = function() {
    return k;
  };
  this.getArgumentsTyped = function() {
    this.ctatdebug("getArgumentsTyped");
    for (var a = 0, b = [], a = 0;a < k.length;a++) {
      var c = k[a];
      "Boolean" === c.getType() ? (this.ctatdebug("Adding Boolean argument (" + c.getValue() + ") ..."), b.push(h.String2Boolean(c.getValue()))) : "Number" === c.getType() ? (this.ctatdebug("Adding Number argument (" + c.getValue() + ") ..."), b.push(Number(c.getValue()))) : "String" === c.getType() ? "No_Value" === c.getValue() ? (this.ctatdebug("Detected default argument (" + c.getValue() + "), setting contents to null instead"), b.push(null)) : b.push(String(c.getValue())) : this.ctatdebug("Unrecognized argument type: " + 
      c.getType() + " in " + this.toSerializedString() + " IGNORING IT!!!");
    }
    this.ctatdebug("Resulting arguments: " + b);
    return b;
  };
  this.getArgument = function(a) {
    return k[a];
  };
  this.addSelection = function(a) {
    l.push(a);
  };
  this.addAction = function(a) {
    q.push(a);
  };
  this.checkDefaultArgument = function() {
    this.ctatdebug("checkDefaultArgument ()");
    if (0 === k.length) {
      this.ctatdebug("Adding default argument ...");
      var a = new CTATArgument;
      k.push(a);
    }
  };
  this.setArgument = function(a, b) {
    this.checkDefaultArgument();
    for (var c = k.length;c <= a;++c) {
      k.push(new CTATArgument);
    }
    c = k[a];
    c.value = b;
    return c;
  };
  this.addArgument = function(a, b, c) {
    var e = new CTATArgument;
    e.value = a;
    e.type = b;
    e.format = c;
    k.push(e);
    return e;
  };
  this.addExistingArgument = function(a) {
    k.push(a);
    return a;
  };
  this.setSAI = function(a, b, d, f, g) {
    this.setName(Array.isArray(a) ? 0 < a.length ? a[0] : "" : a);
    c = Array.isArray(b) ? 0 < b.length ? b[0] : "" : b;
    e = g;
    this.setInput(Array.isArray(d) ? 0 < d.length ? d[0] : "" : d);
    this.setType(f);
  };
  this.setInput = function(a) {
    this.checkDefaultArgument();
    this.getArgument(0).setValue(a);
    this.setInputArray(a);
  };
  this.getInput = function() {
    return 0 === k.length ? "" : this.getArgument(0).getValue();
  };
  this.setType = function(a) {
    this.checkDefaultArgument();
    this.getArgument(0).type = a;
  };
  this.getType = function() {
    return 0 === k.length ? "" : this.getArgument(0).type;
  };
  this.setFormat = function(a) {
    this.checkDefaultArgument();
    this.getArgument(0).setFormat(a);
  };
  this.getFormat = function() {
    return 0 === k.length ? "" : this.getArgument(0).getFormat();
  };
  this.toString = function() {
    return "[" + String(this.getSelection()) + "," + String(this.getAction()) + "," + String(this.getInput()) + "]";
  };
  this.setSelection = function(a) {
    this.setName(a);
  };
  this.getSelection = function() {
    return this.getName();
  };
  this.setAction = function(a) {
    c = a;
  };
  this.getAction = function() {
    return c;
  };
  this.appendToSelectionArray = function(a) {
    null == a ? p.push("") : p.push(String(a));
  };
  this.setSelectionArray = function(a) {
    p = null == a ? [] : Array.isArray(a) ? a.slice() : [String(a)];
  };
  this.getSelectionArray = function() {
    return p;
  };
  this.appendToActionArray = function(a) {
    null == a ? m.push("") : m.push(String(a));
  };
  this.setActionArray = function(a) {
    m = null == a ? [] : Array.isArray(a) ? a.slice() : [String(a)];
  };
  this.getActionArray = function() {
    return m;
  };
  this.appendToInputArray = function(a) {
    null == a ? w.push("") : w.push(String(a));
  };
  this.setInputArray = function(a) {
    w = null == a ? [] : Array.isArray(a) ? a.slice() : [String(a)];
  };
  this.getInputArray = function() {
    return w;
  };
  this.setPrompt = function(a) {
    e = a;
  };
  this.getPrompt = function() {
    return e;
  };
  this.propagate = function(a) {
    this.ctatdebug("propagate ()");
    a = a.getArguments();
    for (var b = 0;b < a.length;b++) {
      var c = a[b], e = k[b];
      if (null === c || null === e) {
        this.ctatdebug("Internal error: argument lists do not align between received SAI and source SAI");
        break;
      }
      e.setValue(c.getValue());
    }
  };
  this.fromString = function(a) {
    a = t.parse(a);
    this.fromXML(a);
  };
  this.fromXML = function(a) {
    this.ctatdebug("fromXML ()");
    k = [];
    a = t.getElementChildren(a);
    for (var b = null, c = 0;c < a.length;c++) {
      var e = a[c];
      if ("selection" == t.getElementName(e) || "Selection" == t.getElementName(e)) {
        for (var d = t.getElementChildren(e), f = !1, g = 0;g < d.length;g++) {
          b = d[g], "value" == t.getElementName(b) && (b = t.getNodeTextValue(b), 1 > g ? this.setSelectionArray(b) : this.appendToSelectionArray(b), f = !0, this.setSelection(b));
        }
        !1 === f && (b = t.getNodeTextValue(e), this.setSelectionArray(b), this.setSelection(b));
      }
      if ("action" == t.getElementName(e) || "Action" == t.getElementName(e)) {
        d = t.getElementChildren(e);
        f = !1;
        for (g = 0;g < d.length;g++) {
          b = d[g], "value" == t.getElementName(b) && (b = t.getNodeTextValue(b), 1 > g ? this.setActionArray(b) : this.appendToActionArray(b), f = !0, this.setAction(b));
        }
        !1 === f && (b = t.getNodeTextValue(e), this.setActionArray(b), this.setAction(b));
      }
      if ("internalArguments" == t.getElementName(e) || "value" == t.getElementName(e) || "Input" == t.getElementName(e)) {
        var b = t.getElementChildren(e), h = null;
        k = [];
        d = new CTATHTMLManager;
        f = new CTATArgument;
        g = 0;
        k.push(f);
        for (var l = 0;l < b.length;l++) {
          var m = b[l];
          "value" == t.getElementName(m) && (h = t.getElementChildren(m), null !== h ? (this.ctatdebug("Parsing SAI input ..."), this.ctatdebug("Childnodes: " + h.length), 1 === h.length ? (h = d.htmlDecode(t.getNodeTextValue(m)), this.ctatdebug("Setting new value to: " + h), f.setValue(h)) : (h = d.htmlDecode(t.getNodeTextValue(m)), this.ctatdebug("Setting new value to: " + h), f.setValue(h), f.setName(m.attributes.getNamedItem("name").value), f.setType(m.attributes.getNamedItem("type").value), 
          f.setFormat(m.attributes.getNamedItem("format").value), g++), 1 > l ? this.setInputArray(h) : this.appendToInputArray(h)) : (m = d.htmlDecode(t.getNodeTextValue(m)), this.ctatdebug("Setting new value to: " + m), f.setValue(m), 1 > l ? this.setInputArray(m) : this.appendToInputArray(m)));
        }
      }
      if ("prompt" == t.getElementName(e) || "Prompt" == t.getElementName(e)) {
        this.ctatdebug("Parsing prompt ..."), this.setPrompt(t.getNodeTextValue(e));
      }
    }
    this.checkDefaultArgument();
  };
  this.setArrayFromElements = function(a) {
    if (a && Array.isArray(a) && !(1 > a.length)) {
      var b = null, c = String(t.getElementName(a[0])).toLowerCase();
      switch(c) {
        case "selection":
          b = p = [];
          break;
        case "action":
          b = m = [];
          break;
        case "input":
          b = w = [];
          break;
        default:
          console.log('CTATSAI.setArrayFromElements(): unexpected element name "' + c + '"');
          return;
      }
      for (var e = 0;e < a.length;++e) {
        g(c, a[e], b, e);
      }
      this.ctatdebug("CTATSAI.setArrayFromElements() eltName " + c + ", length " + e + ", selectionArray " + this.getSelectionArray() + ", actionArray " + this.getActionArray() + ", inputArray " + this.getInputArray());
    }
  };
  this.fromXMLInternal = function(a) {
    this.ctatdebug("fromXMLInternal ()");
    new CTATXML;
    k = [];
    a = t.getElementChildren(a);
    for (var b = null, c = 0;c < a.length;c++) {
      var e = a[c];
      if ("selection" == t.getElementName(e) || "Selection" == t.getElementName(e)) {
        for (var d = t.getElementChildren(e), f = !1, g = 0;g < d.length;g++) {
          b = d[g], "value" == t.getElementName(b) && (b = t.getNodeTextValue(b), 1 > g ? this.setSelectionArray(b) : this.appendToSelectionArray(b), f = !0, this.setSelection(b));
        }
        !1 === f && (b = t.getNodeTextValue(e), this.setSelectionArray(b), this.setSelection(b));
      }
      if ("action" == t.getElementName(e) || "Action" == t.getElementName(e)) {
        d = e.childNodes;
        f = !1;
        for (g = 0;g < d.length;g++) {
          b = d[g], "value" == t.getElementName(b) && (b = t.getNodeTextValue(b), 1 > g ? this.setActionArray(b) : this.appendToActionArray(b), f = !0, this.setAction(b));
        }
        !1 === f && (b = t.getNodeTextValue(e), this.setActionArray(b), this.setAction(b));
      }
      if ("internalArguments" == t.getElementName(e) || "Input" == t.getElementName(e)) {
        b = e.childNodes;
        k = [];
        var d = new CTATHTMLManager, f = new CTATArgument, g = 0, h = null;
        k.push(f);
        for (var l = 0;l < b.length;l++) {
          if (h = b[l], "value" == t.getElementName(h)) {
            var m = t.getElementChildren(h);
            null !== m ? (this.ctatdebug("Parsing SAI input ..."), this.ctatdebug("Childnodes: " + m.length), 1 === m.length ? (h = d.htmlDecode(t.getNodeTextValue(h)), this.ctatdebug("Setting new value to: " + h), f.setValue(h)) : (h = d.htmlDecode(t.getNodeTextValue(h)), this.ctatdebug("Setting new value to: " + h), f.setValue(h), f.setName(t.getElementAttr("name")), f.setType(t.getElementAttr("type")), f.setFormat(t.getElementAttr("format")), g++)) : (h = d.htmlDecode(t.getNodeTextValue(h)), this.ctatdebug("Setting new value to: " + 
            h), f.setValue(h));
            1 > l ? this.setInputArray(h) : this.appendToInputArray(h);
          }
        }
      }
      if ("prompt" == t.getElementName(e) || "Prompt" == t.getElementName(e)) {
        this.ctatdebug("Parsing prompt ..."), this.setPrompt(t.getNodeTextValue(e));
      }
    }
    this.checkDefaultArgument();
  };
  this.toXMLString = function(a) {
    this.ctatdebug("toXMLString ()");
    return a ? this.toLSxmlString() : this.toTSxmlString();
  };
  this.toLSxmlString = function() {
    this.ctatdebug("toLSxmlString ()");
    var a;
    a = "<selection>" + this.getName();
    for (var b = 0;b < l.length;b++) {
      a += "</selection><selection>" + l[b];
    }
    a += "</selection><action>" + this.getAction();
    for (b = 0;b < q.length;b++) {
      a += "</action><action>" + q[b];
    }
    a += "</action><input>";
    for (b = 0;b < k.length;b++) {
      a += "<![CDATA[" + k[b].getValue() + "]]\x3e";
    }
    return a + "</input>";
  };
  this.toTSxmlString = function() {
    this.ctatdebug("toTSxmlString ()");
    var a;
    a = "<Selection><value>" + this.getName();
    for (var b = 0;b < l.length;b++) {
      a += "</value><value>" + l[b];
    }
    a += "</value></Selection><Action><value>" + this.getAction();
    for (b = 0;b < q.length;b++) {
      a += "</value><value>" + q[b];
    }
    a += "</value></Action><Input>";
    if (1 < k.length) {
      for (b = 0;b < k.length;b++) {
        var c = k[b];
        a += '<value fmt="text" name="' + c.getName() + '" type="' + c.getType() + '"><![CDATA[' + c.getValue() + "]]\x3e</value>";
      }
    } else {
      a += "<value><![CDATA[" + this.getInput() + "]]\x3e</value>";
    }
    return a + "</Input>";
  };
  this.toSerializedString = function() {
    var a;
    a = "" + ("<selection>" + this.getSelection() + "</selection><action>" + this.getAction() + "</action><internalArguments>");
    for (var b = 0;b < k.length;b++) {
      var c = k[b];
      a += '<value fmt="text" name="' + c.getName() + '" type="' + c.getType() + '">' + c.getValue() + "</value>";
    }
    return a + "</internalArguments>";
  };
  this.setAddedSelections = function(a) {
    l = a;
  };
  this.setAddedActions = function(a) {
    q = a;
  };
  this.clone = function() {
    var a = new CTATSAI(this.getSelection(), this.getAction(), this.getInput(), this.getPrompt());
    a.setAddedSelections(l.slice(0));
    a.setAddedActions(q.slice(0));
    for (var b = 0;b < this.getArguments().length;++b) {
      a.setArgument(b, this.getArgument(b).clone());
    }
    a.setSelectionArray(this.getSelectionArray().slice());
    a.setActionArray(this.getActionArray().slice());
    a.setInputArray(this.getInputArray().slice());
    this.ctatdebug("CTATSAI.clone() this " + this + ", clone " + a + ", clone inputArray " + a.getInputArray());
    return a;
  };
  var y = !1;
  if (Array.isArray(a) && Array.isArray(b) && (Array.isArray(d) || null == d) && (this.setSelectionArray(a), this.setActionArray(b), this.setInputArray(d), y = !0, 0 < a.length && 0 < b.length)) {
    this.setSAI(a[0], b[0], null == d ? null : d[0], "String", f);
    return;
  }
  null !== a && "" !== a && this.setSelection(a);
  null !== a && (this.setSAI(a, b, d, "String", f), y || (this.setSelectionArray(Array.isArray(a) ? a : [a]), this.setActionArray(Array.isArray(b) ? b : [b]), this.setInputArray(Array.isArray(d) ? d : [d]), y = !0));
  this.isDone = function() {
    var a = z.getSelection(), b = z.getAction();
    return null === a || null === b ? !1 : "done" == a.toString().toLowerCase() && "buttonpressed" == b.toString().toLowerCase();
  };
};
CTATSAI.prototype = Object.create(CTATBase.prototype);
CTATSAI.prototype.constructor = CTATSAI;
"undefined" !== typeof module && (module.exports = CTATSAI);
var CTATSkill = function() {
  CTATBase.call(this, "CTATSkill", "skill");
  var a = "", b = "", d = "", f = "", g = 0, c = "", e = !1, h = "", k = "", l = "", q = "", p = "";
  this.setSkillName = function(b) {
    a = b;
  };
  this.setDisplayName = function(a) {
    b = a;
  };
  this.setModelName = function(a) {
    f = a;
  };
  this.setCategory = function(a) {
    d = a;
  };
  this.setLevel = function(a) {
    !0 === isNaN(a) ? ctatdebug("Error: attempting to set a level to NaN") : (g = a, this.setPKnown(String(g)));
  };
  this.setDescription = function(a) {
    c = a;
  };
  this.getSkillName = function() {
    return a;
  };
  this.getDisplayName = function() {
    return b;
  };
  this.hasDisplayName = function() {
    return "" !== b && null !== b;
  };
  this.getModelName = function() {
    return f;
  };
  this.hasCategory = function() {
    return "" !== d;
  };
  this.hasModelName = function() {
    return "" !== f;
  };
  this.getCategory = function() {
    return d;
  };
  this.getLevel = function() {
    return g;
  };
  this.getDescription = function() {
    return c;
  };
  this.setTouched = function(a) {
    e = a;
  };
  this.getTouched = function() {
    return e;
  };
  this.toXMLString = function() {
    return "";
  };
  this.toSetPreferencesXMLString = function() {
    var e = '<skill label="' + b + '" pSlip="' + k + '" description="' + c;
    return e += '" pKnown="' + l + '" category="' + d + '" pLearn="' + q + '" name="' + a + '" pGuess="' + h + '" history="' + p + '" />';
  };
  this.setPGuess = function(a) {
    h = a;
  };
  this.getPGuess = function() {
    return h;
  };
  this.setPSlip = function(a) {
    k = a;
  };
  this.getPSlip = function() {
    return k;
  };
  this.setPLearn = function(a) {
    q = a;
  };
  this.getPLearn = function() {
    return q;
  };
  this.setPKnown = function(a) {
    l = a;
  };
  this.getPKnown = function() {
    return l;
  };
  this.setSkillHistory = function(a) {
    p = a;
  };
  this.getSkillHistory = function() {
    return p;
  };
};
CTATSkill.prototype = Object.create(CTATBase.prototype);
CTATSkill.prototype.constructor = CTATSkill;
var CTATSkillSet = function() {
  CTATBase.call(this, "CTATSkillSet", "skills");
  this.internalSkillSet = [];
  var a = this;
  this.fromXMLString = function(a) {
    this.ctatdebug("fromXMLString ()");
    this.ctatdebug("Skills string: " + a);
    if (null === a) {
      this.ctatdebug("Warning: skill object is null");
    } else {
      if ("" === a) {
        this.ctatdebug("Info: empty skill string provided, bump");
      } else {
        if (a) {
          this.ctatdebug("CTATSkillSet.fromXMLString() Raw:     " + a);
          a = decodeURIComponent(a.replace(/\+/g, " "));
          this.ctatdebug("CTATSkillSet.fromXMLString() Decoded: " + a);
          if (null !== /\/<value>.+<\/value>/.exec(a)) {
            this.parseByValue(a);
          } else {
            var d = (new CTATXML).parseXML(a);
            this.parseByAttributes(d, a);
          }
          this.ctatdebug("fromXMLString () done");
        } else {
          this.ctatdebug("Warning: skill object is undefined or otherwise empty.");
        }
      }
    }
  };
  this.fromXMLData = function(a, d) {
    this.ctatdebug("fromXMLData ()");
    null !== /\/<value>.+<\/value>/.exec(d) ? this.parseByValue(d) : this.parseByAttributes(a);
    this.ctatdebug("fromXMLData () done");
  };
  this.parseByValue = function(b) {
    this.ctatdebug("parseByValue()");
    if (b) {
      b = b.childNodes;
      for (var d = new CTATXML, f = 0;f < b.length;f++) {
        var g = d.getNodeTextValue(b[f]).split("`"), c = g[0].split(" ");
        4 == g.length ? this.addSkill(c[0], g[1], g[2], g[3], g[3], c[1]) : this.addSkill(c[0], g[1], g[2], g[3], g[4], c[1]);
      }
    } else {
      a.ctatdebug("Error: aSkills is null");
    }
  };
  this.parseDOM = function(a) {
    this.ctatdebug("parseDOM()");
    var d = new CTATXML;
    a = d.getElementChildren(a);
    for (var f = 0;f < a.length;f++) {
      var g = d.getNodeTextValue(a[f]).split("`"), c = g[0].split(" ");
      4 == g.length ? this.addSkill(c[0], g[1], g[2], g[3], g[3], c[1]) : this.addSkill(c[0], g[1], g[2], g[3], g[4], c[1]);
    }
  };
  this.parseByAttributes = function(b) {
    this.ctatdebug("parseByAttributes()");
    if (b) {
      if (b = b.childNodes) {
        for (var d = 0;d < b.length;d++) {
          var f = b[d];
          if ("Skill" == f.nodeName || "skill" == f.nodeName) {
            this.ctatdebug("Parsing node (" + d + "): " + f.nodeName + " -> " + f.nodeValue);
            var g = "";
            f.attributes.getNamedItem("history") && (g = f.attributes.getNamedItem("history").value);
            this.addSkill(f.attributes.getNamedItem("name").value, f.attributes.getNamedItem("pKnown").value, .95, f.attributes.getNamedItem("label").value, f.attributes.getNamedItem("label").value, f.attributes.getNamedItem("category").value, f.attributes.getNamedItem("pGuess").value, f.attributes.getNamedItem("pLearn").value, f.attributes.getNamedItem("pSlip").value, g);
          }
        }
      } else {
        this.ctatdebug("Error: list of skill xml elements is null");
      }
    } else {
      a.ctatdebug("Error: aSkills is null");
    }
  };
  this.getSkillSet = function() {
    return this.internalSkillSet;
  };
  this.getSize = function() {
    return this.internalSkillSet.length;
  };
  this.addSkill = function(a, d, f, g, c, e, h, k, l, q) {
    this.ctatdebug("addSkill() name = " + a + " level = " + d + " mastery = " + f + " aDescription = " + g + " adisplayName = " + c + " aCategory = " + e + " pguess= " + h + " plearn = " + k + " pslip = " + l + " history = " + q);
    a = this.setSkillLevel(a, d, f);
    this.ctatdebug("Configuring " + a.getDisplayName());
    g && a.setDescription(g);
    c && a.setDisplayName(c);
    e && a.setCategory(e);
    "" !== h && (a.setPGuess(h), a.setPLearn(k), a.setPSlip(l));
    "" !== q && a.setSkillHistory(q);
    return a;
  };
  this.setSkillLevel = function(a, d, f) {
    this.ctatdebug("setSkillLevel (" + a + "," + d + "," + f + ")");
    f = this.getSkill(a);
    null === f ? (this.ctatdebug("Skill not found, creating new one ..."), f = new CTATSkill, f.setSkillName(a), f.setLevel(d), this.internalSkillSet.push(f)) : (this.ctatdebug("Skill found, adjusting ..."), f.setLevel(1), f.setLevel(d));
    f.setTouched(!0);
    return f;
  };
  this.getSkill = function(a) {
    this.ctatdebug("getSkill (" + a + ") -> " + this.internalSkillSet.length);
    if (!a) {
      return null;
    }
    for (var d = 0;d < this.internalSkillSet.length;d++) {
      var f = this.internalSkillSet[d];
      if (f.getSkillName() == a) {
        return this.ctatdebug("Returning: " + d), f;
      }
    }
    return null;
  };
  this.getSkillLevel = function(a) {
    if (!a) {
      return -1;
    }
    for (var d in this.internalSkillSet) {
      if (d.getSkillName() == a) {
        return d.getLevel();
      }
    }
    return -1;
  };
  this.getTouched = function() {
    this.ctatdebug("getTouched ()");
    for (var a = [], d = 0;d < this.internalSkillSet.length;d++) {
      var f = this.internalSkillSet[d];
      !0 === f.getTouched() && (this.ctatdebug("Adding touched skill: " + f.getSkillName()), a.push(f));
    }
    return a;
  };
  this.untouchSkills = function() {
    this.ctatdebug("untouchSkills ()");
    for (var a = 0;a < this.internalSkillSet.length;a++) {
      this.internalSkillSet[a].setTouched(!1);
    }
  };
  this.toSetPreferencesXMLString = function() {
    this.ctatdebug("toSetPreferencesXMLString ()");
    for (var a = "<skills>", d = 0;d < this.internalSkillSet.length;d++) {
      a += this.internalSkillSet[d].toSetPreferencesXMLString();
    }
    return a + "</skills>";
  };
  this.toLogString = function() {
    this.ctatdebug("toLogString (" + this.internalSkillSet.length + ")");
    for (var a = "", d = 0;d < this.internalSkillSet.length;d++) {
      var f = this.internalSkillSet[d], a = a + ('<skill probability="' + f.getLevel() + '"><name>' + f.getSkillName() + "</name>");
      f.hasCategory() && (a += "<category>" + f.getCategory() + "</category>");
      f.hasModelName() && (a += "<model_name>" + f.getModelName() + "</model_name>");
      a += "</skill>";
    }
    return a;
  };
};
CTATSkillSet.prototype = Object.create(CTATBase.prototype);
CTATSkillSet.prototype.constructor = CTATSkillSet;
"undefined" !== typeof module && (module.exports = CTATSkillSet);
var CTATGuid = function() {
  this.s4 = function() {
    return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
  };
  this.guid = function() {
    return this.s4() + this.s4() + "-" + this.s4() + "-" + this.s4() + "-" + this.s4() + "-" + this.s4() + this.s4() + this.s4();
  };
};
"undefined" !== typeof module && (module.exports = CTATGuid);
function CTATJSONObject(a, b) {
  this.name = a || "";
  this.value = b || null;
}
var transformArray = [], CTATJSON = function() {
  CTATBase.call(this, "CTATJSON", "json");
  var a = null, b = 0;
  this.isJSONObject = function(a) {
    return a.ctat ? !0 : !1;
  };
  this.parse = function(a) {
    return this.parseJSON(a);
  };
  this.parseJSON = function(b) {
    this.ctatdebug("parseJSON ()");
    a = null;
    if ("string" == typeof b) {
      this.ctatdebug("Parsing JSON as a string ... ");
      try {
        a = JSON.parse(b);
      } catch (g) {
        return this.ctatdebug("Error parsing JSON message: " + g.message), a = null;
      }
      this.ctatdebug("Successfully parsed JSON string");
    }
    this.ctatdebug("JSON string has already been parsed, assigning as an object ...");
    for (var f in a) {
      return this.ctatdebug("Creating internal JSON object with name: " + f), b = new CTATJSONObject, b.name = f, b.value = a[f], b;
    }
    return null;
  };
  this.getElementName = function(a) {
    return "object" != typeof a ? (this.ctatdebug("Internal error, the provided element is not of type CTATJSONObject, instead we found: " + typeof a), null) : a.name;
  };
  this.getElementValue = function(a) {
    return null == a ? (this.ctatdebug("Error: anElement is null"), null) : "object" != typeof a ? (this.ctatdebug("Internal error, the provided element is not of type CTATJSONObject, instead we found: " + typeof a), null) : a.value;
  };
  this.getElementChildren = function(a) {
    if (null == a) {
      return this.ctatdebug("Error: anElement is null"), null;
    }
    if ("object" != typeof a) {
      return this.ctatdebug("Internal error, the provided element is not of type CTATJSONObject, instead we found: " + typeof a), null;
    }
    var b = null;
    a = a.value;
    var g = [], c;
    for (c in a) {
      var e = a[c];
      if ("string" == typeof e) {
        b = new CTATJSONObject, b.name = c, b.value = e, g.push(b);
      } else {
        if (null == e[0] || void 0 == e[0]) {
          b = new CTATJSONObject, b.name = c, b.value = e, g.push(b);
        } else {
          for (var h in e) {
            b = new CTATJSONObject, b.name = c, b.value = e[h], g.push(b);
          }
        }
      }
    }
    return g;
  };
  this.getNodeTextValue = function(a) {
    if ("string" != typeof a.value) {
      var b = null;
      for (b in a.value) {
        if ("content" == b) {
          return a.value[b].toString();
        }
      }
      for (b in a.value) {
        if ("value" == b) {
          return a.value[b].toString();
        }
      }
    }
    return a.value;
  };
  this.getElementAttr = function(a, b) {
    var g = a.value, c;
    for (c in g) {
      if (c == b) {
        return g[c];
      }
    }
    return null;
  };
  this.isArray = function(a) {
    return "[object Array]" === Object.prototype.toString.call(a);
  };
  this.walkDOM = function(a) {
    this.ctatdebug("walkDOM () >>>>>>>>>>>>>>>>>>");
    b = 0;
    this.walk(a);
    this.ctatdebug("walkDOM () <<<<<<<<<<<<<<<<<<");
  };
  this.walk = function(a) {
    b++;
    if (!(5 < b)) {
      var f = 0, g;
      for (g in a) {
        var c = a[g];
        this.ctatdebug("(" + f + ") typeof (key): " + typeof g + " -> typeof(value): " + typeof c + "(" + c.length + ")");
        "string" != typeof c ? (this.ctatdebug("walk (" + g + ")"), this.walk(c)) : this.ctatdebug("walk (" + g + ") : " + c);
        f++;
      }
    }
  };
  this.toJSONString = function(a) {
    return JSON.stringify(a, null, 2);
  };
  this.syntaxHighlight = function(a) {
    "string" != typeof a && (a = JSON.stringify(a, void 0, 2));
    a = a.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function(a) {
      var b = "number";
      /^"/.test(a) ? b = /:$/.test(a) ? "key" : "string" : /true|false/.test(a) ? b = "boolean" : /null/.test(a) && (b = "null");
      return '<span class="' + b + '">' + a + "</span>";
    });
  };
};
CTATJSON.prototype = Object.create(CTATBase.prototype);
CTATJSON.prototype.constructor = CTATJSON;
"undefined" !== typeof module && (module.exports = CTATJSON);
var CTATMessage = function(a) {
  CTATBase.call(this, "CTATMessage", "message");
  CTATMessage.makeTransactionId = function() {
    return (new CTATGuid).guid();
  };
  var b = a, d = null, f = null;
  void 0 == a && (b = null);
  f = "xml" == CTATConfig.parserType ? new CTATXML : new CTATJSON;
  b && (this.ctatdebug("messageParser " + f + ", messageObj " + b), b.children && this.ctatdebug(b.children));
  var g = "ungraded", c = !1, e = !1, h = new CTATSkillSet, k = "", l = "", q = "", p = "", m = "", w = null, t = !1;
  this.assignSAI = function(a) {
    e = !0;
    w = a;
  };
  this.setTransactionID = function(a) {
    l = a;
  };
  this.getTransactionID = function() {
    return l;
  };
  this.setGradeResult = function(a) {
    g = a;
  };
  this.getGradeResult = function() {
    return g;
  };
  this.getXMLObject = function() {
    return b;
  };
  this.getSkillsObject = function() {
    return h;
  };
  this.getSuccessMessage = function() {
    return q;
  };
  this.getBuggyMsg = function() {
    return p;
  };
  this.getHighlightMsg = function() {
    return m;
  };
  this.parse = function() {
    this.ctatdebug("parse ()");
    if (null !== b) {
      this.ctatdebug("messageParser: " + f);
      this.ctatdebug("Root name: " + f.getElementName(b));
      "tool_message" == f.getElementName(b) ? (this.ctatdebug("Detected tool message"), k = "tool_message") : "message" != f.getElementName(b) ? (this.ctatdebug("Detected log message"), c = !0, k = f.getElementName(b)) : (this.ctatdebug("Detected regular message"), c = !1, this.parseMessageType());
      this.parseTransactionID();
      this.parseSAI();
      for (var a = f.getElementChildren(b), e = 0;e < a.length;e++) {
        var g = a[e];
        "properties" == f.getElementName(g) && (ctatdebug("Found a 'properties' element ... "), d = f.getElementChildren(g));
      }
      this.ctatdebug("Message " + k + ", with transaction id: " + l);
    }
  };
  this.parseSAI = function() {
    this.ctatdebug("parseSAI ()");
    var a = "", d = "", g = "", l = "", t = [], G = [], F = [];
    if ("tool_message" == k) {
      this.ctatdebug("Parsing s, a and i");
      a = f.getElementChildren(b);
      for (d = 0;d < a.length;d++) {
        if (g = a[d], "tool_message" == f.getElementName(g)) {
          for (g = f.getElementChildren(g), l = 0;l < g.length;l++) {
            t = g[l], "event_descriptor" == f.getElementName(t) && (w = new CTATSAI, w.fromXMLInternal(t));
          }
        }
      }
      e = !0;
    } else {
      if (c) {
        this.ctatdebug("isLogMessage ...");
        for (var x = f.getElementChildren(b), H = 0;H < x.length;H++) {
          var u = x[H];
          if ("event_descriptor" == f.getElementName(u)) {
            for (var u = f.getElementChildren(u), D = 0;D < u.length;D++) {
              var C = u[D];
              "selection" == f.getElementName(C) && (a = f.getNodeTextValue(C), t.push(C));
              "action" == f.getElementName(C) && (d = f.getNodeTextValue(C), G.push(C));
              "input" == f.getElementName(C) && (g = f.getNodeTextValue(C), F.push(C));
              "prompt" == f.getElementName(C) && (l = f.getNodeTextValue(C));
            }
          }
        }
      } else {
        for (this.ctatdebug("!isLogMessage ..."), x = f.getElementChildren(b), H = 0;H < x.length;H++) {
          if (u = x[H], "properties" == f.getElementName(u)) {
            for (u = f.getElementChildren(u), D = 0;D < u.length;D++) {
              C = u[D], this.ctatdebug("Nodename: " + f.getElementName(C)), "Skills" == f.getElementName(C) && h.parseByValue(C), "SuccessMsg" == f.getElementName(C) && (q = a = f.getNodeTextValue(C)), "BuggyMsg" == f.getElementName(C) && (p = f.getNodeTextValue(C)), "Selection" == f.getElementName(C) && (a = f.getNodeTextValue(C), t.push(C)), "Action" == f.getElementName(C) && (d = f.getNodeTextValue(C), G.push(C)), "Input" == f.getElementName(C) && (g = f.getNodeTextValue(C), F.push(C)), "prompt" == 
              f.getElementName(C) && (l = f.getNodeTextValue(C)), "HighlightMsgText" == f.getElementName(C) && (m = f.getNodeTextValue(C));
            }
          }
        }
      }
      this.ctatdebug("SAI: " + a + "," + d + "," + g);
      "" !== a && null !== a ? (w = new CTATSAI(a, d, g, l), w.setArrayFromElements(t), w.setArrayFromElements(G), w.setArrayFromElements(F), e = !0) : (this.ctatdebug("No SAI found"), e = !1);
      this.ctatdebug("parseSAI () done, hassai: " + e + ", (" + a + "," + d + "," + g + "," + l + ")");
    }
  };
  this.parseTransactionID = function() {
    this.ctatdebug("parseTransactionID()");
    if ("tool_message" != k) {
      if (!c) {
        for (var a = f.getElementChildren(b), e = 0;e < a.length;e++) {
          var d = a[e];
          if ("properties" == f.getElementName(d)) {
            for (var d = f.getElementChildren(d), g = 0;g < d.length;g++) {
              var h = d[g];
              "transaction_id" == f.getElementName(h) && (l = f.getNodeTextValue(h));
            }
          }
        }
      }
      this.ctatdebug("parseTransactionID() done, id: " + l);
    }
  };
  this.parseMessageType = function() {
    this.ctatdebug("parseMessageType()");
    for (var a = f.getElementChildren(b), c = 0;c < a.length;c++) {
      var e = a[c];
      if ("properties" == f.getElementName(e)) {
        for (var e = f.getElementChildren(e), d = 0;d < e.length;d++) {
          var g = e[d];
          "MessageType" == f.getElementName(g) && (k = f.getNodeTextValue(g));
        }
      }
    }
    this.ctatdebug("parseMessageType() -> " + k);
  };
  this.getMessageType = function() {
    return k;
  };
  this.getTransactionID = function() {
    return l;
  };
  this.getSAI = function() {
    return e ? w : new CTATSAI;
  };
  this.getSelection = function() {
    return e ? w.getSelection() : "";
  };
  this.getAction = function() {
    return e ? w.getAction() : "";
  };
  this.getInput = function() {
    return e ? w.getInput() : "";
  };
  this.getSelectionArray = function() {
    return e ? w.getSelectionArray() : [];
  };
  this.getActionArray = function() {
    return e ? w.getActionArray() : [];
  };
  this.getInputArray = function() {
    return e ? w.getInputArray() : [];
  };
  this.getXML = function() {
    return b;
  };
  this.getXMLString = function(a) {
    if (b.xml) {
      return b.xml;
    }
    if (XMLSerializer) {
      return (new XMLSerializer).serializeToString(b);
    }
    alert("ERROR: Extremely old browser");
    return "";
  };
  this.getIndicator = function() {
    return "AssociatedRules" != k ? "" : this.getProperty("Indicator");
  };
  this.getIndicatorSub = function() {
    return "AssociatedRules" != k ? "" : this.getProperty("IndicatorSub");
  };
  this.setProperty = function(a, b) {
    this.ctatdebug("setProperty (" + a + "," + b + ")");
    if (null !== d) {
      for (var c = 0;c < d.length;c++) {
        f.getElementName(d[c]);
      }
    } else {
      this.ctatdebug("Internal error: no messageProperties object available");
    }
  };
  this.getProperty = function(a) {
    if (!c) {
      if (null !== d) {
        for (var b = 0;b < d.length;b++) {
          var e = d[b];
          if (f.getElementName(e) == a) {
            return f.getNodeTextValue(e);
          }
        }
      } else {
        this.ctatdebug("Internal error: no messageProperties object available");
      }
    }
    return "";
  };
  this.hasProperty = function(a) {
    a = this.getProperty(a);
    return !c && "" !== a;
  };
  this.hasSAI = function() {
    return e;
  };
  this.isEndOfTransaction = function() {
    return "true" == this.getProperty("end_of_transaction") ? !0 : !1;
  };
  this.isLogMessageType = function() {
    return c;
  };
  this.hasStudentSAI = function() {
    return !1;
  };
  this.getStudentSelection = function() {
    return null.getSelection();
  };
  this.getStudentAction = function() {
    return null.getAction();
  };
  this.getStudentInput = function() {
    return null.getInput();
  };
  this.getStudentSAI = function() {
    return null;
  };
  this.getToolSelection = function() {
    return "";
  };
  l = CTATMessage.makeTransactionId();
  this.parse();
  this.init = function(a) {
    this.setMessageType(a);
  };
  this.setSelection = function(a) {
    w && w.setSelection(a);
    this.setProperty("SELECTION", a);
  };
  this.setAction = function(a) {
    w && w.setAction(a);
    this.setProperty("ACTION", a);
  };
  this.setInput = function(a) {
    w && w.setInput(a);
    this.setProperty("INPUT", a);
  };
  this.lockTransactionId = function(a) {
    if (null === a || "undefined" === typeof a || 1 > a.length) {
      throw new CTATExampleTracerException("lockTranactionId() argument " + a + " must be a valid id");
    }
    this.setProperty(CTATMessage.TRANSACTION_ID_TAG, a);
    t = !0;
  };
  this.setMessageType = function(a) {
    this.setProperty(CTATMessage.MESSAGE_TYPE, a);
    k = a;
  };
  this.setTransactionId = function(a) {
    if (!t) {
      if (null === a || "undefined" === typeof a || 1 > a.length) {
        a = CTATMessage.makeTransactionId();
      }
      this.setProperty(CTATMessage.TRANSACTION_ID_TAG, a);
    }
  };
  CTATMessage.create = function(a, b) {
    var c = new CTATMessage;
    c.init(a);
    return c;
  };
};
Object.defineProperty(CTATMessage, "MESSAGE_TYPE", {enumerable:!1, configurable:!1, writable:!1, value:"MessageType"});
Object.defineProperty(CTATMessage, "TRANSACTION_ID_TAG", {enumerable:!1, configurable:!1, writable:!1, value:"transaction_id"});
CTATMessage.prototype = Object.create(CTATBase.prototype);
CTATMessage.prototype.constructor = CTATMessage;
"undefined" !== typeof module && (module.exports = CTATMessage);
var CTATComponentDescription = function() {
  CTATBase.call(this, "CTATComponentDescription", "");
  this.groupName = this.name = this.type = "Unknown";
  this.height = this.width = this.y = this.x = 0;
  this.tabIndex = this.zIndex = -1;
  this.styles = {};
  this.params = {};
  this.componentPointer = null;
  this.setComponentPointer = function(a) {
    this.componentPointer = a;
  };
  this.getComponentPointer = function() {
    return this.componentPointer;
  };
  this.setGenericDefaults = function() {
    this.name = "Generic name";
    this.styles = {BackgroundColor:"#ffffff", BorderColor:"#999999", FontName:CTATGlobals.Font.family, FontSize:CTATGlobals.Font.size, FontColor:CTATGlobals.Font.color, FontBold:!1, FontItalic:!1, FontUnderlined:!1, TextAlign:globalAlign, ShowHintHighlight:!1, blockOnCorrect:!1, disabledBackgroundColor:"#999999", disabledTextColor:"#999999", tutorComponent:null};
    return this;
  };
};
CTATComponentDescription.prototype = Object.create(CTATBase.prototype);
CTATComponentDescription.prototype.constructor = CTATComponentDescription;
var CTATComponentReference = function(a, b) {
  var d = a, f = b;
  this.setElement = function(a) {
    d = a;
  };
  this.getElement = function() {
    return d;
  };
  this.setDiv = function(a) {
    f = a;
  };
  this.getDiv = function() {
    return f;
  };
};
CTATComponentReference.components = {};
CTATComponentReference.list = function() {
  for (var a in CTATComponentReference.components) {
    var b = CTATComponentReference.components[a];
    ctatdebug("Component: " + b.getElement().getName() + ", with div: " + b.getDiv().id);
  }
};
CTATComponentReference.getComponentFromID = function(a) {
  var b = CTATComponentReference.components;
  return b.hasOwnProperty(a) ? (a = b[a], a.getElement() ? a.getElement() : null) : null;
};
CTATComponentReference.add = function(a, b) {
  var d = new CTATComponentReference(a, b);
  return CTATComponentReference.components[d.getDiv().getAttribute("id")] = d;
};
var CTATCompBase = function(a, b, d, f, g, c) {
  CTATBase.call(this, a, b);
  var e = d || 0, h = f || 0, k = g || -2, l = c || -2, q = 50, p = 25, m = !1, w = "", t = !1, z = !0, y = null, r = "", A = -1;
  this.isTabIndexable = !0;
  var E = 0, G = null, F = null, x = this, H = null, u = "hidden", D = CTATGlobalFunctions.gensym.z_index(), C = CTATGlobalFunctions.gensym.div_id(), B = CTATGlobalFunctions.gensym.z_index(), J = CTATGlobalFunctions.gensym.div_id();
  this.setIsAbstractComponent = function(a) {
    m = a;
  };
  this.isAbstractComponent = function() {
    return m;
  };
  this.setTabIndex = function(a) {
    !0 === this.isTabIndexable ? (A = a, 0 > A ? (A = CTATGlobals.Tab.Tracker, CTATGlobals.Tab.Tracker++) : CTATGlobals.Tab.Tracker = A) : A = -1;
  };
  this.getTabIndex = function() {
    return A;
  };
  this.setZIndex = function(a) {
    x.ctatdebug("Setting z index to: " + a);
    E = a;
    null !== y && (y.style.zIndex = a);
  };
  this.getZIndex = function() {
    return E;
  };
  this.setDefaultWidth = function(a) {
    q = a;
  };
  this.getDefaultWidth = function() {
    return q;
  };
  this.setDefaultHeight = function(a) {
    p = a;
  };
  this.getDefaultHeight = function() {
    return p;
  };
  this.processCommShellEvent = function(a, b) {
    x.ctatdebug("processCommShellEvent (" + a + ")");
  };
  this.makeDivWrapper = function(a) {
    y = document.createElement("div");
    y.id = this.getName();
    y.setAttribute("onkeypress", "return noenter(event)");
    y.setAttribute("data-ctat-component", this.getClassName());
    y.style.position = "absolute";
    y.style.left = e + "px";
    y.style.top = h + "px";
    y.style.zIndex = D;
    y.style.width = x.getWidth() + "px";
    y.style.height = x.getHeight() + "px";
    $(y).data("CTATComponent", this);
    a.appendChild(y);
  };
  this.setDivWrapper = function(a) {
    y = a;
    y.setAttribute("data-ctat-component", this.getClassName());
  };
  var I = this.setClassName;
  this.setClassName = function(a) {
    I(a);
    y && y.setAttribute("data-ctat-component", this.getClassName());
  };
  this.wrapComponent = function(a) {
    x.ctatdebug("wrapComponent ()");
    x.makeDivWrapper(a);
    x.ctatdebug("wrapComponent () done");
  };
  this.createCanvas = function() {
    x.ctatdebug("createCanvas ()");
    H = document.createElement("canvas");
    H.setAttribute("id", J);
    H.setAttribute("onkeypress", "return noenter(event)");
    H.setAttribute("width", k + canvasCalibrate + "px");
    H.setAttribute("height", l + canvasCalibrate + "px");
    H.setAttribute("style", "border: 1px " + this.borderColor + " solid; " + ("hidden" == u ? "visibility: hidden; " : "") + "z-index:" + B + ";");
    y.firstChild ? y.insertBefore(H, y.firstChild) : y.appendChild(H);
    return H;
  };
  this.redraw = function() {
    var a = y.style.display;
    y.style.display = "none";
    y.style.display = a;
  };
  this.setCanvasVisibility = function(a) {
    u = a;
  };
  this.getSubCanvasCtx = function() {
    if (H) {
      return H.getContext("2d");
    }
  };
  this.getSubCanvas = function() {
    return H;
  };
  this.getX = function() {
    return e;
  };
  this.getY = function() {
    return h;
  };
  this.getWidth = function() {
    if (0 >= k) {
      var a;
      G ? a = window.getComputedStyle(G) : y && (a = window.getComputedStyle(y));
      if (a) {
        return parseFloat(a.width);
      }
    }
    return k;
  };
  this.getHeight = function() {
    if (0 >= l && y) {
      var a = window.getComputedStyle(y);
      return parseFloat(a.getPropertyValue("height"));
    }
    return l;
  };
  this.getText = function() {
    return w;
  };
  this.getEnabled = function() {
    return z;
  };
  this.assignEnabled = function(a) {
    z = a;
  };
  this.setEnabled = function(a) {
    x.ctatdebug("setEnabled (" + a + ")");
    x.assignEnabled(a);
    G ? G.disabled = !z : x.ctatdebug("Error: component pointer is null");
  };
  this.lock = this.setEnabled.bind(x, !1);
  this.unlock = this.setEnabled.bind(x, !0);
  this.getDivWrap = function() {
    return y;
  };
  this.getComponent = function() {
    return G;
  };
  this.component = null;
  Object.defineProperty(this, "component", {get:function() {
    return G;
  }});
  this.getLabel = function() {
    return F;
  };
  this.getCanvasZIndex = function() {
    return B;
  };
  this.getComponentGroup = function() {
    return r;
  };
  this.setComponent = function(a) {
    G = a;
    G.classList.add("CTAT-gen-component");
    this.setEnabled(this.getEnabled());
  };
  this.getTopDivZIndex = function() {
    return D;
  };
  this.getTopDivID = function() {
    return C;
  };
  this.setComponentGroup = function(a) {
    r = a;
    G && (G.name = a);
  };
  this.setLabel = function(a) {
    F = a;
  };
  this.assignText = function(a) {
    w = a;
  };
  this.init = function() {
    x.ctatdebug("THIS IS THE BASE INIT METHOD");
  };
  this.initialize = function() {
    x.ctatdebug("initialize ()");
    x.configFromDescription();
    x.init();
    x.processSerialization();
    x.render();
    x.processTabOrder();
    x.ctatdebug("initialize () done");
  };
  this.getInitialized = function() {
    return t;
  };
  this.setInitialized = function(a) {
    x.ctatdebug("setInitialized (" + a + ")");
    t = a;
    !0 !== t || y ? x.ctatdebug("Not wrapping, initialized=" + t + ", divWrapper = " + y) : (x.ctatdebug("Wrapping a component and appending it to the top container div if one was never set ..."), (a = findPointOfAttachment(this.getName())) ? (x.ctatdebug("Attaching component to existing MovieClip ..."), x.wrapComponent(a.getDivWrapper())) : (x.ctatdebug("Attaching component to main div ..."), $("#" + ctatcontainer).first() && x.wrapComponent(getSafeElementById(ctatcontainer))));
    x.ctatdebug("setInitialized () done");
  };
  this.addSafeEventListener = function(a, b, c) {
    x.ctatdebug("addSafeEventListener (" + a + ")");
    x.ctatdebug("Adding event listener to: " + c);
    c ? c.addEventListener(a, b) : (G ? (x.ctatdebug("Adding eventlistener to component instead of target"), G.addEventListener(a, b)) : x.ctatdebug("Error: pointer to component is null, can't add event listener"), x.ctatdebug("addSafeEventListener () done"));
  };
  this.drawComponent = function() {
  };
  this.addComponentReference = function(a, b) {
    x.ctatdebug("addComponentReference (" + a.getName() + " -> " + b.getAttribute("id") + ")");
    a.tabIndex = this.getTabIndex();
    CTATComponentReference.add(a, b);
    x.ctatdebug("addComponentReference ()");
  };
  this.getComponentFromID = function(a) {
    return CTATComponentReference.getComponentFromID(a);
  };
  this.processSerialization = function() {
    x.ctatdebug("processSerialization()");
    x.ctatdebug("implement in child class");
  };
  this.move = function(a, b) {
    e = a;
    h = b;
    y && (y.style.left = e + "px", y.style.top = h + "px");
  };
  this.setSize = function(a, b) {
    x.ctatdebug("setSize (" + a + "," + b + ")");
    this.setWidth(a);
    this.setHeight(b);
  };
  this.SetVisible = this.setVisible = function(a) {
    a = CTATGlobalFunctions.toBoolean(a);
    u = !0 === a ? "block" : "hidden";
    H && H.setAttribute("style", "border: 0px; position: absolute; " + (a ? "" : "visibility:hidden; ") + "; left:" + e + "px; top:" + h + "px; z-index:" + B + ";");
    y.style.visibility = !0 === a ? null : "hidden";
  };
  this.FadeIn = function(a) {
    x.SetVisible(!0);
  };
  this.FadeOut = function(a) {
    x.SetVisible(!1);
  };
  this.reset = function() {
  };
  this.setX = function(a) {
    this.x = a;
    y.style.left = this.x + "px";
    !0 === t && this.render();
  };
  this.setY = function(a) {
    this.y = a;
    y.style.top = this.y + "px";
    !0 === t && this.render();
  };
  this.setWidth = function(a) {
    k = a;
    y && (y.style.width = this.width);
    this.render();
  };
  this.setHeight = function(a) {
    l = a;
    y && (y.style.width = this.width);
    this.render();
  };
  this.setText = function(a) {
    w = a;
    return this;
  };
  this.getValue = function() {
    return G ? G.value : "";
  };
  this.backgrade = !1;
  this.processOnFocus = function() {
    x.ctatdebug("processOnFocus (" + x.getName() + ")");
    $(".CTAT--hint").each(function() {
      for (var a = $(this), b = null;a && null === b;) {
        a.data("CTATComponent") ? b = a.data("CTATComponent") : a = a.parent();
      }
      b && b.setHintHighlight && b.setHintHighlight(!1, null);
    });
    CTATGlobals.Tab.previousFocus = CTATGlobals.Tab.Focus;
    CTATGlobals.Tab.Focus != x ? (x.ctatdebug("CTATGlobals.Tab.Focus!=pointer, updating CTATGlobals.Tab.Focus ..."), CTATGlobals.Tab.Focus = x) : x.ctatdebug("CTATGlobals.Tab.Focus==pointer");
    x.ctatdebug("processOnFocus () done");
  };
  this.processFocus = function(a) {
    x.ctatdebug("processFocus ()");
    a.currentTarget.getAttribute("id");
    if (x) {
      mobileAPI && !0 === mobileAPI.getEnabled() && x.hideKeyboard();
      commShell && commShell.processComponentFocus(x);
      if (CTATGlobals.Tab.Focus) {
        x.ctatdebug("old focus: " + CTATGlobals.Tab.Focus.getName() + ", new focus:" + x.getName());
        if (CTATGlobals.Tab.Focus == x) {
          x.ctatdebug("We're already there!");
          return;
        }
        CTATGlobals.Tab.Focus.backgrade && CTATGlobals.Tab.Focus.processAction();
      } else {
        x.ctatdebug("No previously focused component yet, can't grade");
      }
      "hint" == x.getClassName() || "CTATHintButton" == x.getClassName() ? x.ctatdebug("Info: focus moved to hint, bump") : (CTATGlobals.Tab.previousFocus = CTATGlobals.Tab.Focus, CTATGlobals.Tab.Focus = x, x.ctatdebug("processFocus () done"));
    } else {
      x.ctatdebug("Error: component reference is null");
    }
  };
  this.processTabOrder = function() {
    x.ctatdebug("processTabOrder (" + A + ")");
    !0 === m ? x.ctatdebug("Component is an abstract component, bump") : G ? (x.ctatdebug("We have a component, actually assigning to html component ..."), G.tabIndex = A, G.onfocus = x.processOnFocus) : x.ctatdebug("Error: we don't have an html component yet, can't assign tab index");
  };
  this.hideKeyboard = function() {
    document.activeElement.blur();
    $("input").blur();
  };
};
CTATCompBase.prototype = Object.create(CTATBase.prototype);
CTATCompBase.prototype.constructor = CTATCompBase;
var CTATCSS = function() {
  var a = 0, b = [], d = 0, f = [], g = 0, c = [];
  this.resetSelectors = function() {
    d = 0;
    f = [];
    f[d] = [];
  };
  this.resetCSSStringArray = function() {
    c = [];
    g = 0;
  };
  this.clearCSS = function() {
    this.resetSelectors();
    this.resetCSSStringArray();
    b = [];
    a = 0;
  };
  this.addStringCSS = function(a) {
    c[g] = a;
    g++;
  };
  this.addCSSAttribute = function(c, d) {
    b[a] = c;
    b[a + 1] = d;
    a += 2;
  };
  this.removeStringCSS = function(a) {
    a = c.indexOf(a);
    0 <= a && c.splice(a, 1);
  };
  this.removeCSSAttribute = function(a) {
    a = b.indexOf(a);
    0 <= a && b.splice(a, 2);
  };
  this.modifyCSSAttribute = function(a, c) {
    var d = b.indexOf(a);
    -1 == d ? this.addCSSAttribute(a, c) : b[d + 1] = c;
  };
  this.addSelector = function(a) {
    f[d] = [];
    f[d][0] = a;
    d++;
  };
  this.addSelectorAttribute = function(a, b, c) {
    var g = 1;
    a: {
      if (0 === d) {
        a = 0;
      } else {
        for (var q = 0;q < f.length && null !== f[q][0];q++) {
          if (f[q][0] == a) {
            a = q;
            break a;
          }
        }
        a = -1;
      }
    }
    for (;void 0 !== f[a][g];) {
      g++;
    }
    f[a][g] = b;
    f[a][g + 1] = c;
  };
  this.toCSSString = function() {
    for (var a = "", d = 0;d < f.length;d++) {
      for (var a = a + (f[d][0] + " { "), g = 1;g < f[d].length;g++) {
        a += f[d][g], a = 0 === g % 2 ? a + "; " : a + ": ";
      }
      a += " }; ";
    }
    for (d = 0;d < b.length;d++) {
      a += b[d], a = 0 === d % 2 ? a + ": " : a + "; ";
    }
    for (d = 0;d < c.length;d++) {
      a += c[d] + " ";
    }
    return a;
  };
};
CTAT.Component = {};
CTAT.Component.Base = {};
CTAT.Component.Base.Style = function(a, b, d, f, g, c) {
  CTATCompBase.call(this, a, b, d, f, g, c);
  var e = new CTATCSS;
  this.addCSSAttribute = function(a, b) {
    e.addCSSAttribute(a, b);
    this.render();
  };
  this.removeCSSAttribute = function(a) {
    e.removeCSSAttribute(a);
    this.render();
  };
  this.addStringCSS = function(a) {
    e.addStringCSS(a);
    this.render();
  };
  this.removeStringCSS = function(a) {
    e.removeStringCSS(a);
    this.render();
  };
  this.modifyCSSAttribute = function(a, b) {
    e.modifyCSSAttribute(a, b);
    this.render();
  };
  this.getCSS = function() {
    return e.toCSSString();
  };
  this.render = function() {
    !0 === this.isAbstractComponent() ? this.ctatdebug("Component is an abstract component, bump") : this.getInitialized() && (this.getComponent() ? this.ctatdebug(e.toCSSString()) : this.ctatdebug("Internal error, html component not available for rendering"));
  };
  this.setStyleAll = function(a, b) {
    this.getSubCanvas() && this.getSubCanvas().setAttribute(a, b);
    this.modifyCSSAttribute(a, b);
  };
};
CTAT.Component.Base.Style.prototype = Object.create(CTATCompBase.prototype);
CTAT.Component.Base.Style.prototype.constructor = CTAT.Component.Base.Style;
CTAT.Component.Base.Graphical = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Style.call(this, a, b, f, g, c, e);
  var h = d || (new CTATComponentDescription).setGenericDefaults();
  this.getGrDescription = function() {
    return h;
  };
  this.setGrDescription = function(a) {
    h = a;
    this.processDescription(h);
  };
  var k = CTATGlobals.Visual.BackgroundColor, l = "white", q = 1, p = CTATGlobals.Visual.BorderColor, m = !1, w = "solid", t = 0, z = "1px", y = 0, r = CTATGlobals.Font.color, A = "black", E = CTATGlobals.Font.family, G = CTATGlobals.Font.size, F = !1, x = !1, H = !1;
  this.align = CTATGlobals.Align;
  this.getAlign = function() {
    return this.component ? $(this.component).css("text-align") : this.align;
  };
  this.setAlign = function(a) {
    this.align = a;
    this.component && this.getAlign() !== this.align && (this.component.style.textAlign = this.align);
    return this;
  };
  this.getBackgroundColor = function() {
    return this.component ? $(this.component).css("background-color") : k;
  };
  this.setBackgroundColor = function(a) {
    a = CTATGlobalFunctions.formatColor(a);
    a != this.getBackgroundColor() && (k = a, this.component && (this.component.style.backgroundColor = k));
    return this;
  };
  this.getDisabledBGColor = function() {
    return l;
  };
  this.setDisabledBGColor = function(a) {
    l = CTATGlobalFunctions.formatColor(a);
    return this;
  };
  this.getDisabledTextColor = function() {
    return A;
  };
  this.setDisabledTextColor = function(a) {
    A = CTATGlobalFunctions.formatColor(a);
    return this;
  };
  this.getBorderColor = function() {
    return this.component ? $(this.component).css("border-color") : p;
  };
  this.setBorderColor = function(a) {
    p = CTATGlobalFunctions.formatColor(a);
    this.component && p !== this.getBorderColor() && (this.component.style.borderColor = p);
    return this;
  };
  this.getBorderRoundness = function() {
    return this.component ? $(this.component).css("border-radius") : t;
  };
  this.setBorderRoundness = function(a) {
    a = parseInt(a);
    t = isNaN(a) ? 0 : a;
    this.component && this.getBorderRoundness() !== t && (this.component.style.borderRadius = t);
    return this;
  };
  this.getBorderStyle = function() {
    return this.component ? $(this.component).css("border-style") : w;
  };
  this.setBorderStyle = function(a) {
    w = a;
    this.component && this.getBorderStyle() !== w && (this.component.style.borderStyle = w);
    return this;
  };
  this.getBorderWidth = function() {
    return this.component ? $(this.component).css("borderWidth") : z;
  };
  this.setBorderWidth = function(a) {
    z = parseInt(a);
    isNaN(z) && (z = 0);
    this.component && this.getBorderWidth() !== z && (this.component.style.borderWidth = z);
    return this;
  };
  this.getPadding = function() {
    return this.component ? parseInt($(this.component).css("padding-left")) : y;
  };
  this.setPadding = function(a) {
    y = parseInt(a);
    isNaN(y) && (y = 0);
    this.component && this.getPadding() !== y && (this.component.style.padding = y + "px");
    return this;
  };
  this.getFontColor = function() {
    this.component && $(this.component).css("color");
    return r;
  };
  this.setFontColor = function(a) {
    r = CTATGlobalFunctions.formatColor(a);
    this.component && this.getFontColor() !== r && (this.component.style.color = r);
    return this;
  };
  this.getFontFamily = function() {
    return this.component ? $(this.component).css("font-family") : E;
  };
  this.setFontFamily = function(a) {
    E = a;
    this.component && this.getFontFamily() !== E && (this.component.style.fontFamily = E);
    return this;
  };
  this.getFontSize = function() {
    this.component && $(this.component).css("font-size");
    return G;
  };
  this.setFontSize = function(a) {
    a = parseInt(a);
    G = isNaN(a) ? CTATGlobals.Font.size : a;
    this.component && parseInt(this.getFontSize()) !== G && (this.component.style.fontSize = G + "pt");
    return this;
  };
  this.getShowBorder = function() {
    if (this.component) {
      var a = window.getComputedStyle(this.component);
      return "none" != a.getPropertyValue("border-style") && 0 < parseInt(a.getPropertyValue("border-width"));
    }
    return m;
  };
  this.setShowBorder = function(a) {
    m = CTATGlobalFunctions.toBoolean(a);
    this.component && this.getShowBorder() !== m && (m ? (this.setBorderStyle(w), this.setBorderWidth(z)) : this.setBorderStyle("none"));
    return this;
  };
  this.getTransparencyValue = function() {
    return q;
  };
  this.setTransparencyValue = function(a) {
    q = Number(a);
    isNaN(q) && (q = 1);
    return this;
  };
  this.getUnderlined = function() {
    return this.component ? "underline" === window.getComputedStyle(this.component).getPropertyValue("text-decoration") : H;
  };
  this.setUnderlined = function(a) {
    H = CTATGlobalFunctions.toBoolean(a);
    this.component && this.getUnderlined() !== H && (this.component.style.textDecoration = H ? "underline" : null);
    return this;
  };
  this.getBolded = function() {
    return this.component ? "bold" === window.getComputedStyle(this.component).getPropertyValue("font-weight") : F;
  };
  this.setBolded = function(a) {
    F = CTATGlobalFunctions.stringToBoolean(a);
    this.component && this.getBolded() !== F && (this.component.style.fontWeight = F ? "bold" : null);
    return this;
  };
  this.getItalicized = function() {
    return this.component ? "italic" === window.getComputedStyle(this.component).getPropertyValue("font-style") : x;
  };
  this.setItalicized = function(a) {
    x = CTATGlobalFunctions.toBoolean(a);
    this.component && this.getItalicized() !== x && (this.component.style.fontStyle = x ? "italic" : null);
    return this;
  };
  var u = this;
  a = function(a) {
    var b = a || {};
    return {setHandler:function(a, c) {
      b[a] = c;
    }, set:function(a) {
      if (b.hasOwnProperty(a)) {
        if (b[a]) {
          var c = Array.prototype.slice.call(arguments, 1);
          return b[a].apply(u, c);
        }
        u.ctatdebug("Error: NULL handler for " + a);
      } else {
        u.ctatdebug("Error: No handler set for " + a);
      }
    }};
  };
  this.style_handlers = a({BackgroundColor:this.setBackgroundColor, BorderColor:this.setBorderColor, borderRoundness:this.setBorderRoundness, disabledBackgroundColor:this.setDisabledBGColor, disabledTextColor:this.setDisabledTextColor, DrawBorder:this.setShowBorder, FontFace:this.setFontFamily, FontSize:this.setFontSize, FontBold:this.setBolded, FontItalic:this.setItalicized, FontUnderlined:this.setUnderlined, labelText:this.setText, padding:this.setPadding, showBorder:this.setShowBorder, TextAlign:this.setAlign, 
  TextColor:this.setFontColor, transparencyValue:this.setTransparencyValue});
  this.setStyle = function(a, b) {
    this.style_handlers.set(a, b);
  };
  this.setStyleHandler = function(a, b) {
    this.style_handlers.setHandler(a, b);
  };
  this.parameter_handlers = a({group:this.setComponentGroup});
  this.setParameter = function(a, b) {
    this.parameter_handlers.set(a, b);
  };
  this.setParameterHandler = function(a, b) {
    this.parameter_handlers.setHandler(a, b);
  };
  this.data_ctat_handlers = {};
  this.processAttributes = function() {
    if (this.getDivWrap()) {
      var a = $(this.getDivWrap()), b = a.attr("tabindex");
      void 0 !== b && (this.setTabIndex(parseInt(b)), a.attr("tabindex", null));
      b = a.attr("name");
      void 0 !== b && this.setComponentGroup(b);
      for (var c in this.data_ctat_handlers) {
        b = a.data("ctat-" + c), void 0 !== b && this.data_ctat_handlers[c].apply(this, [b]);
      }
    }
  };
  this.data_ctat_handlers.enabled = function(a) {
    this.setEnabled(CTATGlobalFunctions.toBoolean(a));
  };
  this.processParameters = function(a) {
    if (a instanceof CTATComponentDescription) {
      u.setName(a.name);
      a = a.params;
      for (var b in a) {
        this.setParameter(b, a[b]);
      }
    } else {
      this.ctatdebug("Error: Invalid description sent to CTAT.Components.Hierarchy.Graphical.processDescription: " + a);
    }
  };
  this.processStyles = function(a) {
    this.component && this.component.classList.add("CTAT-gen-component");
    if (a instanceof CTATComponentDescription) {
      a = a.styles;
      for (var b in a) {
        this.setStyle(b, a[b]);
      }
    } else {
      this.ctatdebug("Error: Invalid description sent to CTAT.Components.Hierarchy.Graphical.processDescription: " + a);
    }
  };
  this.processDescription = function(a) {
    this.processParameters(a);
    this.processStyles(a);
  };
  this.configFromDescription = function() {
    this.processParameters(h);
  };
  this.processSerialization = function() {
    this.processStyles(h);
  };
};
CTAT.Component.Base.Graphical.prototype = Object.create(CTAT.Component.Base.Style.prototype);
CTAT.Component.Base.Graphical.prototype.constructor = CTAT.Component.Base.Graphical;
CTAT.Component.Base.SAIHandler = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Graphical.call(this, a, b, d, f, g, c, e);
  var h = new CTATSAI(this.getName(), CTAT.Component.Base.SAIHandler.DefaultAction, CTAT.Component.Base.SAIHandler.DefaultInput, CTAT.Component.Base.SAIHandler.DefaultPrompt), k = this.setName;
  this.setName = function(a) {
    k(a);
    h.setSelection(this.getName());
  };
  this.getSAI = function() {
    return h;
  };
  this.setSAI = function(a, b, c) {
    a instanceof CTATSAI ? h = a : (a = null === a || void 0 === a ? this.getName() : a, h = new CTATSAI(a, b, c, CTAT.Component.Base.SAIHandler.DefaultPrompt));
    return this;
  };
  this.setInput = function(a) {
    h instanceof CTATSAI ? h.setInput(a) : h = new CTATSAI(this.getName(), CTAT.Component.Base.SAIHandler.DefaultAction, a, CTAT.Component.Base.SAIHandler.DefaultPrompt);
    return this;
  };
  this.setAction = function(a) {
    h instanceof CTATSAI ? h.setAction(a) : h = new CTATSAI(this.getName(), a, CTAT.Component.Base.SAIHandler.DefaultInput, CTAT.Component.Base.SAIHandler.DefaultPrompt);
    return this;
  };
  this.setActionInput = function(a, b) {
    this.setAction(a);
    this.setInput(b);
    return this;
  };
  this.setSelection = function(a) {
    h instanceof CTATSAI ? h.setSelection(a) : h = new CTATSAI(a, CTAT.Component.Base.SAIHandler.DefaultAction, CTAT.Component.Base.SAIHandler.DefaultInput, CTAT.Component.Base.SAIHandler.DefaultPrompt);
  };
  this.updateSAI = function() {
  };
  this.executeSAI = function(a) {
    this.ctatdebug("executeSAI ()");
    var b = null, b = a instanceof CTATMessage ? a.getSAI() : a;
    if (b instanceof CTATSAI) {
      var c = b.getAction();
      this.ctatdebug("Processing " + c + "(" + b.getInput() + ") on: " + b.getSelection());
      if ("function" == typeof this[c]) {
        b = b.getArgumentsTyped();
        this.ctatdebug("JSON args: " + JSON.stringify(b));
        try {
          this.ctatdebug("Executing " + c + "(" + b + "," + typeof a + ")..."), b.push(a), this[c].apply(this, b);
        } catch (e) {
          return this.ctatdebug("ERROR: failed to execute action: " + e.message), !1;
        }
        this.component && (a = new CustomEvent("CTAT_EXECUTE_SAI", {detail:{sai:a, component:this}, bubbles:!0, cancelable:!0}), this.component.dispatchEvent(a));
        return !0;
      }
      this.ctatdebug("ERROR: Unsupported action: " + c + " from " + b.toLSxmlString());
      return !1;
    }
    this.ctatdebug("ERROR: Non-SAI sent to executeSAI(" + typeof a + ")");
    return !1;
  };
};
CTAT.Component.Base.SAIHandler.DefaultAction = "ButtonPressed";
CTAT.Component.Base.SAIHandler.DefaultInput = "-1";
CTAT.Component.Base.SAIHandler.DefaultPrompt = "";
CTAT.Component.Base.SAIHandler.prototype = Object.create(CTAT.Component.Base.Graphical.prototype);
CTAT.Component.Base.SAIHandler.prototype.constructor = CTAT.Component.Base.SAIHandler;
CTAT.Component.Base.Tutorable = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.SAIHandler.call(this, a, b, d, f, g, c, e);
  var h = !0, k = !0, l = !0, q = CTAT.Component.Base.Tutorable.Options.TutorComponent.TUTOR, p = !0, m = this, w = !1;
  this.setTutorComponent = function(a) {
    q = a;
    a = CTAT.Component.Base.Tutorable.Options.TutorComponent;
    switch(q) {
      case a.TUTOR:
        l = h = k = !0;
        break;
      case a.TUTOR_NO_FEEDBACK:
        h = k = !0;
        l = !1;
        break;
      case a.DO_NOT_TUTOR:
        h = !1, k = !0;
    }
  };
  this.setParameterHandler("tutorComponent", this.setTutorComponent);
  this.data_ctat_handlers.tutor = function(a) {
    h = CTATGlobalFunctions.toBoolean(a);
  };
  this.data_ctat_handlers["show-feedback"] = function(a) {
    l = CTATGlobalFunctions.toBoolean(a);
  };
  this.getTutorComponent = function() {
    var a = CTAT.Component.Base.Tutorable.Options.TutorComponent;
    return h && k && l ? a.TUTOR : h && k && !l ? a.TUTOR_NO_FEEDBACK : !h && k ? a.DO_NOT_TUTOR : q;
  };
  this.getDisableOnCorrect = function() {
    return p;
  };
  this.setDisableOnCorrect = function(a) {
    p = CTATGlobalFunctions.toBoolean(a);
  };
  this.setParameterHandler("DisableOnCorrect", this.setDisableOnCorrect);
  this.data_ctat_handlers["disable-on-correct"] = function(a) {
    p = CTATGlobalFunctions.toBoolean(a);
  };
  var t = !0;
  this.getShowHintHighlight = function() {
    return t;
  };
  this.setShowHintHighlight = function(a) {
    t = CTATGlobalFunctions.toBoolean(a);
  };
  this.setParameterHandler("ShowHintHighlight", this.setShowHintHighlight);
  this.data_ctat_handlers["show-hint-highlight"] = function(a) {
    t = CTATGlobalFunctions.toBoolean(a);
  };
  var z = CTAT.Component.Base.Tutorable.Options.Status.NOTGRADED;
  this.getComponentStatus = function() {
    return z;
  };
  this.setComponentStatus = function(a) {
    z = a;
  };
  this.isCorrect = function() {
    return z === CTAT.Component.Base.Tutorable.Options.Status.CORRECT;
  };
  this.isIncorrect = function() {
    return z === CTAT.Component.Base.Tutorable.Options.Status.INCORRECT;
  };
  this.isNotGraded = function() {
    return z === CTAT.Component.Base.Tutorable.Options.Status.NOTGRADED;
  };
  this.setCorrect = function(a) {
    this.setNotGraded();
    "CTATTableGoogle" != this.getClassName() && this.executeSAI(a);
    z = CTAT.Component.Base.Tutorable.Options.Status.CORRECT;
    !0 === p && this.setEnabled(!1);
    !1 === CTATGlobals.suppressStudentFeedback && l && this.showCorrect(a);
    this.ctatdebug("setCorrect() post showCorrect");
    this.component && (a = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.correct, {detail:{sai:a, component:this}, bubbles:!0, cancelable:!0}), this.component.dispatchEvent(a));
  };
  this.setIncorrect = function(a) {
    this.ctatdebug("setIncorrect()");
    this.setNotGraded();
    "CTATTableGoogle" != this.getClassName() && this.executeSAI(a);
    z = CTAT.Component.Base.Tutorable.Options.Status.INCORRECT;
    !1 === CTATGlobals.suppressStudentFeedback && l && this.showInCorrect(a);
    this.component && (a = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.incorrect, {detail:{sai:a, component:this}, bubbles:!0, cancelable:!0}), this.component.dispatchEvent(a));
  };
  this.setNotGraded = function() {
    this.ctatdebug("setNotGraded ()");
    this.setHintHighlight(!1);
    if (!this.isNotGraded() && (z = CTAT.Component.Base.Tutorable.Options.Status.NOTGRADED, this.removeCorrect(), this.removeInCorrect(), this.component)) {
      var a = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.ungrade, {detail:{component:this}, bubbles:!0, cancelable:!0});
      this.component.dispatchEvent(a);
    }
  };
  this.showHintHighlight = function(a, b) {
    this.component.classList.remove("CTAT--correct");
    this.component.classList.remove("CTAT--incorrect");
    a ? this.component.classList.add("CTAT--hint") : this.component.classList.remove("CTAT--hint");
  };
  this.setHintHighlight = function(a, b) {
    this.ctatdebug("setHintHighlight (" + a + ")");
    if (t) {
      var c = CTATGlobalFunctions.toBoolean(a);
      if (this.component) {
        var e = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.highlight, {detail:{isHighlighted:c, component:this}, bubbles:!0, cancelable:!0});
        this.getComponent().dispatchEvent(e);
      }
      c !== w && (w = c, this.showHintHighlight(c, b));
    }
  };
  this.moveHintHighlight = function(a, b) {
    this.ctatdebug("moveHintHighlight (" + a + ")");
    CTATGlobals.Tab.previousFocus = CTATGlobals.Tab.Focus;
    CTATGlobals.Tab.Focus = m;
    m.component.focus ? CTATGlobals.Tab.Focus.getComponent().focus() : CTATGlobals.Tab.Focus.getDivWrap().focus();
    if (t) {
      var c = CTATGlobalFunctions.toBoolean(a);
      if (this.component) {
        var e = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.highlight, {detail:{isHighlighted:c, component:this}, bubbles:!0, cancelable:!0});
        this.getComponent().dispatchEvent(e);
      }
      c !== w && (w = c, this.showHintHighlight(c, b));
    }
  };
  this.highlight = function(a) {
    console.log("highlight ()");
    this.component.classList.add("CTAT--highlight");
  };
  this.unhighlight = function(a) {
    console.log("unhighlight ()");
    this.component.classList.remove("CTAT--highlight");
  };
  this.showCorrect = function(a) {
    this.ctatdebug("showCorrect(" + a + ")");
    this.getComponent().classList.remove("CTAT--incorrect");
    this.getComponent().classList.remove("CTAT--hint");
    this.getComponent().classList.add("CTAT--correct");
  };
  this.removeCorrect = function() {
    this.getComponent() && this.getComponent().classList.remove("CTAT--correct");
  };
  this.showInCorrect = function(a) {
    this.ctatdebug("showInCorrect(" + incorrectColor + ")");
    this.getComponent().classList.remove("CTAT--correct");
    this.getComponent().classList.remove("CTAT--hint");
    this.getComponent().classList.add("CTAT--incorrect");
  };
  this.removeInCorrect = function() {
    this.getComponent() && this.getComponent().classList.remove("CTAT--incorrect");
  };
  this.resetTutoring = function() {
    this.showHintHighlight(!1);
    this.removeCorrect();
    this.removeInCorrect();
    z = CTAT.Component.Base.Tutorable.Options.Status.NOTGRADED;
  };
  this.grade = function() {
    this.updateSAI();
    this.processAction(!0);
  };
  this.processAction = function(a, b) {
    this.ctatdebug("processAction(" + a + "," + b + ")");
    var c = CTATShellTools.findComponentByClass("CTATDoneButton");
    c && c instanceof CTAT.Component.Base.Tutorable && c != this && c.setNotGraded();
    this.ctatdebug("processAction() finished checking doneButton");
    console.log("Clearing hint window ...");
    commShell.showFeedback(" ");
    a = void 0 === a || null === a ? !1 : a;
    b = void 0 === b || null === b ? !1 : b;
    "" !== this.getComponentGroup() ? CTATShellTools.findComponent(this.getComponentGroup()).forEach(function(a) {
      a.setNotGraded();
    }) : this.setNotGraded();
    this.ctatdebug("processAction() finished setNotGraded");
    commShell && (a ? commShell.processComponentAction(this.getSAI(), !0, !0) : b ? commShell.processComponentAction(this.getSAI(), !1, !0) : commShell.processComponentAction(this.getSAI(), h, k));
    this.ctatdebug("processAction() finished call to commShell.processComponentAction");
    this.component && (c = new CustomEvent(CTAT.Component.Base.Tutorable.EventType.action, {detail:{sai:this.getSAI(), component:this}, bubbles:!0, cancelable:!0}), this.component.dispatchEvent(c));
  };
};
CTAT.Component.Base.Tutorable.Options = {TutorComponent:{TUTOR:"Tutor", TUTOR_NO_FEEDBACK:"Tutor but no visual feedback", DO_NOT_TUTOR:"Do not tutor"}, Status:{CORRECT:"CORRECT", INCORRECT:"INCORRECT", NOTGRADED:"NOTGRADED"}};
CTAT.Component.Base.Tutorable.EventType = {correct:"CTAT_CORRECT", incorrect:"CTAT_INCORRECT", highlight:"CTAT_HIGHLIGHT", ungrade:"CTAT_NOTGRADED", action:"CTAT_ACTION"};
CTAT.Component.Base.Tutorable.prototype = Object.create(CTAT.Component.Base.SAIHandler.prototype);
CTAT.Component.Base.Tutorable.prototype.constructor = CTAT.Component.Base.Tutorable;
CTAT.Component.Base.Clickable = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Tutorable.call(this, a, b, d, f, g, c, e);
  var h = this;
  this.processClick = function(a) {
    h.ctatdebug("processClick (" + a.currentTarget.getAttribute("id") + " -> " + a.eventPhase + ")");
    !0 === h.getEnabled() ? h.processAction() : h.ctatdebug("Component is disabled, not grading");
  };
  this.setClickable = function(a) {
    h.setEnabled(a);
  };
};
CTAT.Component.Base.Clickable.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTAT.Component.Base.Clickable.prototype.constructor = CTAT.Component.Base.Clickable;
var CTATRadioButton = function(a, b, d, f, g) {
  CTAT.Component.Base.Clickable.call(this, "CTATRadioButton", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(22);
  var c = this, e = null, h = null, k = null, l = CTATRadioButton.Options.Placement.right;
  this.setSelection(this.getComponentGroup());
  this.setAction("UpdateRadioButton");
  this.setStyleHandler("BackgroundColor", null);
  this.init = function() {
    c.setInitialized(!0);
    e = document.createElement("div");
    e.classList.add("CTAT-radiobutton");
    h = document.createElement("input");
    h.type = "radio";
    h.id = CTATGlobalFunctions.gensym.div_id();
    h.value = c.getName();
    this.getComponentGroup() ? h.name = c.getComponentGroup() : this.getDivWrap() && $(this.getDivWrap()).attr("name") ? h.name = $(this.getDivWrap()).attr("name") : h.name = "radioButtonGroup";
    h.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    c.assignEnabled(!0);
    !0 === c.getEnabled() ? h.disabled = !1 : h.disabled = !0;
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.addComponentReference(c, e);
    var a = this.getDivWrap().innerHTML;
    this.getDivWrap().innerHTML = "";
    c.getDivWrap().appendChild(e);
    k = document.createElement("label");
    k.htmlFor = h.id;
    this.getText() ? k.textContent = c.getText() : a && (k.innerHTML = a);
    c.setComponent(e);
    c.setLabel(k);
    e.appendChild(h);
    e.appendChild(k);
    c.render();
    h.addEventListener("click", function(a) {
      c.updateSAI();
      c.processAction();
    });
    h.addEventListener("focus", this.processFocus);
    h.onfocus = this.processOnFocus;
    this.setSelection(this.getComponentGroup());
    this.component.addEventListener("focus", this.processFocus);
  };
  var q = this.setText;
  this.setText = function(a) {
    q(a);
    null !== e && (k.textContent = this.getText());
  };
  this.setStyleHandler("buttonLabel", this.setText);
  var p = this.setEnabled;
  this.setEnabled = function(a) {
    p(a);
    null !== h && (h.disabled = !this.getEnabled());
  };
  this.setChecked = function(a) {
    null !== h && (h.checked = a);
  };
  this.getChecked = function() {
    return h.checked;
  };
  this.getRadioInput = function() {
    return h.checked ? h.value + ": " + k.textContent : "";
  };
  this.getLabelPlacement = function() {
    return l;
  };
  this.setLabelPlacement = function(a) {
    l = String(a);
    if (k && h) {
      switch(a = CTATRadioButton.Options.Placement, l.toLowerCase()) {
        case a.left:
          h.style.width = null;
          h.style["float"] = "left";
          break;
        case a.bottom:
          h.style.width = "100%";
          break;
        case a.top:
          e.appendChild(h);
          h.style.width = "100%";
          break;
        default:
          h.style.width = null, h.style["float"] = null;
      }
    }
  };
  this.setStyleHandler("labelPlacement", this.setLabelPlacement);
  this.reset = function() {
    c.ctatdebug(" reset ( " + c.getName() + ")");
    h.checked = !1;
    c.setEnabled(!0);
  };
  this.UpdateRadioButton = function(a) {
    0 <= a.indexOf(h.value) && c.setChecked(!0);
    c.ctatdebug("UpdateRadioButton ()");
  };
  this.updateSAI = function() {
    var a = $('div[data-ctat-component]:has(input[type="radio"][name="' + h.name + '"]:checked)'), b = "";
    1 === a.length && (b = $(a[0]).data("CTATComponent").getRadioInput());
    c.setSelection(h.name);
    c.setInput(b);
  };
  var m = function(a) {
    k.classList.add(a);
    h.classList.add(a);
  }, w = function(a) {
    k.classList.remove(a);
    h.classList.remove(a);
  };
  this.showCorrect = function(a) {
    w("CTAT--hint");
    w("CTAT--incorrect");
    (a ? 0 === a.getInput().indexOf(h.value) : 1) ? m("CTAT--correct") : w("CTAT-correct");
  };
  this.removeCorrect = function() {
    w("CTAT--correct");
  };
  this.showInCorrect = function(a) {
    w("CTAT--hint");
    w("CTAT--correct");
    (a ? 0 === a.getInput().indexOf(h.value) : 1) ? m("CTAT--incorrect") : w("CTAT-incorrect");
  };
  this.removeInCorrect = w.bind(this, "CTAT--incorrect");
  this.showHintHighlight = function(a) {
    this.removeCorrect();
    this.removeInCorrect();
    a ? m("CTAT--hint") : w("CTAT--hint");
  };
};
CTATRadioButton.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATRadioButton.prototype.constructor = CTATRadioButton;
CTATRadioButton.Options = {Placement:{left:"left", right:"right", top:"top", bottom:"bottom"}};
CTAT.ComponentRegistry.addComponentType("CTATRadioButton", CTATRadioButton);
var CTATButtonBasedComponent = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Clickable.call(this, a, b, d, f, g, c, e);
  this.setDefaultWidth(60);
  this.setDefaultHeight(30);
  var h = this, k = "";
  this.ctatdebug("CTATButtonBasedComponent (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.setActionInput("ButtonPressed", "-1");
  this.setText = function(a) {
    h.ctatdebug("setText (" + a + ")");
    k = a;
    null !== h.getComponent() && (h.getComponent().textContent = k);
  };
  this.setStyleHandler("labelText", this.setText);
  this.getText = function() {
    return k;
  };
  this.processClick = function(a) {
    h.ctatdebug("processClick (" + a.currentTarget.getAttribute("id") + " -> " + a.eventPhase + ")");
    !0 === h.getEnabled() ? (null !== CTATGlobals.Tab.Focus && ("CTATTextArea" == CTATGlobals.Tab.Focus.getClassName() || "CTATTextInput" == CTATGlobals.Tab.Focus.getClassName() || "CTATTextField" == CTATGlobals.Tab.Focus.getClassName() ? CTATGlobals.Tab.Focus.processAction() : h.ctatdebug("Info: CTATGlobals.Tab.Focus==null")), h.processAction()) : h.ctatdebug("Component is disabled, not grading");
  };
  this.ButtonPressed = function() {
  };
};
CTATButtonBasedComponent.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATButtonBasedComponent.prototype.constructor = CTATButtonBasedComponent;
var CTATImageButtonComponent = function(a, b, d, f, g, c, e) {
  CTATButtonBasedComponent.call(this, a, b, d, f, g, c, e);
  var h = "", k = "", l = "", q = "", p = !1, m = "Image to Component", w = this;
  this.getDefaultImage = function() {
    return h;
  };
  this.setDefaultImage = function(a) {
    a && (h = a);
  };
  this.setStyleHandler("normalName", this.setDefaultImage);
  this.getHoverImage = function() {
    return l;
  };
  this.setHoverImage = function(a) {
    a && (l = a);
  };
  this.setStyleHandler("hoverName", this.setHoverImage);
  this.setClickedImage = function(a) {
    a && (k = a);
  };
  this.setStyleHandler("clickName", this.setClickedImage);
  this.getClickedImage = function() {
    return k;
  };
  this.setDisabledImage = function(a) {
    a && (q = a);
  };
  this.setStyleHandler("disabledName", this.setDisabledImage);
  this.getDisabledImage = function() {
    return q;
  };
  this.setScaling = function(a) {
    m = a;
  };
  this.setStyleHandler("Scaling", this.setScaling);
  this.getScaling = function() {
    return m;
  };
  this.assignImages = function(a, b, c, e) {
    w.ctatdebug("assignImages ()");
    h = a;
    k = b;
    l = c;
    q = e;
    null !== w.getComponent() && w.assignActiveImage(h);
  };
  this.assignImageURL = function(a) {
    this.assignImages(a, a, a, a);
  };
  this.assignActiveImage = function(a) {
    if (null !== w.getComponent() && (w.getComponent().src = a, w.getComponent().style.opacity = this.getTransparencyValue(), "Component to Image" == m)) {
      var b = new Image;
      b.src = a;
      w.setWidth(b.width);
      w.setHeight(b.height);
    }
  };
  this.setEnabled = function(a) {
    w.ctatdebug("setEnabled (" + a + ")");
    w.assignEnabled(a);
    null === w.getComponent() ? w.ctatdebug("Error: pointer is null!") : (w.getComponent().disabled = !a, !1 === w.getEnabled() ? w.assignActiveImage(q) : w.assignActiveImage(h), w.ctatdebug("setEnabled () -> " + w.getEnabled()));
  };
  this.processMouseOver = function(a) {
    !0 !== p && (p = !0, !0 === w.getEnabled() ? w.assignActiveImage(l) : w.ctatdebug("Error component is disabled"), p = !1);
  };
  this.processMouseOut = function(a) {
    !0 !== p && (p = !0, !0 === w.getEnabled() && w.assignActiveImage(h), p = !1);
  };
};
CTATImageButtonComponent.prototype = Object.create(CTATButtonBasedComponent.prototype);
CTATImageButtonComponent.prototype.constructor = CTATImageButtonComponent;
var CTATImageButton = function(a, b, d, f, g) {
  CTATImageButtonComponent.call(this, "CTATImageButton", "__undefined__", a, b, d, f, g);
  var c = this, e = null, h = null, k = null;
  this.configFromDescription();
  this.init = function() {
    e = new Image;
    e.name = c.getName();
    e.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    e.setAttribute("onkeypress", "return noenter(event)");
    e.style.opacity = this.getTransparencyValue();
    c.setComponent(e);
    c.addComponentReference(c, e);
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.setInitialized(!0);
    c.getDivWrap().appendChild(e);
    c.assignActiveImage(c.getDefaultImage());
    c.addCSSAttribute("z-index", CTATGlobalFunctions.gensym.z_index());
    c.addCSSAttribute("width", c.getWidth());
    c.addCSSAttribute("height", c.getHeight());
    c.render();
    h = document.createElement("div");
    h.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    h.setAttribute("style", "pointer-events:none; position: absolute;left:0px; top: 0px; z-index: " + CTATGlobalFunctions.gensym.z_index() + ";width: " + c.getWidth() + "px;height: " + c.getHeight() + "px; text-align: center; vertical-align: middle; line-height: " + c.getHeight() + "px; ");
    h.textContent = this.getText();
    c.getDivWrap().appendChild(h);
    k = document.createElement("div");
    k.setAttribute("style", "position: absolute;left:0px; top: 0px; z-index: " + CTATGlobalFunctions.gensym.z_index() + ";width: " + c.getWidth() + "px;height: " + c.getHeight() + "px; opacity : 0.0; filter: alpha(opacity=0); background-color: #ffffff");
    c.getDivWrap().appendChild(k);
    c.addSafeEventListener("click", c.processClick, k);
    c.addSafeEventListener("focus", c.processFocus, k);
    c.addSafeEventListener("mouseover", c.processMouseOver, k);
    c.addSafeEventListener("mouseout", c.processMouseOut, k);
  };
};
CTATImageButton.prototype = Object.create(CTATImageButtonComponent.prototype);
CTATImageButton.prototype.constructor = CTATImageButton;
CTAT.ComponentRegistry.addComponentType("CTATImageButton", CTATImageButton);
var CTATConfiguration = function() {
  CTATBase.call(this, "CTATConfiguration", "config");
  var a = this, b = [], d = null, f = null, g = null, c = null;
  this.raw = {admit_code:"ies", authenticity_token:"", auth_token:"none", BehaviorRecorderMode:"AuthorTimeTutoring", class_name:"DefaultClass", curriculum_service_url:"", connection:"javascript", dataset_level_name:"none", dataset_level_type:"ProblemSet", dataset_name:"none", expire_logout_url:"none", info:"", instructor_name:"none", instrumentation_log:"off", lcId:"none", Logging:"None", log_service_url:"http://pslc-qa.andrew.cmu.edu/log/server", log_to_disk_directory:".", problem_name:"none", problem_position:"none", 
  problem_started_url:"none", problem_state_status:"empty", question_file:"none", refresh_session_url:"none", remoteSocketPort:"80", remoteSocketURL:"127.0.0.1", restore_problem_url:"", reuse_swf:"false", run_problem_url:"none", school_name:"none", SessionLog:"true", session_id:"none", session_timeout:"none", skills:"", source_id:"PACT_CTAT_HTML5", student_interface:"none", student_problem_id:"none", study_condition_name:"none", study_condition_type:"none", study_condition_description:"none", study_name:"Study1", 
  target_frame:"none", TutorShopDeliveryMethod:"sendandload", tutoring_service_communication:"javascript", user_guid:"none", wmode:"opaque", DeliverUsingOLI:!1, ssl:"off", sui:"", centerTutor:!1, previewMode:!1, width:550, height:450};
  this.assignRawFlashVars = function(b) {
    a.ctatdebug("assignRawFlashVars() raw['session_id'] " + a.raw.session_id + ", aData['session_id'] " + b.session_id);
    a.raw = b;
    a.preParse();
  };
  this.getRawFlashVars = function() {
    return a.raw;
  };
  this.getSingleParameterValues = function(b) {
    var c = [];
    if (!b) {
      return c;
    }
    for (var d = a.getRawFlashVars(), f = 0;f < b.length;++f) {
      ctatdebug("CTATConfiguration.getSingleParameterValues [" + f + "]: " + b[f]), d[b[f]] && c.push(b[f]);
    }
    return c;
  };
  this.generateDefaultConfiguration = function(b) {
    var c = {}, d = 0;
    if (b) {
      for (v in b) {
        c[v] = b[v], d++;
      }
    }
    a.ctatdebug("generateDefaultConfiguration() nDefaults " + d + ", result['session_id'] " + c.session_id);
    d = b = null;
    if (window && window.frameElement && (d = window.frameElement.getAttribute("data-params"))) {
      b = jQuery.parseJSON(d);
      for (var f in b) {
        c[f] = CTATGlobals.EncodedParams[f] ? decodeURIComponent(b[f].replace(/\+/g, "%20")) : b[f];
      }
    }
    if (null == b) {
      for (f = $('object param[name="flashvars"]'), a.ctatdebug("generateDefaultConfiguration() objs " + f), b = 0;b < f.length;++b) {
        if (d = $(f[b]).attr("value"), a.ctatdebug("generateDefaultConfiguration() fVarsAsString " + d), d && (d = parseQueryStringArgs(d)) && d.question_file) {
          for (v in d) {
            c[v] = d[v];
          }
        }
      }
    }
    ctatdebug("tutorPrep (" + c + ")");
    f = {};
    if (null == c) {
      ctatdebug("tutorPrep(): Internal error: null argument passed");
    } else {
      if ("undefined" != typeof CTATTarget && ("CTAT" == CTATTarget || "Default" == CTATTarget)) {
        ctatdebug("parseQueryString ()");
        b = location.search;
        ctatdebug("Query String: " + b);
        d = "?" == b.charAt(0) ? b.substring(1) : b;
        b = {};
        if (d) {
          for (var d = d.split("&"), g = 0;g < d.length;g++) {
            var p = d[g].split("=");
            ctatdebug("Setting flashvar " + p[0] + ", to: " + decodeURIComponent(p[1].replace(/\+/g, " ")));
            b[decodeURIComponent(p[0])] = decodeURIComponent(p[1].replace(/\+/g, " "));
          }
        }
        null != b && (ctatdebug("tutorPrep(): Assigning parsed arguments ..."), f = b);
      }
      b = !1;
      for (var m in f) {
        if (f.hasOwnProperty(m)) {
          switch(ctatdebug("Processing external FlashVar " + m + "(" + f[m] + ")"), m) {
            case "GENERATED":
              "on" == f[m] && (b = new CTATGuid, c.session_id = b.guid(), b = !0);
              break;
            case "BRD":
              c.question_file = f[m];
              break;
            case "BRMODE":
              c.BehaviorRecorderMode = f[m];
              break;
            case "PROBLEM":
              c.problem_name = f[m];
              break;
            case "DATASET":
              c.dataset_name = f[m];
              break;
            case "LEVEL1":
              c.dataset_level_name1 = f[m];
              break;
            case "TYPE1":
              c.dataset_level_type1 = f[m];
              break;
            case "LEVEL2":
              c.dataset_level_name2 = f[m];
              break;
            case "TYPE2":
              c.dataset_level_type2 = f[m];
              break;
            case "LEVEL3":
              c.dataset_level_name3 = f[m];
              break;
            case "TYPE3":
              c.dataset_level_type3 = f[m];
              break;
            case "LEVEL4":
              c.dataset_level_name4 = f[m];
              break;
            case "TYPE4":
              c.dataset_level_type4 = f[m];
              break;
            case "USER":
              c.user_guid = f[m];
              break;
            case "SESSION":
              !1 === b && (c.session_id = f[m]);
              break;
            case "SOURCE":
              c.source_id = f[m];
              break;
            case "LOGTYPE":
              c.Logging = f[m];
              break;
            case "PORT":
              c.remoteSocketPort = f[m];
              break;
            case "REMOTEURL":
              c.remoteSocketURL = f[m];
              break;
            case "DISKDIR":
              c.log_to_disk_directory = f[m];
              break;
            case "USEOLI":
              c.DeliverUsingOLI = f[m];
              break;
            case "log_service_url":
              c.log_service_url = f[m];
              break;
            case "URL":
              c.log_service_url = f[m];
              break;
            case "LOGURL":
              c.log_service_url = f[m];
              break;
            case "CONNECTION":
              c.tutoring_service_communication = f[m];
              break;
            case "SUI":
              c.sui = f[m];
              break;
            case "VAR1":
              c.var1 = f[m];
              break;
            case "VAL1":
              c.val1 = f[m];
              break;
            case "VAR2":
              c.var2 = f[m];
              break;
            case "VAL2":
              c.val2 = f[m];
              break;
            case "VAR3":
              c.var3 = f[m];
              break;
            case "VAL3":
              c.val3 = f[m];
              break;
            case "VAR4":
              c.var4 = f[m];
              break;
            case "VAL4":
              c.val4 = f[m];
              break;
            case "SLOG":
            ;
            case "SessionLog":
              c.SessionLog = f[m];
              break;
            case "KEYBOARDGROUP":
              "Disabled" == f[m] && (c.keyboard = "disabled");
              "Auto" == f[m] && (c.keyboard = "auto");
              "On" == f[m] && (c.keyboard = "on");
              break;
            default:
              c[m] = f[m];
          }
        }
      }
    }
    return c;
  };
  this.getCustomFields = function() {
    return b;
  };
  this.setTimeZone = function(b) {
    a.ctatdebug("setTimeZone (" + b + ")");
    var c = "";
    null == b || "" == b || void 0 == b ? (b = jstz.determine(), a.ctatdebug("Assigning detected timezone: " + b.name()), c = b.name()) : (50 < b.length && (b = b.substr(0, 50)), 3 != b.length && 4 != b.length || a.ctatdebug("3 and 4 letter time zone abbreviations are deprecated. See list of tz database zone names for better options"), c = b);
    null != a.raw && (a.raw.timezone = c);
  };
  this.getTimeZone = function() {
    return null != a.raw && a.raw.timezone ? a.raw.timezone : "UTC";
  };
  this.listWithAmpersands = function() {
    var b = "", c;
    for (c in a.raw) {
      var d = c + "=" + a.raw[c], b = "" != b ? b + "&" + d : d
    }
    a.ctatdebug("CTATConfiguration.listWithAmpersands() result " + b.substring(0, 25) + "...");
    return b;
  };
  this.listFlashVars = function() {
    ctatdebug("listFlashVars ()");
    for (var b in a.raw) {
      ctatdebug("[" + b + "]: " + a.raw[b]);
    }
  };
  this.preParse = function() {
    ctatdebug("preParse ()");
    if (void 0 == a.raw.dataset_name || void 0 == a.raw.dataset_name) {
      a.raw.dataset_name = "DefaultDataset";
    }
    if (void 0 == a.raw.problem_tutorflag || void 0 == a.raw.problem_tutorflag) {
      a.raw.problem_tutorflag = "tutor";
    }
    var c = 0, d;
    for (d in a.raw) {
      if ("VAR" == d || "var" == d) {
        b[d] = a.raw[d];
      }
      c++;
    }
    a.ctatdebug("preParse() nRaw " + c);
    c = 0;
    for (d = !0;1 == d;) {
      d = !1;
      var f = "custom_field_name" + (c + 1), g = "custom_field_value" + (c + 1);
      a.ctatdebug("Trying : " + a.raw[f] + "," + a.raw[g]);
      null != a.raw[f] && (a.ctatdebug("Adding: " + f + "," + a.raw[g]), b[a.raw[f]] = a.raw[g], d = !0, c++);
    }
  };
  this.getDatasetNames = function() {
    a.ctatdebug("getDatasetNames ()");
    if (null != d) {
      return d;
    }
    d = {};
    d = [];
    for (var b = 0, c = !0;1 == c;) {
      var c = !1, f = "dataset_level_name" + (b + 1);
      null != a.raw[f] && (a.ctatdebug("Adding: " + f + "," + a.raw[f]), d[b] = a.raw[f], c = !0, b++);
    }
    return d;
  };
  this.getDatasetTypes = function() {
    a.ctatdebug("getDatasetTypes ()");
    if (null != f) {
      return f;
    }
    f = [];
    for (var b = 0, c = !0;1 == c;) {
      var c = !1, d = "dataset_level_type" + (b + 1);
      null != a.raw[d] && (a.ctatdebug("Adding: " + d + "," + a.raw[d]), f[b] = a.raw[d], c = !0, b++);
    }
    return f;
  };
  this.getConditionNames = function() {
    var b = [], c = 0;
    void 0 != a.raw.study_condition_name && "" != a.raw.study_condition_name && (b.push(a.raw.study_condition_name), c++);
    for (var d = 0, f = !0;1 == f;) {
      var f = !1, g = "study_condition_name" + (d + 1);
      null != a.raw[g] && (a.ctatdebug("Adding: " + g + "," + a.raw[g]), b[d + c] = a.raw[g], f = !0, d++);
    }
    return b;
  };
  this.getConditionTypes = function() {
    g = [];
    var b = 0;
    void 0 != a.raw.study_condition_type && "" != a.raw.study_condition_type && (g.push(a.raw.study_condition_type), b++);
    for (var c = 0, d = !0;1 == d;) {
      var d = !1, f = "study_condition_type" + (c + 1);
      null != a.raw[f] && (a.ctatdebug("Adding: " + f + "," + a.raw[f]), g[c + b] = a.raw[f], d = !0, c++);
    }
    return g;
  };
  this.getConditionDescriptions = function() {
    a.ctatdebug("getConditionDescriptions ()");
    c = [];
    var b = 0;
    a.raw.study_condition_description && "" != a.raw.study_condition_description && (a.ctatdebug("Adding study_condition_description: " + a.raw.study_condition_description), c.push(a.raw.study_condition_description), b++);
    for (var d = 0, f = !0;1 == f;) {
      var f = !1, g = "study_condition_description" + (d + 1);
      null != a.raw[g] && (a.ctatdebug("Adding: " + g + "," + a.raw[g]), c[d + b] = a.raw[g], f = !0, d++);
    }
    return c;
  };
  this.get = function(b) {
    return a.raw[b];
  };
  this.set = function(b, c) {
    b && (a.raw[b] = c);
  };
  this.setParams = function(b) {
    if (b) {
      for (var c in b) {
        a.set(c, b[c]);
      }
    }
  };
  this.isInstructorMode = function() {
    var a = this.getRawFlashVars();
    return a && a.deliverymode ? "delivery" == a.deliverymode ? !1 : !0 : !1;
  };
  this.getLoggingLibrary = function() {
    null == commLoggingLibrary && (commLoggingLibrary = new CTATLoggingLibrary(!0));
    return commLoggingLibrary;
  };
  this.setPreviewMode = function(b, c) {
    a.raw.previewMode = c;
  };
  this.setCenterTutor = function(b, c) {
    a.raw.centerTutor = c;
  };
  this.setTutorWidth = function(b, c) {
    a.raw.width = c;
  };
  this.setTutorHeight = function(b, c) {
    a.raw.height = c;
  };
  this.setTutorDimensions = function(b, c, d) {
    a.raw.width = c;
    a.raw.height = d;
  };
  this.setTutorValue = function(b, c, d) {
    a.raw[c] = d;
  };
  this.setCommunicationMode = function(b, c) {
    a.raw.tutoring_service_communication = c;
  };
  this.setRemoteSocketURL = function(b, c) {
    a.raw.remoteSocketURL = c;
  };
  this.setRemoteSocketPort = function(b, c) {
    a.raw.remoteSocketPort = c;
  };
};
CTATConfiguration.prototype = Object.create(CTATBase.prototype);
CTATConfiguration.prototype.constructor = CTATConfiguration;
flashVars = CTATConfiguration.theConfObject = null;
CTATConfiguration.generateDefaultConfigurationObject = function() {
  if (!CTATConfiguration.theConfObject) {
    this.theConfObject = new CTATConfiguration;
    var a = this.theConfObject.generateDefaultConfiguration(this.theConfObject.raw);
    this.theConfObject.assignRawFlashVars(a);
    "none" == this.theConfObject.get("session_id") && this.theConfObject.set("session_id", (new CTATGuid).guid());
    flashVars = this.theConfObject;
    ctatdebug("CTATConfiguration.generateDefaultConfigurationObject() flashVars.getRawFlashVars()['session_id'] " + flashVars.getRawFlashVars().session_id);
  }
  return this.theConfObject;
};
CTATConfiguration.getRawFlashVars = function() {
  CTATConfiguration.generateDefaultConfigurationObject();
  return CTATConfiguration.theConfObject.getRawFlashVars();
};
CTATConfiguration.get = function(a) {
  CTATConfiguration.generateDefaultConfigurationObject();
  return CTATConfiguration.theConfObject.get(a);
};
CTATConfiguration.set = function(a, b) {
  CTATConfiguration.generateDefaultConfigurationObject();
  CTATConfiguration.theConfObject.set(a, b);
};
CTATConfiguration.setParams = function(a) {
  CTATConfiguration.generateDefaultConfigurationObject();
  CTATConfiguration.theConfObject.setParams(a);
};
CTATConfiguration.getSingleParameterValues = function(a) {
  CTATConfiguration.generateDefaultConfigurationObject();
  return CTATConfiguration.theConfObject.getSingleParameterValues(a);
};
var CTATJumble = function(a, b, d, f, g) {
  CTAT.Component.Base.Tutorable.call(this, "CTATJumble", "aJumble", a, b, d, f, g);
  var c = "", e = "center", h = 0, k = 10, l = !1, q = this;
  q.setActionInput("SetOrder", c);
  var p = null;
  this.init = function() {
    q.setInitialized(!0);
    p = document.createElement("div");
    p.classList.add("CTAT-jumble");
    this.setComponent(p);
    var a = this.getDivWrap().innerHTML;
    this.getDivWrap().innerHTML = "";
    this.getDivWrap().appendChild(p);
    q.addComponentReference(q, q.getDivWrap());
    a ? (p.innerHTML = a, $(p).children().addClass("CTAT-jumble--item").attr({unselectable:"on", draggable:!0}).each(function() {
      this.addEventListener("dragstart", w, !1);
      this.addEventListener("dragenter", z, !1);
      this.addEventListener("dragover", t, !1);
      this.addEventListener("dragleave", y, !1);
      this.addEventListener("drop", r, !1);
      this.addEventListener("dragend", E, !1);
    })) : this.init_items(c);
    this.component.addEventListener("focus", this.processFocus);
  };
  var m = null, w = function(a) {
    a.target.style.opacity = "0.4";
    m = a.target;
    a.dataTransfer.effectAllowed = "move";
    a.dataTransfer.setData("text/html", a.target.innerHTML);
  }, t = function(a) {
    a.preventDefault && a.preventDefault();
    a.dataTransfer.dropEffect = "move";
    return !1;
  }, z = function(a) {
    this.classList.add("CTAT-jumble--item--over");
  }, y = function(a) {
    this.classList.remove("CTAT-jumble--item--over");
  }, r = function(a) {
    a.stopPropagation && a.stopPropagation();
    if (m != this) {
      m.innerHTML = this.innerHTML;
      var b = m.id;
      m.id = this.id;
      this.innerHTML = a.dataTransfer.getData("text/html");
      this.id = b;
      q.setInput(q.getOrder());
      q.processAction();
    }
    return !1;
  }, A = [], E = function(a) {
    this.style.opacity = 1;
    A.forEach(function(a) {
      a.classList.remove("CTAT-jumble--item--over");
    });
  };
  this.init_items = function(a) {
    if (p) {
      var b = document.createDocumentFragment();
      A = [];
      a = a.split(";");
      for (var c = a.length, e = 0;e < c;e++) {
        var d = document.createElement("div");
        d.textContent = a[e];
        d.id = this.getName() + e;
        d.setAttribute("unselectable", "on");
        d.setAttribute("draggable", !0);
        d.classList.add("CTAT-jumble--item");
        d.addEventListener("dragstart", w, !1);
        d.addEventListener("dragenter", z, !1);
        d.addEventListener("dragover", t, !1);
        d.addEventListener("dragleave", y, !1);
        d.addEventListener("drop", r, !1);
        d.addEventListener("dragend", E, !1);
        b.appendChild(d);
        A.push(d);
      }
      p.innerHTML = "";
      p.appendChild(b);
    }
  };
  this.getTextItems = function() {
    return c;
  };
  this.getAlignment = function() {
    return e;
  };
  this.getOrientation = function() {
    return this.orientation;
  };
  this.getAnimationSpeed = function() {
    return h;
  };
  this.getBorderPadding = function() {
    return borderPadding;
  };
  this.getCellPadding = function() {
    return k;
  };
  this.getShowInsertionMarker = function() {
    return l;
  };
  this.setTextItems = function(a) {
    c = a;
    this.init_items(c);
  };
  this.setAlignment = function(a) {
    e = a;
  };
  this.setOrientation = function(a) {
    this.orientation = a;
  };
  this.setAnimationSpeed = function(a) {
    h = a;
  };
  this.setBorderPadding = function(a) {
    borderPadding = a;
  };
  this.setCellPadding = function(a) {
    k = a;
  };
  this.setShowInsertionMarker = function(a) {
    l = a;
  };
  this.setParameterHandler("textItems", this.setTextItems);
  this.SetOrder = function(a) {
  };
  this.getOrder = function() {
    for (var a = p.children, b = [], e = 0;e < a.length;e++) {
      var d = a[e];
      d.draggable && (d.id ? b.push(d.id) : console.log("ERROR: The CTATJumble " + q.getName() + " has a child with no id attribute: " + d + "!!!"));
    }
    return c = b.join(";");
  };
  this.updateSAI = function() {
    q.setInput(q.getOrder());
  };
};
CTATJumble.HORIZONTAL = "Horizontal";
CTATJumble.VERTICAL = "Vertical";
CTATJumble.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATJumble.prototype.constructor = CTATJumble;
CTAT.ComponentRegistry.addComponentType("CTATJumble", CTATJumble);
var CTATConnectionBase = function(a, b) {
  CTATBase.call(this, "CTATConnectionBase", "ctatconnection");
  var d = -1, f = "", g = "http";
  this.setURL = function(a) {
    f = a;
  };
  this.getURL = function() {
    return f;
  };
  this.setID = function(a) {
    d = a;
  };
  this.getID = function() {
    return d;
  };
  this.setSocketType = function(a) {
    g = a;
  };
  this.getSocketType = function() {
    return g;
  };
};
CTATConnectionBase.prototype = Object.create(CTATBase.prototype);
CTATConnectionBase.prototype.constructor = CTATConnectionBase;
var CTATConnection = function(a) {
  CTATConnectionBase.call(this, "CTATConnection");
  var b = null, d = null, f = !1, g = this, c = "text/plain";
  g.setSocketType("http");
  this.setContentType = function(a) {
    c = a;
  };
  this.getContentType = function() {
    return c;
  };
  this.setConsumed = function(a) {
    f = a;
    g.ctatdebug("consumed: " + f);
  };
  this.getConsumed = function() {
    g.ctatdebug("consumed: " + f);
    return f;
  };
  this.assignReceiveFunction = function(a) {
    d.onreadystatechange = a;
  };
  this.setData = function(a) {
    b = a;
  };
  this.getData = function() {
    return b;
  };
  this.getHTTPObject = function() {
    return d;
  };
  this.createHTTPObject = function() {
    g.ctatdebug("createHTTPObject ()");
    d = new XMLHttpRequest;
    if (window.XMLHttpRequest) {
      g.ctatdebug("Creating regular XMLHttpRequest ..."), d = new XMLHttpRequest, d.overrideMimeType && d.overrideMimeType("text/html");
    } else {
      if (g.ctatdebug("Trying alternative HTTP object creation ..."), window.ActiveXObject) {
        g.ctatdebug("Detected window.ActiveXObject ...");
        try {
          g.ctatdebug("Creating Msxml2.XMLHTTP ..."), d = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (a) {
          try {
            g.ctatdebug("Creating Microsoft.XMLHTTP ..."), d = new ActiveXObject("Microsoft.XMLHTTP");
          } catch (b) {
            alert("Error: Unable to create HTTP Request Object: " + b.message);
          }
        }
      } else {
        alert("Internal error: an HTTP connection object could not be created");
      }
    }
  };
  this.init = function() {
    g.ctatdebug("init ()");
    if (null !== d) {
      var b = flashVars ? flashVars.getRawFlashVars() : a, b = b.session_id ? b.session_id : "dummySession";
      "dummySession" == b && g.ctatdebug("Unable to find CTAT session information from environment, trying OLI ...");
      try {
        d.setRequestHeader("Content-type", c), d.setRequestHeader("ctatsession", b);
      } catch (f) {
        alert("HTTP object creation error: " + f.message);
      }
    } else {
      alert("Internal error: http object is null right after creation");
    }
    g.ctatdebug("init () done");
  };
  this.send = function() {
    g.ctatdebug("send ()");
    g.getHTTPObject().onerror = function() {
      g.ctatdebug("Networking error!");
    };
    try {
      g.getHTTPObject().open("POST", g.getURL(), !0);
    } catch (a) {
      g.ctatdebug("Error in newConnection.httpObject.open: " + a.message);
      return;
    }
    g.init();
    try {
      b ? g.getHTTPObject().send(b) : g.getHTTPObject().send();
    } catch (a) {
      this.ctatdebug("Error in newConnection.httpObject.send: " + a.message);
    }
  };
  g.createHTTPObject();
};
CTATConnection.prototype = Object.create(CTATConnectionBase.prototype);
CTATConnection.prototype.constructor = CTATConnection;
var CTATDefaultLangagePack = {HORIZONTAL:"LR", VERTICAL:"TB", LOADING:"Please wait while the tutor is being loaded", NEXTPROBLEM:"Retrieving the Next Problem...", TUTORDISCONNECTED:"The tutor has disconnected. Please refresh the page.", OUTOFORDER:"You need to do other steps first, before doing the step you just worked on. You might request a hint for more help.", DONE:"Done", HINT:"Hint", NEXT:"Next", PREVIOUS:"Previous", HIGHLIGHTEDSTEP:"Instead of the step you are working on, please work on the highlighted step.", 
NOTDONE:"I'm sorry, but you are not done yet. Please continue working.", AUTHORPLEASECLOSE:"Authoring Tools disconnected. Please close this page."}, CTATLanguageManager = function(a, b, d) {
  CTATBase.call(this, "CTATLanguageManager", a);
  var f = this;
  this.getString = function(a) {
    f.ctatdebug("getString (" + a + ")");
    return "undefined" !== typeof CTATLanguagePack && CTATLanguagePack[a] ? CTATLanguagePack[a] : CTATDefaultLangagePack[a];
  };
  this.filterString = function(a) {
    f.ctatdebug("filterString (" + a + ")");
    return "undefined" !== typeof CTATLanguagePack && CTATLanguagePack[a] ? (f.ctatdebug("Found tag in provided language pack, returning: " + CTATLanguagePack[a]), CTATLanguagePack[a]) : "undefined" !== typeof CTATDefaultLangagePack && CTATDefaultLangagePack[a] ? (f.ctatdebug("Found tag in default language pack, returning: " + CTATDefaultLangagePack[a]), CTATDefaultLangagePack[a]) : a;
  };
};
CTATLanguageManager.prototype = Object.create(CTATBase.prototype);
CTATLanguageManager.prototype.constructor = CTATLanguageManager;
var CTATGraphicsTools = function(a, b, d, f, g, c) {
  CTATBase.call(this, "CTATGraphicsTools", "__undefined__");
  var e = b || 1, h = d || "#000000", k = f || "#EEEEEE", l = g || !1, q = "Arial", p = a || null;
  a = c || !1;
  var m = 0, w = this;
  if (null == p) {
    return w.ctatdebug("--- Error: Must pass a canvas context. ---"), -1;
  }
  0 == a && (m = .5);
  this.getGraphicBorderWidth = function() {
    return e;
  };
  this.setGraphicBorderWidth = function(a) {
    e = a;
  };
  this.setFont = function(a) {
    q = a;
  };
  this.setFontSize = function(a) {
    w.fontSize = a;
  };
  this.getLineColor = function() {
    return h;
  };
  this.getFillColor = function() {
    return k;
  };
  this.getFillShape = function() {
    return l;
  };
  this.setLineColor = function(a) {
    h = a;
  };
  this.setFillColor = function(a) {
    k = a;
  };
  this.setFillShape = function(a) {
    l = a;
  };
  this.getFont = function() {
    return q;
  };
  this.getFontSize = function() {
    return w.fontSize;
  };
  this.magicTrigFunctionX = function(a) {
    return Math.cos(2 * a * Math.PI);
  };
  this.magicTrigFunctionY = function(a) {
    return Math.sin(2 * a * Math.PI);
  };
  this.drawLine = function(a, b, c, e, d, f) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawLine");
    a += m;
    c += m;
    b += m;
    e += m;
    p.lineWidth = f;
    p.strokeStyle = d;
    p.beginPath();
    p.moveTo(a, b);
    p.lineTo(c, e);
    p.stroke();
  };
  this.drawCircle = function(a, b, c) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawCircle");
    a += m;
    b += m;
    p.strokeStyle = h;
    p.lineWidth = e;
    p.beginPath();
    p.arc(a, b, c, 0, 2 * Math.PI);
    p.stroke();
  };
  this.drawCircleFilled = function(a, b, c) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawCircleFilled");
    a += m;
    b += m;
    p.fillStyle = k;
    p.beginPath();
    p.arc(a, b, c, 0, 2 * Math.PI);
    p.fill();
  };
  this.drawRectangle = function(a, b, c, d) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawRectangle");
    a += m;
    b += m;
    p.lineWidth = e;
    1 == l ? (p.fillStyle = k, p.fillRect(a, b, c, d)) : (p.strokeStyle = h, p.beginPath(), p.rect(a, b, c, d), p.stroke());
  };
  this.drawRectangleFilled = function(a, b, c, e) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawRectangleFilled");
    a += m;
    b += m;
    p.fillStyle = k;
    p.fillRect(a, b, c, e);
  };
  this.drawRoundedRect = function(a, b, c, d, f) {
    a += m;
    b += m;
    null != p && (p.strokeStyle = h, p.lineWidth = e, p.beginPath(), p.moveTo(a, b + f), p.lineTo(a, b + d - f), p.quadraticCurveTo(a, b + d, a + f, b + d), p.lineTo(a + c - f, b + d), p.quadraticCurveTo(a + c, b + d, a + c, b + d - f), p.lineTo(a + c, b + f), p.quadraticCurveTo(a + c, b, a + c - f, b), p.lineTo(a + f, b), p.quadraticCurveTo(a, b, a, b + f), p.stroke());
  };
  this.drawRoundedRectFilled = function(a, b, c, d, f) {
    a += m;
    b += m;
    null != p && (p.strokeStyle = h, p.lineWidth = e, p.beginPath(), p.moveTo(a, b + f), p.lineTo(a, b + d - f), p.quadraticCurveTo(a, b + d, a + f, b + d), p.lineTo(a + c - f, b + d), p.quadraticCurveTo(a + c, b + d, a + c, b + d - f), p.lineTo(a + c, b + f), p.quadraticCurveTo(a + c, b, a + c - f, b), p.lineTo(a + f, b), p.quadraticCurveTo(a, b, a, b + f), p.stroke(), p.fillStyle = k, p.beginPath(), p.moveTo(a, b + f), p.lineTo(a, b + d - f), p.quadraticCurveTo(a, b + d, a + f, b + d), p.lineTo(a + 
    c - f, b + d), p.quadraticCurveTo(a + c, b + d, a + c, b + d - f), p.lineTo(a + c, b + f), p.quadraticCurveTo(a + c, b, a + c - f, b), p.lineTo(a + f, b), p.quadraticCurveTo(a, b, a, b + f), p.fill());
  };
  this.drawText = function(a, b, c) {
    if (null != p) {
      a += m;
      b += m;
      try {
        p.fillStyle = h, p.font = q + " 12pt", p.fillText(c, a, b);
      } catch (e) {
        throw alert(incompatibleBrowserMessage), Error("Browser does not support fillText");
      }
    }
  };
  this.drawTextFormatted = function(a, b, c, e, d, f, g, h, k, l) {
    if (null != p) {
      a += m;
      b += m;
      e = "";
      1 == h && (e += "italic ");
      1 == g && (e += "bold ");
      e += "12pt " + q;
      try {
        p.fillStyle = f, p.font = e, p.fillText(c, a, b);
      } catch (w) {
        throw alert(incompatibleBrowserMessage), Error("Browser does not support fillText");
      }
    }
  };
  this.drawTriangle = function(a, b, c, d, f, g) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawTriangle");
    a += m;
    c += m;
    f += m;
    b += m;
    d += m;
    g += m;
    p.fillStyle = h;
    p.lineWidth = e;
    p.beginPath();
    p.moveTo(a, b);
    p.lineTo(c, d);
    p.lineTo(f, g);
    p.lineTo(a, b);
    p.stroke();
  };
  this.drawTriangleFilled = function(a, b, c, d, f, g) {
    null == p && w.ctatdebug("Error: canvas canvasCtx is NULL in drawTriangleFilled");
    a += m;
    c += m;
    f += m;
    b += m;
    d += m;
    g += m;
    p.fillStyle = k;
    p.lineWidth = e;
    p.beginPath();
    p.moveTo(a, b);
    p.lineTo(c, d);
    p.lineTo(f, g);
    p.lineTo(a, b);
    p.fill();
  };
  this.save = function() {
    p.save();
  };
  this.restore = function() {
    p.restore();
  };
  this.clip = function() {
    p.clip();
  };
  this.clearCanvas = function(a, b, c, e) {
    "ctat" == CTATConfig.platform && p.clearRect(a, b, c, e);
  };
};
CTATGraphicsTools.prototype = Object.create(CTATBase.prototype);
CTATGraphicsTools.prototype.constructor = CTATGraphicsTools;
var CTATShape = function(a, b, d, f, g, c) {
  var e = this;
  if (void 0 == a || null == a) {
    return e.ctatdebug("--- Error: Must pass a valid ID. ---"), null;
  }
  var h = [], k = [], l = g, q = c, p = b, m = void 0, w = "black", t = "black", z = "Arial", y = 12, r = [], A = 1, E = 5, G = document.createElement("canvas");
  G.id = p;
  G.width = l;
  G.height = q;
  var F = new CTATCSS;
  F.addCSSAttribute("position", "absolute");
  F.addCSSAttribute("left", d + "px");
  F.addCSSAttribute("top", f + "px");
  F.addCSSAttribute("visibility", "visible");
  F.addCSSAttribute("background-color", "rgba(0, 0, 0, 0)");
  F.addCSSAttribute("border-style", "none");
  G.setAttribute("style", F.toCSSString());
  getSafeElementById(a).appendChild(G);
  var x = new CTATGraphicsTools(G.getContext("2d"));
  x.setGraphicBorderWidth(A);
  x.setLineColor(w);
  x.setFillColor(t);
  this.getXOffset = function() {
    return d + h[0];
  };
  this.getYOffset = function() {
    return f + k[0];
  };
  this.addPoint = function(a, b) {
    h.push(a);
    k.push(b);
  };
  this.getName = function() {
    return p;
  };
  this.getXPoint = function(a) {
    return h[a];
  };
  this.getYPoint = function(a) {
    return k[a];
  };
  this.getWidth = function() {
    return l;
  };
  this.getHeight = function() {
    return q;
  };
  this.getName = function() {
    return p;
  };
  this.getData = function() {
    return m;
  };
  this.getColor = function() {
    return t;
  };
  this.getRadius = function() {
    return E;
  };
  this.getTextFont = function() {
    return z;
  };
  this.getTextSize = function() {
    return y;
  };
  this.getLineColor = function() {
    return w;
  };
  this.getFillColor = function() {
    return t;
  };
  this.setXPoints = function(a) {
    h = a;
    F.modifyCSSAttribute("left", h[0] + "px");
    G.setAttribute("style", F.toCSSString());
  };
  this.setYPoints = function(a) {
    k = a;
    F.modifyCSSAttribute("top", k[0] + "px");
    G.setAttribute("style", F.toCSSString());
  };
  this.setWidth = function(b) {
    l = b;
    "main-canvas" != a && (G.width = l);
  };
  this.setHeight = function(b) {
    q = b;
    "main-canvas" != a && (G.height = q);
  };
  this.setName = function(a) {
    p = a;
  };
  this.setData = function(a) {
    m = a;
  };
  this.setFillColor = function(a) {
    t = a;
    x.setFillColor(a);
  };
  this.setLineColor = function(a) {
    w = a;
    x.setLineColor(a);
  };
  this.setDrawWidth = function(a) {
    A = a;
    x.setGraphicBorderWidth(A);
  };
  this.setRadius = function(a) {
    E = a;
  };
  this.setColor = function(a) {
    t = w = a;
    x.setLineColor(w);
    x.setFillColor(t);
  };
  this.setTextFont = function(a) {
    z = a;
    x.setFont(z);
  };
  this.setTextSize = function(a) {
    y = a;
    x.setFontSize(y);
  };
  this.modifyCanvasCSS = function(a, b) {
    F.modifyCSSAttribute(a, b);
    G.setAttribute("style", F.toCSSString());
  };
  this.detatchCanvas = function() {
    a == ctatcontainer ? getSafeElementById(a).removeChild(G) : getSafeElementById("ctatdiv" + a).removeChild(G);
  };
  this.shapeMagicTrigFunctionX = function(a) {
    x.magicTrigFunctionX(a);
  };
  this.shapeMagicTrigFunctionY = function(a) {
    x.magicTrigFunctionY(a);
  };
  this.drawLine = function() {
    x.drawLine(h[0] + A, k[0] + A, h[1], k[1], w, A);
  };
  this.drawCircle = function() {
    x.drawCircle(h[0] + E, k[0] + E, E);
  };
  this.drawCircleFilled = function() {
    x.drawCircleFilled(h[0] + E, k[0] + E, E - 1);
  };
  this.drawRectangle = function(a, b, c, e) {
    x.drawRectangle(a[0] + A, b[0] + A, l - A, q - A);
  };
  this.drawRectangleFilled = function() {
    x.drawRectangleFilled(h[0], k[0], l, q);
  };
  this.drawRoundedRect = function() {
    x.drawRoundedRect(h[0] + A, k[0] + A, l - E - A, q - E - A, E);
  };
  this.drawRoundedRectFilled = function() {
    x.drawRoundedRectFilled(h[0] + A, k[0] + A, l - E - A, q - E - A, E);
  };
  this.drawText = function() {
    x.drawText(y / 2, y / 2, m);
  };
  this.drawTriangle = function() {
    x.drawTriangle(h[0] + A, k[0] + A, h[1], k[1], h[2], k[2]);
  };
  this.drawTriangleFilled = function() {
    x.drawTriangleFilled(h[0], k[0], h[1], k[1], h[2], k[2]);
  };
  this.save = function() {
    x.save();
  };
  this.restore = function() {
    x.restore();
  };
  this.clip = function() {
    x.clip();
  };
  this.erase = function() {
    e.detatchCanvas();
    h = [];
    k = [];
    G = document.createElement("canvas");
    G.id = p;
    G.width = l;
    G.height = q;
    F = new CTATCSS;
    F.addCSSAttribute("position", "absolute");
    F.addCSSAttribute("left", d + "px");
    F.addCSSAttribute("top", f + "px");
    F.addCSSAttribute("visibility", "visible");
    F.addCSSAttribute("background-color", "rgba(0, 0, 0, 0)");
    F.addCSSAttribute("border-style", "none");
    G.setAttribute("style", F.toCSSString());
    a == ctatcontainer ? getSafeElementById(a).appendChild(G) : getSafeElementById("ctatdiv" + a).appendChild(G);
    for (var b = 0;b < r.length;b++) {
      G.addEventListener(r[b][0], r[b][1]);
    }
  };
};
var CTATCanvasComponent = function(a) {
  var b = this, d = [];
  this.addShape = function(a) {
    d.push(a);
  };
  this.hideShape = function(a) {
    for (var b = 0;b < d.length;b++) {
      if (d[b].getName() == a) {
        d[b].modifyCanvasCSS("visibility", "hidden");
        break;
      }
    }
  };
  this.showShape = function(a) {
    for (var b = 0;b < d.length;b++) {
      if (d[b].getName() == a) {
        d[b].modifyCanvasCSS("visibility", "visible");
        break;
      }
    }
  };
  this.hideComponent = function() {
    for (var a = 0;a < d.length;a++) {
      d[a].modifyCanvasCSS("visibility", "hidden");
    }
  };
  this.showComponent = function() {
    for (var a = 0;a < d.length;a++) {
      d[a].modifyCanvasCSS("visibility", "visible");
    }
  };
  this.moveShape = function(a, b, c) {
    for (var e = 0;e < d.length;e++) {
      if (d[e].getName() == a) {
        d[e].modifyCanvasCSS("left", b + "px");
        d[e].modifyCanvasCSS("top", c + "px");
        break;
      }
    }
  };
  this.moveComponent = function(a, b) {
    for (var c = 0;c < d.length;c++) {
      d[c].modifyCanvasCSS("left", a + "px"), d[c].modifyCanvasCSS("top", b + "px");
    }
  };
  this.removeShape = function(a) {
    for (var b = 0, c = 0;c < d.length;c++) {
      if (d[c].getName() == a) {
        b = c;
        break;
      }
    }
    d[b].detatchCanvas();
    d.splice(b, 1);
  };
  this.removeComponent = function() {
    for (;0 < d.length;) {
      b.removeShape(d[0].getName());
    }
  };
};
var scrimIsUp = !1, errorScrim = !1, waitScrim = !0, warnScrim = !1, connectionScrim = !1, authorTimeSet = !0, inAuthorTime = !0, CTATScrim = function() {
  function a() {
    warnScrim = !1;
    z.scrimDown();
  }
  function b(a) {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), z.ctatdebug("errScrimUp (" + a + ")"), 1 == errorScrim ? 1 == e && (e = !1, getSafeElementById(ctatcontainer).removeChild(w)) : 1 == warnScrim && (e = !0), z.scrimUp(a));
  }
  function d(a, b) {
    z.ctatdebug("makeHTMLButton ()");
    var c = document.createElement("input");
    c.type = "button";
    c.value = b;
    null != a ? (z.ctatdebug("clickHandle!=null"), c.onclick = a) : (z.ctatdebug("clickHandle==null"), c.onclick = z.defaultClickHandler);
    c.id = b;
    c.setAttribute("class", "scrimButton");
    return c;
  }
  CTATBase.call(this, "CTATScrim", "__undefined__");
  var f = "", g = !1, c = !1, e = !1, h = null, k = null, l = new CTATCanvasComponent("CTAT Scrim"), q = [], p = null, m = null, w = null, t = null, z = this;
  this.scrimUp = function(b) {
    if ("google" != CTATConfig.platform) {
      if (z.ctatdebug("scrimUp ()"), b = CTATGlobals.languageManager.filterString(b), z.ctatdebug("Message: " + b), 1 == scrimIsUp ? (f = 1 == waitScrim ? b : f + (" \n " + b), l.removeComponent()) : (f = b, scrimIsUp = !0), z.ctatdebug("drawScrim ()"), "google" == CTATConfig.platform) {
        z.ctatdebug("This is not available for now when we're in this environment");
      } else {
        if ($('<div id="scrim" class="ctatpageoverlay"></div>').appendTo("body"), $("#scrim").css("z-index", 1E3), "google" != CTATConfig.platform && ($("#scrim").append('<div class="css3-windows-7"><div class="fenster"><h4 class="titel">CTAT Info Panel</h4><div id="scrimpanel" class="inhalt"><br>' + f + "<br><br></div></div></div>"), !0 === e && (w = d(a, "close"), $(w).appendTo("#scrimpanel")), !0 === g && (p = d(h, "yes"), $(p).appendTo("#scrimpanel")), !0 === c && (m = d(k, "no"), $(m).appendTo("#scrimpanel")), 
        1 == waitScrim)) {
          z.ctatdebug("Adding spinner ...");
          $("#scrimpanel").append("<br>");
          b = $('<div id="scrim_spin">');
          b.css("width", "100%");
          b.css("position", "relative");
          $("#scrimpanel").append(b);
          try {
            var q = (new Spinner({className:"scrim_spinner"})).spin();
            $("#scrim_spin").append(q.el);
          } catch (t) {
            (t instanceof ReferenceError || t instanceof TypeError) && z.ctatdebug('Spinner is not available, please include it in the build or add <script src="node_modules/spin.js/spin.min.js">\x3c/script> to the html file.', t, typeof t);
          }
        }
      }
    }
  };
  this.waitScrimUp = function() {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), z.ctatdebug("waitScrimUp ()"), waitScrim = !0, z.scrimUp(CTATGlobals.languageManager.getString("LOADING")));
  };
  this.nextProblemScrimUp = function() {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), z.ctatdebug("nextProblemScrimUp ()"), z.scrimUp(CTATGlobals.languageManager.getString("NEXTPROBLEM")));
  };
  this.OKScrimUp = function(a, b) {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), z.ctatdebug("OKScrimUp (" + a + "," + b + ")"), c = g = e = warnScrim = errorScrim = !1, z.scrimUp(a), t = d(b, "OK"), $(t).appendTo("#scrimpanel"));
  };
  this.confirmScrimUp = function(a, b, e) {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), z.ctatdebug("confirmScrimUp (" + a + "," + b + "," + e + ")"), c = g = !0, k = e, h = b, z.scrimUp(a));
  };
  this.errorScrimUp = function(a) {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), 0 == authorTimeSet ? (z.ctatdebug("we don't know if we're in authorTime or not yet so we're just going to hold onto the messasge"), q.push("ERROR: " + a), errorScrim = !0) : 0 == inAuthorTime ? z.ctatdebug("We're not in authorTime, student's don't need to see our design mistakes") : (errorScrim = !0, b("ERROR: " + a)));
  };
  this.warningScrimUp = function(a) {
    "google" != CTATConfig.platform && (1 == scrimIsUp && z.scrimDownForced(), 0 == authorTimeSet ? (z.ctatdebug("we don't know if we're in authorTime or not yet so we're just going to hold onto the messasge"), q.push("WARNING: " + a), warnScrim = !0) : 0 == inAuthorTime ? z.ctatdebug("We're not in authorTime, student's don't need to see our design mistakes") : (warnScrim = !0, b("WARNING: " + a)));
  };
  this.handleTSDisconnect = function() {
    connectionScrim = !0;
    z.scrimUp(CTATGlobals.languageManager.getString("TUTORDISCONNECTED"));
  };
  this.scrimDown = function() {
    "google" != CTATConfig.platform && (0 == scrimIsUp ? z.ctatdebug("The scrim isn't up, returning") : 1 == errorScrim ? z.ctatdebug("The scrim is up to describe errors to the user, leave it up!") : 1 == warnScrim ? z.ctatdebug("The scrim is up to display warnings to the user, leave it up!") : 1 == connectionScrim ? z.ctatdebug("The scrim is up for a connection issue leave it up!") : z.scrimDownForced());
  };
  this.scrimDownForced = function() {
    $("#scrim").remove();
    l.removeComponent();
    waitScrim = scrimIsUp = !1;
    f = "";
  };
  this.defaultClickHandler = function() {
    z.ctatdebug("defaultClickHandler ()");
    z.scrimDown();
  };
  this.setInAuthorTime = function(a) {
    z.ctatdebug("setting inAuthorTime = " + a);
    authorTimeSet = !0;
    inAuthorTime = a;
    if (!a) {
      warnScrim = errorScrim = !1, e && null.removeChild(w);
    } else {
      if (errorScrim || warnScrim) {
        for (var c in q) {
          b(c);
        }
      }
    }
  };
  this.getInAuthorTime = function() {
    return inAuthorTime;
  };
};
CTATScrim.prototype = Object.create(CTATBase.prototype);
CTATScrim.prototype.constructor = CTATScrim;
CTATGlobals.languageManager = new CTATLanguageManager;
$(document).ready(function() {
  ctatdebug("$ready ()");
  CTATScrim.scrim = new CTATScrim;
  0 == noScrim && CTATScrim.scrim.waitScrimUp();
});
var CTATWSConnection = function(a) {
  CTATConnectionBase.call(this, "CTATWSConnection");
  var b = "", d = !1, f = this, g = null, c = [], e = !1, h = 0, k = 0, l = null, q = null;
  f.setSocketType("ws");
  this.setConsumed = function(a) {
    d = a;
    f.ctatdebug("consumed: " + d);
  };
  this.getConsumed = function() {
    f.ctatdebug("consumed: " + d);
    return d;
  };
  this.assignReceiveFunction = function(a) {
    l = a;
  };
  this.assignCloseFunction = function(a) {
    q = a;
  };
  this.setData = function(a) {
    b = a;
  };
  this.getData = function() {
    return b;
  };
  this.init = function() {
    f.ctatdebug("init (" + f.getURL() + "); websocket " + g);
    null == g && (g = new WebSocket(f.getURL()), g.addEventListener("open", function(a) {
      f.ctatdebug("STATUS: open");
      e = !0;
      f.ctatdebug("Connection open, flushing outgoing queue ...");
      h = (new Date).getTime();
      if (0 < c.length) {
        for (a = 0;a < c.length;a++) {
          g.send(c[a]);
        }
        c = [];
      }
    }), g.addEventListener("message", function(a) {
      k = (new Date).getTime();
      f.ctatdebug("STATUS: message after " + (k - h) + " ms");
      f.ctatdebug("Received: " + a.data);
      l ? l(a.data) : f.ctatdebug("Error: no processing function provided");
    }), g.addEventListener("close", function(a) {
      f.ctatdebug("STATUS: close; code " + a.code + ", reason " + a.reason);
      e = !1;
      a instanceof CloseEvent ? g.close(a.code, a.reason) : g.close();
      q && q(a);
    }), g.addEventListener("error", function(a) {
      f.ctatdebug("STATUS: error");
      e = !1;
      g.close(1002, "client closing in response to error");
    }), f.ctatdebug("init () done"));
  };
  this.send = function() {
    f.ctatdebug("send ()");
    f.init();
    !1 === e ? (f.ctatdebug("Connection not ready yet, storing ..."), c.push(b)) : (f.ctatdebug("Connection ready, sending data ..."), h = (new Date).getTime(), g.send(b));
  };
};
CTATWSConnection.prototype = Object.create(CTATConnectionBase.prototype);
CTATWSConnection.prototype.constructor = CTATWSConnection;
var bundleFormatter = "", inBundle = !1, useBundling = !1, useOLIEncoding = !1, CTATCommLibrary = function(a, b) {
  CTATBase.call(this, "CTATCommLibrary", a);
  var d = authenticityToken = "", f = 0, g = [], c = a ? a : null, e = null == b ? !0 : b, h = !0, k = null, l = this, q = "http";
  this.setUseCommSettings = function(a) {
    h = a;
  };
  this.getUseCommSettings = function() {
    return h;
  };
  this.setSocketType = function(a) {
    q = a;
  };
  this.getSocketType = function() {
    return q;
  };
  this.assignHandler = function(a) {
    c = a;
  };
  this.assignMessageListener = function(a) {
    k = a;
  };
  this.encodeVariables = function(a) {
    l.ctatdebug("encodeVariables ()");
    for (var b = "", c = 0;c < a.length;c++) {
      var e = a[c];
      0 < c && (b += "&");
      b += e.name;
      b += "=";
      b += encodeURIComponent(e.value);
    }
    return b;
  };
  this.encodeVariablesOLI = function(a) {
    l.ctatdebug("encodeVariablesOLI ()");
    for (var b = "", c = 0;c < a.length;c++) {
      var e = a[c];
      0 < c && (b += "&");
      b += e.name;
      b += "=";
      b += encodeURIComponent(e.value);
    }
    return b;
  };
  this.createConnection = function(a, b) {
    l.ctatdebug("createConnection ()");
    if (!b) {
      return new CTATConnection(a);
    }
    flashVars.getRawFlashVars();
    var c = null;
    if ("websocket" == l.getSocketType()) {
      for (c = c = 0;c < g.length;c++) {
        var e = g[c];
        if ("ws" == e.getSocketType() && e.getURL() == b) {
          return e;
        }
      }
      c = new CTATWSConnection(a);
      c.setID(f);
      c.setURL(b);
      c.assignReceiveFunction(this.processWSReply);
      c.assignCloseFunction(this.processWSClose);
      g.push(c);
      f++;
      return c;
    }
    c = new CTATConnection(a);
    c.setID(f);
    c.setURL(b);
    c.assignReceiveFunction(this.processReply);
    g.push(c);
    f++;
    return c;
  };
  this.startBundle = function() {
    l.ctatdebug("startBundle ()");
    0 == useBundling ? this.ctatdebug("Not using bundling, bump") : (bundleFormatter = '<?xml version="1.0" encoding="UTF-8"?><message><verb/><properties><MessageType>MessageBundle</MessageType><messages>', inBundle = !0);
  };
  this.endBundle = function() {
    l.ctatdebug("endBundle ()");
    0 == useBundling ? l.ctatdebug("Not using bundling, bump") : (inBundle = !1, bundleFormatter += "</messages></properties></message>", l.sendXML(bundleFormatter));
  };
  this.setFixedURL = function(a) {
    d = a;
  };
  this.getURL = function() {
    l.ctatdebug("getURL ()");
    if ("" != d) {
      return l.ctatdebug("Returning fixedURL: " + d), d;
    }
    var a = flashVars.getRawFlashVars(), b = "http://";
    "https" == l.getSocketType() && (b = "https://");
    b = b + a.remoteSocketURL + ":" + a.remoteSocketPort;
    -1 != a.remoteSocketURL.indexOf("http") && (b = a.remoteSocketURL + ":" + a.remoteSocketPort);
    return b;
  };
  this.sendXML = function(a) {
    l.ctatdebug("Sending: " + a);
    l.ctatdebug("sendXML (" + a + ")");
    if (1 == useBundling && 1 == inBundle) {
      l.ctatdebug("Bundling ..."), bundleFormatter += a;
    } else {
      bundleFormatter = a;
      flashVars.getRawFlashVars();
      a = this.getURL();
      var b = bundleFormatter;
      -1 == bundleFormatter.indexOf("<?xml") && (b = '<?xml version="1.0" encoding="UTF-8"?>' + bundleFormatter);
      1 == this.getUseCommSettings() ? "javascript" == l.getSocketType() ? CTAT.ToolTutor.sendToTutor(b) : this.send_post(a, b) : this.send_post(a, b);
    }
  };
  this.sendXMLNoBundle = function(a) {
    l.ctatdebug("sendXMLNoBundle (" + a + ")");
    bundleFormatter = a;
    var b = this.getURL(), c = a;
    -1 == a.indexOf("<?xml") && (c = '<?xml version="1.0" encoding="UTF-8"?>' + a);
    flashVars.getRawFlashVars();
    1 == this.getUseCommSettings() ? "javascript" == l.getSocketType() ? CTAT.ToolTutor.sendToTutor(c) : this.send_post(b, c) : this.send_post(b, c);
  };
  this.sendXMLURL = function(a, b) {
    l.ctatdebug("sendXMLURL (" + b + ")");
    var c = a;
    -1 == a.indexOf("<?xml") && (c = '<?xml version="1.0" encoding="UTF-8"?>' + a);
    flashVars.getRawFlashVars();
    l.ctatdebug("Sending: " + c);
    1 == this.getUseCommSettings() ? "javascript" == l.getSocketType() ? CTAT.ToolTutor.sendToTutor(c) : this.send_post(b, c) : this.send_post(b, c);
  };
  this.sendURLVariables = function(a, b) {
    this.ctatdebug("sendURLVariables (" + a + ")");
    this.send_post_variables(a, b);
  };
  this.send = function(a) {
    l.ctatdebug("send (" + a + ")");
    if (!0 === globalCommDisabled) {
      l.ctatdebug("Communications globally disabled, please check your settings");
    } else {
      var b = new CTATConnection(null);
      b.setID(f);
      f++;
      if (null === b.getHTTPObject()) {
        return alert("Cannot create XMLHTTP instance"), !1;
      }
      g.push(b);
      b.setURL(a);
      b.assignReceiveFunction(this.processReply);
      try {
        b.getHTTPObject().open("GET", a, !0);
      } catch (c) {
        this.ctatdebug("Error in newConnection.httpObject.open: " + c.message);
        return;
      }
      try {
        b.init();
      } catch (c) {
        this.ctatdebug("Error in newConnection.init: " + c.message);
        return;
      }
      try {
        b.getHTTPObject().send(null);
      } catch (c) {
        this.ctatdebug("Error in newConnection.httpObject.send: " + c.message);
      }
    }
  };
  this.send_post_variables = function(a, b) {
    l.ctatdebug("send_post_variables (" + a + ")");
    flashVars.getRawFlashVars();
    l.getSocketType();
    var c = "", c = 0 == useOLIEncoding ? this.encodeVariables(b) : this.encodeVariablesOLI(b);
    this.ctatdebug("Sending: " + c);
    if (!0 === globalCommDisabled) {
      l.ctatdebug("Communications globally disabled, please check your settings");
    } else {
      var e = l.createConnection(CTATConfiguration.getRawFlashVars(), a);
      e.setContentType("application/x-www-form-urlencoded");
      f++;
      g.push(e);
      l.ctatdebug(c);
      null != k && k.processOutgoing(c);
      e.setURL(a);
      e.setData(c);
      e.assignReceiveFunction(this.processReply);
      e.send();
    }
  };
  this.send_post = function(a, b) {
    var c = null;
    l.ctatdebug("send_post (" + a + ")");
    if (!0 === globalCommDisabled) {
      l.ctatdebug("Communications globally disabled, please check your settings");
    } else {
      l.ctatdebug("Outoing on wire: " + b);
      var c = flashVars.getRawFlashVars(), e = a;
      "websocket" == l.getSocketType() ? (e = a.replace("http:", "ws:"), c = l.createConnection(c, e), c.setData(b), l.ctatdebug(b)) : (c = l.createConnection(c, e), c.setData(b));
      null != k && k.processOutgoing(b);
      c.send();
    }
  };
  this.processReply = function(a) {
    l.ctatdebug("processReply (" + g.length + "," + a + ")");
    var b = 0, d = !1;
    a = [];
    for (var f = 0, f = 0;f < g.length;f++) {
      var h = g[f], q = h.getHTTPObject();
      l.ctatdebug("Testing connection entry " + f + ", readyState: " + q.readyState + ", testConnection.consumed: " + h.getConsumed());
      4 == q.readyState && 0 == h.getConsumed() ? (l.ctatdebug("Investigating request response: " + b + " -> " + q.status + ", for: " + h.getURL()), d = !1, 0 === q.status && (d = !0, l.ctatdebug("Received message (status 0): " + q.responseText)), 408 == q.status && (d = !0, l.ctatdebug("Received message (status 408): " + q.responseText), e && CTATScrim.scrim.scrimDown()), 502 == q.status && (d = !0, l.ctatdebug("Received message (status 502): " + q.responseText), e && CTATScrim.scrim.errorScrimUp("Error contacting the server, please refresh the page and try again (HTTP status 502: gateway response).")), 
      200 == q.status ? (d = !0, l.ctatdebug("Processing 200 response ..."), null !== c ? (a.push(q.responseText), null != k && k.processIncoming(q.responseText)) : l.ctatdebug("Error: httphandler is null, can't process response!")) : c && c.processError && (d = !0, l.ctatdebug("Processing non-200 response, status " + q.status), c.processError(q.status, q.responseText)), !1 === d && l.ctatdebug("Error: status not handled for: " + q.status), l.ctatdebug("Marking connection as consumed ..."), h.setConsumed(!0)) : 
      (0 === q.readyState && l.ctatdebug("Received message (status 0, request not initialized)"), 1 === q.readyState && l.ctatdebug("Received message (status 1, server connection established)"), 2 === q.readyState && l.ctatdebug("Received message (status 2, request received)"), 3 === q.readyState && l.ctatdebug("Received message (status 3, processing request)"));
      b++;
    }
    l.cleanup();
    for (b = 0;b < a.length;b++) {
      d = a[b], -1 != d.indexOf("status=success") ? l.ctatdebug("Info: logging success message received, not propagating to message handler") : (l.ctatdebug("Processing incoming message: " + d), c.processMessage(d));
    }
  };
  this.processWSReply = function(a) {
    l.ctatdebug("processWSReply() length " + (null == a ? null : a.toString().length));
    "string" == typeof a && (null != k && k.processIncoming(a), -1 != a.indexOf("status=success") ? l.ctatdebug("processWSReply() logging success message received, not propagating to message handler: " + a) : (l.ctatdebug("Processing incoming message: " + a), c.processMessage(a)));
  };
  this.processWSClose = function(a) {
    l.ctatdebug("processWSClose(" + a + ")");
    a instanceof CloseEvent && l.ctatdebug("CloseEvent: code " + a.code + ", reason " + a.reason + ", wasClean " + a.wasClean);
    "AUTHORING" == CTATTarget && CTATScrim.scrim.scrimUp(CTATGlobals.languageManager.filterString("AUTHORPLEASECLOSE"));
  };
  this.cleanup = function() {
    l.ctatdebug("cleanup ()");
    for (var a = 0, b = !1, c = !1;!1 === c;) {
      b = this.checkEntries(), !1 === b ? c = !0 : a++;
    }
    l.ctatdebug("Removed " + a + " entries");
  };
  this.checkEntries = function() {
    l.ctatdebug("checkEntries (" + g.length + ")");
    for (var a = 0, b = 0, b = 0;b < g.length;b++) {
      var c = g[b];
      if (!0 === c.getConsumed()) {
        return l.ctatdebug("Removing : " + c.getID()), g.splice(a, 1), !0;
      }
      var e = c.getHTTPObject();
      l.ctatdebug("Check, readyState: " + e.readyState + ", consumed: " + c.getConsumed());
      a++;
    }
    return !1;
  };
  this.retrieveXMLFile = function(a, b, c) {
    l.ctatdebug("retrieveXMLFile (" + a + ")");
    var e = (new CTATConnection).getHTTPObject();
    e.onreadystatechange = function() {
      l.ctatdebug("onready... GET for xmlFile xmlhttp.readyState " + e.readyState + ", .status " + e.status + ", parser " + b);
      if (4 == e.readyState && 200 == e.status) {
        var d = null;
        e.responseXML ? (l.ctatdebug("parsing brd xml using something else"), d = e.responseXML.documentElement) : (l.ctatdebug("parsing brd xml using node"), d = (b = new CTATXML).parseXML(e.responseText));
        null == d ? (d = (new CTATTutorMessageBuilder).createErrorMessage("Error parsing xmlFile " + a), l.ctatdebug("Error parsing xmlFile " + a + ": " + d), CTAT.ToolTutor.sendToInterface(d, !0)) : c.processXML(d);
      }
    };
    e.onerror = function() {
      var a = (new CTATTutorMessageBuilder).createErrorMessage("Load Problem Error", e.status + " " + e.statusText);
      l.ctatdebug("onerror GET for xmlFile " + a);
      CTAT.ToolTutor.sendToInterface(a, !0);
      c.processXML(null);
    };
    e.open("GET", a, !0);
    e.setRequestHeader("Content-type", "text/plain");
    e.send();
  };
  this.retrieveJSONFile = function(a, b) {
    l.ctatdebug("retrieveJSONFile (" + a + ")");
    var c = (new CTATConnection).getHTTPObject();
    c.onreadystatechange = function() {
      4 == c.readyState && 200 == c.status && (l.ctatdebug("Successfully retrieved file: " + a), b(JSON.parse(c.responseText)));
    };
    c.onerror = function() {
      l.ctatdebug("Error retrieving JSON file");
    };
    c.open("GET", a, !0);
    c.setRequestHeader("Content-type", "text/plain");
    c.send();
  };
  this.retrieveFile = function(a, b) {
    l.ctatdebug("retrieveFile (" + a + ")");
    var c = (new CTATConnection).getHTTPObject();
    c.onreadystatechange = function() {
      4 == c.readyState && 200 == c.status && (l.ctatdebug("Successfully retrieved file: " + a), b(c.responseText));
    };
    c.onerror = function() {
      l.ctatdebug("Error retrieving file");
    };
    c.open("GET", a, !0);
    c.setRequestHeader("Content-type", "text/plain");
    c.send();
  };
};
CTATCommLibrary.setAuthenticityToken = function(a) {
  Array.isArray(a) && (a = 0 < a.length ? a[0] : "");
  a && (CTATCommLibrary.authenticityToken = decodeURIComponent(a));
};
CTATCommLibrary.getAuthenticityToken = function(a) {
  return CTATCommLibrary.authenticityToken;
};
CTATCommLibrary.addAuthenticityToken = function(a) {
  return CTATCommLibrary.authenticityToken && ("" == a || 0 > a.search(/authenticity_token=/) && 0 <= a.search(/^[?]?[^?&=><]+=?[^&=]*(&[^?&=><]+=?[^&=]*)*$/)) ? "" + a + (a ? "&" : "") + "authenticity_token=" + encodeURIComponent(CTATCommLibrary.authenticityToken) : a;
};
CTATCommLibrary.prototype = Object.create(CTATBase.prototype);
CTATCommLibrary.prototype.constructor = CTATCommLibrary;
var CTATActionEvaluationData = function(a) {
  CTATBase.call(this, "CTATActionEvaluationData", "actionevaluation");
  var b = 0, d = 0, f = "", g = a;
  this.setClassification = function(a) {
    this.classification = a;
  };
  this.isHint = function() {
    return "HINT" == g;
  };
  this.hasClassification = function() {
    return !0;
  };
  this.setCurrentHintNumber = function(a) {
    b = a;
  };
  this.setTotalHintsAvailable = function(a) {
    d = a;
  };
  this.setHintID = function(a) {
    f = a;
  };
  this.getClassification = function() {
    return "";
  };
  this.setEvaluation = function(a) {
    g = a;
  };
  this.getEvaluation = function() {
    return g;
  };
  this.getAttributeString = function() {
    var a = "";
    if (!this.isHint()) {
      return a;
    }
    a += 'current_hint_number="' + b + '" ';
    a += 'total_hints_available="' + d + '" ';
    "" !== f && (a += 'hint_id="' + f + '" ');
    return a;
  };
};
CTATActionEvaluationData.prototype = Object.create(CTATBase.prototype);
CTATActionEvaluationData.prototype.constructor = CTATActionEvaluationData;
var CTATTutoringServiceMessageBuilder = function() {
  CTATBase.call(this, "CTATTutoringServiceMessageBuilder", "__undefined__");
  this.createStartProblemMessage = function(a) {
    this.ctatdebug("createStartProblemMessage ()");
    return "<message><verb>NotePropertySet</verb><properties><MessageType>StartProblem</MessageType><ProblemName>" + a + "</ProblemName></properties></message>";
  };
  this.createInterfaceIdentificationMessage = function(a) {
    this.ctatdebug("createInterfaceIdentificationMessage (" + a + ")");
    return "<message><verb>NotePropertySet</verb><properties><MessageType>InterfaceIdentification</MessageType><Guid>" + a + "</Guid></properties></message>";
  };
  this.createInterfaceDescriptionMessage = function(a, b, d) {
    this.ctatdebug("createInterfaceDescriptionMessage ()");
    a = "<message><verb>NotePropertySet</verb><properties><MessageType>MessageBundle</MessageType><messages><message><verb>NotePropertySet</verb><properties><MessageType>InterfaceDescription</MessageType><WidgetType>NotCommShell</WidgetType>";
    a += "<CommName>nothing</CommName>";
    a += "<UpdateEachCycle>false</UpdateEachCycle>";
    a += "<jessDeftemplates><value>(deftemplate CTATCommShell (slot_name))</value></jessDeftemplates>";
    a += '<jessInstances><value>(assert (CTATCommShell (name CTATCommShell) (value "" )))</value></jessInstances>';
    a += "<serialized>";
    a += '<NotCommShell name="nothing" x="0" y="0" width="' + b + '" height="' + d + '"></NotCommShell>';
    a += "</serialized>";
    a += "</properties></message>";
    a += "</messages></properties></message>";
    return "" + a;
  };
  this.createSetPreferencesMessage = function(a) {
    this.ctatdebug("createSetPreferencesMessage ()");
    var b = CTATConfiguration.getRawFlashVars(), d;
    d = "<message><verb>NotePropertySet</verb><properties><MessageType>SetPreferences</MessageType>" + ("<log_service_url>" + b.log_service_url + "</log_service_url>");
    var f = !1, g = !1, c = b.Logging;
    this.ctatdebug("Parsing and processing logMethod: " + c);
    switch(c) {
      case "ServiceToLogServer":
        f = !0;
        break;
      case "ServiceToDisk":
        g = !0;
        break;
      case "ServiceToDiskAndLogServer":
        g = f = !0;
        break;
      case "ClientToLogServer":
        g = f = !0;
    }
    d = d + ("<log_to_remote_server>" + f + "</log_to_remote_server><log_to_disk>" + g + "</log_to_disk>") + ("<log_to_disk_directory>" + b.log_to_disk_directory + "</log_to_disk_directory>");
    d += "<logging>" + b.Logging + "</logging>";
    d += "<user_guid>" + b.user_guid + "</user_guid>";
    d += "<problem_name>" + b.problem_name + "</problem_name>";
    d += "<question_file><![CDATA[" + encodeURI(b.question_file) + "]]\x3e</question_file>";
    d += "<class_name>" + b.class_name + "</class_name>";
    d += "<school_name>" + b.school_name + "</school_name>";
    d += "<instructor_name>" + b.instructor_name + "</instructor_name>";
    d += "<session_id>" + b.session_id + "</session_id>";
    d += "<source_id>" + b.source_id + "</source_id>";
    d += "<sui><![CDATA[" + b.sui + "]]\x3e</sui>";
    d += "<problem_state_status>" + b.problem_state_status + "</problem_state_status>";
    d += "<curriculum_service_url>" + b.curriculum_service_url + "</curriculum_service_url>";
    d += "<restore_problem_url>" + b.restore_problem_url + "</restore_problem_url>";
    null !== skillSet && (d += skillSet.toSetPreferencesXMLString());
    d += "<CommShellVersion>" + a + "</CommShellVersion>";
    d += "</properties></message>";
    return "" + d;
  };
  this.createTracerActionMessage = function(a, b) {
    this.ctatdebug("createTracerActionMessage ()");
    var d;
    d = "<message><verb>NotePropertySet</verb><properties><MessageType>TracerAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
    d += "</properties></message>";
    return "" + d;
  };
  this.createInterfaceActionMessage = function(a, b) {
    this.ctatdebug("createInterfaceActionMessage ()");
    var d;
    d = "<message><verb>NotePropertySet</verb><properties><MessageType>InterfaceAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
    d += "</properties></message>";
    return "" + d;
  };
  this.createUntutoredActionMessage = function(a, b) {
    this.ctatdebug("createUntutoredActionMessage (" + a + ")");
    var d;
    d = "<message><verb>NotePropertySet</verb><properties><MessageType>UntutoredAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
    d += "</properties></message>";
    return "" + d;
  };
  this.createProblemSummaryRequestMessage = function() {
    return "<message><verb>NotePropertySet</verb><properties><MessageType>ProblemSummaryRequest</MessageType></properties></message>";
  };
  this.createProblemRestoreEndMessage = function() {
    return "<message><verb>NotePropertySet</verb><properties><MessageType>ProblemRestoreEnd</MessageType></properties></message>";
  };
  this.createInterfaceConfigurationEnd = function() {
    return "<message><verb>NotePropertySet</verb><properties><MessageType>InterfaceConfigurationEnd</MessageType></properties></message>";
  };
  this.createInCorrectActionMessage = function(a, b) {
    this.ctatdebug("createInCorrectActionMessage ()");
    var d;
    d = "<message><verb>SendNoteProperty</verb><properties><MessageType>InCorrectAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
    d += "</properties></message>";
    return "" + d;
  };
  this.createCorrectActionMessage = function(a, b) {
    this.ctatdebug("createCorrectActionMessage ()");
    var d;
    d = "<message><verb>SendNoteProperty</verb><properties><MessageType>CorrectAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
    d += "</properties></message>";
    return "" + d;
  };
  this.createAssociatedRulesMessage = function(a, b, d, f, g, c) {
    a = "<message><verb>SendNoteProperty</verb><properties><MessageType>AssociatedRules</MessageType>" + ("<Indicator>" + a + "</Indicator>") + b.toXMLString();
    d = d.toXMLString().replace("<Selection>", "<StudentSelection>").replace("<Action>", "<StudentAction>").replace("<Input>", "<StudentInput>");
    d = d.replace("</Selection>", "</StudentSelection>").replace("</Action>", "</StudentAction>").replace("</Input>", "</StudentInput>");
    a += d;
    return "" + a;
  };
};
CTATTutoringServiceMessageBuilder.prototype = Object.create(CTATBase.prototype);
CTATTutoringServiceMessageBuilder.prototype.constructor = CTATTutoringServiceMessageBuilder;
var CTATVariable = function() {
  this.value = this.name = "";
};
var CTATCurriculumService = function(a) {
  CTATBase.call(this, "CTATCurriculumService", "curriculum_service");
  var b = [], d = this;
  this.reset = function() {
    b = [];
  };
  this.addVariable = function(a, d) {
    var c = new CTATVariable;
    c.name = a;
    c.value = d;
    b.push(c);
  };
  this.sendSummary = function(f) {
    d.ctatdebug("sendSummary ()");
    var g = new CTATXML, c = f.getXMLObject();
    f = c.getElementsByTagName("ProblemSummary");
    f = $("<div>").html(f[0].innerHTML).text();
    g.xmlToString(c);
    var c = flashVars.getRawFlashVars(), g = c.curriculum_service_url, e = new CTATXML, h = e.parse(f), e = e.getElementAttr(h, "CompletionStatus");
    g ? ("complete" == e && (CTATScrim.scrim.nextProblemScrimUp(), a.assignMessageListener(d), a.assignHandler(d)), b = [], this.addVariable("user_guid", c.user_guid), this.addVariable("session_id", c.session_id), this.addVariable("authenticity_token", c.authenticity_token), this.addVariable("school_name", c.school_name), this.addVariable("summary", f), f = c.target_frame, e = c.reuse_swf, c = c.run_problem_url, this.addVariable("targetFrame", f), this.addVariable("reuseSWF", e), d.ctatdebug("CTATCurriculumService.sendSummary about to send targetFrame = " + 
    f + ", reuseSwf " + e + ", runProblemUrl " + c), a.send_post_variables(g, b)) : "complete" == e && CTATScrim.scrim.scrimUp("Congratulations, you are done with this problem.");
  };
  this.processOutgoing = function(a) {
    d.ctatdebug('CTATCurriculumService.processOutgoing("' + a + '")');
  };
  this.processIncoming = function(a) {
    var b = flashVars.getRawFlashVars().run_problem_url;
    d.ctatdebug("CTATCurriculumService.processIncoming(" + (a ? a.substring(0, 12) + "..." : "") + ") parent.location.replace " + parent.location.replace + ', runProblemUrl "' + b + '"');
    b && parent && parent.location && parent.location.replace(b);
  };
  this.processMessage = function(a) {
    this.ctatdebug("CTATCurriculumService.processMessage(" + (a ? a.substring(0, 30) + "..." : "") + ")");
  };
  this.updateFlashVars = function(a) {
    d.ctatdebug("UpdateFlashVars ()");
  };
  this.checkProtocol = function(a) {
    return "localhost" == a || "127.0.0.1" == a ? !0 : null === /^http[s]?:\/\/([^\/]+)\//.exec(a) || 4096 <= a.length ? !1 : !0;
  };
};
CTATCurriculumService.prototype = Object.create(CTATBase.prototype);
CTATCurriculumService.prototype.constructor = CTATCurriculumService;
var CTATLogMessageBuilder = function() {
  CTATBase.call(this, "CTATLogMessageBuilder", "logmessagebuilder");
  var a = this, b = [], d = [];
  this.setContextName = function(a) {
    contextGUID = a;
  };
  this.getContextName = function() {
    return contextGUID;
  };
  this.makeSessionElement = function() {
    var a = flashVars.getRawFlashVars();
    return void 0 != a.log_session_id && null != a.log_session_id ? "<session_id>" + a.log_session_id + "</session_id>" : "<session_id>" + a.session_id + "</session_id>";
  };
  this.createContextMessage = function(b) {
    a.ctatdebug("createContextMessage()");
    var d = new Date, c = flashVars.getRawFlashVars(), e = '<context_message context_message_id="' + this.getContextName() + '" name="START_PROBLEM">';
    b || (e += this.makeMetaElement(d));
    b = "";
    void 0 != c.class_name ? "" != c.class_name ? (b = "<class>" + ("<name>" + c.class_name + "</name>"), void 0 != c.school_name && (b += "<school>" + c.school_name + "</school>"), void 0 != c.period_name && (b += "<period>" + c.period_name + "</period>"), void 0 != c.class_description && (b += "<description>" + c.class_description + "</description>"), void 0 != c.instructor_name && (b += "<instructor>" + c.instructor_name + "</instructor>"), b += "</class>") : b = "<class />" : b = "<class />";
    e += b;
    b = flashVars.getDatasetTypes();
    var h = flashVars.getDatasetNames();
    a.ctatdebug("Check: " + b.length + ", " + h.length);
    if (null != b && null != h) {
      a.ctatdebug("We have valid data set names and types, adding to message ...");
      for (var d = "<dataset>" + ("<name>" + c.dataset_name + "</name>"), k = 0;k < b.length;k++) {
        a.ctatdebug("Adding ..."), d += '<level type="' + b[k] + '">', d += "<name>" + h[k] + "</name>";
      }
      d += "<problem ";
      if (void 0 != c.problem_tutorflag || void 0 != c.problem_otherproblemflag) {
        void 0 != c.problem_tutorflag ? d += ' tutorFlag="' + c.problem_tutorflag + '"' : void 0 != c.problem_otherproblemflag && (d += 'tutorFlag="' + c.problem_otherproblemflag + '"');
      }
      d = d + ">" + ("<name>" + c.problem_name + "</name>");
      d = void 0 != c.problem_context ? d + ("<context>" + c.problem_context + "</context>") : d + "<context />";
      d += "</problem>";
      for (c = 0;c < b.length;c++) {
        d += "</level>";
      }
      d += "</dataset>";
      e += d;
    }
    c = "";
    b = flashVars.getConditionNames();
    d = flashVars.getConditionTypes();
    h = flashVars.getConditionDescriptions();
    if (0 < b.length) {
      for (k = 0;k < b.length;k++) {
        c += "<condition><name>" + b[k] + "</name>", c += "" == d[k] ? "" : "<type>" + d[k] + "</type>", c += "" == h[k] ? "" : "<desc>" + h[k] + "</desc>", c += "</condition>";
      }
    }
    var e = e + c, c = flashVars.getCustomFields(), l;
    for (l in c) {
      c.hasOwnProperty(l) && (e += "<custom_field>", e += "<name>" + l + "</name>", e += "<value>" + c[l] + "</value>", e += "</custom_field>");
    }
    e += "</context_message>";
    a.ctatdebug("messageString = " + e);
    return e;
  };
  this.createSemanticEventToolMessage = function(f, g, c, e, h) {
    a.ctatdebug("createSemanticEventToolMessage()");
    var k = new Date;
    flashVars.getRawFlashVars();
    var l = '<tool_message context_message_id="' + this.getContextName() + '">';
    h || (l += this.makeMetaElement(k));
    g = '<semantic_event transaction_id="' + g + '" name="' + c + '"';
    "" != e && (g += ' subtype="' + e + '"');
    l += g + "/>";
    e = "<event_descriptor>";
    f = f.toXMLString(!0);
    e = e + f + "</event_descriptor>";
    l += e;
    l += this.createCustomFields(b, d);
    l += "</tool_message>";
    a.ctatdebug("messageString = " + l);
    return l;
  };
  this.createUIEventToolMessage = function(f, g, c, e) {
    a.ctatdebug("createUIEventToolMessage()");
    var h = new Date;
    flashVars.getRawFlashVars();
    var k = '<tool_message context_message_id="' + this.getContextName() + '">';
    e || (k += this.makeMetaElement(h));
    k += '<ui_event name="' + g + '">' + c + "</ui_event>";
    f = "<event_descriptor>" + f.toSerializedString();
    k += f + "</event_descriptor>";
    k += this.createCustomFields(b, d);
    k += "</tool_message>";
    a.ctatdebug("messageString = " + k);
    return k;
  };
  this.createTutorMessage = function(f, g, c, e, h, k, l, q) {
    a.ctatdebug("createTutorMessage()");
    var p = new Date;
    flashVars.getRawFlashVars();
    var m = '<tutor_message context_message_id="' + this.getContextName() + '">';
    q || (m += this.makeMetaElement(p));
    g = '<semantic_event transaction_id="' + g + '" name="' + c + '"';
    "" !== k && (g += ' subtype="' + k + '"');
    m += g + "/>";
    f = "<event_descriptor>" + f.toXMLString(!0);
    m += f + "</event_descriptor>";
    f = "<action_evaluation ";
    e.hasClassification() && null != e.getAttributeString() && (f += e.getAttributeString());
    f += ">" + e.getEvaluation() + "</action_evaluation>";
    m += f;
    "" != h && (m += "<tutor_advice>" + h + "</tutor_advice>");
    null != l && (a.ctatdebug("Adding skills to log message ..."), m += l.toLogString());
    m += this.createCustomFields(b, d);
    m += "</tutor_message>";
    a.ctatdebug("messageString = " + m);
    return m;
  };
  this.createGenericMessage = function(b, d) {
    a.ctatdebug("createGenericMessage()");
    flashVars.getRawFlashVars();
    var c = '<message context_message_id="' + this.getContextName() + '">', c = c + b + "</message>";
    a.ctatdebug("messageString = " + c);
    return c;
  };
  this.makeMetaElement = function(b) {
    a.ctatdebug("makeMetaElement ()");
    var d = flashVars.getRawFlashVars(), c;
    c = "<meta>" + ("<user_id>" + d.user_guid + "</user_id>");
    c += "<session_id>" + d.session_id + "</session_id>";
    c += "<time>" + this.formatTimeStamp(b) + "</time>";
    return c += "<time_zone>" + flashVars.getTimeZone() + "</time_zone></meta>";
  };
  this.wrapForOLI = function(b) {
    a.ctatdebug("wrapForOLI ()");
    var d = new Date, c = flashVars.getRawFlashVars();
    b = encodeURIComponent(b);
    var e;
    e = '<?xml version="1.0" encoding="UTF-8"?><log_action ' + ('auth_token="' + encodeURIComponent(c.auth_token) + '" ');
    e = void 0 != c.log_session_id && null != c.session_id ? e + ('session_id="' + c.log_session_id + '" ') : e + ('session_id="' + c.session_id + '" ');
    e = e + 'action_id="EVALUATE_QUESTION" ' + ('user_guid="' + c.user_guid + '" ');
    e += 'date_time="' + this.formatTimeStampOLI(d) + '" ';
    e += 'timezone="' + flashVars.getTimeZone() + '" ';
    e += 'source_id="' + c.source_id + '" ';
    e = c.activity_context_guid ? e + ('external_object_id="' + c.activity_context_guid + '" info_type="tutor_message.dtd">') : e + 'external_object_id="" info_type="tutor_message.dtd">';
    return e + b + "</log_action>";
  };
  this.createLogSessionStart = function() {
    a.ctatdebug("createLogSessionStart ()");
    var b = new Date;
    a.ctatdebug("Date: " + b);
    var d = '<log_session_start timezone="' + flashVars.getTimeZone() + '" ', c = flashVars.getRawFlashVars(), d = d + ('date_time="' + this.formatTimeStampOLI(b) + '" '), d = d + ('auth_token="' + c.auth_token + '" '), d = d + ('session_id="' + c.session_id + '" '), d = d + ('user_guid="' + c.user_guid + '" ');
    return d + 'class_id="" treatment_id="" assignment_id="" info_type="tutor_message.dtd"/>';
  };
  this.formatTimeStamp = function(b) {
    a.ctatdebug("formatTimeStamp (" + b + ")");
    var d = "", c = b.getUTCFullYear(), d = d + (c + "-"), c = b.getUTCMonth();
    c++;
    d += (10 > c ? "0" + c : c) + "-";
    c = b.getUTCDate();
    d += (10 > c ? "0" + c : c) + " ";
    c = b.getUTCHours();
    d += (10 > c ? "0" + c : c) + ":";
    c = b.getUTCMinutes();
    d += (10 > c ? "0" + c : c) + ":";
    c = b.getUTCSeconds();
    d += 10 > c ? "0" + c : c;
    b = b.getUTCMilliseconds();
    return d = d + "." + b;
  };
  this.formatTimeStampOLI = function(b) {
    a.ctatdebug("formatTimeStampOLI (" + b + ")");
    var d = "", c = b.getUTCFullYear(), d = d + (c + "/"), c = b.getUTCMonth();
    c++;
    d += (10 > c ? "0" + c : c) + "/";
    c = b.getUTCDate();
    d += (10 > c ? "0" + c : c) + " ";
    c = b.getUTCHours();
    d += (10 > c ? "0" + c : c) + ":";
    c = b.getUTCMinutes();
    d += (10 > c ? "0" + c : c) + ":";
    c = b.getUTCSeconds();
    d += 10 > c ? "0" + c : c;
    b = b.getUTCMilliseconds();
    return d = d + "." + b;
  };
  this.resetCustomFields = function() {
    a.ctatdebug("resetCustomFields ()");
    b = [];
    d = [];
  };
  this.createCustomFields = function(b, d) {
    a.ctatdebug("createCustomFields ()");
    if (null == b || null == d) {
      return a.ctatdebug("No custom fields provided"), "";
    }
    a.ctatdebug("Processing " + b.length + " custom fields ...");
    for (var c = "", e = 0;e < b.length;e++) {
      a.ctatdebug("Adding custom field: [" + b[e] + "],[" + d[e] + "]"), c += "<custom_field>", c += "<name>" + b[e] + "</name>", c += "<value>" + d[e] + "</value>", c += "</custom_field>";
    }
    return c;
  };
  this.addCustomFields = function(f, g) {
    a.ctatdebug("addCustomFields ()");
    if (void 0 != f) {
      for (var c = 0;c < f.length;c++) {
        b.push(f[c]), d.push(g[c]);
      }
    }
  };
  this.addCustomField = function(f, g) {
    a.ctatdebug("addCustomfield (" + f + "," + g + ")");
    b.push(f);
    d.push(g);
  };
  this.getCustomFieldNames = function() {
    return b;
  };
  this.getCustomFieldValues = function() {
    return d;
  };
};
CTATLogMessageBuilder.prototype = Object.create(CTATBase.prototype);
CTATLogMessageBuilder.prototype.constructor = CTATLogMessageBuilder;
var CTATNameTranslator = function() {
  CTATBase.call(this, "CTATNameTranslator", "translator");
  var a = !1, b = this;
  this.setPassthrough = function(b) {
    a = CTATGlobalFunctions.toBoolean(b);
  };
  this.getPassthrough = function() {
    return a;
  };
  this.manufactorJSON = function(a, f) {
    b.ctatdebug("manufactorJSON (" + a + "," + f + ")");
    var g = a.split(":");
    if (1 == g.length) {
      return b.ctatdebug("No range in aRange, returning basic JSON ..."), "";
    }
    var c = this.getA1Row(g[0]), e = this.getA1Col(g[0]), h = this.getA1Row(g[1]), k = this.getA1Col(g[1]);
    b.ctatdebug("Manufacturing json from: [" + c + "," + e + "] to: [" + h + "," + k + "]");
    g = "[";
    c = parseInt(h) - parseInt(c);
    e = parseInt(k) - parseInt(e);
    c++;
    e++;
    b.ctatdebug("X range: " + c + ", Y range: " + e);
    for (h = 0;h < c;h++) {
      0 < h && (g += ",");
      g += "[";
      for (k = 0;k < e;k++) {
        0 < k && (g += ","), g += '"', g += f, g += '"';
      }
      g += "]";
    }
    return g + "]";
  };
  this.translateFromCTAT = function(d, f) {
    if (!0 === a) {
      return d;
    }
    var g = d.toLowerCase();
    b.ctatdebug("translateFromCTAT (" + g + ")");
    var c = 0, e = 0, e = "";
    if (-1 != g.indexOf(".r")) {
      var h = g.split("."), c = h[1].split("r");
      0 >= c.length && (c = h[1].split("c"));
      if (0 >= c.length) {
        b.ctatdebug("Info: incoming name does not need translation");
      } else {
        return e = c[1], c = c[0].substr(1), b.ctatdebug("Original row (1st format): " + c + " original col: " + e), e = !0 === f ? colName(e, !1) + c : h[0] + "." + colName(e, !1) + c, b.ctatdebug("Translated: " + e), e;
      }
    } else {
      if (0 === g.indexOf("r")) {
        var h = g.indexOf("c"), k = parseInt(g.substr(1, h - 1)), g = parseInt(g.substr(h + 1)), c = k + 1, e = g;
        b.ctatdebug("Original row (2nd format) (columnindex: " + h + "): " + k + " -> " + c + ", original col: " + g + " -> " + e);
        e = colName(e, !1) + c;
        b.ctatdebug("Translated: " + e);
        return e;
      }
      b.ctatdebug("Info: incoming name does not need translation");
    }
    return g;
  };
  this.translateToCTAT = function(b) {
    if (!0 === a) {
      return b;
    }
    var f = this.letterToColumn(b.substr(0, 1)) - 1;
    return "R" + (parseInt(b.substr(1)) - 1) + "C" + f;
  };
  this.columnToLetter = function(a) {
    for (var b, g = "";0 < a;) {
      b = (a - 1) % 26, g = String.fromCharCode(b + 65) + g, a = (a - b - 1) / 26;
    }
    return g;
  };
  this.letterToColumn = function(a) {
    for (var b = 0, g = a.length, c = 0;c < g;c++) {
      b += (a.charCodeAt(c) - 64) * Math.pow(26, g - c - 1);
    }
    return b;
  };
  this.getA1Row = function(a) {
    return parseInt(a.substr(1)) - 1;
  };
  this.getA1Col = function(a) {
    return this.letterToColumn(a.substr(0, 1)) - 1;
  };
};
CTATNameTranslator.prototype = Object.create(CTATBase.prototype);
CTATNameTranslator.prototype.constructor = CTATNameTranslator;
var CTATFlashVars = function() {
  CTATConfiguration.call(this, "CTATFlashVars", "flashvars");
};
CTATFlashVars.prototype = Object.create(CTATConfiguration.prototype);
CTATFlashVars.prototype.constructor = CTATFlashVars;
var CTATCustomLogElementObject = function() {
  this.reset = function() {
  };
  this.addCustomLogElement = function(a, b) {
    customElementsNames.push(a);
    customElementsTypes.push(a);
  };
  this.getCustomElementNames = function() {
    return customElementsNames;
  };
  this.getCustomElementTypes = function() {
    return customElementsTypes;
  };
};
var loggingDisabled = !1, CTATLoggingLibrary = function(a) {
  CTATBase.call(this, "CTATLoggingLibrary", "logginglibrary");
  var b = this, d = !0, f = !1, g = !1, c = [], e = "undefined", h = "undefined", k = "undefined", l = "undefined", q = "undefined", p = "undefined", m = "undefined", w = "undefined", t = "UnassignedDataset", z = "UnassignedLevelName", y = "UnassignedLevelType", w = (new CTATGuid).guid();
  void 0 != a && null != a ? (f = a, 0 == f && (commLogMessageBuilder = new CTATLogMessageBuilder)) : commLogMessageBuilder = new CTATLogMessageBuilder;
  var r = new CTATCommLibrary;
  r.setName("commLoggingLibrary");
  r.setUseCommSettings(!1);
  r.assignHandler(this);
  this.generateSession = function() {
    var a = new CTATGuid;
    c.session_id = "ctat_session_" + a.guid();
    return c.session_id;
  };
  this.setLogClassName = function(a) {
    e = a;
  };
  this.setDatasetName = function(a) {
    t = a;
  };
  this.setDatasetLevelName = function(a) {
    z = a;
  };
  this.setDatasetLevelType = function(a) {
    y = a;
  };
  this.setSchool = function(a) {
    h = a;
  };
  this.setPeriod = function(a) {
    k = a;
  };
  this.setDescription = function(a) {
    l = a;
  };
  this.setInstructor = function(a) {
    q = a;
  };
  this.setProblemName = function(a) {
    p = a;
  };
  this.setProblemContext = function(a) {
    m = a;
  };
  this.setUserID = function(a) {
    w = a;
  };
  this.getLoggingCommLibrary = function() {
    return r;
  };
  this.setUseSessionLog = function(a) {
    d = a;
  };
  this.setLoggingURL = function(a) {
    b.getLoggingCommLibrary().setFixedURL(a);
  };
  this.setupExternalLibraryUsage = function() {
    b.ctatdebug("setupExternalLibraryUsage ()");
    c.class_name = e;
    c.school_name = h;
    c.period_name = k;
    c.class_description = l;
    c.instructor_name = q;
    c.dataset_name = t;
    c.problem_name = p;
    c.problem_context = m;
    c.auth_token = "";
    c.user_guid = w;
    var a = new CTATGuid;
    c.session_id = "ctat_session_" + a.guid();
    c.source_id = "tutor";
    c.dataset_level_name1 = z;
    c.dataset_level_type1 = y;
    flashVars = new CTATFlashVars;
    flashVars.assignRawFlashVars(c);
  };
  this.initCheck = function() {
    b.ctatdebug("initCheck ()");
    0 == f && 0 == g && (b.setupExternalLibraryUsage(), g = !0);
  };
  this.sendMessage = function(a) {
    b.ctatdebug("sendMessage ()");
    b.ctatdebug("Raw log message to send: " + a);
    this.sendMessageInternal(a);
  };
  this.sendMessageInternal = function(a) {
    b.ctatdebug("sendMessageInternal ()");
    if (!0 === loggingDisabled) {
      b.ctatdebug("Warning: loggingDisabled==true");
    } else {
      if (1 == f) {
        var c = flashVars.getRawFlashVars();
        if (null != c) {
          if ("ClientToService" != c.Logging && "ClientToLogServer" != c.Logging) {
            b.ctatdebug("Logging is turned off, as per: " + c.Logging);
            return;
          }
          "ClientToService" != c.Logging || "http" != c.tutoring_service_communication && "https" != c.tutoring_service_communication || (b.setLoggingURL(c.remoteSocketURL + ":" + c.remoteSocketPort), b.ctatdebug("Reconfigured the logging url to be: " + c.remoteSocketURL + ":" + c.remoteSocketPort));
        }
      }
      b.ctatdebug("Pre encoded log message: " + a);
      0 > a.indexOf("<log_session_start") && (a = commLogMessageBuilder.wrapForOLI('<?xml version="1.0" encoding="UTF-8"?><tutor_related_message_sequence version_number="4">' + a + "</tutor_related_message_sequence>"));
      b.ctatdebug("Encoded log message: " + a);
      r.sendXMLNoBundle(a);
    }
  };
  this.startProblem = function() {
    b.ctatdebug("startProblem ()");
    b.initCheck();
    b.logSessionStart();
    b.sendMessage(commLogMessageBuilder.createContextMessage(!0));
  };
  this.logSessionStart = function() {
    b.ctatdebug("logSessionStart ()");
    b.initCheck();
    var a = flashVars.getRawFlashVars();
    void 0 != a.SessionLog && ("true" == a.SessionLog ? (b.ctatdebug("Turning SessionLog on ..."), d = !0) : (b.ctatdebug("Turning SessionLog off ..."), d = !1));
    !0 === d && this.sendMessage(commLogMessageBuilder.createLogSessionStart());
  };
  this.logSemanticEvent = function(a, c, e, d, f, g) {
    b.ctatdebug("logSemanticEvent ()");
    b.initCheck();
    var h = new Date;
    commLogMessageBuilder.resetCustomFields();
    commLogMessageBuilder.addCustomFields(f, g);
    commLogMessageBuilder.addCustomField("tool_event_time", commLogMessageBuilder.formatTimeStamp(h) + " UTC");
    a = commLogMessageBuilder.createSemanticEventToolMessage(c, a, e, d, !0);
    this.sendMessage(a);
  };
  this.logTutorResponse = function(a, c, e, d, f, g, h, k, l) {
    b.ctatdebug("logTutorResponse ()");
    b.initCheck();
    var q = new Date;
    commLogMessageBuilder.resetCustomFields();
    commLogMessageBuilder.addCustomFields(k, l);
    commLogMessageBuilder.addCustomField("tutor_event_time", commLogMessageBuilder.formatTimeStamp(q) + " UTC");
    b.ctatdebug("Formatting feedback ...");
    k = "";
    void 0 != g && null != g ? k = "<![CDATA[" + CTATGlobals.languageManager.filterString(g) + "]]\x3e" : (b.ctatdebug("No feedback provided, using empty string"), k = "");
    b.ctatdebug("Creating tutor message ...");
    a = commLogMessageBuilder.createTutorMessage(c, a, e, f, k, d, h, !0);
    this.sendMessage(a);
  };
  this.processMessage = function(a) {
    b.ctatdebug("processMessage ()");
    b.ctatdebug("Response from log server: " + a);
  };
  this.start = function() {
    b.ctatdebug("start ()");
    var a = b.generateSession();
    b.startProblem();
    return a;
  };
  this.endSession = function() {
    this.generateSession();
  };
};
CTATLoggingLibrary.prototype = Object.create(CTATBase.prototype);
CTATLoggingLibrary.prototype.constructor = CTATLoggingLibrary;
var CTATMessageHandler = function() {
  CTATBase.call(this, "CTATMessageHandler", "messagehandler");
  var a = null, b = this, d = [], f = null, g = 0, f = CTATConfig.parserType_is_XML() ? new CTATXML : new CTATJSON;
  this.assignHandler = function(c) {
    b.ctatdebug("assignHandler ()");
    a = c;
  };
  this.reset = function() {
    b.ctatdebug("reset ()");
    d = [];
  };
  this.getInStartState = function() {
    return inStartState;
  };
  var c = !1;
  this.receiveFromTutor = function(a) {
    this.processMessage(a);
  };
  this.processMessage = function(a) {
    b.ctatdebug("Incoming message: " + a);
    b.ctatdebug("processMessage (" + lastMessage + ")");
    if (!0 !== c) {
      if (CTATConfig.parserType_is_JSON() && -1 != a.indexOf("<?xml")) {
        alert("Error: CTAT is configured to parse JSON but it received an XML message, disabling comm capabilities ..."), c = !0;
      } else {
        if (CTATConfig.parserType_is_XML() && 0 === a.indexOf("{")) {
          alert("Error: CTAT is configured to parse XML but it received a JSON message, disabling comm capabilities ..."), c = !0;
        } else {
          var d = null;
          b.ctatdebug("Attempting parse ...");
          d = f.parse(a);
          null === d ? b.ctatdebug("Error parsing message: " + a) : this.parseElement(d);
        }
      }
    }
  };
  this.parseElement = function(a) {
    var c = f.getElementName(a);
    b.ctatdebug("parseElement (" + c + ")");
    "CTATResponseMessages" != c && "StartStateMessages" != c && "MessageBundle" != c || this.processMessageBundle(a);
    "message" == c && this.processSingleMessage(a);
  };
  this.processMessageBundle = function(a) {
    var c = f.getElementName(a);
    b.ctatdebug("processMessageBundle (" + c + ")");
    a = f.getElementChildren(a);
    if (null === a) {
      b.ctatdebug("Error parsing bundle");
    } else {
      for (ctatdebug("Processing " + a.length + " objects in bundle"), c = 0;c < a.length;c++) {
        this.parseElement(a[c]);
      }
    }
  };
  this.processSingleMessage = function(c) {
    b.ctatdebug("processSingleMessage (" + f.getElementName(c) + ")");
    var h = new CTATMessage(c);
    c = f.getElementChildren(c);
    b.ctatdebug("Generated CTATMessage, now doing regular processing ...");
    for (var k = 0;k < c.length;k++) {
      var l = c[k];
      if ("properties" == f.getElementName(l)) {
        b.ctatdebug("Parsing properties ...");
        for (var q = f.getElementChildren(l), p = 0;p < q.length;p++) {
          var m = q[p];
          if ("MessageType" == f.getElementName(m)) {
            m = f.getNodeTextValue(m);
            b.ctatdebug("MessageType: " + m);
            "StateGraph" == m && (console.log("Setting inStartState to true"), inStartState = !0, this.processStateGraph(l), commShell.propagateShellEvent("StateGraph", h));
            "StartProblem" == m && (b.ctatdebug("Setting inStartState to true"), inStartState = !0, this.processStartProblem(q), commShell.propagateShellEvent("StartProblem", h));
            "InterfaceIdentification" == m && (this.processInterfaceIdentification(q), commShell.propagateShellEvent("InterfaceIdentification", h));
            "InterfaceDescription" == m && (this.processInterfaceDescription(q), commShell.propagateShellEvent("InterfaceDescription", h));
            "GetAllInterfaceDescriptions" == m && (commLibrary.sendXML((new CTATTutoringServiceMessageBuilder).createInterfaceDescriptionMessage()), commShell.propagateShellEvent("GetAllInterfaceDescriptions", h));
            "SendWidgetLock" == m && (b.ctatdebug("Found: SendWidgetLock"), commShell.propagateShellEvent("SendWidgetLock", h));
            if ("StartStateEnd" == m) {
              b.ctatdebug("Found: StartStateEnd");
              CTATShellTools.listComponents();
              null !== a ? a.processStartState() : this.ctatdebug("Error: no message handler object available to process start state");
              try {
                b.processStartStateActions();
              } catch (E) {
                b.ctatdebug("Caught in the act: " + E.message);
              }
              inStartState = !1;
              commShell.propagateShellEvent("StartStateEnd", h);
            }
            "CorrectAction" == m && (b.ctatdebug("Found: CorrectAction"), !0 === this.getInStartState() ? d.push(h) : a.processCorrectAction(h), commShell.propagateShellEvent("CorrectAction", h));
            "InCorrectAction" == m && (b.ctatdebug("Found: InCorrectAction"), !0 === inStartState ? d.push(h) : (b.ctatdebug("Handing incorrect message to messagehandler ..."), a.processInCorrectAction(h)), commShell.propagateShellEvent("InCorrectAction", h));
            "HighlightMsg" == m && (b.ctatdebug("Found: HighlightMsg"), a.processHighlightMsg(h), commShell.propagateShellEvent("HighlightMsg", h));
            "UnHighlightMsg" == m && (b.ctatdebug("Found: UnHighlightMsg"), a.processUnHighlightMsg(h), commShell.propagateShellEvent("UnHighlightMsg", h));
            if ("AssociatedRules" == m) {
              b.ctatdebug("Found: AssociatedRules (" + q.length + ")");
              for (var w = "", t = "", z = 0;z < q.length;z++) {
                var y = q[z];
                "TutorAdvice" == f.getElementName(y) && (w = f.getNodeTextValue(y));
                "Actor" == f.getElementName(y) && f.getNodeTextValue(y);
                "Indicator" == f.getElementName(y) && (t = f.getNodeTextValue(y));
                "StepID" == f.getElementName(y) && f.getNodeTextValue(y);
                "LogAsResult" == f.getElementName(y) && f.getNodeTextValue(y);
                "tool_selection" == f.getElementName(y) && f.getNodeTextValue(y);
                "Skills" == f.getElementName(y) && (b.ctatdebug("Processing skills ..."), null === skillSet && (b.ctatdebug("Interesting, there isn't a skillSet object yet. Creating ..."), skillSet = new CTATSkillSet), skillSet.parseByValue(y));
              }
              a.processAssociatedRules(h, t, w);
              commShell.propagateShellEvent("AssociatedRules", h);
            }
            "BuggyMessage" == m && (b.ctatdebug("Found: BuggyMessage"), a.processBuggyMessage(h), commShell.propagateShellEvent("BuggyMessage", h));
            "SuccessMessage" == m && (b.ctatdebug("Found: SuccessMessage"), a.processSuccessMessage(h), commShell.propagateShellEvent("SuccessMessage", h));
            "InterfaceAction" == m && (b.ctatdebug("Found: InterfaceAction"), !0 === inStartState ? (b.ctatdebug("inStartState==true => storing for later playback ..."), d.push(h)) : a.processInterfaceAction(h), commShell.propagateShellEvent("InterfaceAction", h));
            "InterfaceIdentification" == m && (b.ctatdebug("Found: InterfaceIdentification"), commShell.propagateShellEvent("InterfaceIdentification", h));
            "AuthorModeChange" == m && (b.ctatdebug("Found: AuthorModeChange"), a.globalReset(), commShell.propagateShellEvent("AuthorModeChange", h));
            "ResetAction" == m && (b.ctatdebug("Found: ResetAction"), a.globalReset(), commShell.propagateShellEvent("ResetAction", h));
            if ("ShowHintsMessage" == m) {
              b.ctatdebug("Found: ShowHintsMessage");
              w = !1;
              t = [];
              for (z = 0;z < q.length;z++) {
                if (y = q[z], "HintsMessage" == f.getElementName(y)) {
                  for (var y = f.getElementChildren(y), r = 0;r < y.length;r++) {
                    var A = y[r];
                    "value" == f.getElementName(A) && (t.push(f.getNodeTextValue(A)), w = !0);
                  }
                }
              }
              !0 === w ? a.processHintResponse(h, t) : b.ctatdebug("Error: incomplete hint message received");
              commShell.propagateShellEvent("ShowHintsMessage", h);
            }
            "ConfirmDone" == m && (b.ctatdebug("Found: ConfirmDone"), a.processConfirmDone(h), commShell.propagateShellEvent("ConfirmDone", h));
            "VersionInfo" == m && (b.ctatdebug("Found: VersionInfo"), a.processVersionInfo(q), commShell.propagateShellEvent("ConfirmDone", h));
            "TutoringServiceAlert" == m && (b.ctatdebug("Found: TutoringServiceAlert"), a.processTutoringServiceAlert(q), commShell.propagateShellEvent("TutoringServiceAlert", h));
            "TutoringServiceError" == m && (b.ctatdebug("Found: TutoringServiceError"), a.processTutoringServiceError(q), commShell.propagateShellEvent("TutoringServiceError", h));
            "ProblemSummaryResponse" == m && (b.ctatdebug("Found: ProblemSummaryResponse"), a.processProblemSummaryResponse(h), commShell.propagateShellEvent("ProblemSummaryResponse", h));
            "ProblemRestoreEnd" == m && (b.ctatdebug("Found: ProblemRestoreEnd"), a.processProblemRestoreEnd(h), commShell.propagateShellEvent("ProblemRestoreEnd", h));
            "InterfaceReboot" == m && (m = "AUTHORING" == CTATTarget ? location.href : null, b.ctatdebug("Found: InterfaceReboot -- href " + m), m && 1 < ++g && location.replace(m));
          }
        }
      }
    }
  };
  this.processStateGraph = function(c) {
    b.ctatdebug("processStateGraph ()");
    if (void 0 === c || null === c) {
      b.ctatdebug("Error: state graph property list is undefined");
    } else {
      if (b.ctatdebug("Processing node: " + c.nodeName), null === f.getElementChildren(c)) {
        b.ctatdebug("Error: state graph property list is undefined");
      } else {
        c = f.getElementChildren(c);
        for (var d = 0;d < c.length;d++) {
          var g = c[d];
          b.ctatdebug("State graph attribute: " + f.getElementName(g));
          "caseInsensitive" == f.getElementName(g) && (caseInsensitive = "false" == f.getNodeTextValue(g) ? !1 : !0);
          "unordered" == f.getElementName(g) && (unordered = "false" == f.getNodeTextValue(g) ? !1 : !0);
          "lockWidget" == f.getElementName(g) && (lockWidget = "false" == f.getNodeTextValue(g) ? !1 : !0);
          "suppressStudentFeedback" == f.getElementName(g) && ("false" == f.getNodeTextValue(g) ? CTATGlobals.suppressStudentFeedback = !1 : CTATGlobals.suppressStudentFeedback = !0);
          "highlightRightSelection" == f.getElementName(g) && (highlightRightSelection = "false" == f.getNodeTextValue(g) ? !1 : !0);
          "confirmDone" == f.getElementName(g) && (b.ctatdebug("Confirm done: " + f.getNodeTextValue(g)), "true" == f.getNodeTextValue(g) ? CTATGlobals.confirmDone = !0 : CTATGlobals.confirmDone = !1);
          "Skills" == f.getElementName(g) && (null === skillSet && (skillSet = new CTATSkillSet), skillSet.parseByValue(g), a.updateSkillWindow());
        }
      }
    }
  };
  this.processStartProblem = function(c) {
    b.ctatdebug("processStartProblem ()");
    a.processStartProblem();
  };
  this.processInterfaceIdentification = function(a) {
  };
  this.processInterfaceDescription = function(a) {
    b.ctatdebug("processInterfaceDescription (" + a.length + ")");
    for (var c = "Unknown", d = "Unknown", g = null, q = 0;q < a.length;q++) {
      var p = a[q];
      b.ctatdebug("Inspecting element: " + f.getElementName(p));
      "WidgetType" == f.getElementName(p) && (b.ctatdebug("Widget type: " + f.getNodeTextValue(p)), c = f.getNodeTextValue(p));
      "CommName" == f.getElementName(p) && (b.ctatdebug("Instance name: " + f.getNodeTextValue(p)), d = f.getNodeTextValue(p));
      if ("serialized" == f.getElementName(p)) {
        b.ctatdebug("Prepareing to de-serialize component ...");
        for (var m = f.getElementChildren(p), w = 0;w < m.length;w++) {
          var t = m[w];
          -1 != f.getElementName(t).indexOf("CTAT") && (g = t);
        }
      }
      "interface" == f.getElementName(p) && (b.ctatdebug("Storing interface for post start-state reconstruction ..."), CTATGlobals.interfaceElement = p);
      "script" == f.getElementName(p) && (b.ctatdebug("Storing and loading main javascript code as defined by the BRD ..."), scriptElement = f.getNodeTextValue(p));
    }
    null !== g ? this.deserializeComponent(c, d, g) : b.ctatdebug("Error: unable to find CTAT serialization point of attachement");
    b.ctatdebug("processInterfaceDescription () done");
  };
  this.deserializeComponent = function(a, c, d) {
    b.ctatdebug("deserializeComponent (" + a + "," + c + ")");
    if (null === f.getElementAttr(d, "x")) {
      b.ctatdebug("Warning: this component does not have x,y information. Probably an older component");
    } else {
      var g = f.getElementAttr(d, "x"), q = f.getElementAttr(d, "y"), p = f.getElementAttr(d, "width"), m = f.getElementAttr(d, "height"), w = f.getElementAttr(d, "tabIndex"), t = f.getElementAttr(d, "zIndex");
      null === w && (w = -1);
      null === t && (t = 0);
      var z = new CTATComponentDescription;
      z.type = a;
      z.name = c;
      z.x = Math.floor(g);
      z.y = Math.floor(q);
      z.tabIndex = w;
      z.zIndex = t;
      z.width = Math.floor(p);
      z.height = Math.floor(m);
      CTATShellTools.registerComponentDescription(z);
      d = f.getElementChildren(d);
      for (g = 0;g < d.length;g++) {
        q = d[g];
        f.getElementName(q);
        if ("Parameters" == f.getElementName(q)) {
          for (this.ctatdebug("Processing component parameters ..."), p = f.getElementChildren(q)[0], p = f.getElementChildren(p), m = 0;m < p.length;m++) {
            var y = p[m];
            if ("CTATComponentParameter" == f.getElementName(y)) {
              this.ctatdebug("Processing parameter property (CTATComponentParameter) ...");
              for (var t = w = void 0, y = f.getElementChildren(y), r = 0;r < y.length;r++) {
                var A = y[r];
                "name" == f.getElementName(A) && (this.ctatdebug("Found parameter name: " + f.getNodeTextValue(A)), w = f.getNodeTextValue(A));
                "value" == f.getElementName(A) && (this.ctatdebug("Found parameter value: " + f.getNodeTextValue(A)), t = f.getNodeTextValue(A).trim());
              }
              this.ctatdebug("Parameter name: " + w + ", value: " + t);
              void 0 !== w && (z.params[w] = t, "group" == w && (z.groupName = t));
            }
          }
        }
        if ("Styles" == f.getElementName(q)) {
          for (this.ctatdebug("Processing component styles ..."), q = f.getElementChildren(q)[0], q = f.getElementChildren(q), p = 0;p < q.length;p++) {
            if (t = q[p], "CTATStyleProperty" == f.getElementName(t)) {
              this.ctatdebug("Processing style property (CTATStyleProperty) ...");
              w = m = "";
              t = f.getElementChildren(t);
              for (y = 0;y < t.length;y++) {
                r = t[y], "name" == f.getElementName(r) && (m = f.getNodeTextValue(r)), "value" == f.getElementName(r) && (w = f.getNodeTextValue(r).trim());
              }
              this.ctatdebug("Style (name: " + m + ", value: " + w + ")");
              "" !== m && (z.styles[m] = w);
            }
          }
        }
      }
      b.ctatdebug("deserializeComponent (" + a + "," + c + ") done");
    }
  };
  this.processStartStateActions = function() {
    b.ctatdebug("processStartStateActions (" + d.length + ")");
    inProcessStartStateActions = !0;
    if (0 == d.length) {
      b.ctatdebug("No start state messages, bump");
    } else {
      if (0 < startStateHandlers.length) {
        for (var c = 0;c < startStateHandlers.length;c++) {
          startStateHandlers[c].processStartStateActions(d);
        }
      } else {
        for (c = 0;c < d.length;c++) {
          var f = d[c];
          b.ctatdebug("Processing startstate message type: " + f.getMessageType() + "(" + inProcessStartStateActions + ")");
          "InterfaceAction" == f.getMessageType() && a.processInterfaceAction(f);
          "CorrectAction" == f.getMessageType() && a.processCorrectAction(f);
          "InCorrectAction" == f.getMessageType() && a.processInCorrectAction(f);
          this.sleep(1E3);
        }
        if ("" != scriptElement) {
          try {
            eval(scriptElement);
          } catch (g) {
            alert("Error executing script from BRD: " + g.message);
          }
        }
      }
    }
    inProcessStartStateActions = !1;
  };
  this.sleep = function(a) {
    b.ctatdebug("sleep (" + a + ")");
  };
};
CTATMessageHandler.prototype = Object.create(CTATBase.prototype);
CTATMessageHandler.prototype.constructor = CTATMessageHandler;
var CTATTutorMessageBuilder = function() {
  CTATBase.call(this, "CTATTutorMessageBuilder", "__undefined__");
};
CTATTutorMessageBuilder.isHint = function(a) {
  return null === a || "undefined" === typeof a ? !1 : 0 === a.toString().toLowerCase().indexOf(CTATTutorMessageBuilder.HINT.toLowerCase());
};
CTATTutorMessageBuilder.isCorrect = function(a) {
  if (null === a || "undefined" === typeof a) {
    return !1;
  }
  a = a.toString().toLowerCase();
  return 0 === a.indexOf(CTATTutorMessageBuilder.CORRECT.toLowerCase()) ? !0 : 0 === a.indexOf(CTATExampleTracerLink.SUCCESS.toLowerCase());
};
CTATTutorMessageBuilder.prototype = Object.create(CTATBase.prototype);
CTATTutorMessageBuilder.prototype.createInCorrectActionMessage = function(a, b) {
  this.ctatdebug("createInCorrectActionMessage ()");
  var d;
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>InCorrectAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>");
  this.ctatdebug("In CTATTutorMessageBuilder " + b);
  d += b.toXMLString(!1);
  return d + "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createCorrectActionMessage = function(a, b) {
  this.ctatdebug("createCorrectActionMessage ()");
  var d;
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>CorrectAction</MessageType>" + ("<transaction_id>" + a + "</transaction_id>") + b.toXMLString(!1);
  return d += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createAssociatedRulesMessageForHint = function(a, b, d, f, g, c) {
  b = "<message><verb>SendNoteProperty</verb><properties><MessageType>AssociatedRules</MessageType><Indicator>Hint</Indicator>" + b.toXMLString();
  b += "<TutorAdvice>";
  for (var e = 0;e < a.length;e++) {
    b += "<value><![CDATA[" + a[e] + "]]\x3e</value>";
  }
  b += "</TutorAdvice><TotalHintsAvailable>" + a.length + "</TotalHintsAvailable><CurrentHintNumber>1</CurrentHintNumber>";
  b += "<Actor>" + d + "</Actor>";
  b += this.fmtSkillBarVector(f);
  b += "<skillBarDelimiter><![CDATA[`]]\x3e</skillBarDelimiter>";
  b += "<StepID>" + g + "</StepID>";
  b += "<transaction_id>" + c + "</transaction_id>";
  b += "<LogAsResult>true</LogAsResult>";
  return b += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createAssociatedRulesMessageForAction = function(a, b, d, f, g, c, e, h) {
  a = "<message><verb>SendNoteProperty</verb><properties><MessageType>AssociatedRules</MessageType>" + ("<Indicator>" + (CTATTutorMessageBuilder.isCorrect(a) ? "Correct" : "InCorrect") + "</Indicator>");
  a += b.toXMLString();
  b = f.toXMLString().replace("<Selection>", "<StudentSelection>").replace("<Action>", "<StudentAction>").replace("<Input>", "<StudentInput>");
  b = b.replace("</Selection>", "</StudentSelection>").replace("</Action>", "</StudentAction>").replace("</Input>", "</StudentInput>");
  a = a + b + ("<Actor>" + d + "</Actor>");
  a += this.fmtSkillBarVector(g);
  a += "<skillBarDelimiter><![CDATA[`]]\x3e</skillBarDelimiter>";
  a += "<StepID>" + c + "</StepID>";
  a += "<transaction_id>" + e + "</transaction_id>";
  h && (a += "<TutorAdvice><![CDATA[" + h + "]]\x3e</TutorAdvice>");
  a += "<LogAsResult>true</LogAsResult>";
  a += "<end_of_transaction>" + (h ? !1 : !0) + "</end_of_transaction>";
  return a += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.isDoneStep = function(a, b) {
  b[0] = !1;
  var d = a.getIndicator();
  if (!d) {
    return !1;
  }
  var f = a.getStudentSelection();
  f || (f = a.getProperty("tool_selection"));
  b[0] = CTATTutorMessageBuilder.isCorrect(indicator);
  var g = "done" == f;
  this.ctatdebug("isDoneStep() indicatorObj " + d + ", selectionObj " + f + ", correct[0] " + b[0] + ", result " + g);
  return g;
};
CTATTutorMessageBuilder.prototype.createHintMessage = function(a, b, d, f) {
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>ShowHintsMessage</MessageType><HintsMessage>";
  for (var g = 0;g < a.length;g++) {
    d += "<value><![CDATA[" + a[g] + "]]\x3e</value>";
  }
  d = d + "</HintsMessage>" + b.toXMLString();
  d += "<transaction_id>" + f + "</transaction_id>";
  return d += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createErrorMessage = function(a, b) {
  var d;
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>TutoringServiceError</MessageType><ErrorType>" + (a ? a : "Unknown Error") + "</ErrorType><Details>";
  d += b ? b : "";
  return d += "</Details></properties></message>";
};
CTATTutorMessageBuilder.prototype.createSuccessMessage = function(a, b) {
  var d;
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>SuccessMessage</MessageType>" + ("<SuccessMsg><![CDATA[" + b + "]]\x3e</SuccessMsg>") + ("<transaction_id>" + a + "</transaction_id>");
  d += "<end_of_transaction>true</end_of_transaction>";
  return d += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createBuggyMessage = function(a, b) {
  var d;
  d = "<message><verb>SendNoteProperty</verb><properties><MessageType>BuggyMessage</MessageType>" + ("<BuggyMsg><![CDATA[" + b + "]]\x3e</BuggyMsg>") + ("<transaction_id>" + a + "</transaction_id>");
  d += "<end_of_transaction>true</end_of_transaction>";
  return d += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createLockWidgetMsg = function(a) {
  return a = "<message><verb>SendNoteProperty</verb><properties><MessageType>SendWidgetLock</MessageType>" + ("<WidgetLockFlag>" + a + "</WidgetLockFlag>") + "</properties></message>";
};
CTATTutorMessageBuilder.prototype.createMessage = function(a, b) {
  var d = "<message><verb>SendNoteProperty</verb><properties><MessageType>" + a + "</MessageType>";
  if (b) {
    for (var f in b) {
      d += "<" + f + ">" + b[f] + "</" + f + ">";
    }
  }
  d += "</properties></message>";
  this.ctatdebug("CTATTutorMessageBuilder.createMessage(" + a + ", " + b + ") returns " + d);
  return d;
};
CTATTutorMessageBuilder.prototype.createStateGraphMessage = function(a, b, d, f, g, c, e) {
  a = "<message><verb>SendNoteProperty</verb><properties><MessageType>StateGraph</MessageType>" + ("<caseInsensitive>" + a + "</caseInsensitive>") + ("<unordered>" + b + "</unordered>");
  a += "<lockWidget>" + d + "</lockWidget>";
  a += "<suppressStudentFeedback>" + f + "</suppressStudentFeedback>";
  a += "<highlightRightSelection>" + g + "</highlightRightSelection>";
  a += "<confirmDone>" + c + "</confirmDone>";
  a += "<skillBarDelimiter><![CDATA[`]]\x3e</skillBarDelimiter>";
  a += this.fmtSkillBarVector(e);
  return a += "</properties></message>";
};
CTATTutorMessageBuilder.prototype.fmtSkillBarVector = function(a) {
  var b = "";
  if (void 0 !== a && null !== a && 0 < a.length) {
    for (var b = b + "<Skills>", d = 0;d < a.length;d++) {
      b += "<value><![CDATA[" + a[d] + "]]\x3e</value>";
    }
    b += "</Skills>";
  }
  return b;
};
CTATTutorMessageBuilder.prototype.createHighlightWidgetMessage = function(a, b, d, f) {
  a = "<message><verb>SendNoteProperty</verb><properties><MessageType>HighlightMsg</MessageType>" + ("<HighlightMsgText>" + d + "</HighlightMsgText>") + ("<Selection><value>" + a + "</value></Selection>");
  a += "<Action><value>" + b + "</value></Action>";
  a += "<transaction_id>" + f + "</transaction_id>";
  a += "<end_of_transaction>true</end_of_transaction>";
  return a += "</properties></message>";
};
Object.defineProperty(CTATTutorMessageBuilder, "TRIGGER", {enumerable:!1, configurable:!1, writable:!1, value:"trigger"});
Object.defineProperty(CTATTutorMessageBuilder, "SUBTYPE", {enumerable:!1, configurable:!1, writable:!1, value:"subtype"});
Object.defineProperty(CTATTutorMessageBuilder, "TUTOR_PERFORMED", {enumerable:!1, configurable:!1, writable:!1, value:"tutor-performed"});
Object.defineProperty(CTATTutorMessageBuilder, "HINT", {enumerable:!1, configurable:!1, writable:!1, value:"Hint"});
Object.defineProperty(CTATTutorMessageBuilder, "CORRECT", {enumerable:!1, configurable:!1, writable:!1, value:"Correct"});
CTATTutorMessageBuilder.prototype.constructor = CTATTutorMessageBuilder;
"undefined" !== typeof module && (module.exports = CTATTutorMessageBuilder);
var CTATLMS = {identifier:null, initLMSConnection:function() {
}, closeLMSConnection:function() {
}, setValue:function(a, b) {
}, getValue:function(a) {
  return null;
}, saveProblemState:function(a) {
}, getProblemState:function(a) {
  return a(null);
}, gradeStudent:function(a, b) {
}, processProblemSummary:function(a) {
}, is:{}, init:{}};
CTATLMS.init.StandAlone = function() {
  CTATLMS.identifier = null;
  CTATLMS.initLMSConnection = function() {
  };
  CTATLMS.closeLMSConnection = function() {
  };
  CTATLMS.setValue = function() {
  };
  CTATLMS.getValue = function() {
    return null;
  };
  CTATLMS.saveProblemState = function() {
  };
  CTATLMS.getProblemState = function(a) {
    return a(null);
  };
  CTATLMS.gradeStudent = function() {
  };
  CTATLMS.processProblemSummary = function() {
  };
};
CTATLMS.is.SCORM = function() {
  return window.location.search && /mode=SCORM/i.test(window.location.search);
};
CTATLMS.init.SCORM = function() {
  CTATLMS.identifier = "SCORM";
  CTATLMS.initLMSConnection = window.parent.doLMSInitialize;
  CTATLMS.closeLMSConnection = window.parent.doLMSFinish;
  CTATLMS.setValue = window.parent.doLMSSetValue;
  CTATLMS.getValue = window.parent.doLMSGetValue;
  CTATLMS.saveProblemState = function(a) {
    return CTATLMS.setValue("saveandrestore", a.problem_state);
  };
  CTATLMS.getProblemState = function(a) {
    return a(CTATLMS.getValue("saveandrestore"));
  };
  CTATLMS.gradeStudent = function(a, b) {
    return CTATLMS.setValue("cmi.core.score.raw", (a / b).toFixed(2));
  };
  CTATLMS.processProblemSummary = function(a) {
    ["cmi.core.lesson_status", "cmi.core.score.raw", "cmi.core.exit", "cmi.core.session_time"].forEach(function(a) {
      var d = this.getElementsByTagName(a);
      CTATLMS.setValue(a, d);
    }, a);
  };
};
CTATLMS.is.OLI = function() {
  return window.frameElement && window.frameElement.getAttribute("data-superactivityserver");
};
CTATLMS.init.OLI = function() {
  CTATLMS.identifier = "OLI";
  var a = function() {
    return {activityContextGuid:CTATConfiguration.get("activity_context_guid"), activityGuid:CTATConfiguration.get("activity_guid"), userGuid:CTATConfiguration.get("user_guid"), authenticationToken:CTATConfiguration.get("oli_auth_token"), resourceTypeID:CTATConfiguration.get("resource_type_id"), activityMode:CTATConfiguration.get("activity_mode")};
  };
  CTATLMS.saveProblemState = function(b) {
    var d = a();
    d.commandName = "writeFileRecord";
    d.attemptNumber = CTATConfiguration.get("current_attempt");
    d.fileName = CTAT.ToolTutor.tutor.getQuestionFile();
    d.mimeType = "text/xml";
    d.byteEncoding = "urlencoded";
    d.fileRecordData = b.problem_state;
    b = [];
    for (var f in d) {
      b.push(f + "=" + encodeURIComponent(d[f]));
    }
    $.post(CTATConfiguration.get("superactivity_url"), b.join("&"), null, "application/x-www-form-urlencoded");
  };
  CTATLMS.getProblemState = function(b) {
    var d = a();
    d.commandName = "loadFileRecord";
    d.attemptNumber = CTATConfiguration.get("current_attempt");
    d.fileName = CTAT.ToolTutor.tutor.getQuestionFile();
    var f = [], g;
    for (g in d) {
      f.push(g + "=" + encodeURIComponent(d[g]));
    }
    $.post(CTATConfiguration.get("superactivity_url"), f.join("&"), null, "application/x-www-form-urlencoded").done(function(a) {
      b(decodeURLComponent(a));
    });
  };
  CTATLMS.gradeStudent = function(b, d) {
    var f = !1, g = 0;
    0 >= d ? (g = 100, f = !0) : (g = Math.round(100 * b / d), f = b >= d);
    var c = a();
    c.commandName = "scoreAttempt";
    c.scoreId = "percentScore";
    c.scoreValue = g;
    var g = [], e = null;
    for (e in c) {
      g.push(e + "=" + encodeURIComponent(c[e]));
    }
    $.post(CTATConfiguration.get("superactivity_url"), g.join("&"), null, "application/x-www-form-urlencoded");
    c.scoreId = "completed";
    c.scoreValue = f;
    g = [];
    for (e in c) {
      g.push(e + "=" + encodeURIComponent(c[e]));
    }
    $.post(CTATConfiguration.get("superactivity_url"), g.join("&"), null, "application/x-www-form-urlencoded");
  };
};
CTATLMS.is.Authoring = function() {
  return window.location.search && /mode=AUTHORING/i.test(window.location.search);
};
CTATLMS.is.TutorShop = function() {
  return window.frameElement && /"LMS":\s*"TutorShop"/i.test(window.frameElement.getAttribute("data-params"));
};
CTATLMS.init.TutorShop = function() {
  CTATLMS.identifier = "TutorShop";
  CTATLMS.initLMSConnection = function() {
  };
  CTATLMS.closeLMSConnection = function() {
  };
  CTATLMS.setValue = function(a, b) {
  };
  CTATLMS.getValue = function(a) {
    return null;
  };
  CTATLMS.saveProblemState = function(a) {
    if (CTATConfiguration.get("curriculum_service_url")) {
      a.session_id = a.session_id ? a.session_id : "dummySession";
      var b = [], d;
      for (d in a) {
        b.push(d + "=" + encodeURIComponent(a[d]));
      }
      $.post(CTATConfiguration.get("curriculum_service_url"), b.join("&"), null, "application/x-www-form-urlencoded");
    }
  };
  CTATLMS.getProblemState = function(a) {
    CTATConfiguration.get("restoreProblemUrl") && $.get(CTATConfiguration.get("restoreProblemUrl"), null, "text/plain").done(function(b) {
      a(decodeURLComponent(b));
    }).fail(function(b, d, f) {
      a(null);
      b = (new CTATTutorMessageBuilder).createErrorMessage("Load ProblemState Error", d + " " + f);
      CTAT.ToolTutor.sendToInterface(b, !0);
    });
  };
  CTATLMS.gradeStudent = function() {
  };
  CTATLMS.processProblemSummary = function() {
  };
};
var CTATCommShell = function() {
  CTATBase.call(this, "CTATCommShell", "theShell");
  var a = null, b = this, d = null, f = null, g = {}, c = null, e = null, h = null, k = null, l = [], f = "xml" == CTATConfig.parserType ? new CTATXML : new CTATJSON;
  this.init = function(c) {
    this.ctatdebug("init ()");
    var e = flashVars.getRawFlashVars(), d = "http://";
    "https" == e.tutoring_service_communication && (d = "https://");
    e.remoteSocketURL && -1 != e.remoteSocketURL.indexOf("http") && (d = "");
    a = c;
    contextGUID = (new CTATGuid).guid();
    b.ctatdebug("processSkills ()");
    skillSet = new CTATSkillSet;
    c = flashVars.getRawFlashVars();
    null != c.skills && skillSet.fromXMLString(c.skills);
    b.updateSkillWindow(null);
    null == commMessageHandler && (commMessageHandler = new CTATMessageHandler, CTAT.ToolTutor.registerInterface(commMessageHandler));
    commMessageHandler.assignHandler(this);
    commMessageBuilder = new CTATTutoringServiceMessageBuilder;
    e.deliverymode && "review" == e.deliverymode && (e.Logging = "None");
    commLogMessageBuilder = new CTATLogMessageBuilder;
    commLibrary = new CTATCommLibrary;
    commLibrary.setSocketType(flashVars.getRawFlashVars().tutoring_service_communication);
    commLibrary.assignHandler(this);
    commLMSService = new CTATCurriculumService(commLibrary);
    null == commLoggingLibrary && (commLoggingLibrary = new CTATLoggingLibrary(!0));
    commLoggingLibrary.getLoggingCommLibrary().setFixedURL(flashVars.getRawFlashVars().log_service_url);
    flashVars.setTimeZone(null);
    new CTATHTMLManager;
    this.ctatdebug("CTATCommShell.init() FlashVar info: " + e.info);
    null != e.info ? parent.javaScriptInfo && parent.javaScriptInfo(decodeURIComponent(e.info)) : this.ctatdebug("There is no info flash var");
    this.ctatdebug("Connecting to: " + d + e.remoteSocketURL + ":" + e.remoteSocketPort);
    commLibrary.sendXMLURL(commMessageBuilder.createSetPreferencesMessage(version), d + e.remoteSocketURL + ":" + e.remoteSocketPort);
  };
  this.propagateShellEvent = function(a, b) {
    ctatdebug("propagateShellEvent (" + a + ")");
    for (var c = 0;c < l.length;c++) {
      l[c].processCommShellEvent(a, b);
    }
  };
  this.reset = function() {
    b.ctatdebug("reset ()");
    CTATGlobals.interfaceElement = null;
    commMessageHandler.reset();
  };
  this.getMessageHandler = function() {
    return this.commMessageHandler;
  };
  this.addStartStateHandler = function(a) {
    b.ctatdebug("addStartStateHandler ()");
    null == startStateHandlers && (startStateHandlers = []);
    startStateHandlers.push(a);
  };
  this.gradeComponent = function(a) {
    this.ctatdebug("gradeComponent (" + a.getName() + "," + a.getClassName() + ")");
    var c = CTATShellTools.findComponentByClass("CTATDoneButton");
    null != c && c != a ? c.moveHintHighlight(!1, null) : b.ctatdebug("Info: no done button available to reset");
    null != nameTranslator ? nameTranslator.translateFromCTAT(a.getName()) : this.ctatdebug("Info: no name translator provided, using as-is");
    null == a ? this.ctatdebug("Internal error, provided component is null") : (this.ctatdebug("Info: we have a valid component, grading ..."), "Do not tutor" == a.getTutorComponent() ? b.processComponentAction(a.getSAI(), !1) : (this.ctatdebug("Checking for back grading: " + a.getName()), "CTATTextArea" == a.getClassName() || "CTATTextInput" == a.getClassName() || "CTATTextField" == a.getClassName() ? (this.ctatdebug("Backgrading ..."), this.ctatdebug("Grading " + a.getClassName() + " with value: " + 
    a.getValue()), !0 === CTATGlobalFunctions.isBlank(a.getValue()) ? this.ctatdebug("Empty component, nothing to grade") : (a.updateSAI(), a = a.getSAI(), b.processComponentAction(a))) : (a = "CTATTableGoogle" == a.getClassName() ? new CTATSAI(a.getCurrentSelection(), "UpdateTextArea", a.getCurrentValue()) : a.getSAI(), b.processComponentAction(a))));
  };
  this.processMessage = function(a) {
    this.ctatdebug("processMessage ()");
    commMessageHandler.processMessage(a);
    this.ctatdebug("processMessage () done");
  };
  this.processStartProblem = function() {
    this.ctatdebug("processStartProblem ()");
    "google" == CTATConfig.external && this.showFeedback("The tutor is starting, please wait ...");
    CTATLMS.initLMSConnection();
  };
  this.processStartState = function() {
    this.ctatdebug("processStartState ()");
    inStartState = !0;
    null != a ? (this.ctatdebug("Calling tutor.createInterface () ..."), a.createInterface()) : (this.ctatdebug("Error: no tutor object available, calling createInterface globally ..."), window.hasOwnProperty("createInterface") && window.createInterface());
    this.ctatdebug("Logging start of problem ...");
    null != commLoggingLibrary ? commLoggingLibrary.startProblem() : this.ctatdebug("Info: no logging library available!");
    this.ctatdebug("End of start state, inspecting suppressStudentFeedback ...");
    if (!0 === CTATGlobals.suppressStudentFeedback) {
      this.ctatdebug("Hiding hint button ...");
      var c = CTATShellTools.findComponentByClass("CTATHintButton");
      null != c && c.SetVisible(!1);
    }
    "google" == CTATConfig.external ? (b.ctatdebug("Calling google app script hint request driver ..."), addCall(new RPCObject("resetOnEditQueue", "dummy", "dummy"))) : this.ctatdebug("processStartState () done");
  };
  this.sendStartProblemMessage = function() {
    b.ctatdebug("sendStartProblemMessage()");
  };
  this.sendProblemSummaryRequest = function(a) {
    b.ctatdebug("sendProblemSummaryRequest()");
    h = a;
    a = (new CTATTutoringServiceMessageBuilder).createProblemSummaryRequestMessage();
    commLibrary.sendXML(a);
  };
  this.sendInterfaceDescriptionMessages = function() {
    b.ctatdebug("sendInterfaceDescriptionMessages ()");
  };
  this.processSerialization = function() {
    b.ctatdebug("processSerialization()");
    b.setText(this.label);
    this.styles = b.getGrDescription().styles;
    b.ctatdebug("Processing " + this.styles.length + " styles ...");
    for (var a in this.styles) {
      "CorrectColor" == a && (correctColor = styleValue), "IncorrectColor" == a && (incorrectColor = styleValue), "HintColor" == a && (hintColor = styleValue);
    }
  };
  this.processComponentAction = function(a, c, e, d) {
    b.ctatdebug("processComponentAction(" + a.getName() + " -> " + a.getSelection() + "," + a.getAction() + "," + a.getInput() + ")");
    this.showFeedback("");
    e = (new CTATGuid).guid();
    null != commLoggingLibrary ? 0 == inStartState && (b.ctatdebug("We're not in the start state, logging the action ..."), "scrim" == a.getSelection() ? ctatdebug("Not logging any scrim actions (for now)") : "hint" == a.getSelection() || "null.nextButton" == a.getSelection() || "null.previousButton" == a.getSelection() ? commLoggingLibrary.logSemanticEvent(e, a, "HINT_REQUEST", "") : commLoggingLibrary.logSemanticEvent(e, a, "ATTEMPT", "")) : this.ctatdebug("Info: no logging library available!");
    d = new CTATTutoringServiceMessageBuilder;
    var f = "", f = !1 !== c ? d.createInterfaceActionMessage(e, a) : d.createUntutoredActionMessage(e, a);
    commLibrary.sendXML(f);
  };
  this.onEditSuccess = function(a) {
    b.ctatdebug("onEditSuccess (" + a + ")");
    null == nameTranslator ? b.ctatdebug("Error: CTAT name translator not available") : -1 != a.indexOf(":") ? (b.ctatdebug("Bump"), b.showFeedback("You're asking for a hint for multiple cells, please select only a single cell.")) : (a = nameTranslator.translateToCTAT(a), b.ctatdebug("Info A1 notiation mapped to (if needed): " + a), a = new CTATSAI("hint", "ButtonPressed", a), b.processComponentAction(a), b.propagateShellEvent("REQUESTHINT", null), b.ctatdebug("onEditSuccess () done"));
  };
  this.onFailure = function(a) {
    b.ctatdebug("onFailure (" + a.message + ")");
  };
  this.onNOPEditSuccess = function(a) {
    b.ctatdebug("onNOPEditSuccess (" + a + ")");
  };
  this.onNOPFailure = function(a) {
    b.ctatdebug("onNOPFailure (" + a.message + ")");
  };
  this.requestHint = function() {
    b.ctatdebug("requestHint(external -> " + CTATConfig.external + ")");
    var a = null;
    if ("none" == CTATConfig.external) {
      b.ctatdebug("Calling built-in hint request driver ..."), CTATGlobals.Tab.previousFocus ? (a = new CTATSAI("hint", "ButtonPressed", "hint request"), CTATGlobals.Tab.previousFocus instanceof CTAT.Component.Base.SAIHandler ? (a.addSelection(CTATGlobals.Tab.previousFocus.getSAI().getSelection()), a.addAction("PreviousFocus")) : b.ctatdebug("Current focus is not a CTAT component, can't ask for a hint yet")) : (b.ctatdebug("CTATGlobals.Tab.previousFocus===null"), a = new CTATSAI("hint", "ButtonPressed", 
      "hint request")), this.processComponentAction(a), this.propagateShellEvent("RequestHint", null);
    } else {
      if ("google" == CTATConfig.external) {
        b.ctatdebug("Calling google app script hint request driver ...");
        try {
          google.script.run.withSuccessHandler(b.onEditSuccess).withFailureHandler(b.onFailure).getSheetSelectedRange();
        } catch (c) {
          b.ctatdebug("google.script.run: " + c.message);
        }
      } else {
        b.ctatdebug("'external' has configuration that doesn't match anything: " + CTATConfig.external);
      }
    }
  };
  this.processDone = function() {
    b.ctatdebug("processDone()");
    if (!0 === CTATGlobals.confirmDone) {
      CTATScrim.scrim.confirmScrimUp("Are you sure you are done?", this.processDoneContinue, this.processDoneCancel);
    } else {
      var a = new CTATSAI("done", "ButtonPressed", "-1");
      b.processComponentAction(a);
    }
  };
  this.processDoneContinue = function(a) {
    b.ctatdebug("processDoneContinue()");
    CTATScrim.scrim.scrimDown();
    a = new CTATSAI("done", "ButtonPressed", "-1");
    b.processComponentAction(a);
    this.propagateShellEvent("DonePressed", null);
  };
  this.processDoneCancel = function(a) {
    b.ctatdebug("processDoneCancel()");
    CTATScrim.scrim.scrimDown();
    a = (new CTATGuid).guid();
    var c = new CTATSAI("ConfirmDone", "ButtonPressed", "no");
    commLoggingLibrary.logSemanticEvent(a, c, "ATTEMPT", "");
  };
  this.processCorrectAction = function(a) {
    b.ctatdebug("processCorrectAction()");
    a.setGradeResult("correct");
    this.clearFeedbackComponents();
    null != k && (ctatdebug("Calling custom grading processor ..."), k("CORRECT", a));
    var e = a.getSelection();
    if (g[e] && null != c) {
      c("CORRECT", a), this.propagateShellEvent("CORRECT", a);
    } else {
      var d = CTATShellTools.findComponent(e);
      if (null != d) {
        for (ctatdebug("Processing " + d.length + " components ..."), e = 0;e < d.length;e++) {
          ctatdebug("Check " + d[e].getName()), d[e] ? d[e].setCorrect && d[e].setCorrect(a) : b.ctatdebug("Internal error, component pointer is null");
        }
      } else {
        b.ctatdebug("Error: component is null for selection " + e);
      }
    }
  };
  this.processInCorrectAction = function(a) {
    b.ctatdebug("processInCorrectAction()");
    a.setGradeResult("incorrect");
    null != k && (ctatdebug("Calling custom grading processor ..."), k("INCORRECT", a));
    var e = a.getSelection();
    if (g[e] && null != c) {
      c("INCORRECT", a);
    } else {
      var d = CTATShellTools.findComponent(e);
      if (null != d) {
        for (e = 0;e < d.length;e++) {
          ctatdebug("Calling setIncorrect on component (" + d[e].getClassName() + ")..."), d[e].setIncorrect && d[e].setIncorrect(a);
        }
      } else {
        b.ctatdebug("Error: component is null for selection " + e);
      }
    }
  };
  this.processHighlightMsg = function(a) {
    b.ctatdebug("processHighlightMsg()");
    var c = a.getSelection(), e = CTATShellTools.findComponent(c);
    if (null != e) {
      for (c = 0;c < e.length;c++) {
        e[c].setHintHighlight(!0, a);
      }
    } else {
      b.ctatdebug("Error: component is null for selection " + c);
    }
    this.showFeedback(a.getHighlightMsg());
  };
  this.processUnHighlightMsg = function(a) {
    b.ctatdebug("processUnHighlightMsg()");
    var c = a.getSelection(), e = CTATShellTools.findComponent(c);
    if (null != e) {
      for (c = 0;c < e.length;c++) {
        e[c].setHintHighlight(!1, null, a);
      }
    } else {
      b.ctatdebug("Error: component is null for selection " + c);
    }
  };
  this.processAssociatedRules = function(a, c, e) {
    b.ctatdebug("processAssociatedRules()");
    if (0 == commMessageHandler.getInStartState()) {
      logHintSAI = a.getSAI();
      var d = "", f = new CTATActionEvaluationData("");
      b.ctatdebug("Found tutor advice: " + e);
      "Hint" == c || "HintWindow" == c ? (ctatdebug("Preparing log message to indicate a hint response", "commShell"), f.setCurrentHintNumber(hintIndex + 1), f.setTotalHintsAvailable(hints.length), f.setEvaluation("HINT"), d = "HINT_MSG", hints[hintIndex] && (e = hints[hintIndex])) : ("Correct" == a.getIndicator() ? f.setEvaluation("CORRECT") : f.setEvaluation("INCORRECT"), d = "RESULT");
      ctatdebug("Adding custom field names ...");
      c = [];
      var g = [];
      c.push("step_id");
      g.push(a.getProperty("StepID"));
      var h = a.getSkillsObject();
      b.updateSkillWindow(h);
      ctatdebug("Sending log message ...");
      null != commLoggingLibrary ? 0 == inStartState && 0 == inProcessStartStateActions && commLoggingLibrary.logTutorResponse(a.getTransactionID(), logHintSAI, d, "", f, e, h, c, g) : this.ctatdebug("Info: no logging library available!");
      "done" == logHintSAI.getSelection() && "Correct" == a.getIndicator() && (a = commMessageBuilder.createProblemSummaryRequestMessage(), commLibrary.sendXML(a));
    } else {
      b.updateSkillWindow(null);
    }
    b.ctatdebug("processAssociatedRules() done");
  };
  this.processBuggyMessage = function(a) {
    b.ctatdebug("processBuggyMessage()");
    this.showFeedback(a.getBuggyMsg());
  };
  this.processSuccessMessage = function(a) {
    b.ctatdebug("processSuccessMessage()");
    this.showFeedback(a.getSuccessMessage());
  };
  this.processInterfaceAction = function(a) {
    console.log("processInterfaceAction(" + a.getSelection() + "," + a.getAction() + "," + a.getInput() + ")", "commShell");
    console.log("Log the message (" + inStartState + "," + inProcessStartStateActions + ") ...");
    b.ctatdebug("This is not a start state TPA so it should be logged", "commShell");
    null != commLoggingLibrary ? 0 == inStartState && 0 == inProcessStartStateActions ? (console.log("Logging ..."), commLoggingLibrary.logSemanticEvent(a.getTransactionID(), a.getSAI(), "ATTEMPT", "tutor-performed")) : console.log("Logging prohibited in current tutor state") : this.ctatdebug("Info: no logging library available!");
    if ("root" == a.getSelection()) {
      b.ctatdebug("Info: selection is 'root', we'll call the function straight up ...");
      var c = a.getAction();
      a = a.getInput();
      b.ctatdebug("Calling as: " + c + "(" + a + ")");
      try {
        window[c](a);
      } catch (e) {
        b.ctatdebug("Internal error: unable to execute function: " + e.message);
      }
    } else {
      if (c = CTATShellTools.findComponent(a.getSelection()), null == c) {
        b.ctatdebug("Internal error: unable to find pointer to component object");
      } else {
        b.ctatdebug("Call the action on the component(s) -> (" + c.length + ")...");
        for (var d = 0;d < c.length;d++) {
          b.ctatdebug("About to call " + a.getAction() + " (" + a.getInput() + ") on: " + a.getSelection());
          var f = c[d];
          f.executeSAI(a);
          b.ctatdebug("Method executed, continuing with post-processing ...");
          1 == commMessageHandler.getInStartState() && f.setEnabled(!1);
        }
        b.ctatdebug("processInterfaceAction() Done");
      }
    }
  };
  this.processInterfaceIdentification = function(a) {
    b.ctatdebug("processInterfaceIdentification()");
  };
  this.processAuthorModeChange = function(a) {
    b.ctatdebug("processAuthorModeChange()");
  };
  this.processShowHintsMessage = function(a) {
    b.ctatdebug("processShowHintsMessage()");
  };
  this.processConfirmDone = function(a) {
    b.ctatdebug("processConfirmDone()");
  };
  this.processVersionInfo = function(a) {
    b.ctatdebug("processVersionInfo()");
  };
  this.processTutoringServiceAlert = function(a) {
    b.ctatdebug("processTutoringServiceAlert()");
    for (var c = "", e = 0;e < a.length;e++) {
      var d = a[e];
      "ErrorType" == f.getElementName(d) && f.getNodeTextValue(d);
      "Details" == f.getElementName(d) && (c = f.getNodeTextValue(d));
    }
    CTATScrim.scrim.scrimUp(c);
  };
  this.processTutoringServiceError = function(a) {
    b.ctatdebug("processTutoringServiceError()");
    for (var c = "", e = "", d = 0;d < a.length;d++) {
      var g = a[d];
      "ErrorType" == f.getElementName(g) && (c = f.getNodeTextValue(g));
      "Details" == f.getElementName(g) && (e = f.getNodeTextValue(g));
    }
    CTATScrim.scrim.scrimDown();
    CTATScrim.scrim.errorScrimUp(c + " - " + e);
  };
  this.processProblemSummaryResponse = function(a) {
    b.ctatdebug("processProblemSummaryResponse()");
    CTATLMS.processProblemSummary(a.getXMLObject());
    CTATLMS.closeLMSConnection();
    if (null != h) {
      var c = a.getXMLObject(), e = c.getElementsByTagName("ProblemSummary"), f = c.getElementsByTagName("cmi.core.lesson_status"), g = c.getElementsByTagName("cmi.core.score.raw");
      a = c.getElementsByTagName("cmi.core.exit");
      c = c.getElementsByTagName("cmi.core.session_time");
      e = $("<div>").html(e[0].innerHTML).text();
      f = "<cmi.core.lesson_status>" + $("<div>").html(f[0].innerHTML).text() + "</cmi.core.lesson_status>";
      g = "<cmi.core.score.raw>" + $("<div>").html(g[0].innerHTML).text() + "</cmi.core.score.raw>";
      a = "<cmi.core.exit>" + $("<div>").html(a[0].innerHTML).text() + "</cmi.core.exit>";
      c = "<cmi.core.session_time>" + $("<div>").html(c[0].innerHTML).text() + "</cmi.core.session_time>";
      h(e, "<scorm>" + f + g + a + c + "</scorm>");
      h = null;
    } else {
      c = new CTATXML;
      if (null != d) {
        window[d](c.xmlToString(a.getXMLObject()));
      } else {
        commLMSService.sendSummary(a);
      }
      lastMessage = !0;
    }
  };
  this.processProblemRestoreEnd = function(a) {
    b.ctatdebug("processProblemRestoreEnd()");
    CTATScrim.scrim.scrimDown();
  };
  this.clearFeedbackComponents = function() {
    b.ctatdebug("clearFeedbackComponents ()");
    CTATShellTools.showHints(null);
  };
  this.processHintResponse = function(a, c) {
    b.ctatdebug("processHintResponse()");
    CTATShellTools.showHints(c);
    var e = a.getSAI();
    if (null != e) {
      if (e = e.getSelection(), null != e) {
        if (b.ctatdebug("Highlighting selection for hint: " + e), e = CTATShellTools.findComponent(e), null != e) {
          for (var d = 0;d < e.length;d++) {
            1 == detailedFeedback && (0 === d ? e[d].moveHintHighlight && e[d].moveHintHighlight(!0, a) : e[d].setHintHighlight && e[d].setHintHighlight(!0, a));
          }
        } else {
          b.ctatdebug("Unable to find component name in list: " + e);
        }
      } else {
        b.ctatdebug("Error: no highlight selection present in SAI");
      }
    } else {
      b.ctatdebug("Warning: no SAI found in highlight message");
    }
    detailedFeedback = !0;
    b.ctatdebug("processHintResponse() done");
  };
  this.showHighlightSelection = function(a, c) {
    b.ctatdebug("showHighlightSelection (" + a + ")");
    var e = CTATShellTools.findComponent(a);
    if (null != e) {
      for (var d = 0;d < e.length;d++) {
        1 == detailedFeedback && (0 === d ? e[d].moveHintHightlight && e[d].moveHintHighlight(!0, c) : e[d].setHintHighlight && e[d].setHintHighlight(!0, c));
      }
    } else {
      b.ctatdebug("Unable to find component name in list: " + e);
    }
  };
  this.globalReset = function() {
    b.ctatdebug("globalReset ()");
    scriptElement = "";
  };
  this.nextProblem = function(a) {
    b.ctatdebug("nextProblem ()");
    if (CTATGlobalFunctions.isBlank(a)) {
      b.ctatdebug("Message is blank, requesting next problem ..."), a = flashVars.getRawFlashVars().run_problem_url, commLibrary.send(a);
    } else {
      b.ctatdebug("Message contains html data, writing ...");
      try {
        document.close();
      } catch (c) {
        alert("Error closing document: " + c.message);
      }
      try {
        document.write(a);
      } catch (c) {
        alert("Error writing document: " + c.message);
      }
    }
  };
  this.updateSkillWindow = function(a) {
    b.ctatdebug("updateSkillWindow()");
    skillSet.untouchSkills();
    var c = CTATShellTools.findComponentByClass("CTATSkillWindow");
    null !== c ? null != a ? c.updateSkillSet(a) : c.drawComponent() : b.ctatdebug("Info: no skill window available");
  };
  this.processComponentFocus = function(a) {
    b.ctatdebug("processComponentFocus(" + a.getName() + "," + a.getClassName() + ")");
    "CTATTextInput" == a.getClassName() || "CTATTextField" == a.getClassName() || "CTATTextArea" == a.getClassName() ? (CTATGlobals.selectedTextInput = a, null !== mobileAPI && !0 === mobileAPI.getEnabled() && mobileAPI.processTextFocus(a.getX(), a.getY(), a.getWidth(), a.getHeight())) : CTATGlobals.selectedTextInput = null;
    b.ctatdebug("processComponentFocus() done");
  };
  this.showFeedback = function(a) {
    b.ctatdebug("showFeedback(" + a + ")");
    "" == a ? b.ctatdebug("False alarm: empty message") : (CTATShellTools.showFeedback(a), null != e && e(a));
  };
  this.assignFeedbackHandler = function(a) {
    b.ctatdebug("assignFeedbackHandler()");
    e = a;
  };
  this.gradeSAI = function(a, c, e) {
    b.ctatdebug("gradeSAI()");
    g[a] = e;
    a = new CTATSAI(a, c, e);
    b.processComponentAction(a, !0, !0);
  };
  this.assignGradingHandler = function(a) {
    b.ctatdebug("assignGradingHandler()");
    c = a;
  };
  this.assignAnonymousGradingProcessor = function(a) {
    k = a;
  };
  this.assignDoneProcessor = function(a) {
    d = a;
  };
  this.addEventListener = function(a, b) {
  };
  this.addGlobalEventListener = function(a) {
    l.push(a);
  };
};
CTATCommShell.prototype = Object.create(CTATBase.prototype);
CTATCommShell.prototype.constructor = CTATCommShell;
var CTATScrollPaneComponent = function(a, b, d, f, g) {
  CTAT.Component.Base.Tutorable.call(this, "CTATScrollPaneComponent", "__undefined__", a, b, d, f, g);
  var c = 0, e = this;
  e.isTabIndexable = !1;
  this.getAlpha = function() {
    return c;
  };
  this.setAlpha = function(a) {
    c = a;
  };
  this.init = function() {
    e.ctatdebug("init (" + e.getName() + ")");
    e.ctatdebug("Final location: " + e.getX() + "," + e.getY() + " with text: " + e.getText());
    e.setInitialized(!0);
    e.ctatdebug("Final location: " + e.getX() + "," + e.getY() + " with text: " + e.getText());
    commShell.addGlobalEventListener(this);
  };
  this.processCommShellEvent = function(a, b) {
    e.ctatdebug("processCommShellEvent (" + a + ")");
  };
  this.processSerialization = function() {
    e.ctatdebug("processSerialization()");
  };
  this.postProcess = function() {
    e.ctatdebug("postProcess ()");
    for (var a in this.parameters) {
      var b = this.parameters[a];
      e.ctatdebug("Checking style name: " + a);
      if ("TargetMovieClip" == a) {
        e.ctatdebug("Loading sub element: [" + b.trim() + "] ...");
        var c = findMovieClip(b.trim());
        if (null !== c) {
          if (e.ctatdebug("Found target movieclip, temporarily removing ..."), null !== c.getDivWrapper().parentNode) {
            try {
              c.getDivWrapper().parentNode.removeChild(c.getDivWrapper());
            } catch (d) {
              CTATScrim.scrim.errorScrimUp(d.message);
              break;
            }
            e.getDivWrap().setAttribute("id", "scrollsubdiv");
            e.getDivWrap().style.zIndex = CTATGlobalFunctions.gensym.z_index();
            e.ctatdebug("Adding ...");
            e.getDivWrap().appendChild(c.getDivWrapper());
            b = CTATGlobalFunctions.gensym.z_index();
            b++;
            var f = c.getDivWrapper().style.left, g = c.getDivWrapper().style.top;
            c.getDivWrapper().style.left = "0px";
            c.getDivWrapper().style.top = "0px";
            e.ctatdebug("Moving canvas from: " + f + "," + g + " to: 0,0");
            c = c.getDivWrapper().childNodes;
            for (f = 0;f < c.length;f++) {
              b++;
            }
          }
        } else {
          e.ctatdebug("Unable to find the target movieclip to reparent the content from");
        }
      }
    }
  };
  this.configFromDescription();
};
CTATScrollPaneComponent.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATScrollPaneComponent.prototype.constructor = CTATScrollPaneComponent;
CTAT.ComponentRegistry.addComponentType("CTATScrollPaneComponent", CTATScrollPaneComponent);
var CTATHintButton = function(a, b, d, f, g) {
  CTAT.Component.Base.Clickable.call(this, "hint", "CTATHintButton", a, b, d, f, g);
  this.setName("hint");
  this.setClassName("CTATHintButton");
  this.isTabIndexable = !1;
  this.setText(CTATGlobals.languageManager.getString("HINT"));
  this.setStyleHandler("BackgroundColor", null);
  this.setStyleHandler("TextAlign", null);
  this.setStyleHandler("BorderColor", null);
  this.setStyleHandler("FontFace", null);
  this.setStyleHandler("TextColor", null);
  this.init = function() {
    this.setInitialized(!0);
    var a = document.createElement("button");
    this.setComponent(a);
    a.classList.add("unselectable");
    a.classList.add("CTAT-hint-button");
    var b = document.createElement("div");
    b.style.fontWeight = "bold";
    b.style.pointerEvents = "none";
    b.textContent = "?";
    a.appendChild(b);
    this.getText() ? (b.style.fontSize = Math.floor(.6 * this.getHeight()) + "px", b.style.height = "60%", b.style.position = null, b.style.top = null, b = document.createElement("div"), b.style.pointerEvents = "none", b.textContent = this.getText(), a.appendChild(b)) : (b.style.fontSize = this.getHeight() + "px", b.style.height = null, b.style.position = "relative", b.style.top = "-.08em");
    this.getDivWrap().appendChild(a);
    a.addEventListener("mouseenter", function(a) {
      a.target.classList.add("CTAT-hint-button--hover");
    });
    a.addEventListener("mouseleave", function(a) {
      a.target.classList.remove("CTAT-hint-button--hover");
      a.target.classList.remove("CTAT-hint-button--clicked");
    });
    a.addEventListener("mousedown", function(a) {
      a.target.classList.add("CTAT-hint-button--clicked");
    });
    a.addEventListener("mouseup", function(a) {
      a.target.classList.remove("CTAT-hint-button--clicked");
    });
    a.addEventListener("click", function(a) {
      a.target.classList.remove("CTAT-hint-button--clicked");
    });
    a.addEventListener("click", this.processClick);
  };
  var c = this;
  this.processClick = function(a) {
    c.getEnabled() && commShell && commShell.requestHint();
  };
};
CTATHintButton.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATHintButton.prototype.constructor = CTATHintButton;
CTAT.ComponentRegistry.addComponentType("CTATHintButton", CTATHintButton);
var CTATButton = function(a, b, d, f, g) {
  CTATButtonBasedComponent.call(this, "CTATButton", "aButton", a, b, d, f, g);
  var c = this, e = null;
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    c.setActionInput("ButtonPressed", "-1");
    e = document.createElement("button");
    e.type = "button";
    e.name = c.getName();
    e.value = "-1";
    e.id = CTATGlobalFunctions.gensym.div_id();
    e.setAttribute("onkeypress", "return noenter(event)");
    e.classList.add("CTAT-button");
    c.setInitialized(!0);
    if (c.getText()) {
      e.textContent = c.getText();
    } else {
      if (c.getDivWrap() && c.getDivWrap().innerHTML) {
        var a = c.getDivWrap().innerHTML;
        c.getDivWrap().innerHTML = "";
        e.innerHTML = a;
      }
    }
    c.setComponent(e);
    c.addComponentReference(c, e);
    c.getDivWrap().appendChild(e);
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.addSafeEventListener("click", c.processClick, e);
    c.addSafeEventListener("focus", c.processFocus, e);
  };
  this.render = function() {
  };
  this.reset = function() {
    c.configFromDescription();
    c.processSerialization();
    c.setEnabled(!0);
  };
};
CTATButton.prototype = Object.create(CTATButtonBasedComponent.prototype);
CTATButton.prototype.constructor = CTATButton;
CTAT.ComponentRegistry.addComponentType("CTATButton", CTATButton);
var OLIComm = function(a) {
  function b(a, b) {
    return {name:a, value:b};
  }
  function d(a, b) {
    oliCommLibrary.assignHandler(oliMessageHandler);
    oliMessageHandler.setCommandName(b);
    useOLIEncoding = !0;
    oliCommLibrary.sendURLVariables(f.url, a);
    useOLIEncoding = !1;
  }
  CTATBase.call(this, "OLIComm", "OLIComm");
  this.url = a;
  var f = this;
  this.loadClientConfig = function() {
    f.ctatdebug("loadClientConfig");
    if (null == flashVars) {
      f.ctatdebug("Internal error: flashVars is null");
    } else {
      if (null == flashVars.getRawFlashVars()) {
        f.ctatdebug("Internal error: raw flashVars is null");
      } else {
        var a = [b("commandName", "loadClientConfig"), b("activityContextGuid", flashVars.getRawFlashVars().activity_context_guid), b("resourceTypeID", flashVars.getRawFlashVars().resource_type_id), b("activityMode", flashVars.getRawFlashVars().activity_mode), b("authenticationToken", flashVars.getRawFlashVars().oli_auth_token)];
        d(a, "loadClientConfig");
      }
    }
  };
  this.beginSession = function() {
    f.ctatdebug("beginSession");
    var a = [b("commandName", "beginSession"), b("activityContextGuid", flashVars.getRawFlashVars().activity_context_guid), b("activityGuid", flashVars.getRawFlashVars().activity_guid), b("userGuid", flashVars.getRawFlashVars().user_guid), b("authenticationToken", flashVars.getRawFlashVars().oli_auth_token), b("resourceTypeID", flashVars.getRawFlashVars().resource_type_id), b("activityMode", flashVars.getRawFlashVars().activity_mode)];
    d(a, "beginSession");
  };
  this.startAttempt = function() {
    f.ctatdebug("startAttempt");
    var a = [b("commandName", "startAttempt"), b("activityContextGuid", flashVars.getRawFlashVars().activity_context_guid), b("activityGuid", flashVars.getRawFlashVars().activity_guid), b("userGuid", flashVars.getRawFlashVars().user_guid), b("authenticationToken", flashVars.getRawFlashVars().oli_auth_token), b("resourceTypeID", flashVars.getRawFlashVars().resource_type_id), b("activityMode", flashVars.getRawFlashVars().activity_mode)];
    d(a, "startAttempt");
  };
  this.loadContentFile = function(a) {
    f.ctatdebug("loadContentFile");
    a = [b("commandName", "loadContentFile"), b("contentFileGuid", a), b("activityContextGuid", flashVars.getRawFlashVars().activity_context_guid), b("activityGuid", flashVars.getRawFlashVars().activity_guid), b("userGuid", flashVars.getRawFlashVars().user_guid), b("authenticationToken", flashVars.getRawFlashVars().oli_auth_token), b("resourceTypeID", flashVars.getRawFlashVars().resource_type_id), b("activityMode", flashVars.getRawFlashVars().activity_mode)];
    d(a, "loadContentFile");
  };
  this.loadFileRecord = function(a, c) {
    f.ctatdebug("loadFileRecord");
    var e = flashVars.getRawFlashVars(), e = [b("commandName", "loadFileRecord"), b("activityContextGuid", e.activity_context_guid), b("activityGuid", e.activity_guid), b("userGuid", e.user_guid), b("authenticationToken", e.oli_auth_token), b("resourceTypeID", e.resource_type_id), b("activityMode", e.activity_mode), b("attemptNumber", c ? c : e.current_attempt), b("fileName", a)];
    d(e, "loadFileRecord");
  };
  this.writeFileRecord = function(a, c, e, h, k) {
    f.ctatdebug("writeFileRecord");
    var l = flashVars.getRawFlashVars();
    a = [b("commandName", "writeFileRecord"), b("activityContextGuid", l.activity_context_guid), b("activityGuid", l.activity_guid), b("userGuid", l.user_guid), b("authenticationToken", l.oli_auth_token), b("resourceTypeID", l.resource_type_id), b("activityMode", l.activity_mode), b("attemptNumber", e ? e : l.current_attempt), b("fileName", a), b("mimeType", h ? h : "text/xml"), b("byteEncoding", k ? k : "urlencoded"), b("fileRecordData", c)];
    d(a, "writeFileRecord");
  };
  this.scoreAttempt = function(a, c) {
    f.ctatdebug("scoreAttempt");
    var e = flashVars.getRawFlashVars(), e = [b("commandName", "scoreAttempt"), b("activityContextGuid", e.activity_context_guid), b("activityGuid", e.activity_guid), b("userGuid", e.user_guid), b("authenticationToken", e.oli_auth_token), b("resourceTypeID", e.resource_type_id), b("activityMode", e.activity_mode), b("scoreId", a), b("scoreValue", c)];
    d(e, "scoreAttempt");
  };
  this.BRDAvailable = function(a, b) {
    f.ctatdebug("BRDAvailable ()");
    f.assignBRD(a);
    f.assignResourceSpec(b);
    f.ctatdebug("OLI is ready and running, returning control to ctatjsloader ...");
    OLIReady();
  };
  this.assignResourceSpec = function(a) {
    flashVars.getRawFlashVars().resource_spec = a;
  };
  this.assignBRD = function(a) {
    f.ctatdebug("assignBRD (" + a[0] + ")");
    flashVars.getRawFlashVars().question_file = a[0];
  };
};
OLIComm.prototype = Object.create(CTATBase.prototype);
OLIComm.prototype.constructor = OLIComm;
var OLIDriver = function(a) {
  function b(a) {
    var b = a.lastIndexOf("/");
    return 0 > b ? "webcontent/" + a : a.substring(0, b) + "/webcontent/" + a.substring(b + 1);
  }
  CTATBase.call(this, "OLIDriver", "olidriver");
  this.url = a;
  var d = this, f = null;
  this.oliClientConfig = function(a) {
    d.ctatdebug("oliClientConfig (" + a + ")");
    flashVars.getRawFlashVars().log_service_url = a;
    oliComm.beginSession();
  };
  this.oliBeganSession = function(a, b) {
    d.ctatdebug("oliBeganSession (" + a + ", " + b + ")");
    Number(a) ? oliComm.loadContentFile(b) : oliComm.startAttempt();
  };
  this.oliLoadedContentFile = function(a) {
    d.ctatdebug("oliLoadedContentFile (" + a[0] + ")");
    d.ctatdebug("STUB!");
  };
  this.setCurrentModule = function(a) {
    currentOLIModule = a;
  };
  this.getCurrentModule = function() {
    return currentOLIModule;
  };
  this.translateResourceFile = function(a) {
    d.ctatdebug("translateResourceFile (" + a + ")");
    return d.translateOLIResourceFile(a);
  };
  this.translateOLIResourceFile = function(a) {
    d.ctatdebug("translateOLIResourceFile (" + a + ")");
    var c = flashVars.getRawFlashVars();
    return -1 == a.indexOf("webcontent") ? c.web_content_url + b(currentOLIModule) + "/" + a : c.web_content_url + "/" + a;
  };
  this.resolveURL = function(a) {
    return flashVars.getRawFlashVars().web_content_url + b(currentOLIModule) + "/" + a;
  };
  this.translateURL = function(a) {
    d.ctatdebug("translateURL ()");
    for (var c = flashVars.getRawFlashVars(), e = getIndicesOf("<img", a, !1), f = getIndicesOf("<a", a, !1), k = -1, l = k = -1, q = !1, p = "", k = "";!1 === q;) {
      q = !0;
      if (0 === e.length && 0 === f.length) {
        return d.ctatdebug("Nothing to do here, bump"), a;
      }
      e = getIndicesOf("<img", a, !1);
      for (f = 0;f < e.length;f++) {
        k = e[f], k = a.indexOf("src", k), -1 != k && (k += 5, l = a.indexOf('"', k), -1 != l && (p = a.substr(k, l - k), d.ctatdebug("We have a valid url (img) to replace between: " + k + "," + l + ", with content: " + p), -1 == p.indexOf("http:") ? (q = !1, p = c.web_content_url + b(currentOLIModule) + "/" + p, k = a.substr(0, k) + p + a.substr(l), d.ctatdebug("Replaced: " + k), a = k) : d.ctatdebug("The provided url is an absolute url, returning as is, bump")));
      }
      f = getIndicesOf("<a", a, !1);
      for (e = 0;e < f.length;e++) {
        k = f[e], k = a.indexOf("href", k), -1 != k && (k += 6, l = a.indexOf('"', k), -1 != l && (p = a.substr(k, l - k), d.ctatdebug("We have a valid url (href) to replace between: " + k + "," + l + ", with content: " + p), -1 == p.indexOf("http:") ? (q = !1, p = c.web_content_url + b(currentOLIModule) + "/" + p, k = a.substr(0, k) + p + a.substr(l), d.ctatdebug("Replaced: " + k), a = k) : d.ctatdebug("The provided url is an absolute url, returning as is, bump")));
      }
      e = getIndicesOf("<img", a, !1);
      f = getIndicesOf("<a", a, !1);
    }
    console.log("Final string: " + a);
    return a;
  };
  this.forwardToClientHandler = function(a) {
    d.ctatdebug("OLIDriver.forwardToClientHandler() handler is " + typeof f);
    f && f.process && f.process(a);
  };
  this.registerClientHandler = function(a) {
    f = a;
  };
};
OLIDriver.prototype = Object.create(CTATBase.prototype);
OLIDriver.prototype.constructor = OLIDriver;
var currentOLIModule = "", OLIMessageHandler = function() {
  CTATBase.call(this, "OLIMessageHandler", "olimessagehandler");
  var a = null, b = "", d = new CTATXML, f = this, g = [];
  this.assignHandler = function(b) {
    a = b;
  };
  this.setCurrentModule = function(a) {
    currentOLIModule = a;
  };
  this.getCurrentModule = function() {
    return currentOLIModule;
  };
  this.setCommandName = function(a) {
    "string" == typeof a && (b = a);
  };
  this.processError = function(c, e) {
    f.ctatdebug("OLIMessageHandler.processError(" + c + ", " + e + ")\n  from command " + b);
    if (a) {
      a.forwardToClientHandler(e);
    } else {
      switch(b) {
        case "startAttempt":
          f.parseAttemptHistory(null);
      }
    }
  };
  this.processMessage = function(b) {
    f.ctatdebug("processMessage () length " + (b ? b : null));
    var e = d.parse(b);
    if (null == e) {
      f.ctatdebug("Error parsing oli message"), a && a.forwardToClientHandler(b);
    } else {
      var g = d.getElementName(e);
      switch(g) {
        case "super_activity_client":
          f.parseClientConfig(e);
          break;
        case "super_activity_session":
          f.parseBeginSession(e);
          break;
        case "attempt_history":
          f.parseAttemptHistory(e);
          break;
        case "ctat":
          f.parseResourceFile(e, b);
          break;
        case "file_record":
          f.parseFileRecord(e);
          break;
        default:
          a ? a.forwardToClientHandler(b) : f.ctatdebug("Unknown xml recieved with root " + g);
      }
    }
  };
  this.parseClientConfig = function(b) {
    f.ctatdebug("parseClientConfig ()");
    var e = flashVars.getRawFlashVars();
    b = d.getElementChildren(b);
    for (var g = null, k = 0;k < b.length;k++) {
      var l = b[k], q = d.getElementName(l);
      "resource_type" != q && "base" != q && ("authentication" == q && "review" != e.activity_mode ? e.user_guid = d.getElementAttr(l, "user_guid") : "logging" == q && (e.log_session_id = d.getElementAttr(l, "session_id"), e.source_id = d.getElementAttr(l, "source_id"), g = d.getElementChildren(l), g = d.getNodeTextValue(g[0])));
    }
    a.oliClientConfig(g);
  };
  this.parseBeginSession = function(b) {
    f.ctatdebug("parseBeginSession ()");
    var e = b.getElementsByTagName("file")[0];
    if (void 0 == e) {
      f.ctatdebug("can't find resource file");
    } else {
      var g = flashVars.getRawFlashVars(), k = b.getElementsByTagName("web_content")[0];
      g.web_content_url = d.getElementAttr(k, "href");
      e = d.getElementAttr(e, "guid");
      g.resource_file_id = e;
      if (k = b.getElementsByTagName("section")[0]) {
        g.class_name = d.getElementAttr(k, "admit_code"), g.class_description = d.getElementAttr(k, "title"), g.school_name = d.getElementAttr(k, "institution");
      }
      (k = b.getElementsByTagName("instructors")[0]) && (k = d.getElementChildren(k)) && (g.instructor = d.getElementAttr(k[0], "guid"));
      (k = b.getElementsByTagName("user")[0]) && "review" != g.activity_mode && (g.user_guid = d.getElementAttr(k, "guid"));
      if (k = b.getElementsByTagName("activity")[0]) {
        if (g.activity_guid = d.getElementAttr(k, "guid"), k = k.getElementsByTagName("item_info")[0]) {
          if (k = k.getElementsByTagName("resource_info")[0]) {
            if (k = k.getElementsByTagName("file")[0]) {
              if (k = d.getElementAttr(k, "href")) {
                var l = k.indexOf("/x-cmu");
                this.setCurrentModule(k.substr(0, l));
              }
            }
          }
        }
      }
      if (k = b.getElementsByTagName("file_record")[0]) {
        for (g.file_record_file_name = d.getElementAttr(k, "file_name"), k = d.getElementChildren(k), l = 0;l < k.length;l++) {
          var q = k[l];
          "record_context" == String(d.getElementName(q)).toLowerCase() && d.getElementAttr(q, "activity_guid") == g.activity_guid && (g.file_record_attempt = d.getElementAttr(q, "attempt")) && (g.problem_state_status = "incomplete");
        }
      }
      b = f.setAttemptFromAttemptHistory(b.getElementsByTagName("attempt_history")[0]);
      a.oliBeganSession(b, e);
    }
  };
  this.parseAttemptHistory = function(c) {
    var e = flashVars.getRawFlashVars();
    c = f.setAttemptFromAttemptHistory(c, "1");
    "startAttempt" == b && a.oliBeganSession(c, e.resource_file_id);
  };
  this.setAttemptFromAttemptHistory = function(a, b) {
    f.ctatdebug("setAttemptFromAttemptHistory(" + a + ", " + b + ")");
    var g = flashVars.getRawFlashVars(), k = a ? a.getElementsByTagName("activity_attempt") : [], l = null;
    return 1 > k.length || !(l = k[k.length - 1]) ? (f.ctatdebug("can't find activity_attempt in attempt_history"), null != b ? g.current_attempt = b : "") : g.current_attempt = d.getElementAttr(l, "number");
  };
  this.parseResourceFile = function(a, b) {
    f.ctatdebug("parseResourceFile ()");
    g = [];
    for (var h = d.getElementChildren(a), k = flashVars.getRawFlashVars(), l = 0;l < h.length;l++) {
      var q = h[l], p = d.getElementName(q);
      "interface" == p ? (q = d.getNodeTextValue(q), p = oliDriver.translateResourceFile(q), f.ctatdebug("Building BRD url from web_content_url: " + k.web_content_url + " and OLI-provided url: " + q + " = " + p), g.push(p)) : "title" == p && (k.problem_name = d.getNodeTextValue(q));
    }
    oliComm.BRDAvailable(g, b);
  };
  this.parseFileRecord = function(a) {
    f.ctatdebug("parseFileRecord()");
    var b = Number(d.getElementAttr(a, "date_created")), g = d.getElementAttr(a, "file_size");
    a = d.getElementAttr(a, "file_name");
    console.log("OLI writeFileRecord at", isNaN(b) ? null : new Date(b), "wrote", a, ", size", g);
  };
};
OLIMessageHandler.prototype = Object.create(CTATBase.prototype);
OLIMessageHandler.prototype.constructor = OLIMessageHandler;
var CTATComboBox = function(a, b, d, f, g) {
  CTAT.Component.Base.Clickable.call(this, "CTATComboBox", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(22);
  var c = this, e = null;
  this.setAction("UpdateComboBox");
  var h = ",";
  this.setStyleHandler("SplitCharacter", function(a) {
    h = a;
    e && (e.innerHTML = "", this.addLabels(k, h));
  }.bind(this));
  var k = "---,x,y,z";
  this.setStyleHandler("Labels", function(a) {
    k = a;
    e && (e.innerHTML = "", this.addLabels(k, h));
  }.bind(this));
  var l = null;
  a = function(a) {
    a = parseInt(a);
    l = isNaN(a) ? null : a;
    e && e.setAttribute("size", l);
  };
  this.setStyleHandler("DropDownSize", a);
  this.data_ctat_handlers.size = a;
  this.setStyleHandler("DropDownWidth", null);
  this.init = function() {
    c.setInitialized(!0);
    e = document.createElement("select");
    e.name = c.getName();
    e.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    e.setAttribute("onkeypress", "return noenter(event)");
    e.onchange = this.processComboSelection;
    e.classList.add("CTAT-combobox");
    e.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    l && e.setAttribute("size", l);
    var a = this.getDivWrap().innerHTML;
    this.getDivWrap().innerHTML = "";
    a ? e.innerHTML = a : this.addLabels(k, h);
    c.assignEnabled(!0);
    !0 === c.getEnabled() ? e.disabled = !1 : e.disabled = !0;
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.addComponentReference(c, e);
    c.setComponent(e);
    c.getDivWrap().appendChild(e);
    c.render();
    e.addEventListener("focus", c.processFocus);
  };
  this.getHTMLComponent = function() {
    return e;
  };
  this.addLabels = function(a, b) {
    for (var c = a.split(b ? b : h), e = 0;e < c.length;e++) {
      this.addItem(c[e]);
    }
  };
  this.addItem = function(a) {
    c.ctatdebug("addItem (" + a + ")");
    var b = document.createElement("option");
    b.setAttribute("value", a);
    b.textContent = a;
    b.classList.add("CTAT-combobox--option");
    e.appendChild(b);
  };
  this.valid_selection = function() {
    return 0 <= e.selectedIndex && !CTATGlobalFunctions.isBlank(e.value);
  };
  this.processComboSelection = function() {
    c.ctatdebug("processComboSelection ()");
    c.setInput(e.options[e.selectedIndex].value);
    c.valid_selection() ? c.processAction() : this.ctatdebug("Empty component, nothing to grade");
  };
  this.UpdateComboBox = function(a) {
    e.value = a;
  };
  this.updateSAI = function() {
    c.setInput(e.value);
  };
};
CTATComboBox.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATComboBox.prototype.constructor = CTATComboBox;
CTAT.ComponentRegistry.addComponentType("CTATComboBox", CTATComboBox);
CTAT.Math = {LeastCommonMultiple:function(a, b) {
  return a * b / CTAT.Math.GreatestCommonDivisor(a, b);
}, GreatestCommonDivisor:function(a, b) {
  if (0 > a || 0 > b) {
    return CTAT.Math.GreatestCommonDivisor(Math.abs(a), Math.abs(b));
  }
  if (1 === a || 1 === b) {
    return 1;
  }
  if (0 === a) {
    return b;
  }
  if (0 === b) {
    return a;
  }
  var d = function(a, b) {
    return b ? d(b, a % b) : a;
  };
  return d(a, b);
}, round10:function(a, b) {
  if ("undefined" === typeof b || 0 === Number(b)) {
    return Math.round(a);
  }
  a = Number(a);
  b = Number(b);
  if (isNaN(a) || "number" !== typeof b || 0 !== b % 1) {
    return NaN;
  }
  a = a.toString().split("e");
  a = Math.round(Number(a[0]) + "e" + (a[1] ? Number(a[1]) - b : -b));
  a = a.toString().split("e");
  return Number(a[0] + "e" + (a[1] ? Number(a[1]) + b : b));
}, precision:4, round:function(a) {
  return CTAT.Math.round10(a, -CTAT.Math.precision);
}, rad2deg:function(a) {
  return CTAT.Math.round(180 * a / Math.PI);
}, deg2rad:function(a) {
  return a * Math.PI / 180;
}};
CTAT.Component.Base.SVG = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Clickable.call(this, a, b, d, f, g, c, e);
  var h = null;
  this.initSVG = function() {
    this.setInitialized(!0);
    var a = CTATGlobals.NameSpace.svg, b = CTATGlobals.NameSpace.xml, c = CTATGlobals.NameSpace.xlink, e = CTATGlobals.NameSpace.ev, d = document.createDocumentFragment();
    h = document.createElementNS(a, "svg");
    d.appendChild(h);
    h.classList.add("CTAT-gen-component");
    h.classList.add("CTAT-svg");
    h.setAttributeNS(b, "xmlns", a);
    h.setAttributeNS(b, "xmlns:xlink", c);
    h.setAttributeNS(b, "xmlns:ev", e);
    a = document.createElementNS(a, "defs");
    h.appendChild(a);
    this.getDivWrap().appendChild(d);
    this.setComponent(h);
  };
  this.genName = function(a) {
    return this.getName() + "_" + a;
  };
  this.getBoundingBox = function() {
    var a = new DOMRect(0, 0, this.getWidth(), this.getHeight()), b = this.getComponent(), c = window.getComputedStyle(b), b = parseInt(c.getPropertyValue("padding-left")), e = parseInt(c.getPropertyValue("padding-right")), d = parseInt(c.getPropertyValue("padding-bottom")), f = parseInt(c.getPropertyValue("padding-right")), g = parseInt(c.getPropertyValue("border-left-width")), h = parseInt(c.getPropertyValue("border-right-width")), y = parseInt(c.getPropertyValue("border-bottom-width")), c = parseInt(c.getPropertyValue("border-right-width"));
    a.width -= b + f + g + c;
    a.height -= e + d + h + y;
    return a;
  };
};
CTAT.Component.Base.SVG.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTAT.Component.Base.SVG.prototype.constructor = CTAT.Component.Base.SVG;
CTAT.Math.Fraction = function(a, b) {
  this._numerator = 0;
  this._denominator = 1;
  this.set(a, b);
};
CTAT.Math.Fraction.prototype = Object.create(CTAT.Math.Fraction.prototype, {numerator:{get:function() {
  return this._numerator;
}, set:function(a) {
  this._numerator = a;
}}, denominator:{get:function() {
  return this._denominator;
}, set:function(a) {
  this._denominator = a;
}}, toString:{value:function() {
  return 1 === this.denominator ? String(this._numerator) : String(this._numerator) + "/" + String(this._denominator);
}}, valueOf:{value:function() {
  return this.numerator / this.denominator;
}}, fromString:{value:function(a) {
  var b = a.match(/(\d*\.?\d*)\s*\/\s*(\d*\.?\d*)/);
  b ? (this._numerator = Number(b[1]), this._denominator = Number(b[2])) : this.fromValue(a);
}}, fromValue:{value:function(a) {
  this._numerator = Number(a.valueOf());
  this._denominator = 1;
}}, toMathML:{value:function() {
  var a = document.createElementNS("http://www.w3.org/1998/Math/MathML", "math"), b = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mn");
  b.textContent = this.numerator;
  if (1 == this.denominator) {
    a.appendChild(b);
  } else {
    var d = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mfrac"), f = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mrow");
    f.appendChild(b);
    d.appendChild(f);
    b = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mrow");
    f = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mn");
    f.textContent = this.denominator;
    b.appendChild(f);
    d.appendChild(b);
    a.appendChild(d);
  }
  return a;
}}, is_proper:{get:function() {
  return Math.abs(this._numerator) < Math.abs(this._denominator);
}}, whole_part:{get:function() {
  return Math.floor(this.valueOf());
}}, remainder_part:{get:function() {
  return new CTAT.Math.Fraction(this._numerator % this._denominator, this._denominator);
}}, set_denominator:{value:function(a) {
  this._numerator = this.numerator * a / this.denominator;
  1E-9 > Math.abs(this.numerator - Math.round(this.numerator)) && (this.numerator = Math.round(this.numerator));
  this._denominator = a;
  return this;
}}, scale:{value:function(a) {
  this._numerator *= a;
  this._denominator = 0 === a ? 1 : Math.abs(this._denominator * a);
}}, set:{value:function(a, b) {
  this._numerator = 0;
  this._denominator = 1;
  "undefined" !== typeof a && b ? (this.numerator = "number" === typeof a ? a : "string" === typeof a ? Number(a) : a ? a.valueOf() : 0, this.denominator = "number" === typeof b ? b : "string" === typeof b ? Number(b) : b.valueOf()) : a && (a instanceof CTAT.Math.Fraction ? (this.numerator = a.numerator, this.denominator = a.denominator) : "number" === typeof a ? (this.numerator = a, this.denominator = 1) : "string" === typeof a ? this.fromString(a) : (this.numerator = a ? a.valueOf() : 0, this.denominator = 
  1));
  isNaN(this._numerator) && (this._numerator = 0);
  isNaN(this._denominator) && (this._denominator = 1);
  return this;
}}, reduce:{value:function() {
  var a = CTAT.Math.GreatestCommonDivisor(this.numerator, this.denominator);
  this._numerator /= a;
  this._denominator /= a;
  return this;
}}, reduced:{value:function() {
  var a = new CTAT.Math.Fraction(this);
  a.reduce();
  return a;
}}, reciprocal:{value:function() {
  return new CTAT.Math.Fraction(this.denominator, this.numerator);
}}, negative:{value:function() {
  return new CTAT.Math.Fraction(-this.numerator, this.denominator);
}}, add:{value:function(a) {
  var b = new CTAT.Math.Fraction;
  a instanceof CTAT.Math.Fraction ? 0 === this.numerator || isNaN(this.numerator) ? b.set(a.numerator, a.denominator) : 0 === a.numerator || isNaN(a.numerator) ? b.set(this.numerator, this.denominator) : this.denominator == a.denominator ? b.set(this.numerator + a.numerator, this.denominator) : (b.set(this.numerator * a.denominator + a.numerator * this.denominator, this.denominator * a.denominator), b.reduce()) : "string" === typeof a ? (a = new CTAT.Math.Fraction(a), b = this.add(a)) : b.set(a.valueOf() * 
  this.denominator + this.numerator, this.denominator);
  return b;
}}, subtract:{value:function(a) {
  return a instanceof CTAT.Math.Fraction ? this.add(a.negative()) : "string" === typeof a ? (a = new CTAT.Math.Fraction(a), this.add(a.negative())) : this.add(-a.valueOf());
}}, multiply:{value:function(a) {
  a instanceof CTAT.Math.Fraction ? (a = new CTAT.Math.Fraction(this.numerator * a.numerator, this.denominator * a.denominator), a.reduce()) : "string" === typeof a ? (a = new CTAT.Math.Fraction(a), a = this.multiply(a)) : (a = new CTAT.Math.Fraction(a.valueOf() * this.numerator, this.denominator), a.reduce());
  return a;
}}, divide:{value:function(a) {
  return a instanceof CTAT.Math.Fraction ? this.multiply(a.reciprocal()) : "string" === typeof a ? (a = new CTAT.Math.Fraction(a), this.multiply(a.reciprocal())) : this.multiply(new CTAT.Math.Fraction(1, a.valueOf()));
}}, equals:{value:function(a) {
  return CTAT.Math.round(this.valueOf()) === CTAT.Math.round(a.valueOf());
}}, deepEquals:{value:function(a) {
  return a instanceof CTAT.Math.Fraction && this.numerator === a.numerator && this.denominator === a.denominator;
}}, clone:{value:function() {
  return new CTAT.Math.Fraction(this.numerator, this.denominator);
}}});
CTAT.Math.Fraction.FromString = function(a) {
  var b = new CTAT.Math.Fraction;
  b.setFromString(String(a));
  return b;
};
CTAT.Math.Fraction.FromNumber = function(a) {
  a = new CTAT.Math.Fraction(a);
  a.reduce();
  return a;
};
CTAT.Math.Fraction.Sum = function() {
  for (var a = new CTAT.Math.Fraction, b = 0;b < arguments.length;b++) {
    a = a.add(arguments[b]);
  }
  return a;
};
CTAT.Math.Fraction.Product = function() {
  for (var a = new CTAT.Math.Fraction(1, 1), b = 0;b < arguments.length;b++) {
    a = a.multiply(arguments[b]);
  }
  return a;
};
CTAT.Component.Base.UnitDisplay = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.SVG.call(this, a, b, d, f, g, c, e);
  var h = "1/2+1/4+(0*1/8)";
  this.setActionInput("SetPieces", h);
  var k = "#FF00FF", l = 1, q = "#FF00FF", p = .2, m = "black", w = 1;
  this.getPieceBorderColor = function() {
    return m;
  };
  this.setPieceBorderColor = function(a) {
    m = CTATGlobalFunctions.formatColor(a);
    return this;
  };
  this.getPieceBorderThickness = function() {
    return w;
  };
  this.setPieceBorderThickness = function(a) {
    w = parseInt(a);
    isNaN(w) && (w = 0);
    return this;
  };
  var t = [], z = this;
  this.generateClassname = function() {
    return this.getName() + " UnitPart";
  };
  this.getPieces = function() {
    return t;
  };
  var y = function(a) {
    if (a.hasAttributeNS(null, "data-selected")) {
      return CTATGlobalFunctions.toBoolean(a.getAttributeNS(null, "data-selected"));
    }
    a.setAttributeNS(null, "data-selected", !0);
    return !0;
  };
  this.getPiecesBySelected = function(a) {
    for (var b = this.getPieces(), c = [], e, d = 0;d < b.length;d++) {
      e = b[d], y(e) === a && c.push(e);
    }
    return c;
  };
  this.getSelectedPieces = this.getPiecesBySelected.bind(this, !0);
  this.getDeselectedPieces = this.getPiecesBySelected.bind(this, !1);
  this.getColor = function() {
    return k;
  };
  this.getColorAlpha = function() {
    return l;
  };
  this.getDeselectedColor = function() {
    return q;
  };
  this.getDeselectedColorAlpha = function() {
    return p;
  };
  this.setColor = function(a) {
    k = CTATGlobalFunctions.formatColor(a);
    a = this.getSelectedPieces();
    for (var b = 0;b < a.length;b++) {
      a[b].setAttributeNS(null, "fill", k);
    }
  };
  this.setColorAlpha = function(a) {
    l = Number(a);
    l = isNaN(l) ? 1 : l;
    a = this.getSelectedPieces();
    for (var b = 0;b < a.length;b++) {
    }
  };
  this.setDeselectedColor = function(a) {
    q = CTATGlobalFunctions.formatColor(a);
    a = this.getDeselectedPieces();
    for (var b = 0;b < a.length;b++) {
      a[b].setAttributeNS(null, "fill", q);
    }
  };
  this.setDeselectedColorAlpha = function(a) {
    p = Number(a);
    isNaN(p) && (p = .2);
    a = this.getDeselectedPieces();
    for (var b = 0;b < a.length;b++) {
    }
  };
  this.valueOf = function() {
    return this.evaluate();
  };
  this.getValue = function() {
    return h;
  };
  this.setValue = function(a) {
    h = String(a);
    this.setInput(h);
    this.clear();
    this.drawPieces();
    return h;
  };
  this.setParameterHandler("Value", this.setValue);
  this.data_ctat_handlers.value = function(a) {
    this.setValue(a);
  };
  this.drawPieces = function() {
  };
  this.evaluate = function() {
    return this.parseValue().reduce(function(a, b) {
      return b.selected ? a.add(b) : a;
    }, new CTAT.Math.Fraction);
  };
  this.numActive = function() {
    return this.getSelectedPieces().length;
  };
  this.parseValue = function() {
    var a = [];
    h.split("+").forEach(function(b) {
      var c = !0;
      -1 != b.search(/(\(\s*0\s*\*)|(\*\s*0\s*\))/) && (c = !1, b = b.replace(/(\(\s*0\s*\*)|(\*\s*0\s*\))/, ""), b = b.replace(/[() ]/g, ""));
      b = new CTAT.Math.Fraction(b);
      b.selected = c;
      0 < b && a.push(b);
      return b;
    });
    return a;
  };
  this.updateValue = function() {
    return h = this.getPieces().map(function(a) {
      return E(a.getAttributeNS(null, "data-value"), CTATGlobalFunctions.toBoolean(a.getAttributeNS(null, "data-selected")));
    }).join("+");
  };
  var r = function(a, b) {
    var c = CTATGlobalFunctions.toBoolean(b);
    CTATGlobalFunctions.toBoolean(a.getAttributeNS(null, "data-selected"));
    !0 === c ? a.setAttributeNS(null, "data-selected", !0) : a.setAttributeNS(null, "data-selected", !1);
  };
  this.clickHandler = function(a) {
    !0 === z.getEnabled() && (a = CTATGlobalFunctions.toBoolean(this.getAttributeNS(null, "data-selected")), r(this, !a), z.setActionInput("SetPieces", z.updateValue()), z.processAction());
  };
  this.updateSAI = function() {
    z.setActionInput("SetPieces", z.updateValue());
  };
  this.addPieceElem = function(a, b, c) {
    a.setAttributeNS(null, "data-selected", c);
    a.setAttributeNS(null, "data-value", b.toString());
    a.dataValue = b;
    this.getEnabled() && (a.style.cursor = "pointer");
    a.addEventListener("click", this.clickHandler);
    t.push(a);
  };
  var A = this.setEnabled;
  this.setEnabled = function(a) {
    A(a);
    t.forEach(function(b) {
      b.style.cursor = a ? "pointer" : "default";
    });
  };
  this.clear = function() {
    t = [];
  };
  var E = function(a, b) {
    var c = a.toString();
    !1 === b && (c = "(0*" + c + ")");
    return c;
  };
  this.AddPiece = function(a, b) {
    if (a) {
      var c = new CTAT.Math.Fraction(a);
      if (0 < CTAT.Math.round(c.valueOf())) {
        var e = h.split("+");
        e.push(E(c, b));
        z.setValue(e.join("+"));
      }
    }
  };
  this.AddToValue = function(a, b) {
    if (a) {
      var c = new CTAT.Math.Fraction(a);
      if (0 < CTAT.Math.round(c.valueOf())) {
        var e = h.split("+");
        e.push(E(c, b));
        h = e.join("+");
      }
    }
    return h;
  };
  var G = -1, F = function(a) {
    isNaN(a) && this.get_denominator();
    a = Math.max(a, 1);
    1 < G && (a = Math.min(a, G));
    return a;
  }.bind(this);
  this.set_max_denominator = function(a) {
    a = parseInt(a);
    isNaN(a) || (G = a);
  };
  this.set_denominator = function(a) {
    z.setHintHighlight(!1);
    var b = "string" === typeof a ? parseInt(a) : a;
    if (!isNaN(b) && (b = F(b), this.get_denominator() != a)) {
      var c = z.evaluate();
      z.clear();
      a = [];
      c.set_denominator(b);
      for (var e = new CTAT.Math.Fraction(1, b), d = Math.floor(c.numerator), f = b - d, g = 0;g < d;g++) {
        a.push(E(e, !0));
      }
      b = new CTAT.Math.Fraction(c.numerator - d, b);
      b.equals(0) || (a.push(E(b, !0)), a.push(E(e.subtract(b), !1)), f--);
      for (b = 0;b < f;b++) {
        a.push(E(e, !1));
      }
      this.setValue(a.join("+"));
      z.setActionInput("SetPieces", h);
      z.processAction();
      return h;
    }
  };
  this.get_denominator = function() {
    return t.reduce(function(a, b, c, e) {
      return Math.min(a, b.dataValue.denominator);
    }, Infinity);
  };
  this.change_denominator = function(a) {
    return this.set_denominator(this.get_denominator() + Number(a));
  };
  this.set_number_pieces = function(a) {
    z.setHintHighlight(!1);
    a = "string" === typeof a ? parseInt(a) : a;
    if (!isNaN(a)) {
      a = F(a);
      var b = z.numActive();
      z.clear();
      for (var c = [], e = new CTAT.Math.Fraction(1, a), d = 0;d < a;d++) {
        c.push(E(e, 0 < b)), b--;
      }
      this.setValue(c.join("+"));
      z.setActionInput("SetPieces", h);
      z.processAction();
      return h;
    }
  };
  this.change_number_pieces = function(a) {
    this.set_number_pieces(t.length + a);
  };
  this.SetPieces = function(a) {
    z.setValue(a);
  };
  var x = function(a) {
    if (0 !== Object.keys(H).length) {
      if (a instanceof CTAT.Component.Base.Tutorable) {
        if (a != z) {
          if (H.hasOwnProperty(a.getName())) {
            return H[a.getName()];
          }
          if (H.hasOwnProperty(a.getComponentGroup())) {
            return H[a.getComponentGroup()];
          }
        }
      } else {
        if (a instanceof CTATSAI) {
          if (a.getSelection() != z.getName() && H.hasOwnProperty(a.getSelection())) {
            return H[a.getSelection()];
          }
        } else {
          if (a instanceof String) {
            if (a != z.getName() && H.hasOwnProperty(a)) {
              return H[a];
            }
          } else {
            if (a instanceof Element && a != z.getComponent() && H.hasOwnProperty(a.id)) {
              return H[a.id];
            }
          }
        }
      }
    }
    return null;
  };
  document.addEventListener(CTAT.Component.Base.Tutorable.EventType.action, function(a) {
    var b = a.detail.sai;
    a = x(a.detail.component);
    b && null !== a && a(b);
  }, !1);
  var H = {};
  this.set_numerator = function(a) {
    return this.change_numerator(a - this.getSelectedPieces().length);
  };
  this.change_numerator = function(a) {
    0 !== a && (0 < a ? t.every(function(b) {
      !1 === y(b) && (r(b, !0), a--);
      return 0 < a;
    }) : (t.reverse(), t.every(function(b) {
      !0 === y(b) && (r(b, !1), a++);
      return 0 > a;
    }), t.reverse()));
  };
  a = function(a, b, c) {
    var e = parseInt(c.getInput());
    if (!isNaN(e)) {
      switch(c.getAction()) {
        case "ButtonPressed":
          a.call(this, e);
          break;
        case "Update":
        ;
        case "UpdateTextField":
        ;
        case "UpdateTextArea":
          b.call(this, e);
      }
    }
  };
  var u = {numerator:{items:[], callback:a.bind(this, this.change_numerator, this.set_numerator)}, denominator:{items:[], callback:a.bind(this, this.change_denominator, this.set_denominator)}, partition:{items:[], callback:a.bind(this, this.change_number_pieces, this.set_number_pieces)}, value:{items:[], callback:function(a) {
    switch(a.getAction()) {
      case "SetPieces":
      ;
      case "UpdateTextField":
      ;
      case "UpdateTextArea":
        z.setValue(a.getInput());
    }
  }}}, D = function() {
    H = {};
    var a, b = function(a, b) {
      b = b.trim();
      0 < b.length && (H[b] = a);
    }, c;
    for (c in u) {
      a = u[c], a.items.forEach(b.bind(this, a.callback));
    }
  };
  this.setNumeratorControllers = function(a) {
    u.numerator.items = a.split(/\s*;\s*/);
    D();
    return this;
  };
  this.setParameterHandler("NumeratorControllers", this.setNumeratorControllers);
  this.data_ctat_handlers["ctrl-numerator"] = this.setNumeratorControllers;
  this.setDenominatorControllers = function(a) {
    u.denominator.items = a.split(/\s*;\s*/);
    D();
    return this;
  };
  this.setParameterHandler("DenominatorControllers", this.setDenominatorControllers);
  this.data_ctat_handlers["ctrl-denominator"] = this.setDenominatorControllers;
  this.setPartitionControllers = function(a) {
    u.partition.items = a.split(/\s*;\s*/);
    D();
    return this;
  };
  this.setParameterHandler("PartitionControllers", this.setPartitionControllers);
  this.data_ctat_handlers["ctrl-partition"] = this.setPartitionControllers;
};
CTAT.Component.Base.UnitDisplay.prototype = Object.create(CTAT.Component.Base.SVG.prototype);
CTAT.Component.Base.UnitDisplay.prototype.constructor = CTAT.Component.Base.UnitDisplay;
CTAT.Geom = {};
CTAT.Geom.Point = {};
try {
  new DOMPoint;
} catch (a) {
  if (console.log("error on new DOMPoint():", a, typeof a), a instanceof ReferenceError || a instanceof TypeError) {
    DOMPoint = function(b, d, f, g) {
      this.z = this.y = this.x = 0;
      this.w = 1;
      if (b instanceof DOMPoint) {
        for (var c in b) {
          this[c] = b[c];
        }
      } else {
        this.x = b || 0, this.y = d || 0, this.z = f || 0, this.w = g || 1;
      }
    };
  }
}
CTAT.Geom.Point.useDOMMatrix = !0;
try {
  new DOMMatrix;
} catch (a) {
  a instanceof ReferenceError && (CTAT.Geom.Point.useDOMMatrix = !1);
}
CTAT.Geom.Point.add = function() {
  if (CTAT.Geom.Point.useDOMMatrix) {
    for (var a = new DOMMatrix, b, d = 0;d < arguments.length;d++) {
      b = arguments[d], a.translateSelf(b.x / b.w, b.y / b.w, b.z / b.w);
    }
    return a.transformPoint(new DOMPoint);
  }
  return Array.prototype.reduce.call(arguments, function(a, b) {
    for (var c in a) {
      "w" != c && 0 !== b[c] && (a[c] += b[c] / b.w);
    }
    return a;
  }, new DOMPoint);
};
Object.defineProperty(DOMPoint.prototype, "add", {enumerable:!1, value:function(a) {
  return CTAT.Geom.Point.useDOMMatrix ? (new DOMMatrix).translate(a.x / a.w, a.y / a.w, a.z / a.w).transformPoint(this) : CTAT.Geom.Point.add(this, a);
}});
CTAT.Geom.Point.angle = function(a, b) {
  return Math.acos(DOMPoint.dot(a, b) / (a.magnitude * b.magnitude));
};
CTAT.Geom.Point.angle_degrees = function(a, b) {
  return CTAT.Math.rad2deg(CTAT.Geom.Point.angle(a, b));
};
CTAT.Geom.Point.angle_between_2d = function(a, b) {
  return CTAT.Math.rad2deg(Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x));
};
Object.defineProperty(DOMPoint.prototype, "clone", {value:function() {
  return new DOMPoint(this);
}});
CTAT.Geom.Point.distance = function(a, b) {
  var d = CTAT.Geom.Point.add(a, CTAT.Geom.Point.scale(b, -1));
  return Math.sqrt(CTAT.Geom.Point.dot(d, d));
};
Object.defineProperty(DOMPoint.prototype, "distance", {value:function(a) {
  return CTAT.Geom.Point.distance(this, a);
}});
CTAT.Geom.Point.dot = function(a, b) {
  return (a.x * b.x + a.y * b.y + a.z * b.z) / (a.w * b.w);
};
CTAT.Geom.Point.equals = function(a, b) {
  var d = !0, f;
  for (f in a) {
    if (f in b ? "w" != f && (d &= a[f] / a.w == b[f] / b.w) : d = !1, !d) {
      break;
    }
  }
  return d;
};
CTAT.Geom.Point.interpolate = function(a, b, d) {
  return CTAT.Geom.Point.add(a.scale(d), b.scale(1 - d));
};
Object.defineProperty(DOMPoint.prototype, "magnitude", {enumerable:!1, get:function() {
  return CTAT.Math.round(Math.sqrt(CTAT.Geom.Point.dot(this, this)));
}});
Object.defineProperty(DOMPoint.prototype, "normalize", {value:function(a) {
  return this.scale((a ? a : 1) / this.magnitude);
}});
CTAT.Geom.Point.scale = function(a, b) {
  if (CTAT.Geom.Point.useDOMMatrix) {
    return (new DOMMatrix).scale(b).transformPoint(a);
  }
  var d = new DOMPoint(a), f;
  for (f in d) {
    "w" != f && (d[f] = CTAT.Math.round(a[f] * b));
  }
  return d;
};
Object.defineProperty(DOMPoint.prototype, "scale", {value:function(a) {
  return CTAT.Geom.Point.scale(this, a);
}});
CTAT.Geom.Point.polar = function(a, b) {
  return new DOMPoint(CTAT.Math.round(a * Math.cos(b)), CTAT.Math.round(a * Math.sin(b)));
};
CTAT.Geom.Point.is_on_line = function(a, b, d) {
  return 1E-4 > Math.abs(a.distance(d) + b.distance(d) - a.distance(b));
};
CTAT.Geom.Point.circle_intersection = function(a, b, d, f) {
  b = b.add(a.scale(-1)).normalize();
  var g = CTAT.Geom.Point.dot(b, d.add(a.scale(-1))), c = a.add(b.scale(g));
  d = CTAT.Geom.Point.distance(d, c);
  return d < f ? (f = Math.sqrt(f * f - d * d), [a.add(b.scale(g - f)), a.add(b.scale(g + f))]) : d == f ? [c] : [];
};
CTAT.Geom.Point.to2DString = function(a, b) {
  var d = [a.x / a.w, a.y / a.w].join();
  b && (d = "(" + d + ")");
  return d;
};
var CTATPieChart = function(a, b, d, f, g) {
  CTAT.Component.Base.UnitDisplay.call(this, "CTATPieChart", "aPieChart", a, b, d, f, g);
  var c = 3, e = 3, h = this, k, l, q, p = null, m = CTATGlobals.NameSpace.svg;
  this.init = function() {
    this.initSVG();
    this.baseGroup = document.createElementNS(m, "g");
    this.getComponent().appendChild(this.baseGroup);
    this.getComponent().classList.add("CTAT-pie-chart");
    k = document.createElementNS(m, "filter");
    k.id = this.genName("Shadow");
    l = "#" + k.id;
    q = "url(" + l + ")";
    k.setAttributeNS(null, "width", "200%");
    k.setAttributeNS(null, "height", "200%");
    p = document.createElementNS(m, "feOffset");
    p.setAttributeNS(null, "in", "SourceAlpha");
    p.setAttributeNS(null, "result", "offOut");
    p.setAttributeNS(null, "dx", e);
    p.setAttributeNS(null, "dy", e);
    k.appendChild(p);
    var a = document.createElementNS(m, "feGaussianBlur");
    a.setAttributeNS(null, "in", "offOut");
    a.setAttributeNS(null, "result", "blurOut");
    a.setAttributeNS(null, "stdDeviation", 4);
    k.appendChild(a);
    a = document.createElementNS(m, "feBlend");
    a.setAttributeNS(null, "in", "SourceGraphic");
    a.setAttributeNS(null, "in2", "blurOut");
    a.setAttributeNS(null, "mode", "normal");
    k.appendChild(a);
    this.getComponent().getElementsByTagName("defs")[0].appendChild(k);
    0 < e && this.baseGroup.setAttributeNS(null, "filter", q);
    this.drawPieces();
    this.addComponentReference(this, this.getDivWrap());
    this.component.addEventListener("focus", this.processFocus);
  };
  this.drawPieces = function() {
    if (this.baseGroup) {
      var a = window.getComputedStyle(this.getComponent()), a = parseFloat(a.getPropertyValue("stroke-width")), b = this.getBoundingBox(), d = Math.min(b.width / 2, b.height / 2) - (a + e + 4), f = new DOMPoint(b.width / 2, b.height / 2), a = this.parseValue(), g = document.createDocumentFragment();
      a.reduce(function(a, b, e, k) {
        if (1 <= b.valueOf()) {
          e = document.createElementNS(m, "circle"), e.classList.add("CTAT-pie-chart--piece"), e.cx.baseVal.value = f.x, e.cy.baseVal.value = f.y, e.r.baseVal.value = d, this.addPieceElem(e, b, b.selected), g.appendChild(e);
        } else {
          e = document.createElementNS(m, "path");
          e.classList.add("CTAT-pie-chart--piece");
          g.appendChild(e);
          window.getComputedStyle(e);
          var l = 2 * Math.PI * a.valueOf();
          k = f.add(CTAT.Geom.Point.polar(d, l));
          b.reduce();
          var q = f.add(CTAT.Geom.Point.polar(d, 2 * Math.PI * b.valueOf() + l)), w = f.clone();
          if (0 < c && c < d) {
            l = CTAT.Geom.Point.polar(c, l + Math.PI * b.valueOf());
            w = w.add(l);
            k = k.add(l);
            var p = function(a, b, c) {
              return a.distance(b) < a.distance(c) ? b : c;
            };
            k = CTAT.Geom.Point.circle_intersection(w, k, f, d).reduce(p.bind(this, k));
            q = q.add(l);
            q = CTAT.Geom.Point.circle_intersection(w, q, f, d).reduce(p.bind(this, q));
          }
          l = CTAT.Geom.Point.to2DString;
          w = "M " + l(w);
          p = new DOMPoint(d, d);
          w += " L " + l(k);
          w += " A " + l(p) + " 0 " + (.5 < b.valueOf() ? 1 : 0) + ",1 " + l(q);
          e.setAttributeNS(null, "d", w + " Z");
          h.addPieceElem(e, b, b.selected);
        }
        return a.add(b);
      }, new CTAT.Math.Fraction);
      this.baseGroup.innerHTML = "";
      this.baseGroup.appendChild(g);
    }
  };
  this.getExplode = function() {
    return c;
  };
  this.getDropShadowDistance = function() {
    return e;
  };
  this.setExplode = function(a) {
    a = Number(a);
    if (!isNaN(a)) {
      var b = a !== c;
      c = a;
      b && this.drawPieces();
    }
    return this;
  };
  this.setStyleHandler("explode", this.setExplode);
  this.data_ctat_handlers.explode = function(a) {
    this.setExplode(a);
  };
  this.setDropShadowDistance = function(a) {
    e = parseInt(a);
    e = isNaN(e) ? 0 : e;
    p && (p.setAttributeNS(null, "dx", e), p.setAttributeNS(null, "dy", e), 0 >= e && this.baseGroup ? this.baseGroup.removeAttributeNS(null, "filter") : this.baseGroup.hasAttributeNS(null, "filter") || this.baseGroup.setAttributeNS(null, "filter", q));
  };
  this.data_ctat_handlers["shadow-distance"] = function(a) {
    this.setDropShadowDistance(a);
  };
};
CTATPieChart.prototype = Object.create(CTAT.Component.Base.UnitDisplay.prototype);
CTATPieChart.prototype.constructor = CTATPieChart;
CTAT.ComponentRegistry.addComponentType("CTATPieChart", CTATPieChart);
var CTATSubmitButton = function(a, b, d, f, g) {
  CTATButton.call(this, a, b, d, f, g);
  this.setClassName("CTATSubmitButton");
  var c = this, e = {};
  this.setParameterHandler("target_components", function(a) {
    a = String(a).split(/\s*;\s*/);
    e = {};
    a.forEach(function(a) {
      e[a] = 1;
    });
    return this;
  });
  this.data_ctat_handlers.target = function(a) {
    e = {};
    String(a).split(/\s*[;,]\s*/).forEach(function(a) {
      e[a] = 1;
    });
  };
  var h = this.init;
  this.init = function() {
    h();
    this.setParameter("tutorComponent", CTAT.Component.Base.Tutorable.Options.DO_NOT_TUTOR);
    this.component.addEventListener("focus", this.processFocus);
  };
  var k = function(a) {
    return 0 === Object.keys(e).length ? !1 : a === c ? !1 : a instanceof CTAT.Component.Base.Tutorable ? e.hasOwnProperty(a.getName()) || e.hasOwnProperty(a.getComponentGroup()) : a instanceof CTATSAI ? a.getSelection() != c.getName() && e.hasOwnProperty(a.getSelection()) : a instanceof String ? a != c.getName() && e.hasOwnProperty(a) : a instanceof Element ? a != c.getComponent() && (e.hasOwnProperty(a.id) || e.hasOwnProperty(a.getAttribute("name"))) : !1;
  };
  a = CTAT.Component.Base.Tutorable.EventType;
  document.addEventListener(a.correct, function(a) {
    a.detail.sai && k(a.detail.component) && c.isNotGraded() && c.setCorrect();
  }, !1);
  document.addEventListener(a.incorrect, function(a) {
    a.detail.sai && k(a.detail.component) && (c.setIncorrect(), c.setEnabled(!0));
  }, !1);
  document.addEventListener(a.ungrade, function(a) {
    (a = a.detail.component) && k(a) && c.setNotGraded();
  }, !1);
  document.addEventListener(a.highlight, function(a) {
    var b = a.detail.component;
    b && k(b) && c.setHintHighlight(a.detail.isHighlighted);
  }, !1);
  this.processClick = function(a) {
    if (!0 === c.getEnabled()) {
      for (var b in e) {
        a = CTATShellTools.findComponent(b), null !== a && 0 < a.length && (a = a[0], a instanceof CTAT.Component.Base.Tutorable ? a.getEnabled() && a.grade(this) : this.ctatdebug("Invalid target component: " + a));
      }
    }
  };
};
CTATSubmitButton.prototype = Object.create(CTATButtonBasedComponent.prototype);
CTATSubmitButton.prototype.constructor = CTATSubmitButton;
CTAT.ComponentRegistry.addComponentType("CTATSubmitButton", CTATSubmitButton);
var CTATGroupingComponent = function(a, b, d, f, g) {
  CTAT.Component.Base.Tutorable.call(this, "CTATGroupingComponent", "__undefined__", a, b, d, f, g);
  var c = this;
  c.isTabIndexable = !1;
  var e = null;
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    c.addCSSAttribute("z-index", CTATGlobalFunctions.gensym.z_index());
    c.setInitialized(!0);
  };
  this.postProcess = function() {
    c.ctatdebug("postProcess ()");
    var a = this.getGrDescription().parameters, b;
    for (b in a) {
      var d = a[b];
      c.ctatdebug("Checking parameter name: " + b);
      "TargetMovieClip" == b && (c.ctatdebug("Loading sub element: " + d.trim() + " ..."), d = findMovieClip(d), null !== d && (c.ctatdebug("Found target movieclip, storing for future reference ..."), e = d));
    }
  };
  this.setTempLock = function(a) {
    c.ctatdebug("setTemplock (" + a + ")");
    null === e && c.ctatdebug("Error: no target MovieClip assigned to this grouping component");
    return !0;
  };
  this.move = function(a, b) {
    c.ctatdebug("move (" + a + "," + b + ")");
    null !== e ? (e.getDivWrapper().style.left = a, e.getDivWrapper().style.top = b) : c.ctatdebug("Error: no target MovieClip assigned to this grouping component");
  };
  this.size = function(a, b) {
    this.setSize(a, b);
  };
  this.setSize = function(a, b) {
    c.ctatdebug("setSize (" + a + "," + b + ")");
    null !== e ? (e.getDivWrapper().style.width = a + "px", e.getDivWrapper().style.height = b + "px") : c.ctatdebug("Error: no target MovieClip assigned to this grouping component");
  };
  this.SetVisible = function(a) {
    a = CTATGlobalFunctions.toBoolean(a);
    c.ctatdebug("SetVisible (" + a + ")", "graphics");
    null !== e ? !0 === a ? e.getDivWrapper().style.display = "block" : e.getDivWrapper().style.display = "none" : c.ctatdebug("Error: no target MovieClip assigned to this grouping component");
    c.ctatdebug("SetVisible () Done");
  };
  this.setVisible = function(a) {
    var b = CTATGlobalFunctions.toBoolean(a);
    c.ctatdebug("setVisible (" + a + ")", "graphics");
    null !== e ? !0 === b ? e.getDivWrapper().style.display = "block" : e.getDivWrapper().style.display = "none" : c.ctatdebug("Error: no target MovieClip assigned to this grouping component");
  };
  this.configFromDescription();
};
CTATGroupingComponent.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATGroupingComponent.prototype.constructor = CTATGroupingComponent;
CTAT.ComponentRegistry.addComponentType("CTATComponentContainerReference", CTATGroupingComponent);
var CTATSkillWindow = function(a, b, d, f, g) {
  CTAT.Component.Base.Graphical.call(this, "CTATSkillWindow", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(240);
  this.setDefaultHeight(140);
  var c = this;
  c.isTabIndexable = !1;
  var e = 150;
  this.setSkillBarWidth = function(a) {
    e = parseInt(a);
    isNaN(e) && (e = 150);
  };
  this.setStyleHandler("SkillBarWidth", this.setSkillBarWidth);
  this.setStyleHandler("inspSkillBarWidth", this.setSkillBarWidth);
  this.setSkillBarBorderColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setStyleHandler("SkillBarBorderColor", this.setSkillBarBorderColor);
  this.setStyleHandler("inspSkillBarBorderColor", this.setSkillBarBorderColor);
  this.setSkillBarColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setStyleHandler("SkillBarColor", this.setSkillBarColor);
  this.setStyleHandler("inspSkillBarColor", this.setSkillBarColor);
  this.setSkillBarThresholdColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setStyleHandler("SkillMasteryColor", this.setSkillBarThresholdColor);
  this.setStyleHandler("inspSkillBarThresholdColor", this.setSkillBarThresholdColor);
  this.setBorderColor("#408080");
  this.setStyleHandler("OuterBorderColor", this.setBorderColor);
  var h = null;
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.configFromDescription();
  this.getAlpha = function() {
    return alpha;
  };
  this.setAlpha = function(a) {
    alpha = a;
  };
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.setInitialized(!0);
    h = document.createElement("div");
    h.classList.add("CTAT-skill-window");
    this.setComponent(h);
    this.getDivWrap().appendChild(h);
    this.drawComponent();
    this.component.addEventListener("focus", this.processFocus);
  };
  this.assignSkillSet = function(a) {
    skillSet = a;
    this.drawComponent();
  };
  this.updateSkillSet = function(a) {
    if (skillSet) {
      c.ctatdebug("updateSkillSet (" + a.getSkillSet().length + ")");
      a = a.getSkillSet();
      for (var b = 0;b < a.length;b++) {
        var e = a[b];
        c.ctatdebug("Updating skill " + e.getSkillName() + " to level: " + e.getLevel() + " ...");
        skillSet.setSkillLevel(e.getSkillName(), e.getLevel(), 1);
      }
      this.drawComponent();
    } else {
      c.ctatdebug("Error: updateSkillSet () no initial skill set given, can't update");
    }
  };
  this.drawComponent = function() {
    c.ctatdebug("drawComponent ()");
    if (null === skillSet) {
      ctatdebug("Info: no skillSet object available, bumping out");
    } else {
      var a = skillSet.getSkillSet();
      if (null === a) {
        c.ctatdebug("Error: list of skills is null in skills object");
      } else {
        if (0 >= a.length) {
          c.ctatdebug("Error: list of skills is 0 length");
        } else {
          for (var b = document.createDocumentFragment(), e = 0;e < a.length;e++) {
            var d = a[e];
            c.ctatdebug("Drawing skill " + e + " " + d.getDisplayName() + " level: " + d.getLevel() + " ...");
            var f = document.createElement("div");
            f.classList.add("CTAT-skill-window--bar");
            var g = document.createElement("div"), t = d.getLevel();
            .95 > t ? g.classList.add("CTAT-skill-window--bar--nonmastered") : g.classList.add("CTAT-skill-window--bar--mastery");
            g.style.width = .95 < t ? "100%" : 100 * t + "%";
            f.appendChild(g);
            b.appendChild(f);
            f = document.createElement("div");
            f.textContent = d.getDisplayName() || "no-name";
            f.classList.add("CTAT-skill-window--label");
            b.appendChild(f);
            b.appendChild(document.createElement("br"));
          }
          h.innerHTML = "";
          h.appendChild(b);
        }
      }
    }
  };
};
CTATSkillWindow.prototype = Object.create(CTAT.Component.Base.Graphical.prototype);
CTATSkillWindow.prototype.constructor = CTATSkillWindow;
CTAT.ComponentRegistry.addComponentType("CTATSkillWindow", CTATSkillWindow);
var CTATDoneButton = function(a, b, d, f, g) {
  CTAT.Component.Base.Clickable.call(this, "done", "CTATDoneButton", a, b, d, f, g);
  this.setName("done");
  this.setClassName("CTATDoneButton");
  this.setText(CTATGlobals.languageManager.getString("DONE"));
  this.setStyleHandler("BackgroundColor", null);
  this.setStyleHandler("TextAlign", null);
  var c = this;
  this.init = function() {
    this.setInitialized(!0);
    var a = document.createElement("button");
    a.classList.add("unselectable");
    a.classList.add("CTAT-done-button");
    this.setComponent(a);
    var b = document.createElement("div");
    b.style.pointerEvents = "none";
    b.textContent = "\u2714";
    b.style.position = "relative";
    b.style.top = "-5px";
    a.appendChild(b);
    this.getText() ? (b.style.fontSize = Math.floor(2 * this.getHeight() / 3) + "px", b.style.height = "60%", b = document.createElement("div"), b.style.pointerEvents = "none", b.textContent = this.getText(), a.appendChild(b)) : (b.style.fontSize = this.getHeight() + "px", b.style.height = null);
    this.getDivWrap().appendChild(a);
    a.addEventListener("mouseenter", function(a) {
      a.target.classList.add("CTAT-done-button--hover");
    });
    a.addEventListener("mouseleave", function(a) {
      a.target.classList.remove("CTAT-done-button--hover");
      a.target.classList.remove("CTAT-done-button--clicked");
    });
    a.addEventListener("mousedown", function(a) {
      a.target.classList.add("CTAT-done-button--clicked");
    });
    a.addEventListener("mouseup", function(a) {
      a.target.classList.remove("CTAT-done-button--clicked");
    });
    a.addEventListener("click", function(a) {
      a.target.classList.remove("CTAT-done-button--clicked");
    });
    a.addEventListener("click", this.processClick);
    a.addEventListener("focus", this.processFocus);
  };
  this.processClick = function(a) {
    c.getEnabled() && commShell && commShell.processDone();
  };
};
CTATDoneButton.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATDoneButton.prototype.constructor = CTATDoneButton;
CTAT.ComponentRegistry.addComponentType("CTATDoneButton", CTATDoneButton);
var CTATPlayButton = function() {
  function a() {
    c.setFillColor("black");
    c.drawTriangleFilled();
    g.setFillColor("rgb(36, 85, 00)");
    g.drawCircleFilled();
  }
  function b() {
    c.setFillColor("white");
    c.drawTriangleFilled();
    g.setFillColor("green");
    g.drawCircleFilled();
  }
  function d() {
    f.removeComponent();
    getSafeElementById(ctatcontainer).removeChild(h);
    initTutor();
  }
  CTATBase.call(this, "CTATPlayButton", "__undefined__");
  var f = null, g = null, c = null, e = null, h = null;
  (function() {
    var a = getSafeElementById(ctatcontainer);
    h = document.createElement("div");
    h.id = "ctatdivPlayTutor";
    h.width = a.width;
    h.height = a.height;
    h.setAttribute("style", "width: " + a.width + "px; height: " + a.height + "px; left: 0px; top: 0px; position:absolute");
    getSafeElementById("container").appendChild(h);
  })();
  (function() {
    f = new CTATCanvasComponent;
    var k = h.height / 3;
    e = new CTATShape("PlayTutor", "play background", 0, 0, h.width + 1, h.height + 1);
    e.addPoint(0, 0);
    e.setFillColor("rgb(66, 0, 66)");
    e.drawRectangleFilled();
    g = new CTATShape("PlayTutor", "play circle", h.width / 2 - k, h.height / 2 - k, 2 * k, 2 * k);
    g.addPoint(0, 0);
    g.setFillColor("green");
    g.setRadius(k);
    g.drawCircleFilled();
    c = new CTATShape("PlayTutor", "play triangle", g.getXOffset() + .25 * g.getWidth() - 5, g.getYOffset() + .25 * g.getHeight() - 5, g.getWidth() - .25 * g.getWidth(), .6 * g.getHeight());
    c.addPoint(0, 0);
    c.addPoint(0, c.getHeight());
    c.addPoint(c.getWidth(), c.getHeight() / 2);
    c.setFillColor("white");
    c.drawTriangleFilled();
    f.addShape(e);
    f.addShape(g);
    f.addShape(c);
    g.addEventListener("mouseover", a);
    g.addEventListener("mouseout", b);
    c.addEventListener("mouseover", a);
    c.addEventListener("mouseout", b);
    c.addEventListener("click", d);
    g.addEventListener("click", d);
  })();
};
CTATPlayButton.prototype = Object.create(CTATBase.prototype);
CTATPlayButton.prototype.constructor = CTATPlayButton;
var CTATMobileTutorHandler = function(a, b) {
  CTATBase.call(this, "CTATMobileTutorHandler", "mobiletutorhandler");
  this.ctatdebug("CTATMobileTutorHandler ()");
  var d = "", f = b ? b : "disabled", g = !1;
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && (g = !0);
  this.error = function(a) {
    this.ctatdebug(a);
    alert(a);
  };
  this.processOrientationChange = function(a) {
    this.ctatdebug("processOrientationChange (" + a + ")");
  };
  this.getEnabled = function() {
    return "disabled" == f || "auto" == f && 0 == g ? !1 : !0;
  };
  this.processTextFocus = function(a, b, h, k, l) {
    this.ctatdebug("processTextFocus (" + a + "," + b + "," + h + "," + k + "," + l + ")");
    "disabled" == f || "auto" == f && 0 == g || (d = "", this.manipulateKeyboard());
  };
  this.processEnter = function() {
    this.ctatdebug("processEnter ()");
    if ("disabled" != f && ("auto" != f || 0 != g)) {
      var b = getSafeElementById(a);
      if (null != b) {
        try {
          b.processExternalEnter(), this.ctatdebug("Successfully called AS3 method");
        } catch (e) {
          this.ctatdebug("Error description: " + e.message);
        }
      } else {
        this.ctatdebug("Error: unable to obtain reference to swf object");
      }
    }
  };
  this.setText = function(b) {
    this.ctatdebug("setText (" + b + ")");
    if ("disabled" != f && ("auto" != f || 0 != g)) {
      if (null != CTATGlobals.selectedTextInput) {
        this.ctatdebug("Attempting to call HTML5 method on text object ...");
        var e = CTATGlobals.selectedTextInput.getText();
        CTATGlobals.selectedTextInput.setText(e + b);
      } else {
        if (this.ctatdebug("Attempting to call AS3 method ..."), e = getSafeElementById(a), null != e) {
          try {
            d += b, this.ctatdebug(d), e.processExternalKeyboard(d), this.ctatdebug("Successfully called AS3 method");
          } catch (h) {
            this.ctatdebug("Error description: " + h.message);
          }
        } else {
          this.ctatdebug("Error: unable to obtain reference to swf object");
        }
      }
    }
  };
  this.manipulateKeyboard = function() {
    this.ctatdebug("manipulateKeyboard()");
    if ("disabled" != f && ("auto" != f || 0 != g)) {
      this.hideKeyboard();
      var a = getSafeElementById("keyboardUI");
      a && (a.style.visibility = "visible");
    }
  };
  this.hideKeyboard = function() {
    document.activeElement.blur();
    var a = getSafeElementById("input");
    a && a.blur();
  };
  this.hideCustomKeyboard = function() {
    getSafeElementById("keyboardUI").style.visibility = "visible";
  };
};
CTATMobileTutorHandler.prototype = Object.create(CTATBase.prototype);
CTATMobileTutorHandler.prototype.constructor = CTATMobileTutorHandler;
function processTextFocus(a, b, d, f, g) {
  mobileAPI.processTextFocus(a, b, d, f, g);
}
function processFocusOut() {
  closeK();
}
;var CTATMovieClip = function(a, b, d, f, g) {
  CTATBase.call(this, "CTATMovieClip", a);
  var c = CTATGlobalFunctions.gensym.z_index(), e = CTATGlobalFunctions.gensym.div_id(), h = CTATGlobalFunctions.gensym.z_index();
  CTATGlobalFunctions.gensym.div_id();
  var k = [], l = this, q = null;
  this.wrapComponent = function(a) {
    q = document.createElement("div");
    q.setAttribute("id", e);
    q.setAttribute("name", this.getName());
    q.setAttribute("style", "z-index: " + c);
    q.setAttribute("width", f + "px");
    q.setAttribute("height", g + "px");
    q.setAttribute("style", "border: 0px; position: absolute; left:" + b + "px; top:" + d + "px; z-index:" + h + ";");
    a.appendChild(q);
    return q;
  };
  this.getDivWrapper = function() {
    return q;
  };
  this.addComponent = function(a) {
    l.ctatdebug("addComponent (" + a + ")");
    k.push(a);
  };
  this.isRegistered = function(a) {
    for (var b = 0;b < k.length;b++) {
      if (k[b] == a) {
        return !0;
      }
    }
    return !1;
  };
};
CTATMovieClip.prototype = Object.create(CTATBase.prototype);
CTATMovieClip.prototype.constructor = CTATMovieClip;
var CTATTextBasedComponent = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.Tutorable.call(this, a, b, d, f, g, c, e);
  var h = this, k = "", l = !0, q = 255, p = !0;
  this.setAction("UpdateTextField");
  this.backgrade = !0;
  this.assignText = function(a) {
    k = a;
    this.setInput(a);
  };
  this.UpdateTextArea = this.UpdateTextField = function(a) {
    this.setText(a);
  };
  this.setTabOnEnter = function(a) {
    l = CTATGlobalFunctions.toBoolean(a);
  };
  this.setStyleHandler("TabOnEnter", this.setTabOnEnter);
  this.data_ctat_handlers["tab-on-enter"] = this.setTabOnEnter;
  this.assignEditable = function(a) {
    p = a;
  };
  this.setMaxCharacters = function(a) {
    q = a;
  };
  this.setStyleHandler("MaxCharacters", this.setMaxCharacters);
  this.getText = function() {
    return k;
  };
  this.getEditable = function() {
    return p;
  };
  this.getTabOnEnter = function() {
    return l;
  };
  this.getMaxCharacters = function() {
    return q;
  };
  this.setEditable = function(a) {
    h.assignEditable(CTATGlobalFunctions.toBoolean(a));
    null !== h.getComponent() && (!0 === h.getEditable() ? h.getComponent().contentEditable = "true" : h.getComponent().contentEditable = "false");
  };
  this.setStyleHandler("Enabled", this.setEditable);
  this.setEnabled = function(a) {
    h.assignEnabled(a);
    null !== h.getComponent() && (h.getComponent().disabled = !a, this.setEditable(a));
  };
  var m = this.processAction.bind(this);
  this.processAction = function(a, b) {
    this.updateSAI();
    CTATGlobalFunctions.isBlank(this.getValue()) || m(a, b);
  };
  this.processKeypress = function(a) {
    h.ctatdebug("processKeypress ()");
    var b = a.target.getAttribute("id");
    h.ctatdebug(b);
    var c = h.getComponentFromID(b);
    if (null === c) {
      h.ctatdebug("Error: component reference is null");
    } else {
      switch(h.ctatdebug(c.getName() + " keydown (" + ("google" == CTATConfig.platform ? 0 : window.event ? window.event.keyCode : a.which) + " -> " + a.eventPhase + ") ID: " + b), a.which) {
        case 37:
          h.ctatdebug("left arrow key pressed!");
          break;
        case 39:
          h.ctatdebug("right arrow key pressed!");
          break;
        case 13:
          return l ? (h.component.blur(), CTATGlobals.Tab.Focus = null, h.processAction(), !1) : !0;
        case 0:
          h.component.blur();
          CTATGlobals.Tab.Focus = null;
          h.processAction();
          break;
        default:
          h.ctatdebug('Key pressed! "' + a.which + '"');
      }
    }
  };
  this.updateSAI = function() {
    this.setInput(this.getValue());
  };
};
CTATTextBasedComponent.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATTextBasedComponent.prototype.constructor = CTATTextBasedComponent;
var CTATTextArea = function(a, b, d, f, g) {
  CTATTextBasedComponent.call(this, "CTATTextArea", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(44);
  var c = this, e = null, h = null;
  this.setAction("UpdateTextArea");
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.init = function() {
    e = document.createElement("textarea");
    a && (e.name = a.name);
    e.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    e.classList.add("CTAT-text");
    e.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    this.getDivWrap() && $(this.getDivWrap()).attr("maxlength") && (e.maxlength = $(this.getDivWrap()).attr("maxlength"));
    this.getDivWrap() && $(this.getDivWrap()).attr("rows") && (e.rows = $(this.getDivWrap()).attr("rows"));
    this.getDivWrap() && $(this.getDivWrap()).attr("cols") && (e.cols = $(this.getDivWrap()).attr("cols"));
    c.setComponent(e);
    this.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    e.value = this.getText();
    c.setInitialized(!0);
    c.addComponentReference(c, e);
    c.getDivWrap().appendChild(e);
    $(e).keypress(c.processKeypress);
    e.addEventListener("focus", c.processFocus);
    $(e).on("input", function(a) {
      c.setNotGraded();
    });
  };
  this.processBlur = function(a) {
    c.processAction();
  };
  this.setCellContainer = function(a) {
    h = a;
  };
  this.getCellContainer = function() {
    return h;
  };
  this.setText = function(a) {
    c.ctatdebug("setText (" + a + ")");
    c.assignText(a);
    e.value = a;
  };
  this.reset = function() {
    c.configFromDescription();
    c.processSerialization();
    e.value = "";
  };
  this.setStyleHandler("DrawBorder", function(a) {
    c.setShowBorder(a);
    c.addCSSAttribute("border-width", c.getShowBorder() ? 1 : 0);
  });
  this.setStyleHandler("inspBackgroundColor", this.setBackgroundColor);
  this.setStyleHandler("showBorder", this.setShowBorder);
};
CTATTextArea.prototype = Object.create(CTATTextBasedComponent.prototype);
CTATTextArea.prototype.constructor = CTATTextArea;
CTAT.ComponentRegistry.addComponentType("CTATTextArea", CTATTextArea);
var CTATTable = function(a, b, d, f, g) {
  CTAT.Component.Base.Graphical.call(this, "CTATTable", "__undefined__", a, b, d, f, g);
  var c = this;
  c.isTabIndexable = !1;
  var e = null, h = !1;
  this.setParameterHandler("FirstRowIsHeader", function(a) {
    h = CTATGlobalFunctions.stringToBoolean(a);
  });
  this.setParameterHandler("PasteSingleSAI", function(a) {
    CTATGlobalFunctions.stringToBoolean(a);
  });
  this.setParameterHandler("SpreadSheetMode", function(a) {
    CTATGlobalFunctions.stringToBoolean(a);
  });
  var k = 2;
  this.set_row_count = function(a) {
    k = parseInt(a);
  };
  this.setStyleHandler("num_rows", this.set_row_count);
  this.data_ctat_handlers.num_cols = this.set_row_count;
  this.set_col_count = function(a) {
    k = parseInt(a);
  };
  this.setStyleHandler("num_cols", this.set_col_count);
  this.data_ctat_handlers.num_rows = this.set_col_count;
  var l = "";
  this.setStyleHandler("HeaderHeight", function(a) {
    parseInt(a);
  });
  this.setStyleHandler("inspBackgroundColor", this.setBackgroundColor);
  this.setStyleHandler("HeaderBackground", function(a) {
  });
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    l = CTATGlobalFunctions.gensym.div_id();
    e = document.createElement("table");
    e.setAttribute("id", l);
    e.classList.add("resizable");
    e.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    c.setComponent(e);
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.setInitialized(!0);
    c.addComponentReference(c, e);
    c.getDivWrap().appendChild(e);
    c.render();
  };
  this.adjustTableContents = function() {
    c.ctatdebug("adjustTableContents()");
    var a = null, b = null, d = null, b = 0;
    if (h) {
      a = e.createTHead();
      b = a.insertRow();
      for (a = 0;2 > a;a++) {
        d = document.createElement("th"), d.classList.add("CTAT-gen-component"), b.appendChild(d);
      }
      b = 1;
    }
    for (var a = e.createTBody(), f = b;f < k;f++) {
      for (var b = a.insertRow(), g = 0;2 > g;g++) {
        d = b.insertCell(), d.classList.add("CTAT-gen-component");
      }
    }
    for (a = 0;a < e.rows.length;a++) {
      for (b = e.rows[a], d = 0;d < b.cells.length;d++) {
        var l = b.cells[d], y = c.getName() + ".R" + a + "C" + d;
        CTATShellTools.findComponent(y).forEach(function(a) {
          var b = c.getGrDescription();
          b.name = y;
          a.setCellContainer(l);
          a.setGrDescription(b);
          a = a.getDivWrap();
          null != a ? (a.parentNode.removeChild(a), a.style.position = null, a.style.top = null, a.style.left = null, l.appendChild(a)) : c.ctatdebug("Error: unable to get div wrapper from component");
        });
      }
    }
  };
};
CTATTable.prototype = Object.create(CTAT.Component.Base.Graphical.prototype);
CTATTable.prototype.constructor = CTATTable;
CTAT.ComponentRegistry.addComponentType("CTATTable", CTATTable);
var CTATAudioButton = function(a, b, d, f, g) {
  CTATButtonBasedComponent.call(this, "CTATAudioButton", "audiobutton", a, b, d, f, g);
  var c = this;
  c.setActionInput("play", "-1");
  var e = null, h = "";
  this.setParameterHandler("SoundFile", function(a) {
    h = a;
  });
  this.data_ctat_handlers.src = function(a) {
    h = a;
  };
  this.ctatdebug("CTATAudioButton (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    c.setSAI(c.getName(), "ButtonPressed", "-1");
    var a = document.createElement("button");
    a.value = c.getName();
    a.name = c.getName();
    a.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    a.setAttribute("onkeypress", "return noenter(event)");
    a.textContent = c.getText();
    a.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    c.setInitialized(!0);
    c.setComponent(a);
    c.addComponentReference(c, a);
    c.getDivWrap().appendChild(a);
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.addSafeEventListener("click", c.processClick, a);
    c.addSafeEventListener("focus", c.processFocus, a);
    e = document.createElement("audio");
    e.addEventListener("load", function() {
      c.ctatdebug("Audio loaded");
      c.setEnabled(!0);
    }, !0);
  };
  this.reset = function() {
    c.configFromDescription();
    c.processSerialization();
    c.setEnabled(!0);
  };
  this.ButtonPressed = function() {
    c.ctatdebug("ButtonPressed ()");
  };
  this.processClick = function(a) {
    c.ctatdebug("processClick (" + a.currentTarget.getAttribute("id") + " -> " + a.eventPhase + ")");
    !0 === c.getEnabled() ? (c.ctatdebug("Playing audio file: " + h), e.setAttribute("src", h), e.load(), e.play(), c.processAction()) : c.ctatdebug("Component is disabled, not grading");
  };
  this.play = function() {
    e.setAttribute("src", h);
    e.load();
    e.play();
  };
  this.playClip = function(a) {
    e.setAttribute("src", a);
    e.load();
    e.play();
  };
  this.pause = function() {
    e.pause();
  };
};
CTATAudioButton.prototype = Object.create(CTATButtonBasedComponent.prototype);
CTATAudioButton.prototype.constructor = CTATAudioButton;
CTAT.ComponentRegistry.addComponentType("CTATAudioButton", CTATAudioButton);
var CTATVideo = function(a, b, d, f, g) {
  CTAT.Component.Base.Tutorable.call(this, "CTATVideo", "__undefined__", a, b, d, f, g);
  var c = 0, e = this, h = null;
  this.getAlpha = function() {
    return c;
  };
  this.setAlpha = function(a) {
    c = a;
  };
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.configFromDescription();
  this.init = function() {
    e.ctatdebug("init (" + e.getName() + ")");
    e.addCSSAttribute("z-index", CTATGlobalFunctions.gensym.z_index());
    h = document.createElement("video");
    this.getDivWrap() && $(this.getDivWrap()).attr("src") ? h.src = $(this.getDivWrap()).attr("src") : h.src = "http://augustus.pslc.cs.cmu.edu/ProportionalDistanceExercise.mp4";
    this.getDivWrap() && $(this.getDivWrap()).attr("controls") ? h.controls = CTATGlobalFuntions.toBoolean($(this.getDivWrap()).attr("controls")) : h.controls = !0;
    h.autocontrols = !1;
    this.getDivWrap() && $(this.getDivWrap()).attr("autoplay") ? h.autoplay = CTATGlobalFuntions.toBoolean($(this.getDivWrap()).attr("autoplay")) : h.autoplay = !0;
    h.name = e.getName();
    h.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    h.setAttribute("onkeypress", "return noenter(event)");
    e.addComponentReference(e, h);
    e.ctatdebug("Final location: " + e.getX() + "," + e.getY() + " with text: " + e.getText());
    e.setInitialized(!0);
    e.getDivWrap().appendChild(h);
    h.addEventListener("focus", this.processFocus);
  };
  this.PlayMedia = function(a) {
    h.src = a;
  };
  this.showControls = function(a) {
    h.controls = a;
  };
  this.play = function(a) {
    var b = "0";
    a && (b = "number" === typeof a ? String(a) : "string" === typeof a ? a : "0");
    h.currentTime = b;
    h.play();
  };
  this.stop = this.pause = function(a) {
    h.pause();
    var b = "0";
    a && (b = "number" === typeof a ? String(a) : "string" === typeof a ? a : "0");
    h.currentTime = b;
  };
};
CTATVideo.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATVideo.prototype.constructor = CTATVideo;
CTAT.ComponentRegistry.addComponentType("CTATVideo", CTATVideo);
var CTATNumericStepper = function(a, b, d, f, g) {
  CTAT.Component.Base.Tutorable.call(this, "CTATNumericStepper", "__undefined__", a, b, d, f, g);
  this.setAction("Update");
  var c = document.createElement("input");
  c.type = "number";
  this.setParameterHandler("maximum", function(a) {
    a = Number(a);
    isNaN(a) || (c.max = a);
  });
  this.setParameterHandler("minimum", function(a) {
    a = Number(a);
    isNaN(a) || (c.min = a);
  });
  this.setParameterHandler("stepSize", function(a) {
    a = Number(a);
    isNaN(a) || (c.step = a);
  });
  this.update_value = function(a) {
    a = Number(a);
    isNaN(a) || (c.value = a, this.setInput(a));
  };
  this.setParameterHandler("value", this.update_value);
  this.updateSAI = function() {
    this.setInput(c.value);
  };
  this.Update = this.update_value;
  this.handle_change = function(a) {
    this.updateSAI();
    this.processAction();
  }.bind(this);
  this.init = function() {
    c.id = this.getName() + "_spinner";
    c.addEventListener("change", this.handle_change);
    c.classList.add("CTAT-numeric-stepper");
    this.setComponent(c);
    this.setInitialized(!0);
    this.getDivWrap().appendChild(c);
    this.component.addEventListener("focus", this.processFocus);
  };
};
CTATNumericStepper.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATNumericStepper.prototype.constructor = CTATNumericStepper;
CTAT.ComponentRegistry.addComponentType("CTATNumericStepper", CTATNumericStepper);
var CTATHintWindow = function(a, b, d, f, g) {
  CTAT.Component.Base.Graphical.call(this, "CTATHintWindow", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(240);
  this.setDefaultHeight(140);
  var c = this;
  c.isTabIndexable = !1;
  var e = null, h = null, k = null, l = null, q = CTATGlobals.languageManager.getString("NEXT"), p = CTATGlobals.languageManager.getString("PREVIOUS"), m = null;
  this.data_ctat_handlers["next-content"] = function(a) {
    m = a;
    k && (k.innerHTML = a);
  };
  var w = null;
  this.data_ctat_handlers["previous-content"] = function(a) {
    w = a;
    h && (h.innerHTML = a);
  };
  var t = !1;
  this.data_ctat_handlers["use-svg"] = function(a) {
    t = CTATGlobalFunctions.stringToBoolean(a);
  };
  this.getCurrentHint = function() {
    return e.innerHTML;
  };
  this.init = function() {
    c.setInitialized(!0);
    l = document.createElement("div");
    l.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    l.setAttribute("onkeypress", "return noenter(event)");
    c.setComponent(l);
    l.classList.add("CTAT-gen-component");
    l.classList.add("CTAT-hint-window");
    c.addComponentReference(c, l);
    c.getDivWrap().appendChild(l);
    e = document.createElement("div");
    l.appendChild(e);
    e.classList.add("CTAT-hint-window--hintcontent");
    e.setAttribute("pointer-events", "none");
    if (w) {
      h = document.createElement("button"), h.classList.add("CTAT-hint-window--previous"), h.innerHTML = w;
    } else {
      if (t) {
        h = document.createElementNS(CTATGlobals.NameSpace.svg, "svg");
        h.classList.add("CTAT-hint-window--previous");
        h.setAttributeNS(null, "viewBox", "0 0 82 20");
        var a = document.createElementNS(CTATGlobals.NameSpace.svg, "path");
        a.style.fill = "none";
        a.style.strokeWidth = "3px";
        a.style.strokeLinecap = "round";
        a.setAttributeNS(null, "d", "M7 10 h12 M7 10 m4 -4 l-4 4 4 4");
        a.setAttributeNS(null, "pointer-events", "none");
        h.appendChild(a);
        p && (a = document.createElementNS(CTATGlobals.NameSpace.svg, "text"), a.setAttributeNS(null, "pointer-events", "none"), a.textContent = p, a.setAttributeNS(null, "text-anchor", "middle"), a.setAttributeNS(null, "x", "50px"), a.setAttributeNS(null, "dominant-baseline", "middle"), a.setAttributeNS(null, "y", "50%"), h.appendChild(a));
      } else {
        h = document.createElement("button"), h.classList.add("CTAT-hint-window--previous"), a = document.createElement("span"), a.style.fontWeight = "bold", a.style.marginLeft = "6px", a.style.marginRight = "4px", a.textContent = "\u25c0", h.appendChild(a), p && (a.style.cssFloat = "left", h.appendChild(document.createTextNode(p)));
      }
    }
    h.addEventListener("click", function(a) {
      CTATShellTools.showPrevHint();
    }, !1);
    l.appendChild(h);
    m ? (k = document.createElement("button"), k.classList.add("CTAT-hint-window--next"), k.innerHTML = m) : t ? (k = document.createElementNS(CTATGlobals.NameSpace.svg, "svg"), k.classList.add("CTAT-hint-window--next"), k.setAttributeNS(null, "viewBox", "0 0 82 20"), a = document.createElementNS(CTATGlobals.NameSpace.svg, "path"), a.style.fill = "none", a.style.strokeWidth = "3px", a.style.strokeLinecap = "round", a.setAttributeNS(null, "d", "M75 10 h-12 M75 10 m-4 -4 l4 4 -4 4"), a.setAttributeNS(null, 
    "pointer-events", "none"), k.appendChild(a), q && (a = document.createElementNS(CTATGlobals.NameSpace.svg, "text"), a.setAttributeNS(null, "pointer-events", "none"), a.textContent = q, a.setAttributeNS(null, "text-anchor", "middle"), a.setAttributeNS(null, "x", "34px"), a.setAttributeNS(null, "dominant-baseline", "middle"), a.setAttributeNS(null, "y", "50%"), k.appendChild(a))) : (k = document.createElement("button"), k.classList.add("CTAT-hint-window--next"), a = document.createElement("span"), 
    a.style.fontWeight = "bold", a.style.marginRight = "6px", a.textContent = "\u25b6", q && (a.style.cssFloat = "right", k.appendChild(document.createTextNode(q))), k.appendChild(a));
    k.addEventListener("click", function(a) {
      CTATShellTools.showNextHint();
    }, !1);
    l.appendChild(k);
    var b = function(a) {
      "svg" === this.tagName.toLowerCase() ? a ? this.classList.remove("CTAT-svg-button--disabled") : this.classList.add("CTAT-svg-button--disabled") : (this.disabled = !a, a || (this.classList.remove("CTAT-hint-button--hover"), this.classList.remove("CTAT-hint-button--clicked")));
    };
    [h, k].forEach(function(a) {
      a.setEnabled = b.bind(a);
      a.classList.add("CTAT-hint-window--button");
      a.classList.add("CTAT-hint-button");
      a.addEventListener("mouseenter", function(a) {
        a.target.classList.add("CTAT-hint-button--hover");
      });
      a.addEventListener("mouseleave", function(a) {
        a.target.classList.remove("CTAT-hint-button--hover");
        a.target.classList.remove("CTAT-hint-button--clicked");
      });
      a.addEventListener("mousedown", function(a) {
        a.target.classList.add("CTAT-hint-button--clicked");
      });
      a.addEventListener("mouseup", function(a) {
        a.target.classList.remove("CTAT-hint-button--clicked");
      });
      a.addEventListener("click", function(a) {
        a.target.classList.remove("CTAT-hint-button--clicked");
      });
    });
    CTATShellTools.registerFeedbackComponent(this, this.goNext, this.goPrevious, this.showHint, this.showFeedback);
    c.ctatdebug("Disabling previous and next ...");
    h.setEnabled(!1);
    k.setEnabled(!1);
  };
  this.setStyleHandler("OuterBorderColor", this.setBorderColor);
  this.SetText = this.showFeedback = function(a) {
    c.ctatdebug("showFeedback (" + a + ")");
    e && (e.innerHTML = CTATGlobals.languageManager.filterString(a));
    h.setEnabled(!1);
    k.setEnabled(!1);
  };
  this.showHint = function(a) {
    c.ctatdebug("showHint ()");
    null === a ? (hints = a, hintIndex = 0, e.innerHTML = "", h.setEnabled(!1), k.setEnabled(!1)) : (hints = a, hintIndex = 0, this.setEnabled(!0), h.setEnabled(!1), k.setEnabled(!1), hints ? "" === hints[hintIndex] ? c.ctatdebug("Empty hint in list, bump") : (e.innerHTML = CTATGlobals.languageManager.filterString(hints[hintIndex]), 1 < hints.length ? (c.ctatdebug("We have more than one hint, enabling next button"), k.setEnabled(!0)) : c.ctatdebug("We only have one hint, leaving next button disabled")) : 
    c.ctatdebug("Null hint in list, bump"));
  };
  this.setEnabled = function(a) {
    c.assignEnabled(a);
    null === c.getComponent() ? c.ctatdebug("Error pointer.getComponent()==null") : c.getComponent().disabled = !a;
  };
  this.goPrevious = function() {
    c.ctatdebug("goPrevious ()");
    hintIndex--;
    k.setEnabled(!0);
    0 >= hintIndex ? (hintIndex = 0, h.setEnabled(!1)) : h.setEnabled(!0);
    e.innerHTML = CTATGlobals.languageManager.filterString(hints[hintIndex]);
    var a = new CTATGuid, b = new CTATTutoringServiceMessageBuilder, a = a.guid(), d = new CTATSAI("previousButton", "ButtonPressed", "-1");
    b.createUntutoredActionMessage(a, d);
    var d = new CTATSAI("previousButton", "ButtonPressed", "hint request");
    commLoggingLibrary.logSemanticEvent(a, d, "HINT_REQUEST", "");
    b = c.getCurrentHint();
    d = new CTATMessage;
    d.setMessageType("AssociatedRules");
    d.assignSAI(logHintSAI);
    d.setTransactionID(a);
    commShell.processAssociatedRules(d, "HintWindow", b);
    commShell.propagateShellEvent("PreviousPressed", null);
  };
  this.goNext = function() {
    c.ctatdebug("goNext ()");
    hintIndex++;
    h.setEnabled(!0);
    hintIndex > hints.length - 1 && (hintIndex = hints.length - 1);
    hintIndex > hints.length - 2 ? k.setEnabled(!1) : k.setEnabled(!0);
    e.innerHTML = CTATGlobals.languageManager.filterString(hints[hintIndex]);
    var a = new CTATGuid, b = new CTATTutoringServiceMessageBuilder, a = a.guid(), d = new CTATSAI("nextButton", "ButtonPressed", "-1");
    b.createUntutoredActionMessage(a, d);
    var d = new CTATSAI("nextButton", "ButtonPressed", "hint request");
    commLoggingLibrary.logSemanticEvent(a, d, "HINT_REQUEST", "");
    b = c.getCurrentHint();
    d = new CTATMessage;
    d.setMessageType("AssociatedRules");
    d.assignSAI(logHintSAI);
    d.setTransactionID(a);
    commShell.processAssociatedRules(d, "HintWindow", b);
    commShell.propagateShellEvent("NextPressed", null);
  };
};
CTATHintWindow.prototype = Object.create(CTAT.Component.Base.Graphical.prototype);
CTATHintWindow.prototype.constructor = CTATHintWindow;
CTAT.ComponentRegistry.addComponentType("CTATHintWindow", CTATHintWindow);
var CTATControllerButton = function(a, b, d, f, g) {
  CTATImageButton.call(this, a, b, d, f, g);
  this.setClassName("CTATControllerButton");
  var c = 1;
  a = function(a) {
    a = Number(a);
    isNaN(a) || (c = a, this.setInput(c));
  };
  this.setParameterHandler("delta", a);
  this.data_ctat_handlers.delta = a;
  this.updateSAI = function() {
    this.setInput(c);
  };
};
CTATControllerButton.prototype = Object.create(CTATImageButton.prototype);
CTATControllerButton.prototype.constructor = CTATControllerButton;
CTAT.ComponentRegistry.addComponentType("CTATControllerButton", CTATControllerButton);
var CTATTextInput = function(a, b, d, f, g) {
  CTATTextBasedComponent.call(this, "CTATTextInput", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(22);
  var c = this, e = null, h = null;
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.configFromDescription();
  this.init = function() {
    this.ctatdebug("init (" + c.getName() + ")");
    e = document.createElement("input");
    e.type = "text";
    a && (e.name = a.name);
    e.setAttribute("maxlength", c.getMaxCharacters());
    e.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    e.classList.add("CTAT-text");
    c.setComponent(e);
    this.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    e.value = this.getText();
    c.setInitialized(!0);
    c.addComponentReference(c, e);
    c.getDivWrap().appendChild(e);
    c.render();
    c.addSafeEventListener("keypress", c.processKeypress, e);
    c.addSafeEventListener("focus", c.processFocus, e);
    $(e).on("input", function(a) {
      c.setNotGraded();
    });
  };
  this.setCellContainer = function(a) {
    h = a;
  };
  this.getCellContainer = function() {
    return h;
  };
  this.setText = function(a) {
    c.ctatdebug("setText (" + a + ")");
    console.trace(this.getName(), "setText", a);
    c.assignText(a);
    e.value = a;
  };
  this.reset = function() {
    c.configFromDescription();
    c.processSerialization();
    e.value = "";
  };
  this.setStyleHandler("DrawBorder", function(a) {
    c.setShowBorder(a);
    c.addCSSAttribute("border-width", c.getShowBorder() ? 1 : 0);
  });
};
CTATTextInput.prototype = Object.create(CTATTextBasedComponent.prototype);
CTATTextInput.prototype.constructor = CTATTextInput;
CTAT.ComponentRegistry.addComponentType("CTATTextInput", CTATTextInput);
var CTATDragNDrop = function() {
  CTAT.Component.Base.Tutorable.call(this, "CTATDragNDrop", "aDnD");
  this.setParameterHandler("groupname", function(a) {
    this.getDivWrap() && $(this.getDivWrap()).attr("name", a);
  });
  this.set_child_limit = function(a) {
    a = parseInt(a);
    isNaN(a) || $(this.component).attr("data-ctat-max-cardinality", a);
  };
  this.setParameterHandler("MaxObjects", this.set_child_limit);
  this.get_child_limit = function() {
    var a = parseInt($(this.component).attr("data-ctat-max-cardinality"));
    return isNaN(a) ? -1 : a;
  };
  var a = function(a) {
    return a.split("").reduce(function(a, b) {
      a = (a << 5) - a + b.charCodeAt(0);
      return a & a;
    }, 0);
  }, b = function(b) {
    var d = $(this).parent().attr("name"), c = $(this).parent().attr("id");
    b.dataTransfer.setData("ctat/group", d);
    b.dataTransfer.setData("ctat/source", c);
    b.dataTransfer.setData("text", b.target.id);
    var e = a(b.target.id);
    CTATDragNDrop.dragging[e] = {id:b.target.id, group:d, source:c};
    b.dataTransfer.setData("ctat/id/" + e, e);
  }, d = function(a) {
    for (var b, c = 0;c < a.dataTransfer.types.length;c++) {
      if (b = /^ctat\/id\/(.+)$/.exec(a.dataTransfer.types[c])) {
        b = b[1], CTATDragNDrop.dragging.hasOwnProperty(b) && delete CTATDragNDrop.dragging[b];
      }
    }
  };
  this.init = function() {
    var a = this.getDivWrap();
    if (!$(a).attr("name")) {
      var g = CTATDragNDrop.default_groupname;
      this.getComponentGroup() && (g = this.getComponentGroup());
      $(a).attr("name", g);
    }
    this.setComponent(a);
    CTATComponentReference.add(this, a);
    $(a).children().addClass("CTAT-DragNDrop--item").attr({unselectable:"on", draggable:!0}).each(function() {
      this.id || (this.id = CTATGlobalFunctions.gensym.div_id());
      this.addEventListener("dragstart", b, !1);
      this.addEventListener("dragend", d, !1);
    });
    this.component.addEventListener("dragover", function(a) {
      var b = !1;
      if ($(this).data("CTATComponent").getEnabled()) {
        var d = parseInt($(this).attr("data-ctat-max-cardinality"));
        if ((isNaN(d) || 0 > d || $(this).children().length < d) && (new Set(a.dataTransfer.types)).has("ctat/group")) {
          if (a.dataTransfer.getData("text")) {
            a.dataTransfer.getData("ctat/group") === $(this).attr("name") && a.dataTransfer.getData("ctat/source") !== this.id && (b = !0);
          } else {
            for (var f, d = 0;d < a.dataTransfer.types.length;d++) {
              if (f = /^ctat\/id\/(.+)$/.exec(a.dataTransfer.types[d])) {
                f = f[1], CTATDragNDrop.dragging.hasOwnProperty(f) && CTATDragNDrop.dragging[f].group === $(this).attr("name") && CTATDragNDrop.dragging[f].source !== this.id && (b = !0);
              }
            }
          }
        }
      }
      b && (a.preventDefault(), a.dataTransfer.effectAllowed = "move", a.dataTransfer.dropEffect = "move", this.classList.add("CTATDragNDrop--valid-drop"));
    }, !1);
    this.component.addEventListener("drop", function(a) {
      a.preventDefault();
      this.classList.remove("CTATDragNDrop--valid-drop");
      var b = $(this).data("CTATComponent");
      if (b.getEnabled()) {
        var d = a.dataTransfer.getData("text");
        a = a.dataTransfer.getData("ctat/source");
        d = document.getElementById(d);
        this.appendChild(d);
        b.updateSAI();
        d = $("#" + a).data("CTATComponent");
        d.updateSAI();
        d.processAction();
        b.processAction();
      }
    }, !1);
    this.component.addEventListener("dragleave", function(a) {
      this.classList.remove("CTATDragNDrop--valid-drop");
    }, !1);
  };
  this.Add = function(a) {
    a = $("#" + a);
    0 < a.length && $(a).detatch().appendTo(this.getDivWrap());
    $(a).hasClass("CTAT-DragNDrop--item") || ($(a).addClass("CTAT-DragNDrop--item").attr({unselectable:"on", draggable:!0}), a.addEventListener("dragstart", b, !1), a.addEventListener("dragend", d, !1));
  };
  this.SetChildren = function(a) {
    a.split(";").forEach(function(a) {
      this.Add(a);
    });
  };
  this.updateSAI = function() {
    var a = [];
    $(this.component).children().each(function() {
      a.push($(this).attr("id"));
    });
    this.setActionInput("SetChildren", a.sort().join(";"));
  };
};
CTATDragNDrop.dragging = {};
CTATDragNDrop.default_groupname = "DragNDropGroup";
CTATDragNDrop.prototype = Object.create(CTAT.Component.Base.Tutorable.prototype);
CTATDragNDrop.prototype.constructor = CTATDragNDrop;
CTAT.ComponentRegistry.addComponentType("CTATDragNDrop", CTATDragNDrop);
CTAT.Geom.Rectangle = {};
try {
  new DOMRect;
} catch (a) {
  if (console.log("error on new DOMRect():", a, typeof a), a instanceof ReferenceError || a instanceof TypeError) {
    DOMRect = function(b, d, f, g) {
      this.x = b || 0;
      this.y = d || 0;
      this.width = f || 0;
      this.height = g || 0;
      return this;
    };
  }
}
"left" in DOMRect.prototype || Object.defineProperty(DOMRect.prototype, "left", {get:function() {
  return Math.min(this.x, this.x + this.width);
}});
"right" in DOMRect.prototype || Object.defineProperty(DOMRect.prototype, "right", {get:function() {
  return Math.max(this.x, this.x + this.width);
}});
"top" in DOMRect.prototype || Object.defineProperty(DOMRect.prototype, "top", {get:function() {
  return Math.min(this.y, this.y + this.height);
}});
"bottom" in DOMRect.prototype || Object.defineProperty(DOMRect.prototype, "bottom", {get:function() {
  return Math.max(this.y, this.y + this.height);
}});
CTAT.Geom.Rectangle.contains = function(a, b, d) {
  var f = CTAT.Geom.Rectangle.contains;
  if (b instanceof DOMRect) {
    return f(a, b.left, b.top) & f(a, b.right, b.bottom);
  }
  if (b instanceof DOMPoint) {
    var g = !0;
    if (d instanceof DOMPoint) {
      g = f(a, d.x / d.w, d.y / d.w);
    } else {
      if ("number" == typeof d) {
        return f(a, b.x - d, b.y - d) & f(a, b.x + d, b.y + d);
      }
    }
    return g & f(a, b.x, b.y);
  }
  return a.left <= b & a.right >= b & a.top <= d & a.bottom >= d;
};
Object.defineProperty(DOMRect.prototype, "contains", {value:function(a, b) {
  return CTAT.Geom.Rectangle.contains(this, a, b);
}});
Object.defineProperty(DOMRect.prototype, "clone", {value:function() {
  return new DOMRect(this.x, this.y, this.width, this.height);
}});
Object.defineProperty(DOMRect.prototype, "copyFrom", {value:function(a) {
  this.x = a.x;
  this.y = a.y;
  this.width = a.width;
  this.height = a.height;
  return this;
}});
CTAT.Geom.Rectangle.equals = function(a, b) {
  return a.left == b.left && a.top == b.top && a.right == b.right && a.bottom == b.bottom;
};
CTAT.Geom.Rectangle.inflate = function(a, b, d) {
  b = b ? b : 0;
  d = d ? d : 0;
  b instanceof DOMPoint && (d = b.y, b = b.x);
  a = a.clone();
  a.x -= b;
  a.y -= d;
  a.width += 2 * b;
  a.height += 2 * d;
  return a;
};
CTAT.Geom.Rectangle.isEmpty = function(a) {
  return 0 === a.width || 0 === a.height;
};
CTAT.Geom.Rectangle.setEmpty = function(a) {
  a.x = 0;
  a.y = 0;
  a.width = 0;
  a.height = 0;
  return a;
};
CTAT.Geom.Rectangle.setTo = function(a, b, d, f, g) {
  a.x = b;
  a.y = d;
  a.width = f;
  a.height = g;
  return a;
};
CTAT.Geom.Rectangle.offset = function(a, b, d) {
  b = b ? b : 0;
  d = d ? d : 0;
  b instanceof DOMPoint && (d = b.y, b = b.x);
  a = a.clone();
  a.x += b;
  a.y += d;
  return a;
};
CTAT.Geom.Rectangle.union = function(a, b) {
  var d = new DOMRect;
  d.x = Math.min(a.x, b.x);
  d.y = Math.min(a.y, b.y);
  d.width = Math.max(a.right, b.right) - d.x;
  d.height = Math.max(a.bottom, b.bottom) - d.y;
  return d;
};
var CTATNumberLine = function(a, b, d, f, g) {
  CTAT.Component.Base.SVG.call(this, "CTATNumberLine", "aNumberLine", a, b, d, f, g);
  var c = CTAT.Math.Fraction, e = CTATGlobals.NameSpace.svg;
  a = function(a, b, d, f, g) {
    this.numberline = a;
    this.step = new c(b);
    this.size = d;
    this.origin = new c(0);
    this.tick_class = f ? f : null;
    this.label_class = g ? g : null;
    this.g = null;
    this.setStep = function(a) {
      this.step = new c(a);
    };
    this.setSize = function(a) {
      a = Number(a);
      isNaN(a) && (a = d);
      this.size = a;
    };
    this.setOrigin = function(a) {
      this.origin = new c(a);
    };
    this.generate = function() {
      if (this.numberline) {
        var a = new c, b = document.createDocumentFragment(), d = document.createElementNS(e, "g");
        d.setAttributeNS(null, "data-step-size", this.step.toString());
        d.setAttributeNS(null, "pointer-events", "none");
        this.tick_class && d.classList.add(this.tick_class);
        b.appendChild(d);
        console.log(this.step, 0 < this.step);
        if (0 < this.step) {
          a.set(this.origin).reduce();
          for (console.log(a, this.numberline.Maximum, this.numberline.Minimum);a <= this.numberline.Maximum;) {
            a >= this.numberline.Minimum && d.appendChild(this.numberline.genTickmark(a, null, this.size)), a = a.add(this.step);
          }
          a.set(this.origin).reduce();
          for (a = a.subtract(this.step);a >= this.numberline.Minimum;) {
            a <= this.numberline.Maximum && d.appendChild(this.numberline.genTickmark(a, null, this.size)), a = a.subtract(this.step);
          }
        }
        return b;
      }
    };
  };
  var h = new a(this, new c(1), 30, "CTAT-number-line--large-tickmark", "CTAT-number-line--large-tickmark-label");
  this.setLargeTickSize = function(a) {
    h.setSize(s);
    this.render();
    return this;
  };
  this.setParameterHandler("LargeTickmarkSize", this.setLargeTickSize);
  this.setParameterHandler("LargeTickmarkStep", function(a) {
    h.setStep(a);
    this.render();
    return this;
  });
  var k = new a(this, new c(1, 2), 20, "CTAT-number-line--small-tickmark", "CTAT-number-line--small-tickmark-label");
  this.setSmallTickSize = function(a) {
    k.setSize(s);
    this.render();
    return this;
  };
  this.setParameterHandler("SmallTickmarkSize", this.setSmallTickSize);
  this.setParameterHandler("SmallTickmarkStep", function(a) {
    k.setStep(a);
    this.render();
    return this;
  });
  var l = new a(this, new c(0), 25, "CTAT-number-line--denominator-tickmark", "CTAT-number-line--denominator-tickmark-label");
  this.setParameterHandler("DenominatorTickmarkSize", function(a) {
    l.setSize(a);
    this.render();
    return this;
  });
  this.X_Axis = new function(a, b, c, d) {
    var e = {};
    this.svg_group = null;
    var f = a;
    Object.defineProperty(this, "start", {get:function() {
      return f;
    }, set:function(a) {
      e = {};
      f = a;
    }});
    Object.defineProperty(this, "min_loc", {get:function() {
      if (!e.hasOwnProperty("min_loc")) {
        var a = this.start.clone(), b = CTAT.Geom.Point.polar(20, this.angle()), a = a.add(b);
        a.x = CTAT.Math.round(a.x);
        a.y = CTAT.Math.round(a.y);
        e.min_loc = a;
      }
      return e.min_loc;
    }});
    var g = b;
    Object.defineProperty(this, "end", {get:function() {
      return g;
    }, set:function(a) {
      e = {};
      g = a;
    }});
    Object.defineProperty(this, "max_loc", {get:function() {
      if (!e.hasOwnProperty("max_loc")) {
        var a = this.end.clone(), b = CTAT.Geom.Point.polar(20, this.angle()), a = a.add(b.scale(-1));
        a.x = CTAT.Math.round(a.x);
        a.y = CTAT.Math.round(a.y);
        e.max_loc = a;
      }
      return e.max_loc;
    }});
    var h = c;
    Object.defineProperty(this, "min", {get:function() {
      return h;
    }, set:function(a) {
      e = {};
      h = a;
    }});
    var k = d;
    Object.defineProperty(this, "max", {get:function() {
      return k;
    }, set:function(a) {
      e = {};
      k = a;
    }});
    Object.defineProperty(this, "length", {get:function() {
      e.hasOwnProperty("length") || (e.length = CTAT.Math.round(this.min_loc.distance(this.max_loc)));
      return e.length;
    }});
    this.isHorizontal = function() {
      return this.start.y === this.end.y;
    };
    this.isVertical = function() {
      return this.start.x === this.end.x;
    };
    Object.defineProperty(this, "range", {get:function() {
      return this.max.subtract(this.min);
    }});
    Object.defineProperty(this, "step_size", {get:function() {
      return CTAT.Geom.Point.equals(this.min_loc, this.max_loc) ? this.length : CTAT.Math.round(this.length / this.range);
    }});
    this.s_vec = function() {
      return this.max_loc.add(this.min_loc.scale(-1));
    };
    this.slope = function() {
      var a = this.s_vec();
      return a.y / a.x;
    };
    this.step = function() {
      e.hasOwnProperty("step") || (e.step = this.s_vec().normalize(this.step_size));
      return e.step;
    };
    this.scalar = function() {
      e.hasOwnProperty("scalar") || (e.scalar = this.range / this.length);
      return e.scalar;
    };
    this.zero = function() {
      e.hasOwnProperty("zero") || (e.zero = this.min_loc.add(this.step().scale(-this.min)), e.zero.x = CTAT.Math.round(e.zero.x), e.zero.y = CTAT.Math.round(e.zero.y));
      return e.zero;
    };
    this.angle = function() {
      if (!e.hasOwnProperty("angle")) {
        var a = this.end.add(this.start.scale(-1));
        e.angle = Math.atan2(a.y, a.x);
      }
      return e.angle;
    };
    this.angle_deg = function() {
      return CTAT.Math.rad2deg(this.angle());
    };
    this.getPosition = function(a) {
      a = this.zero().add(this.step().scale(1 * a));
      a.x = CTAT.Math.round(a.x);
      a.y = CTAT.Math.round(a.y);
      return a;
    };
    this.projected_point = function(a) {
      var b = this.s_vec(), c = a.add(this.min_loc.scale(-1)), c = 0 + (b.y * c.x - b.x * c.y) / (b.y * b.y + b.x * b.x);
      return a.add(new DOMPoint(-c * b.y, c * b.x));
    };
    this.getProjectedPoint = function(a) {
      a = this.projected_point(a);
      return a.distance(this.max_loc) > this.length ? this.min_loc : a.distance(this.min_loc) > this.length ? this.max_loc : a;
    };
    this.getAxisValue = function(a) {
      return CTAT.Math.round(h + this.scalar() * this.min_loc.distance(this.getProjectedPoint(a)));
    };
  }(new DOMPoint(0, 0), new DOMPoint(0, 0), new c(0), new c(3));
  Object.defineProperty(this, "Maximum", {get:function() {
    return this.X_Axis.max;
  }, set:function(a) {
    this.X_Axis.max = new c(a);
  }});
  this.setMaximum = function(a) {
    this.Maximum = a;
  };
  this.setParameterHandler("Maximum", this.setMaximum);
  this.data_ctat_handlers.maximum = this.setMaximum;
  Object.defineProperty(this, "Minimum", {get:function() {
    return this.X_Axis.min;
  }, set:function(a) {
    this.X_Axis.min = new c(a);
  }});
  this.setMinimum = function(a) {
    this.Minimum = a;
  };
  this.setParameterHandler("Minimum", this.setMinimum);
  this.data_ctat_handlers.minimum = this.setMinimum;
  var q = 1;
  Object.defineProperty(this, "Max_Points", {get:function() {
    return q;
  }, set:function(a) {
    a = parseInt(a);
    isNaN(a) || (q = a);
  }});
  this.setMaxPoints = function(a) {
    this.Max_Points = a;
  };
  this.setParameterHandler("Max_Points", this.setMaxPoints);
  this.data_ctat_handlers["max-points"] = this.setMaxPoints;
  var p = 7;
  this.setPointSize = function(a) {
    p = Number(a);
    z && (z.setAttributeNS(null, "r", p), $(this._point_group).find("circle").each(function() {
      $(this).attr("r", p);
    }));
  };
  this.setStyleHandler("PointSize", this.setPointSize);
  this.data_ctat_handlers["point-size"] = this.setPointSize;
  var m = !1;
  this.setSnapToTickMark = function(a) {
    m = CTATGlobalFunctions.toBoolean(a);
  };
  this.setParameterHandler("SnapToTickmark", this.setSnapToTickMark);
  this.data_ctat_handlers.snap = this.setSnapToTickMark;
  this.theta = 0;
  Object.defineProperty(this, "Orientation", {get:function() {
    return 180 * this.theta / Math.PI;
  }, set:function(a) {
    a = Number(a);
    isNaN(a) && (a = 0);
    this.theta = Math.PI * a / 180;
  }});
  this.setOrientation = function(a) {
    this.Orientation = a;
    this.render();
  };
  this.setParameterHandler("Orientation", this.setOrientation);
  this.data_ctat_handlers.rotation = this.setOrientation;
  this._tickmarks = [];
  this.genTickmark = function(a, b, c) {
    var d = document.createDocumentFragment();
    if (!this._tickmarks.some(function(b) {
      return b.data.equals(a);
    })) {
      var f = document.createElementNS(e, "line"), g = this.X_Axis.getPosition(a), h = CTAT.Geom.Point.polar(c / 2, this.theta + Math.PI / 2).add(g);
      c = CTAT.Geom.Point.polar(-c / 2, this.theta + Math.PI / 2).add(g);
      f.setAttributeNS(null, "x1", h.x);
      f.setAttributeNS(null, "y1", h.y);
      f.setAttributeNS(null, "x2", c.x);
      f.setAttributeNS(null, "y2", c.y);
      f.setAttributeNS(null, "data-value", a.toString());
      f.data = a;
      f.location = g;
      f.label = null;
      this._tickmarks.push(f);
      d.appendChild(f);
      if ("" !== b) {
        g = document.createElementNS(e, "text");
        g.classList.add("CTAT-number-line--tickmark-label");
        g.setAttributeNS(null, "text-anchor", "middle");
        d.appendChild(g);
        if (null === b || void 0 === b) {
          if (1 == a.denominator) {
            g.appendChild(document.createTextNode(String(a.numerator))), g.setAttributeNS(null, "x", c.x), g.setAttributeNS(null, "y", c.y);
          } else {
            b = "" + String(a.numerator);
            h = "" + String(a.denominator);
            g.style.fontSize = "0.6em";
            g.setAttributeNS(null, "text-align", "center");
            var k = document.createElementNS(e, "tspan"), l = document.createElementNS(e, "tspan");
            k.appendChild(document.createTextNode(b));
            l.appendChild(document.createTextNode(h));
            g.appendChild(k);
            g.appendChild(l);
            k.setAttributeNS(null, "text-anchor", "middle");
            k.setAttributeNS(null, "x", 0);
            k.setAttributeNS(null, "dy", "-1em");
            l.setAttributeNS(null, "text-anchor", "middle");
            l.setAttributeNS(null, "x", 0);
            l.setAttributeNS(null, "dy", "1em");
            b.length > h.length ? k.style.textDecoration = "underline" : l.style.textDecoration = "overline";
            g.setAttributeNS(null, "transform", "translate" + CTAT.Geom.Point.to2DString(c, !0));
          }
        } else {
          g.appendChild(document.createTextNode(b.toString())), d.appendChild(tlabel), g.setAttributeNS(null, "x", c.x), g.setAttributeNS(null, "y", c.y);
        }
        f.label = g;
      }
    }
    return d;
  };
  var w = function() {
    if (null !== this.X_Axis && null !== this.X_Axis.svg_group) {
      var a = this.getBoundingBox(), b = window.getComputedStyle(this._axis_line_group), b = parseInt(b.getPropertyValue("stroke-width")), a = CTAT.Geom.Rectangle.inflate(a, -b, -b), c = new DOMPoint(a.width / 2, a.height / 2), d = c.add(CTAT.Geom.Point.polar(Math.min(40, a.height, a.width) / 4, this.theta)), f = Math.sin(this.theta), g = -Math.cos(this.theta), m = f * c.x + g * c.y, q = -a.height * g, w = -f * a.width, b = new DOMPoint(a.left, c.y), c = new DOMPoint(a.right, c.y);
      if (0 < Math.abs(CTAT.Math.round(q))) {
        var q = new DOMPoint(a.left, (m - f * a.left) / g), r = new DOMPoint(a.right, (m - f * a.right) / g);
        if (a.contains(q) || a.contains(r)) {
          d.distance(q) < d.distance(r) ? (b = r, c = q) : (b = q, c = r);
        }
      }
      0 < Math.abs(CTAT.Math.round(w)) && (w = new DOMPoint((m - g * a.top) / f, a.top), f = new DOMPoint((m - g * a.bottom) / f, a.bottom), a.containsPoint(w) || a.containsPoint(f)) && (d.distance(w) < d.distance(f) ? (b = f, c = w) : (b = w, c = f));
      if (this.X_Axis.start.x != b.x || this.X_Axis.start.y != b.y || this.X_Axis.end.x != c.x || this.X_Axis.end.y != c.y) {
        this.X_Axis.start = b, this.X_Axis.end = c, this.X_Axis.svg_group.innerHTML = "", a = document.createDocumentFragment(), d = document.createElementNS(e, "line"), d.setAttributeNS(null, "x1", b.x), d.setAttributeNS(null, "y1", b.y), d.setAttributeNS(null, "x2", c.x), d.setAttributeNS(null, "y2", c.y), a.appendChild(d), d = document.createElementNS(e, "path"), d.setAttributeNS(null, "d", "M 10,6 L 0,0 L 10,-6"), d.setAttributeNS(null, "transform", "translate(" + CTAT.Geom.Point.to2DString(b) + 
        ") rotate(" + this.Orientation + ")"), a.appendChild(d), b = document.createElementNS(e, "path"), b.setAttributeNS(null, "d", "M -10,6 L 0,0 L -10,-6"), b.setAttributeNS(null, "transform", "translate(" + CTAT.Geom.Point.to2DString(c) + ") rotate(" + this.Orientation + ")"), a.appendChild(b), this.X_Axis.svg_group.appendChild(a);
      }
      this._tickmarks = [];
      b = document.createDocumentFragment();
      b.appendChild(h.generate());
      b.appendChild(k.generate());
      b.appendChild(l.generate());
      this._tick_mark_group.innerHTML = "";
      this._tick_mark_group.appendChild(b);
      $(this._point_group).find("circle").each(function() {
      });
      b = this._point_group.children;
      for (c = 0;c < b.length;c++) {
        a = b[c], d = this.X_Axis.getPosition(a.value), f = new DOMPoint(a.cx.baseVal.value, a.cy.baseVal.value), 1 < d.distance(f) && (a.cx.baseVal.value = d.x, a.cy.baseVal.value = d.y);
      }
    }
  }.bind(this), t = 0, z = null, y = new DOMPoint(-30, -30), r = !1, A = function(a) {
    y.x = a.clientX;
    y.y = a.clientY;
  }, E = function(a) {
    cancelAnimationFrame(t);
    z.style.visibility = "hidden";
    r = !1;
  }, G = function(a) {
    if (!0 === this.getEnabled()) {
      this.setHintHighlight(!1);
      var b;
      m ? (a = H(a.clientX, a.clientY), b = a.location, a = a.data) : (a = F(a.clientX, a.clientY), b = this.X_Axis.getProjectedPoint(a), a = this.X_Axis.getAxisValue(a));
      var c = document.createElementNS(e, "circle");
      c.classList.add("CTAT-number-line--point");
      c.setAttributeNS(null, "cx", b.x);
      c.setAttributeNS(null, "cy", b.y);
      c.setAttributeNS(null, "r", p);
      c.value = a;
      if (this._point_group.children.length >= this.Max_Points) {
        b = [].slice.call(this._point_group.children);
        var d = b.filter(function(a, b, c) {
          return a.status == CTAT.Component.Base.Tutorable.Options.Status.INCORRECT;
        });
        0 < d.length ? this._point_group.removeChild(d[0]) : (b = b.filter(function(a, b, c) {
          return a.status != CTAT.Component.Base.Tutorable.Options.Status.CORRECT;
        }), 0 < b.length && this._point_group.removeChild(b[0]));
      }
      this._point_group.appendChild(c);
      this.setActionInput("AddPoint", a.toString());
      this.processAction();
    }
  }.bind(this);
  this.init = function() {
    this.initSVG();
    this.component.classList.add("CTAT-number-line");
    this._axis_line_group = document.createElementNS(e, "g");
    this._axis_line_group.classList.add("CTAT-number-line--axis");
    this._tick_mark_group = document.createElementNS(e, "g");
    this._tick_mark_group.classList.add("CTAT-number-line--tickmark");
    this._point_group = document.createElementNS(e, "g");
    z = document.createElementNS(e, "circle");
    z.setAttributeNS(null, "r", p);
    z.classList.add("CTAT-number-line--cursor");
    z.setAttributeNS(null, "transform", "translate(-30,-30)");
    this.component.appendChild(this._axis_line_group);
    this.component.appendChild(this._tick_mark_group);
    this.component.appendChild(this._point_group);
    this.component.appendChild(z);
    this.X_Axis.svg_group = this._axis_line_group;
    w();
    this.addComponentReference(this, this.getDivWrap());
    this.component.addEventListener("mousemove", A);
    this.component.addEventListener("mouseleave", E);
    var a = this.getEnabled;
    this.component.addEventListener("mouseenter", function() {
      !0 === a() && (r = !0, z.style.visibility = null, t = requestAnimationFrame(u));
    });
    this.component.addEventListener("click", G);
    this.component.addEventListener("focus", this.processFocus);
  };
  var F = function(a, b) {
    this.svgPoint = this.svgPoint ? this.svgPoint : this.component.createSVGPoint();
    this.svgPoint.x = a;
    this.svgPoint.y = b;
    var c = this._axis_line_group.getScreenCTM().inverse();
    this.svgPoint = this.svgPoint.matrixTransform(c);
    var d = this.component.createSVGPoint();
    d.y = $(this.component).offset().top;
    d.x = $(this.component).offset().left;
    var d = d.matrixTransform(c), e = $(this.component), c = d.x + parseInt(e.css("borderLeftWidth")) + parseInt(e.css("paddingLeft")) + parseInt(e.css("marginLeft")), d = d.y + parseInt(e.css("borderTopWidth")) + parseInt(e.css("paddingTop")) + parseInt(e.css("marginTop"));
    return new DOMPoint(this.svgPoint.x - c, this.svgPoint.y - d);
  }.bind(this), x = function(a, b) {
    return this.getProjectedPoint(F(a, b));
  }.bind(this.X_Axis), H = function(a, b) {
    for (var c = x(a, b), d = null, e = Number.POSITIVE_INFINITY, f, g, h = 0;h < this._tickmarks.length;h++) {
      f = this._tickmarks[h], g = c.distance(f.location), g < e && (d = f, e = g);
    }
    return d;
  }, u = function() {
    if (r && !0 === this.getEnabled()) {
      if (m) {
        var a = H(y.x, y.y);
        z.setAttributeNS(null, "transform", "translate" + CTAT.Geom.Point.to2DString(a.location, !0));
      } else {
        z.setAttributeNS(null, "transform", "translate" + CTAT.Geom.Point.to2DString(x(y.x, y.y), !0));
      }
      t = requestAnimationFrame(u);
    }
  }.bind(this);
  this.render = function() {
    w();
  };
  this.calcXCoordinate = function(a) {
    a = new c(a);
    var b = this.getWidth() - 30, b = Math.abs(b - 30), d = max.subtract(min);
    return 30 + a.subtract(min).divide(d) / b;
  };
  this.calcNum = function(a) {
    var b = this.getWidth() - 30, b = Math.abs(b - 30);
    a = max.subtract(min).multiply((a - 30) / b);
    return min.add(a);
  };
  this.showCorrect = function(a) {
    a.getInput();
    a = a.getAction();
    switch(a) {
      case "AddPoint":
        if (0 < this._point_group.children.length) {
          var b = [].slice.call(this._point_group.children), b = b[b.length - 1];
          b.classList.remove("CTAT--incorrect");
          b.classList.remove("CTAT--hint");
          b.classList.add("CTAT--correct");
        }
        break;
      case "Points":
        for (b in this._point_group.children) {
          b.classList.remove("CTAT--incorrect"), b.classList.remove("CTAT--hint"), b.classList.add("CTAT--correct");
        }
        break;
      default:
        console.log("Unhandled Action in", this.getName(), a);
    }
  };
  this.showInCorrect = function(a) {
    a.getInput();
    a = a.getAction();
    switch(a) {
      case "AddPoint":
        if (0 < this._point_group.children.length) {
          var b = [].slice.call(this._point_group.children), b = b[b.length - 1];
          b.classList.remove("CTAT--correct");
          b.classList.remove("CTAT--hint");
          b.classList.add("CTAT--incorrect");
        }
        break;
      case "Points":
        for (b in this._point_group.children) {
          b.classList.remove("CTAT--correct"), b.classList.remove("CTAT--hint"), b.classList.add("CTAT--incorrect");
        }
        break;
      default:
        console.log("Unhandled Action in", this.getName(), a);
    }
  };
  this.set_minimum = function(a) {
    this.Minimum = a;
    this.render();
  };
  this.set_maximum = function(a) {
    this.Maximum = a;
    this.render();
  };
  this.set_max_user_entries = function(a) {
    this.setMaxPoints(parseInt(a));
    this.setDisableOnCorrect(!1);
  };
  this.set_large_step = function(a) {
    h.setStep(a);
    this.render();
  };
  this.set_small_step = function(a) {
    k.setStep(a);
    this.render();
  };
  this.set_precision = function(a) {
    this.setPrecision(parseInt(a));
    this.render();
  };
  this.AddPoint = function(a) {
  };
  this.Points = function(a) {
    a = a.split(";");
    for (var b in a) {
    }
  };
  this.set_denominator = function(a) {
  };
  this.setMaxControllers = function(a) {
  };
  this.setParameterHandler("MaxValueControllers", this.setMaxControllers);
  this.setMinControllers = function(a) {
  };
  this.setParameterHandler("MinValueControllers", this.setMinControllers);
  this.setLargeTickControllers = function(a) {
  };
  this.setParameterHandler("LargeTickmarkControllers", this.setLargeTickControllers);
  this.setSmallTickControllers = function(a) {
  };
  this.setParameterHandler("SmallTickmarkControllers", this.setSmallTickControllers);
  this.setDenominatorControllers = function(a) {
  };
  this.setParameterHandler("DenominatorTickmarkControllers", this.setDenominatorControllers);
};
CTATNumberLine.prototype = Object.create(CTAT.Component.Base.SVG.prototype);
CTATNumberLine.prototype.constructor = CTATNumberLine;
CTAT.ComponentRegistry.addComponentType("CTATNumberLine", CTATNumberLine);
var CTATTools = {};
function s4() {
  return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
}
function guid() {
  return s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
}
function htmlEscape(a) {
  return String(a).replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
}
function htmlUnescape(a) {
  return String(a).replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
}
function tableCreate() {
  var a = document.body, b = document.createElement("table");
  b.style.width = "100%";
  b.style.border = "1px solid black";
  for (var d = 0;3 > d;d++) {
    for (var f = b.insertRow(), g = 0;2 > g && (2 != d || 1 != g);g++) {
      var c = f.insertCell();
      c.appendChild(document.createTextNode(" "));
      1 == d && 1 == g && c.setAttribute("rowSpan", "2");
    }
  }
  a.appendChild(b);
  return b;
}
;var CTATFractionBar = function(a, b, d, f, g) {
  CTAT.Component.Base.UnitDisplay.call(this, "CTATFractionBar", "aFractionBar", a, b, d, f, g);
  var c = CTATGlobals.NameSpace.svg;
  this.init = function() {
    this.initSVG();
    this.baseGroup = document.createElementNS(c, "g");
    this.getComponent().appendChild(this.baseGroup);
    this.getComponent().classList.add("CTAT-fraction-bar");
    this.drawPieces();
    this.addComponentReference(this, this.getDivWrap());
    this.component.addEventListener("focus", this.processFocus);
  };
  this.drawPieces = function() {
    if (this.baseGroup) {
      for (var a = this.parseValue(), b = 0, d = document.createDocumentFragment(), f = 0;f < a.length;f++) {
        var g = a[f], p = 100 * g, m = document.createElementNS(c, "rect");
        m.classList.add("CTAT-fraction-bar--piece");
        m.setAttributeNS(null, "height", "100%");
        m.setAttributeNS(null, "width", p + "%");
        m.setAttributeNS(null, "y", 0);
        m.setAttributeNS(null, "x", b + "%");
        this.addPieceElem(m, g, g.selected);
        b += p;
        d.appendChild(m);
      }
      this.baseGroup.innerHTML = "";
      this.baseGroup.appendChild(d);
      var w = this.baseGroup.getBBox().width - 1;
      Array.prototype.slice.call(this.baseGroup.childNodes).forEach(function(a) {
        if ("rect" == a.nodeName) {
          var b = window.getComputedStyle(a), c = parseFloat(b.getPropertyValue("padding-left")), d = parseFloat(b.getPropertyValue("stroke-width")), b = a.getBBox();
          a.setAttributeNS(null, "y", b.y + d / 2);
          a.setAttributeNS(null, "height", b.height - d);
          var e = b.x + d / 2, d = b.width - d;
          1 > b.x ? d -= c / 2 : (e += c / 2, d = b.x + b.width >= w ? d - c / 2 : d - c);
          a.setAttributeNS(null, "x", e);
          a.setAttributeNS(null, "width", d);
        }
      });
    }
  };
  this.setShowFractionLabel = function(a) {
    CTATGlobalFunctions.toBoolean(a);
  };
  this.setStyleHandler("showFractionLabel", this.setShowFractionLabel);
};
CTATFractionBar.prototype = Object.create(CTAT.Component.Base.UnitDisplay.prototype);
CTATFractionBar.prototype.constructor = CTATFractionBar;
CTAT.ComponentRegistry.addComponentType("CTATFractionBar", CTATFractionBar);
var CTATTextField = function(a, b, d, f, g) {
  CTATTextBasedComponent.call(this, "CTATTextBasedComponent", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(22);
  var c = this, e = null;
  this.setAction("UpdateTextArea");
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.init = function() {
    c.ctatdebug("init (" + c.getName() + ")");
    e = document.createElement("div");
    e.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    e.classList.add("CTAT-text");
    e.style.zIndex = CTATGlobalFunctions.gensym.z_index();
    c.setComponent(e);
    e.innerHTML = c.getText();
    c.setInitialized(!0);
    c.addComponentReference(c, e);
    c.getDivWrap().appendChild(e);
    c.render();
    c.addSafeEventListener("focus", c.processFocus, e);
  };
  this.setText = function(a) {
    c.ctatdebug("setText (" + a + ")");
    c.assignText(a);
    null !== e && (e.innerHTML = a);
  };
  this.setStyleHandler("ShowScrollbars", function(a) {
    !0 === CTATGlobalFunctions.toBoolean(a) ? c.modifyCSSAttribute("overflow", "scroll") : c.modifyCSSAttribute("overflow", "hidden");
  });
};
CTATTextField.prototype = Object.create(CTATTextBasedComponent.prototype);
CTATTextField.prototype.constructor = CTATTextField;
CTAT.ComponentRegistry.addComponentType("CTATTextField", CTATTextField);
var CTATCheckBox = function(a, b, d, f, g) {
  CTAT.Component.Base.Clickable.call(this, "CTATCheckBox", "__undefined__", a, b, d, f, g);
  this.setDefaultWidth(100);
  this.setDefaultHeight(22);
  var c = null, e = null, h = null, k = "top";
  this.setStyleHandler("inspBackgroundColor", null);
  this.setStyleHandler("BackgroundColor", null);
  this.setStyleHandler("DrawBorder", null);
  this.setStyleHandler("showBorder", null);
  this.setStyleHandler("BorderColor", null);
  this.setStyleHandler("TextAlign", null);
  var l = this;
  this.setSelection(this.getComponentGroup());
  this.setAction("UpdateCheckBox");
  this.getCheckBox = function() {
    return c;
  };
  this.setCheckBox = function(a) {
    c = a;
  };
  this.getLabelPlacement = function() {
    return k;
  };
  this.setLabelPlacement = function(a) {
    k = String(a);
    if (e && c) {
      switch(k.toLowerCase()) {
        case "left":
          c.style.width = null;
          c.style["float"] = "right";
          break;
        case "bottom":
          c.style["float"] = null;
          c.style.width = "100%";
          break;
        case "top":
          h.appendChild(c);
          c.style["float"] = null;
          c.style.width = "100%";
          break;
        default:
          c.style.width = null, c.style["float"] = null;
      }
    }
  };
  this.setStyleHandler("labelPlacement", this.setLabelPlacement);
  this.data_ctat_handlers["label-placement"] = this.setLabelPlacement;
  var q = function(a) {
    this.updateSAI();
    this.processClick(a);
  };
  this.init = function() {
    l.setInitialized(!0);
    h = document.createElement("div");
    c = document.createElement("input");
    c.type = "checkbox";
    c.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    c.classList.add("CTAT-checkbox-button");
    this.getText() ? c.value = l.getText() : this.getDivWrap() && this.getDivWrap().textContent ? c.value = this.getDivWrap().textContent : c.value = c.id;
    this.getComponentGroup() ? c.name = l.getComponentGroup() : this.getDivWrap() && $(this.getDivWrap()).attr("name") ? c.name = $(this.getDivWrap()).attr("name") : c.name = "checkBoxGroup";
    l.assignEnabled(!0);
    !0 === l.getEnabled() ? c.disabled = !1 : c.disabled = !0;
    l.ctatdebug("Final location: " + l.getX() + "," + l.getY() + " with text: " + l.getText());
    l.addComponentReference(l, c);
    var a = this.getDivWrap().innerHTML;
    this.getDivWrap().innerHTML = "";
    l.getDivWrap().appendChild(h);
    e = document.createElement("label");
    e.htmlFor = c.id;
    this.getText() ? e.textContent = this.getText() : a && (e.innerHTML = a);
    l.setComponent(h);
    l.setLabel(e);
    h.appendChild(c);
    h.appendChild(e);
    h.classList.add("CTAT-checkbox");
    c.addEventListener("click", q.bind(this));
    c.addEventListener("focus", l.processFocus);
    c.onfocus = this.processOnFocus;
    this.setSelection(this.getComponentGroup());
  };
  var p = this.setText;
  this.setText = function(a) {
    l.ctatdebug("setText (" + a + ")");
    p(a);
    h && (c.value = a, e.textContent = a);
  };
  this.setStyleHandler("labelText", this.setText);
  var m = this.setEnabled;
  this.setEnabled = function(a) {
    m(a);
    c && (c.disabled = !this.getEnabled());
  };
  this.getCheckBoxInput = function() {
    return e.innerHTML + ": " + c.checked;
  };
  this.reset = function() {
    c.checked = !1;
    l.setEnabled(!0);
    l.setLabelPlacement(k);
  };
  this.UpdateCheckBox = function(a) {
    c.checked = 0 <= a.search(new RegExp("(^|;)" + e.innerHTML + "\\s*:\\s*true"));
  };
  this.SetSelected = function(a) {
    a = CTATGlobalFunctions.toBoolean(a);
    c.checked = a;
  };
  this.updateSAI = function() {
    var a = $('div[data-ctat-component]:has(input[type="checkbox"][name="' + c.name + '"])').sort(function(a, b) {
      var c = a.id, d = b.id;
      return c > d ? 1 : c < d ? -1 : 0;
    }), a = $.map(a, function(a) {
      a = $(a).data("CTATComponent").getCheckBox();
      return a.value + ": " + a.checked;
    });
    this.setSelection(c.name);
    this.setInput(a.join(";"));
  };
  var w = function(a) {
    e.classList.add(a);
    c.classList.add(a);
  }, t = function(a) {
    e.classList.remove(a);
    c.classList.remove(a);
  };
  this.showCorrect = function(a) {
    t("CTAT--incorrect");
    t("CTAT--hint");
    w("CTAT--correct");
  };
  this.removeCorrect = t.bind(this, "CTAT--correct");
  this.showInCorrect = function(a) {
    t("CTAT--correct");
    t("CTAT--hint");
    w("CTAT--incorrect");
  };
  this.removeInCorrect = t.bind(this, "CTAT--incorrect");
  this.showHintHighlight = function(a) {
    t("CTAT--incorrect");
    t("CTAT--correct");
    a ? w("CTAT--hint") : t("CTAT--hint");
  };
};
CTATCheckBox.prototype = Object.create(CTAT.Component.Base.Clickable.prototype);
CTATCheckBox.prototype.constructor = CTATCheckBox;
CTAT.ComponentRegistry.addComponentType("CTATCheckBox", CTATCheckBox);
var CTATTutor = {drawing:!1, onMobile:!1}, tutorInitialized = !1;
Object.defineProperty(CTATTutor, "parser", {get:function() {
  this._parser || (CTATConfig.parserType_is_XML() ? (ctatdebug("Creating XML parser ..."), this._parser = new CTATXML) : CTATConfig.parserType_is_JSON() && (this._parser = new CTATJSON));
  return this._parser;
}});
CTATTutor.initializeHTMLComponents = function() {
  ctatdebug("initializeHTMLComponents ()");
  for (var a in CTAT.ComponentRegistry) {
    var b = CTAT.ComponentRegistry[a];
    $("." + a).each(function() {
      var a = new b;
      console.log("Attaching CTAT tutoring to " + $(this).attr("id"));
      $(this).attr("id") ? a.setName($(this).attr("id")) : (this.id = CTATGlobalFunctions.gensym.div_id(), a.setName(this.id));
      a.setDivWrapper(this);
      a.processAttributes();
      a.init();
      a.processTabOrder();
      $(this).data("CTATComponent", a);
    });
  }
  ctatdebug("initializeHTMLComponents () done");
};
function assignNameTranslator(a) {
  nameTranslator = a;
}
CTATTutor.drawTutor = function() {
  if (!0 !== this.drawing) {
    this.drawing = !0;
    for (var a in CTATShellTools.component_descriptions) {
      var b = CTATShellTools.component_descriptions[a].getComponentPointer();
      null !== b && b.drawComponent();
    }
    this.drawing = !1;
  }
};
CTATTutor.initialize = function() {
  var a = navigator.userAgent.toLowerCase();
  0 < a.search("iphone") ? CTATTutor.onMobile = !0 : 0 < a.search("ipod") ? CTATTutor.onMobile = !0 : 0 < a.search("android") && (CTATTutor.onMobile = !0);
  a = getSafeElementById("pageor");
  null !== a && !1 === CTATTutor.onMobile && (a.style.display = "none");
  ctatdebug("initialize ()");
  this.initializeHTMLComponents();
  var a = flashVars.getRawFlashVars(), b = !0;
  a && a.previewMode && 0 == a.previewMode && (b = !1);
  1 == b && (commShell = new CTATCommShell, commShell.init(CTATTutor));
};
CTATTutor.createInterface = function() {
  ctatdebug("createInterface (" + Object.keys(CTATShellTools.component_descriptions).length + ")");
  if (CTATGlobals.interfaceElement) {
    ctatdebug("Re-creating interface ...");
    var a = CTATTutor.parser.getElementChildren(CTATGlobals.interfaceElement);
    CTATTutor.createStaticInterface(null, a, null);
  }
  for (var b in CTATShellTools.component_descriptions) {
    a = CTATShellTools.component_descriptions[b];
    if (!a) {
      alert("Internal error parsing component at index " + b);
      return;
    }
    if (!a.name) {
      alert("Internal error parsing component at index " + b + " (no name attribute available)");
      return;
    }
    if (-1 == a.name.indexOf("null.")) {
      if (ctatdebug("Component: " + a.name + ", type: " + a.type), "CTATCommShell" == a.type) {
        if (commShell && commShell.setName(a.name), "CTATCommShell" == a.type) {
          ctatdebug("Tutor dimensions: " + a.width + "x" + a.height);
          var d = getSafeElementById(ctatcontainer);
          null !== d ? (ctatdebug("Setting canvas dimensions from: " + d.width + "px, " + d.height + "px, to: " + a.width + "px, " + a.height + "px"), d.width = a.width, d.height = a.height, d.style.width = a.width, d.style.height = a.height, ctatdebug("Canvas dimensions now: " + d.width + "px, " + d.height + "px")) : ctatdebug("Error: tutor canvas is null, can't adjust size");
          d = getSafeElementById(ctatcontainer);
          null !== d ? (d.style.width = a.width + "px", d.style.height = a.height + "px") : ctatdebug("Error: tutor container is null, can't adjust size");
        }
      } else {
        CTAT.ComponentRegistry.hasOwnProperty(a.type) ? (ctatdebug("Creating (" + a.type + ") :" + a.name), d = new CTAT.ComponentRegistry[a.type](a, a.x, a.y, a.width, a.height), d.setName(a.name), "CTATTextInput" != a.type && "CTATTextArea" != a.type || d.setEnabled(!0), d.setTabIndex(a.tabIndex), a.setComponentPointer(d), d.initialize(), "CTATRadioButton" != a.type && "CTATCheckBox" != a.type || d.setLabelPlacement(d.getLabelPlacement()), ctatdebug(d.getDivWrap())) : ctatdebug("ERROR: Unrecognized component type " + 
        a.type + " for " + a.name);
      }
    }
  }
  this.postProcess();
  this.drawTutor();
  ctatdebug("Tutor has been intialized from BRD, recalculating canvas position and size ...");
  CTATScrim.scrim ? CTATScrim.scrim.scrimDown() : ctatdebug("CRITICAL: CTATScrim.scrim is null!");
};
CTATTutor.postProcess = function() {
  ctatdebug("postProcess ()");
  for (var a in CTATShellTools.component_descriptions) {
    var b = CTATShellTools.component_descriptions[a].getComponentPointer();
    null !== b ? ("CTATTable" == b.getClassName() && b.adjustTableContents(), "CTATScrollPaneComponent" != b.getClassName() && "CTATComponentContainerReference" != b.getClassName() && "CTATGroupingComponent" != b.getClassName() || b.postProcess()) : ctatdebug("Error: component pointer " + a + " is null");
  }
};
CTATTutor.createStaticInterface = function(a, b, d) {
  ctatdebug("createStaticInterface ()");
  var f = getSafeElementById(ctatcontainer);
  null !== a && (f = a);
  for (a = 0;a < b.length;a++) {
    var g = b[a];
    ctatdebug(this.parser.getElementName(g));
    if ("timeline" == this.parser.getElementName(g)) {
      ctatdebug("Timeline node found, obtaining visual elements ...");
      b = this.parser.getElementChildren(g);
      this.createStaticInterface(null, b, null);
      break;
    }
    if ("ctatcomponent" == this.parser.getElementName(g)) {
      var c = this.parser.getElementAttr("instance");
      d && (ctatdebug("Registering existence of CTAT component on MovieClip container: " + c), d.addComponent(c));
    }
    var e, h, k, l;
    "shape" == this.parser.getElementName(g) && (e = this.parser.getElementAttr(g, "x"), h = this.parser.getElementAttr(g, "y"), k = this.parser.getElementAttr(g, "width"), l = this.parser.getElementAttr(g, "height"), c = this.parser.getElementAttr(g, "instance"), ctatdebug("Creating shape: " + c + " at: " + e + "," + h + "," + k + "," + l), k = "data:image/png;base64, " + this.parser.getNodeTextValue(g), l = new Image, l.setAttribute("style", "position: absolute; top: " + h + "px; left:" + e + "px; z-index:" + 
    CTATGlobalFunctions.gensym.z_index() + ";"), l.setAttribute("id", c), l.setAttribute("src", k), f.appendChild(l));
    "statictext" == this.parser.getElementName(g) && (e = this.parser.getElementAttr(g, "x"), h = this.parser.getElementAttr(g, "y"), k = this.parser.getElementAttr(g, "width"), l = this.parser.getElementAttr(g, "height"), c = this.parser.getElementAttr(g, "instance"), ctatdebug("Creating static text: " + c + " at: " + e + "," + h + "," + k + "," + l), k = "data:image/png;base64, " + this.parser.getNodeTextValue(g), l = new Image, l.setAttribute("style", "position: absolute; top: " + h + "px; left:" + 
    e + "px; z-index:" + CTATGlobalFunctions.gensym.z_index() + ";"), l.setAttribute("id", c), l.setAttribute("src", k), f.appendChild(l));
    "statictext" == this.parser.getElementName(g) && (c = this.parser.getElementAttr("instance"), ctatdebug("Creating movieclip: " + c), e = this.parser.getElementAttr(g, "x"), h = this.parser.getElementAttr(g, "y"), k = this.parser.getElementAttr(g, "width"), l = this.parser.getElementAttr(g, "height"), e = new CTATMovieClip(c, e, h, k, l), h = e.wrapComponent(f), ctatdebug("Created movieclip: " + c + " at: " + e.x + "," + e.y + "," + e.width + "," + e.height), movieclips.push(e), g = this.parser.getElementChildren(g), 
    this.createStaticInterface(h, g, e));
  }
};
CTATTutor.runTutor = function(a) {
  ctatdebug("runTutor ()");
  !0 === CTATGlobals.tutorRunning ? ctatdebug("The tutor is already running") : (null == skillSet && (skillSet = new CTATSkillSet), window.onerror = function(a, d, f) {
    var g = new CTATHTMLManager;
    ctatdebug(g.htmlEncode(a) + " in " + d + ", line " + f);
  }, centerTutorContainer(), CTATTutor.initialize(), CTATGlobals.tutorRunning = !0, ctatdebug("runTutor () ... all set"));
};
function initTutor(a, b, d, f) {
  console.trace("initTutor() #aFlashVars " + (a ? a.length : null) + ", usingFlash " + f);
  ctatdebug("initTutor() #aFlashVars " + (a ? a.length : null) + ", usingFlash " + f);
  1 == tutorInitialized ? console.log("Tutor already initialized, probably in author mode") : (CTATConfiguration.generateDefaultConfigurationObject(), CTATConfiguration.setParams(a), null == f && (f = CTATConfiguration.getSingleParameterValues(["student_interface", "swf_name"]).some(function(a) {
    return 0 <= a.search(/[.]swf$/i);
  })), f && CTATScrim.scrim.scrimDown(), CTATCommLibrary.setAuthenticityToken(CTATConfiguration.get("authenticity_token")), b && (ctatcontainer = b), (a = document.getElementById(ctatcontainer)) && a.classList.add("CTATTutorContainer"), a = getSafeElementById("debugtraces"), null !== a && (useDebugging = !0 === a.checked ? !0 : !1), a = CTATConfiguration.getRawFlashVars(), ctatdebug("initTutor() tempFlashVars[swf_name] " + a.swf_name + ", window.sendToTutor " + window.sendToTutor), a.swf_name && 
  !window.sendToTutor && (window.sendToTutor = function(a) {
    ctatdebug("window.sendToTutor(" + a + ") CTAT.ToolTutor.tutor " + CTAT.ToolTutor.tutor);
    return CTAT.ToolTutor.tutor ? CTAT.ToolTutor.tutor.receiveFromInterface(a) : CTAT.ToolTutor.tutorMessages.push(a);
  }, window.registerInterface = function(a) {
    console.log("window.registerInterface(" + a + ") CTAT.ToolTutor.tutor " + CTAT.ToolTutor.tutor);
    CTAT.ToolTutor.registerInterfaceMessageHandler(a);
  }), ctatdebug("initTutor() tempFlashVars[swf_name] " + a.swf_name + ", window.sendToTutor " + window.sendToTutor), ctatdebug("initTutor() tempFlashVars[question_file] " + a.question_file), "javascript" == String(a.tutoring_service_communication).toLowerCase() && ("undefined" != typeof CTATExampleTracer && CTATExampleTracer ? CTAT.ToolTutor.registerTutor(new CTATExampleTracer) : CTATScrim.scrim.warningScrimUp('Tutoring service communication parameter is "JavaScript" but class\nCTATExampleTracer is missing. Use a different ctat-*.js script.')), 
  ctatdebug("initTutor ()"), "applet" == a.tutoring_service_communication && deployJava.runApplet({id:"TSApplet", width:150, height:10}, {jnlp_href:"/ctat_applet/TSApplet.jnlp"}, "1.6"), f || CTATTutor.runTutor(a), tutorInitialized = !0);
}
window.initTutor = initTutor;
function receiveFromTutor() {
  ctatdebug("receiveFromTutor ()");
}
function saveAndQuit() {
  ctatdebug("saveAndQuit ()");
}
function prepTutorArea() {
  console.log("prepTutorArea ()");
  initTutor();
}
window.prepTutorArea = prepTutorArea;
function assignAnonymousGradingProcessor(a) {
  commShell.assignAnonymousGradingProcessor(a);
}
function gradeAnonymousComponent(a, b, d) {
  ctatdebug("gradeAnonymousComponent ()");
  a = new CTATSAI(a, b, d);
  commShell.processComponentAction(a);
}
function testTutor(a) {
  ctatdebug("testTutor ()");
  window.onerror = function(a, d, f) {
    var g = new CTATHTMLManager;
    ctatdebug(g.htmlEncode(a) + " in " + d + ", line " + f);
  };
  null == skillSet && (skillSet = new CTATSkillSet);
  (new CTATCommLibrary).send("http://augustus.pslc.cs.cmu.edu/crossdomain.xml");
}
function centerTutorContainer() {
  ctatdebug("centerTutorContainer ()");
  var a = getSafeElementById(ctatcontainer);
  if (null == a) {
    ctatdebug("Tutor container not found, bump");
  } else {
    var b = null;
    if (flashVars) {
      var b = flashVars.getRawFlashVars(), d = "550", f = "450", d = a.offsetWidth, f = a.offsetHeight;
      b && b.width && b.height && (ctatdebug("We have raw width and height variables in our flashvars: " + b.width + "," + b.height), d = b.width, f = b.height);
      b.centerTutor ? 1 == b.centerTutor && (ctatdebug("Moving tutor over by: " + ("-" + Number(d / 2) + "px 0 0 -" + Number(f / 2) + "px;")), a.style.position = "absolute", a.style.top = "0", a.style.left = "0", a.style.right = "0", a.style.bottom = "0", a.style.margin = "auto") : ctatdebug("The tutor is not configured to center the container, bump");
    } else {
      ctatdebug("No flashvars yet, bump");
    }
  }
}
function checkTutorCanvas() {
  ctatdebug("checkTutorCanvas ()");
  var a = getSafeElementById(ctatcontainer), b = getSafeElementById("main-canvas"), d = flashVars.getRawFlashVars(), f = "550", g = "450";
  a && (ctatdebug("Recording the actual CSS width and height: " + a.offsetWidth + " , " + a.offsetHeight), f = a.offsetWidth, g = a.offsetHeight);
  d && d.width && d.height && (ctatdebug("We have tutor size flashvars, using those instead: " + d.width + " , " + d.height), f = d.width, g = d.height);
  null === b ? (ctatdebug("No canvas available, creating ..."), b = document.createElement("canvas"), b.id = "main-canvas", b.innerHTML = "Your browser does not support CTAT. Please update or use another browser.", ctatdebug("Setting canvas to: 0,0," + f + " , " + g), getSafeElementById(ctatcontainer).appendChild(b)) : (ctatdebug("Setting canvas to: 0 , 0, " + f + " , " + g), b.style.top = "0", b.style.left = "0");
  b.style.width = f + "px";
  b.style.height = g + "px";
  return b;
}
;function init() {
  console.log("IncludeTutor.init()");
  CTATConfig.external = "none";
  CTATConfig.parserType = "xml";
  commMessageHandler = new CTATMessageHandler;
  CTAT.ToolTutor.registerInterface(commMessageHandler);
  initTutor();
}
;var CTATContextData = function() {
  CTATBase.call(this, "CTATContextData", "__undefined__");
};
CTATContextData.prototype = Object.create(CTATBase.prototype);
CTATContextData.prototype.constructor = CTATContextData;
var CTATDialogBox = function(a, b, d, f) {
};
var CTATLinkData = {};
var CTATStyle = function() {
  this.styleValue = this.styleName = "";
};
var TutorShopAPIProxy = {};
function javaScriptInfo(a) {
  var b = getSafeElementById("info");
  null != b && (b.innerHTML = a);
}
;CTAT.Component.Base.SVGButton = function(a, b, d, f, g, c, e) {
  CTAT.Component.Base.SVG.call(this, a, b, d, f, g, c, e);
  this.initSVGButton = function() {
    this.initSVG();
    var a = this.getComponent();
    a.classList.add("CTAT-gen-component");
    a.classList.add("CTAT-svg-button");
    a.addEventListener("click", this.processClick);
  };
  this.setDefaultColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setDisabledColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setHoverColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  this.setClickColor = function(a) {
    CTATGlobalFunctions.formatColor(a);
  };
  var h = this.setEnabled;
  this.setEnabled = function(a) {
    h(a);
    a ? this.getComponent().classList.remove("CTAT-svg-button--disabled") : this.getComponent().classList.add("CTAT-svg-button--disabled");
  };
};
CTAT.Component.Base.SVGButton.prototype = Object.create(CTAT.Component.Base.SVG.prototype);
CTAT.Component.Base.SVGButton.prototype.constructor = CTAT.Component.Base.SVGButton;
var CTATAudioButtonImaged = function(a, b, d, f, g) {
  CTATImageButtonComponent.call(this, "CTATAudioButton", "__undefined__", a, b, d, f, g);
  var c = this, e = null, h = null, k = "";
  this.setParameterHandler("SoundFile", function(a) {
    k = a;
  });
  c.setActionInput("play", "-1");
  this.ctatdebug(this.getClassName() + " (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  this.assignImages(CTATAudioButtonImaged.audioDefaultImage, CTATAudioButtonImaged.audioHoverImage, CTATAudioButtonImaged.audioClickedImage, CTATAudioButtonImaged.audioDisabledImage);
  this.init = function() {
    this.configFromDescription();
    c.ctatdebug("init (" + c.getName() + ")");
    c.addCSSAttribute("z-index", CTATGlobalFunctions.gensym.z_index());
    h = new Image;
    h.title = c.getName();
    h.name = c.getName();
    h.setAttribute("id", CTATGlobalFunctions.gensym.div_id());
    h.setAttribute("onkeypress", "return noenter(event)");
    c.setComponent(h);
    c.addComponentReference(c, h);
    c.ctatdebug("Final location: " + c.getX() + "," + c.getY() + " with text: " + c.getText());
    c.setInitialized(!0);
    c.getDivWrap().appendChild(h);
    h.src = c.getDefaultImage();
    var a = c.getBackgroundColor(), a = "rgba (" + hexToRgb(a).r + "," + hexToRgb(a).r + "," + hexToRgb(a).r + ",0)";
    c.modifyCSSAttribute("background-color", a);
    c.addStringCSS("filter: alpha(opacity=0);");
    c.addCSSAttribute("width", c.getWidth());
    c.addCSSAttribute("height", c.getHeight());
    h.setAttribute("style", c.getCSS());
    c.addSafeEventListener("click", c.processClick, h);
    e = document.createElement("audio");
    c.addSafeEventListener("mouseover", c.processMouseOver, h);
    c.addSafeEventListener("mouseout", c.processMouseOut, h);
    e.addEventListener("load", function() {
      c.ctatdebug("Audio loaded");
      c.setEnabled(!0);
    }, !0);
    c.render();
  };
  this.processClick = function(a) {
    c.ctatdebug("processClick (" + a.currentTarget.getAttribute("id") + " -> " + a.eventPhase + ")");
    !0 === c.getEnabled() ? (c.ctatdebug("Playing audio file: " + k), e.setAttribute("src", k), e.load(), e.play(), c.processAction()) : c.ctatdebug("Component is disabled, not grading");
  };
  this.processSerialization = function() {
  };
  this.play = function() {
    e.setAttribute("src", k);
    e.load();
    e.play();
  };
  this.playClip = function(a) {
    e.setAttribute("src", a);
    e.load();
    e.play();
  };
  this.pause = function() {
    e.pause();
  };
};
CTATAudioButtonImaged.audioDefaultImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADUxJREFUeNrkm1tsXMd5x38z55zdPbsrXpYXkRRFSZSsKJZ8V+3allvbcSMnqh1fEDgt4hRI/RC3LwUq9KFA0IcaRV/6WD+2eWiNomkRNI7gOpatJLJjxFV9iRxJJmVLJineJJNL7nL33GamD3shl3vhyhZdtxrgA8/OzJkz//mu881QmHPfNvPnz6EiD0SI0AqDwiKGUgopJQhNqegyyTKBMJX62mKwy09yXYuujmcq4xoboR2EkUgitDCAhRIRQvpoJFJtQQBCrCAJsQxoAQoLLTVgMMYgtYUQDlpItNCgPaQUSJNA08nA/q8hPnnpbiMtQ2cmoGnJboOuS1ffBpAdhq4pvgglt5CkuDKL9Pxca8DQGlSrNvjCAAbYkimUZM8Qcb0ViVHXH2gp5fUHWkXm+gNtWdZ1B9oW5vPjtBl8FtP1ECL/Nsz+IyKc/t8B3Siw2BTA3YcRg3+MFAKSO/HcgzD+p8TN5w9cIj4Hl+Xug5G/RAiBUgqtNYktI0xbf4hB1HVXxqIQpvFVAmWs/4OctrvQO59DWqkq4LLbwO66i5WZTtJOtuaVK4UBTkw8ihSauFUkHcvR684wkJqkPzmDEPqzgt7kMGDkrxCJHWitUUohhMCU7YjBYsWPkXbWRedG4kelqRXDGFmvk6nlYYS4k+7EFfZm3md311lsGX5a0Jvnp/Xgs5gt94DWVQ6bNYazWCwiw0bqZWr6VWuN4ZNChjcLv8PZKwe4Y+BNtndc+DSskJtmuHTf0xhj0Fo3BLGysoJSjW2KMaYlLRa7OX7h67w1fQh9lRhssRmA3S8RDf0FRus6IGtLPp8nVmgEmKpkbFROz93EkreFB3a+gi3bM8pSYq694Rr5azSJlpzSSlNYWeHsZLJuiJ7kZQ7v/gn373yF2wfeYig9gSRoOtbH2R28duErbXPcjvS13HAI1PD3iextG/YMoxDP9xmbTtS1xS2f4Y7Jmrplv4Ozl/dxZn4/oXbq3rm4uINfTd3F3dvfbEO8ravUaREDmWjYpPqeJkr9dkP9rRlCCKIoIooi5rI2XiBJxFbFOdI2xShN3CoSs3wAOuLL3DX8Fnsy5/n5xUPM5/vrxn1vZj9DW6bY0TXZGrS22tMdkxhF9z2Ndg+gZbrxYPEMJgw3BG2MIYoitNZk85LFFZvB2Goi40pxgFcvfgPHCuhOXGZn5xijXR9gCUVPcoFHvvQSPx1/gI+zw3Vjv3HxToZunsFpod8yMMU2DNONBDv/niD9EJE1gBbphiREe2bRGINSCmMMQahZzNVKm9KCIIIVP8bU0jZen3iAY+NPMrsyBIBjhXz1hhP0JufRZXdYoYXCFs7O3dDakImNpFs4hINHUaQ2dCNXQ5XoTCnFQr421HTtFQZTF9niXEEphVKK+XyGl8aPcDG7qwr8oT0nsURQB/zXM3tRLYyatIi35oozQBTbUzdwI2rHv64FDaCUJpur/WbGXeDhPcd44ss/5Gt7XqTXnUYpRRDCqx/ez5VCT6lfcokDW89WF6ZCl3NpZpd7W3A6ai6SpvN+gt5nCIKgLWoXeIXDJfARyyu1NiDUcXJBF1JotnVc4tF9P2FX13mUUvih4OSFO6sblVuGxhpy+8InA6043XgXo7p/n1/OPs6/vZplaWmJMAzxfb8peZ7XdkCxVjKUUuQKZt2Go48fnfsWx84/yaKXQQrNg7tP0hH7hCiKmFzs49LS1pJVT6ww1FGv25eymRacprGfznIHL7/8MmNjY+RyOfL5/IYUli33RmpQ4XgFdNGvXaz+5AyHR3+EUUX+48zXyQcpbBlx6+BpwjAkDEPG5ldjgW2d9aCzhSSRbsxQ24jGOW/P85icnMS2bbLZbI34NuNeT08Pruu2bcGh5Lq8oHZcSyq2puc4svclfnDqMd659GXu23WKke5ZJAGhsphb7lhNrbu5urkVfJsgsrFjqoGfbqLSvucxOzuLbdvMz8+TSqVaglZK0d/fXw08WpUoispGRxOGIUGgmgQxhl77N5z+qJP7doFr++SXplkqxLGCPAZKRz0qz/R0bQYm7ij80JCMNeC01I05U/Q8lpeXsW2bubk5kslkS9BRFDE4OIhlWQRBsCFoIQRKl0CXLHnj1X9/PIuUpSSDH8Hk1Dx5zyKhveobRT8im61NRCRiGoxulhiUTSamKBQK2LbN4uIivu+3BB2GIYuLi3R3dxOGrTf3SkXYtgNal6TCqIb5jJ//2uHE2xF/892ST5u64pDNaQya7pRf7beQs+vmFrOimtB23dayyQR1EWMMly9fZnFxkSAIqr61GehsNls1NK05rZCWhS6Ho0LUgh6fEjz3TxbjU/DMkSUO7i1999hbLn5Zig6M5Kv9z087dSq1JeGTcJqAlk3OsrbZJ/jmYw/w5qlxfN8niqKWMbXv++RyuarPbs1pRSIRR5c57dTF/5qbdir+/JuCm3eXhPjEe3GO/7eFMT6dKc3d+0rhcxAJ3v0wVgd6uMejWVTcVLx73Wn+7OFFnrzvAMfe3cHY2BiO47TU04rPbgd0Op1Gl3U6EatdzBuGBUe/Jcr5Mnjxlw7PvxgnjErj/sERj45UaaFOjbnMLAhY53oP7Gi+p7BNixxZKlZkp/UBvT0HmUgkaOc0xPf9NnRaVf15GIZscWv1OVeAdz+UXJyV/OI9ydkJCZQAf/Wg4hv3lMaPlOCFE8k6tXNjmltGW4D2rdY7o4S1zHDqA2YGBykWiy05bVlWVRU2isjWbjG70rWgz04Ijj4vAFPmYAnU4/cZjj6lq2L7z68l+XBawDoVvedWj+60/mzZ0Lu3v8Hswl3Mx7cjhEBKWbeNVErhui6+77c0eGtBVxarr3vd1lJpwlCVfTXcNArfOSx58PbVPj89FeOF1+KYdUfNjg2P31tonUSw9cagkzGfp+54ndNTg0ws9OJFbp2RMFqTL1qEYUdboKWUCCnBKLZmatVmWx88cwS2ZmD/LsG+kdqP/fvJGM//OIEx9RL1xKGAHf2tv29L1V5i0Jaa20YucdtI8+sWv7k0wa8uP0FXV1dL4JWkv2VZpBKawZ5a0CP9gj95vF7tLsxKfvCfDj97z64zXAC7BjXf+T1/YyyWuXbHOvu3zTKXe4XJ3MO4rts0mImiCCkljm0z2CPoTNcbSG0gjGAxJzg3IfnZu5KTpy38kIaAO5KG7387JBnfmIk24tpev3hw3zj/eqqL0D6ElLKhb68sRizmsH/UYf1liDMfC/72BZuCD4vLgmKw6r8blbQLz303YvdQewyU2gq51uWRm9/By55BSkmz6x1aaxwnxld+K1XXli/CBxOayTlNvqjqMiNrqa9T8XfPhty+t32JtZW89ofybiziyI1v8ONzPfQPjlb32WtTwEopLMvixj3dVR+8mj03GxpDgAdvh6NPQX/3VZ5HRMLZlLOsgc48h7af4O1sP/39/XieV5M4UEph2za249SBBoPWzZmxfyf80cOShw5+ykMYLTbv1PLGoRkWvOPk1FNkMhkKhUJVtCv+3rHrjVikan25EIJtvXDbXsnhO+Ge/YLPcinKllqwmeXQ6Psc/2gYJ/MImUyGYrGIZVkkEgl8L0tPb32cvmOr4HuPCtJJ6OsSjPQLdg0JErFrdNwmzObfI7t3+3Fenxtm+IbfxXVd4vE4S8vLZMJfkIp5df2HeuF7j23eraem2dBraticiFs6/4XLsx+RSCRYWFhgduyH3Dv6TvMcWoVMa9K65NP1uvoNOW3Wfc0gqCagqB3EGLE6KVP6bQAqf9e0rU0BdbkFOmf/gfH/GqXb+Zj7tl8iUDZeJCsfrXavDXFN+cpzyapX2oWo1Jcz4OV2KcrjGFOuaxScGFMFuhaEMaCNKJEWa36D1gJVpkhLlAalJJEWhJEgUIIwkoSRIFQlipRAUMCY01wxguNzXYDAkmBJg20ZLMsQsw0xWxOzDLatcSyIWRrLMuV+uvqOJQxSlsgSpXZdqUMgMJgGwOsisrWAlRY1AEsgBUpJQiWJlCAoAwsiiR8KioGk4AkKvmDFFxQ9KPjgBRCEhiAs7aIMBiEMji2IxwRuTJB0IRWHVMKQdg3JuCYRNyRsTcw2OLbBsTSOXV4kqbFlabGMrNxaKl28N8Igmlpvo8ritCpGxoA0pdXUuszdMseVESily+DLi6AFpiwVkQatRHXRqgu3Zgy9Ru8MGlGerKTMNavMfamxy8+V31WOl8FWOGyVOS4rYt8y9q5GQat6YQSreiapnhs1Ev/1utvMKK3XearvGbQRLQ4ESn0qOi0ESAFSVuqotss1ek4VT0PQ9aZOrHuoTldUZ9v4pspVRLRr7FbZcJp1M1xd6PpqQ91Si4aPzTj96YIT0Xblxu8LTIN3zVWP2baf1sS43sqmXZ77QoNWRl9/oIUTv/5AG3kdghZW+v8tOJHvq3dXyVHsgV23kp3+CH/5zOc+KT9ycUKFhQt2F4FWxFwPpCK/YojHU/ihhxtPEuY8UgmHMMiSdiVBsUAi5pSuZonS/4CWYhyJwSIUNkZMw5UApEQIFxK99I8e5H8GANztd8ITDrmAAAAAAElFTkSuQmCC";
CTATAudioButtonImaged.audioClickedImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADXxJREFUeNrkm19wXNV9xz/n3HN372olWSvJsv7Z8l+SgI1xyEww4A64TkxKSAKkQ5MpZEp5YPLETHnr5KGdNNPptK/pQ2c69KFJh4Z0UgoM1IRASFIySXCwwcQYI1uyLMm2tNKudvf+Oef04e6udrX/ZGKRTHxmzmjvveeee76//7/fORL2xBfslXdPoyMfRITQGovBwUVrjZQShCFuBrCAACQAwlbu1zeLKv+Sa56Y6nxWlt8zCmEUwkokEUbE72mhEU6AQSCjbgQgRAFJhLRgBWgkxrGAxRqLNA5CKIyQGGlA+0hHIE0SQw+bbzmKWPz+PisdS89gQMu2OAKZi1f/DGBxFDIz/D60lcspSvlLSN/PtwcM7UG1ewa/N4AB0oPFiuxprrcmMdchaOHI6w+0Ce31B1qq65DTwnx0H7Nbn8DsfwG742+xibHfGWjVLLDYEMADn0eMP44UAtI7KaVvg1OPktTTvwPrLaOPwEHeCDv/BiEEWmuMMXi9E8wk/gKLaBiurUMh6sHXKbR1NoLTG2zIVAaz+x+RKl0FHBsTicocZCWXoVst1L1yuTTGKxcfQgpNUhbpdrMMehcYTk0y5E0jfkudVBstSHbXtxCpHRhj0FojhMDamNBWKFb8JN1rVmGsxI8UoCiSJOv3MZ3fjhB3kknOc0Pvm+zqPYGSwYdcVRPxulbNbH0Cs+mPqoCBKmCAYrFIGIXNLADWNnZjDFeKg/xs7jP8z/lHmMrv+bARmdwgw3UvZvjR6mJrwVYTgJUVdNQ8ImwGurYvlgY4Nv0AP58/jLFXh0FtBJ9t141E276BNaYBSG3L5/MkiqIJYKq636mduHwrS34fd489i5Lh+kDLa23IVAaz6x8wIhWvvpXoa0NhZYW5Cz3sHa83ZAPeHEe3/Se+9lgOMsyujDJbGEPbRNO5zi3v5If2Tziy9dl1BR4qMtfSTwv0jr8jcrd2HBlGISXf5/TFroZnSafEePfk6o3NsBz0cerKXt5ZOEBo3IZ3Jpd28YZ7iIMjr65DvK9WwGUSpNf0kR5+lKjnjqb6W0caIYiiiCiKmFtKUAodPHdVtyPrUoy6STpFErIEQG8iy6dHXmd35l1enTrCfGG4Yd5fzx9gNH2eid4P2oOOSy3r0NPUbszwX2LSN2NkT/PJvAFsGHYEba0liiKMMWRXHBZXFCN9usZPj/LyhYdwpU8mOc/27nfY2XsSR2gGvMvct+sZXvrgc5xb3t4w90+mDzH68WncNvotQ+t3BpzeS7DnXwk23UOkRjGyp2kXYn1SY61Fa421liA0LObrHbU2kiASrAQe07ltvH7xHp479zCzhVhtXBny2R0vMJiaxRhT1xeKvZy6/IkOCUcnay9cwq1/jRbdHd3I1fRKdKa1ZmEN6JSTYyR1hh41j9YarTXzK4O8MPkgk8t7qsCPTPwvDn4D8Lfmb0K3cWPSwW3PlcQoUfJjDRM36+vxr7WgAbQ2ZPP1EtLvXeaeiWd4YNe/8bmJpxlMTqG1JogEL58/yuXi5nhcapG9m09UCVPpl/K9zOa2tOF01FokbeYIwfDXCYJgXX29wCscjsFHLBfWWHaTJBdmkMIw1n2eL+z6Hjt6T6G1xg8lP546VE1U9m85iSOCBgZ8kB1vU0SguRjogS/x0ytf4Xuv5FlaWiIMQ3zfb9lLpdK6A4paydBakyvYNQnHMP919lGeO/fnLPqDSKE5vO0Yve4loihiammYC8ujsVVP5hntnmkAfWF5sA2nW+TTWec2XnzxRU6fPk0ulyOfz3fsYdlyd1KDCscroIt+Peih1AWObv0uVhf5wZkHyYfdKBlxy9AvCcOQMAw5fWWiOn6sp9GgZQtpItM8LVVWNDftpVKJqakplFJks9k68W3FvYGBAVKp1LotOMSuqxTUz+uIiC1dM9y74/s89dZXeXN2P4e2/oRtm2aQ1ic0irlcX3V8n7fUsLZC4BJoFyV1Ez/dQqX9UonZ2VmUUszPz5NOp9uC1lozNDRUDTzatSiKykbHEIYhQahbBDGWQfkWJyYzHNoKKVUkvzTDUtHD8fPVDSahc8zM1G8qJJXGD6HLbRZ7m2TTDxZLRZaXl1FKMTc3R1dXV1vQURQxMjKC4zgEQdARtBACbWLQFUverJ08s4yUSzEjQsHUhXnyJYUXFapJcdHXZLPZuvc8V4PVLcLQFqllFBkKhQJKKRYXF/F9vy3oMAxZXFwkk8kQhu2zHa0jlHLBmFgqbPN5Xz2Z4pXjlm89PA/A9JUk2ZzFEpJJF6vjFvJuw9oSKsJzTavUsoUomgLWWi5dusTi4iJBELTlSBiGZLPZqqFpz2mNdBxMORxdu4b3Ljh88z/SvDfj8NjRS3xqdxx/P/fLXvyyFO0dX6qOP3PRa1CpnmSpLp5fk1o2fzAmXuJPv3QXP/vFGXzfJ4qitjG17/vkcrmqz27PaY3nJTFlTruOBmotrWHfRIG/ut9w886YW6+cSHPseBJrfTZ1aQ7ekAMgiCTHJ1MNoMf7C7SKipWwzZ8MJqd44u4rPHjwAM+dnOD06dO4rttWTys+ez2gu7u7MWWdjsVwFfSeMcuTX47K9TJ49o0uvv1CL2EUz/uVo0v0dsXM+sX73VxckKzdiNy7Ndc6y7K0jlHTiQLb1dsMDtzOec/DcTqXY33fX4dO66o/D8OQnlS9BOWKguNnXSbnFK+dTHBqSgHxnJ/9pM8XP70SE1oLvvNaX4PapRKa/dvzrUEHHfJpT2YZT73NxZERisViW047jlNVhU4RWW2K2ddd//zUlMOT/5KqFgkrgO+/PeDJB4tVsf33V/t4/6IDa2zC7ftyZNK6XQm4czp4cOSHzC7cxXxyAiEEUsqGNFJrTSqVwvf9tgavFnSFWJv73DVz2aq0CAH7thseORJx+JZVcC+9meY7r/Vg17glV1nuv22pfRHB0Z0riV1uiYdufokTM9s4n91CSacaSGWVIV/YR9jbuy7QUkqElGA1WzL1scLYoOGxewK2ZCw3TVg+vrXe9Tzz0zTffn4T1jZK1AMHV5jYHHYoDOr1VU6UNBwYn+TA+GTLMW9fPMsbl79KX19fW+CVor/jOKQ9zchAPeG3bbZ8/b5GQB/MKZ46luZHJzyanaDYsSXikbuX14HFXrtq6E0j08zln2cqdx+pVKplMBNFEVJKXKUY6YdN3Y3SZiyEkWAxL3h32uVHbyX48dsJ/FA0BdzbZfnGny3RleyMRyGu7fGLw3tO8vSvM4TqLqSUTX17hRiJhMtN2yVyja68c17x90+nKQSCxZygGIgao9Y4X7dn+ebDeXaNrG8zUlrn2u9a3nfj/1FaOImUMj6H1kKvXTfBH9/aWFnNl+A30zA1b8kXTUNlpLZv3hTyT4/l+OTucN3rU9q59ruWKTfk3hte5r/PbmZoZGc1z64tAWutcRyHG3f3AcU11XPb0RgCHN4f8eSXfYb6rg6D0mJjNi6He5e5c/gFfpX/GkNDQ5RKpbrCgdYapRTKug2g6bCtc9OE4WufiThy4MNJqTJi486c3Dg8xcK558nph+nv76dQKFRFu+Lv3Sbfj4ytAy2EYGzAcmC34einIm7/hEH+FstW0mzcVi3AnRO/4tjUNtz+++nv76dYLOI4Dp7n4RcXGdjSWHefGLI8fm9Ad0qweZNl25Blx7DFS1yj7TbsxoIGuGP4OV6f3cb4DXeTSqVIJpMsLS/T779M2m0MbUcHLI9/fuNOSEgHZ8NBp9yQ/V1PcWn2fTzPY2FhgdlT3+WOiZ+3rqFVum3fjRUYG/v12vvtN/DMms1aKxo84eok5WcWLCL+AGDL0hKPE6ve1Io4tLfQl1ph0/w/897Mx8iosxwanSTQilIkqU4qKl+hJiWIK9yiXDOrfEGI+LruvijnjKK8GNE8s4gP2pSB2lowVpSpGPdVqgqMEehyj4ws/5ZERhBGkkDHf0MtCbUg1JJICwQlrD3OZeDY3FBc+ZTgSItSFkcaEo4loQwJZVCOwXUsCcfgSIPjWJQ0ONLGXViktEixem2q9+Kz6FY0nl9Sa0O6WsC6DqAsg4x/x0AkQSQJjSAIJX4kKQaSgh/3FV9QLAkKgaAUQBBaghC0sVgEQoCrIJkQpFxLlwdpz5JOWro9Q1dS4yUsnqtJOBZXGdwyIVSZEErGxLLWgAMSG4MtZ2gtYm9TIzYCIeJCvETgWDAyBm6siQlR5XCZu1qirYgJZQSRAWPk6tgK4Sq6Z1YlB+KTRkKAFDF3ZIWLMuaqcuqvnTKnlbQ4Tszdyr3KHKIN4DKna/UoFoVYRcv/L4Clcn7N1qpBGURFn1t+xVai5Vp7UPtVi6nMYWt02a6qOlX9jddXFd+K6Ip49rp7NXia6/TaInvNS82uocWRu3V5mTIhEWUyiLavWbvGGInVD4mmi+5cFlEf9hyZWPfN5pRZhWrbv7YBYYQ0Hfan/xCbxF6H5721NdcfaJFIXH+grbwOQQsn/QcLTuQaj2Co9ATCvvWoXZ46S5A9/ZEvKog8VKhx8EBtIjQat8sHqVnJW5LJLvzQx/NSRMs+XZ4iDJZJpyRBsUgyoTDaYIQBTDmoklgkkShnzTYEKRDCg9QAAzfcyv8PALCXje78gCAuAAAAAElFTkSuQmCC";
CTATAudioButtonImaged.audioHoverImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADUhJREFUeNrkm1uQXMV5x3/dfc7MmctetKvd1a6EEEIXQEJIgGwkJOJIYCk2cRzklHFcMS9QlVRSuUFVKqlynlzhKXlz8pAHv1BOpcp2uQiOLVvGRJIxQgEBAiRW9wvSane1s5fZmTmX7s7DmZnd2ZmdHYFWIVFXfXVm+/Q5p//fvb/uFXb0L2zx8jtYXQACsBGgESSxOkJIBUITN1MmWSbAVvrnNrd8lXP6TfV9VpSfsy7CJMBKBFG538GKEGQJi0ToTgSAmEQQIC1YAQYHK8vzshZhHBAJrJDxe0wBIQXCprF0kV79NKJ0/AkrlCXRXmLeNnUXtJ278XsAU6uh7SyfhRZOZokKlxD5t7baTF+S26UVh3JICLndmsTq2w+0EPL2A220vf1AS+XcdqAdrLllHzNtz2K9LyCCdxFTLyHM1f8l0Nwa0NZ7HNH2LaQQkLiTktiCGHuepLz1wCVi8UOWdddhO19ACIHWGmMMXuYOPs5/DRvnWTVNG0XBz+CHHtqo/4OSlh2Yjm8jZboKOHYmEif9MNOldrLeRM0joxO9vPruHqQ0JN0SWW+KpR3D9C/5mN7OYYQwnxb0YjaB6fhbhLsSYwxaa4QQWGvLabsiX3DJenNs3wr8UAGKou8ynm/j8ugA74otLMmOsW75Se4eOIWrwk8KevHitMk+h0l8HoypSrgCGKBYLCLDRhO3NeOqvdZyfbKT30w+wolL63lo7Vus7Ln4STIyuUiOazc6/TTWWowxDUFMT0+jTeOM0FrblHJTnRx4ezdHTn4Oc4MYHLEYgJ21hNm/xBpTB2R2y+fzJBoww1iqmrFQO37uXiams+zafBBHRS2modib7rh0x7cx1msqKaMNhelpTpz16l6xtP06ex/+Bb/9wEEeXHOMge7LSBHM+64L11bw6rEdGNuaCB1j9E11XFH73xDRv/DaNgop+T6D5926e0k3YEXPlZq+iek2Tl5cwwcX1hNG9f733NAKjpx4kG33vdWCTasbtGmRANHWkHTmOSK1dUF7BIiiiCiKuDaqKPm1c4i0w1SxnSCcWed3ZKb4/L3H+L3tP6OnYwRTdo6z6Z3T67lwbWBhScelllbsdBU69Q2Mcy9WZBuOUe4SbBg2dFpzbTuKIowxjE8JcpOS/p6ZeYxO9nDg2F5cJ6ArO8aqvjOs7j+Dkpru9nF+d9sv2X90e0OAh49vYWDpMG4T+5baTrcA+B6C9n8icL5ARB/aZhqSEK3ZlLUWrTXWWoLAkJuQczIySRDCdDHBpZFlHHr/UV458mWGcsvi6psTsWfr6/R0jNZJe2wyw4nzqxZQ7wW12yHM/DmRSS+otjdClexMa83YRC2zUokCA10XaUuNobVGa81wrpP/PLKb80Mrq8Aff+hNlAzqgL97ZjXayCZLS7zmUlHLCMXqhjY0l1qJr7NBA2htyE3WfrOrLcferb9k386X+Z2tP6enYwitNUEIB97exujEknhc+yQb7zpdZUyFRnIZrl7vahKy9PwqaZM78ZPPEARBS9Qq8IqEY/ARk1NmjmdPMFVsRwrLip4hvrLtAKuXnUNrjR8IDr63BVsOT5vXnEXJsE4A5672NIvTjdNvndzLr09+iR/8ZJSJiQnCMMT3/XmpVCq1nFDM1gytNVPTtc+NTnbzo8Nf5ZUjXyaX70RKw64Hj9CeHiOKIi5d6+Lj0aUAtGcKDHTX2/aVkc5moBt7uVxpM/v372dwcJCpqSny+fyCFJY990JmMDt0aa0plmpB93YOs/fhn2JNiR8f3k2+mMZRmi1rThKGIWEYMnhxWXX88p560LlJj0jLeUIWfsMbpVKJS5cu4TgO4+PjNeo7n/S6u7tJpVIte3CIQ1fJNzBrXa2kpm/JCE8+8irf++kejp1aw85N77GybwQpAsJIMXS9rTp+Sdt03dwKJUUQOjgqaAB6HpP2/RJDQ0M4jsPw8DCZTKYpaK01vb29CCGIouY5cBRFZadjCMOQINANV7lCWHqyH3H8oyw7N4GX9MlPXmUin0DZArbCKpvnypXaDC6ZMPiBJe01WnDYTOOdgFKJyclJHMfh2rVrpNPppqCjKKK/vx+lFEEQLAhaCIE2MWito3mX9u+fHEOKMQCCAC5dHiZfkHgqqOpGqRQxPj5e85yXrOy7NQQt55mYplAo4DgOuVwO3/ebgg7DkFwux5IlSwjD5ot7rSMcxwVjylrR+L3/9abk1dd9Xnw+ZuLlIYfxSY21mq72GcZeH1d1c0u4Gi9h5ysiNJaKsEWstYyMjJDL5QiCoBpb5wM9Pj5edTTNJa2RSmHK6aicA3rwnOU739WcOm959uuah++PZfqT11x8P57vxrXF6vjTF1WdSbWlw7K0G66nG9vf8o7D/MG+XfzmyCC+7xNFUdOc2vd9pqamqjG7uaQ1npfElCXtOPW2vGl9xAvPumy6Jwb8qzccfvFri7U+HW2WRzbH3whCwTsf1oNe0RcwX1Y8r3ovbR/ir/5wnK/tuZdXDq1kcHAQ13Wb2mklZrcCOpvNYso2nfJqUa9dJXnhOa9aUHj5gOCfvw9hGL/3G08aOrKxAI4ed7k6AlCrhfev85usspok35lUiVV9p1navYmLnodSC5djfd9vwaZ1NZ6HYUg2XQt6ahre+dBy7rLg4JuGE2dmQH1xp+Crj4syo+HfXnHrzC6VNDxwz/yMd7RsvuLw3ClWLD3N1f5+isViU0krpaqmsFBGNnuJ2dleq4cnThue/4d6xj21R/HCc05VbV96OcHpC8AcE92+LWJJu/101dDt9x1laHgLwxMDCCGQUtYtI7XWpFIpfN9v6vBmg64wq7dbzVla2qq2CAH3r1c885TLru0zGrH/kOL7/yGxc7aaXQee+mJz83JkC5XEtBfw9BNHOX66hwtDXfih1yDDMuRLDmHY3hJoKSVCSrCavp5a9V7eJ3j26y59SwUb1ynuubuWKT/cL/nuSwJr6zVq3x7LnQN2gWpoi1u1jjJsWX+NLeuvzTvm/TMfc+TUk3R2djYFXin6K6XIpC39vbWgVw5I/vSP6o+EnLsM3/uB4LUjts5xAdx1B3zr9xfG44ibuGu58e5Rhsde4+L4blKp1LzJTBRFSClxHYf+XklHm9OwDByGkJuAk2ctv3oDDh21+PNobnsW/v7PZMO0s96mRcTNbLu2nuffDxwlDLchpWwY2yvMSCRcNq5LMteXfnja8uK/GIolGBu3FP3m38ym4Tt/rbh7ZYtVaquCm17s/8rODynlTyClRM4THYwxuG6CXTva6+7lpy0fnY24eCUiX9B1lZHZ1Ntl+Me/Uzy0sfVtC2nFzT9+kUpGPLn9v5kYv4Lnebiui+M4VXLdOLYqpdiwvqvh6qoZ0Ar91ufgX1+cydpa3tYxIrEoe1nLugvs2HCYt8/30NvbS6lUqikcaK3LTHDr4qxdYFtnw1rJM/sSPLHjk226OnYRTxdtWD1Cbuo1JvU+urq6KBQKVdWuxHvXlQ28u60BLYRgeZ9ky0bF3scctj/oID/FtB1hFvdI1Y4HBjnw9hu47pfo6uqiWCyilMLzPHx/nO7Oekd653LJH38zQTYt6O2W3DEgWX2HxEvenO3GRd2frrRHNxzk0IkBVtz1GKlUimQyycTkJN3u62S8etc80Cf5k296izYfKVn8I1WppGbznT9mZPgsnucxNjbGtQs/4tFNHzSpobVGxpS3duf0N5e0lfFmbaXgZIkPv8x60M76EY+NN3hnPiKqE42HiZkPi7i/s61Ix+hLnHpvFV2ZS+zcMEQQKUqBnPmCmHURs/dCLULEV0R8S4jYyyNAliOQECBFzYwbrqnjc2RloNbMgIi5KMob5OW/rYg5awTaCLQWRFqgDfFVC4JQEEaCsHItUxQJEAWs/YCREly+mgUESoEjLcoBR1lc15J0La5jcV2D64DrWBxlUbJ8Lf9WyiIlSGlRwiKVRQrivnLos7X8q2RkepY8K+DAGtAVgLoM0sQgIx2DCKMYZKQFQSDwQ0GhJCgWBYUSTBcFhaKlWIKibwgCSxBYtLZYDFKC6wiSSYGXFGRSkElJMmnIpC1pT5LyLF7CkqgwokyOY1HKlJkgsMqgAJRFlA/Ai/lzb11VAYFFKIG0FitBWTDGYtSMxGMJz0g2KjPE2ljiWotYQwxlRpX7bKVPzmhTxSbKKqoESGVqJOkqUAqUMjWSdhQz46SNpS1j9RZNADO77lqxI4GlWgu3FlStzca2LKpOpGr/ovHJhNlOJf4tsFXnMOMbmO1Xqv6jPE4IhLBV245VmnLfTBZXsWkhZnyEaAzaNJhq7Q9Rl6ra+pMqN5jNWjvjZGzF2zUaV8NPsaCTatb/qeO0WLBjgefneOfWnr856wRpuX3+f6MKerEOz32mQdtbeN77syNpx7sNQcvUbQhatf//RVesP2cmU/ch7OiLNhg9gc6/dcvnFEUZVKgRZMDpRpsI5RVBRgQFi5NsIwoLuIk2dL5Awkugg+skUhJdzOMkEhgdgTCALidVCnDQwimHdR+kApGGZD+pgcf4nwEArH2vMbQ5PG4AAAAASUVORK5CYII=";
CTATAudioButtonImaged.audioDisabledImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAACwBJREFUeNrsW9tvG0UX/83u7C2uN77FdorTNIRAISEVBfGARKUK8YCo+gD8izzygMRzn/rQiouQ2ooGaCUSJXFiJ3Z8ye56d2a+B2cntte7dqAu/b58R1ol8c6O98y5/84J+fHHH8Vff/2FXq8HxhiEEGCMQdd1MMagKAqEEAAAIQQ451AUBYQQhBTeHyRFUQBgaF24NlzPGAMAqKoKVVXld4XfEQQBgiAAAFiWBQDwfR9CCBBCIvsIIaAoCiilAADOOXzfh6Io0HUdhmHg5s2boHt7e9A0DXNzc4ijdDqNdrt94XsAYNs2Wq0WXgfinOPhw4dQOp0ONE1LXJzEVNI9AK8Nw4Pap3DOcdlICe3hUjGtqur/JX0pmA7d+2WiV8rx2toaSqUSGo0Gnj9/Dtd1/x2mxyUWs6DFxUWsrq6CEIJ0Og3btvHTTz/B9/3/TZu2bRvr6+sghIAxBs45MpkM5ufnx64PszLOOWYhlJlLWtM0bG5uglIqGQ4ThYWFBRweHsqkIaQgCHByciLXqaoKSil0XZ+YSP3rNk0IwcbGBlKpFDjnYIwN5cyEEPi+D8MwIpIONZAxJk2AEAJKKSzLgmmakbx+aqb/7oPT0FtvvYVCoSBVdbQ4cRxnLNNxRYwQAr1eD71eD91uF+l0euyzU6SjykwYLpfLWF5elvY5jolut4s4nxJWY3GX7/s4Pj5Gq9W6sN3PRNLpdBo3btzAaF4/+nKdTgeO60YcWnhQ01C73Ybv+8jlclOruzILx/X+++9L2427OOM47XZxUK2O3SOfzyObzSKdTkPX9cS9HMfB0dHR9JIOi/SXRevr61PZmR/4cD0PtVptbAlommbEo7fbbXQ6nbHqfHp6ikajgWw2+/LVOwwh42h5eRnZbHaijRFCJCrSap3A9/2hUDQOoaGUIpvNIpVK4ejoCJ7nRfY9OTmBaZoSZYllelrbSaVSuH79OmzbjmXasiwJ5ySREAJBEIBzDsdx4TjOENO+7+Pk5ESGKMMwZIjSdR2lUgmHh4c4PT2N7F2v11GpVBLtm06T/9q2jc3NTUwqQ6fVmjAOh1749PQUtm1HDiU8gPBQbNuGrutQFAXFYhG7u7sRiXueh1arFZvtTeXIFEXB22+/LUG7l3WF2RljDN1uN/KdmqZBURQwxsAYg+u6qNVqcBxHrimVShL7GrwajUaitlFd1xOZNk0Tc3NzU4eQQbRzkqT7GRePqKmmaSgUCgAA13XRbDalRGu1GsrlMnRdh67rsG074rkdx4HjOLFgp5KkksViEcvLyzILmnQNZl2J4epMwn3mgwjTg4dimiZKpRIsywJjDEEQoF6vy7Whtx6VdqfTuThctLi4CMdx8ODBA5yc9D2s53mxl+u6U2vDYFrKGJMqO+jIarUajo6OEAQBCCFYWFiQWHin05EHpWkaLMuKMD1qMlNVWYZh4LvvvgMhBDdv3pTeNkllbdsGIWQi86OAf6/Xi6h3NptFs9nE/v4+FhcXQSlFJpPB7u6uDE+h+lqWJauykFzXlU2BCNNxua/rutjZ2QGlFM1mc0h946SXz+cnxsjhlLTvpUeZJoTAMAyUSiW8ePECjUYDCwsLSKVS0jwGTULX9ci7+b4PxhjGwWGxkvY8D9VqFZRSHB4eyvIwjhhjKBaLMvFIoiAIzrxyv+2ShJ5wzrGzsyPVu9FowPM8XLlyBaurq3K/vb29YcYoxdra2nim44py13XRarVAKcXBwcFEDx4EARYXF6GqakRy49YSQsDOek1J6M2LFy+kiobMeZ6HfD4v1/R6PTSbzYiJxNp0nCMLgr5XpZTK001i2vd9mftOwr0YC0CpBnCOIAhiQ9zW1haePHmCr776CgDQbDalVx40o263G3m3wUbe1DYdhpRarYZGoyG7mklMN5vNieraP1AGRVXBBzKvQapWq/j+++9RrVZx584dXL9+HQDw+PFjqUXlclmur9VqkX10XY9nOu6Ue70e7t27h19++QWe5yVKJPQB7XZbxuxkSTOYpgF+JulxQMYbb7yBL774AteuXQMAPHv2DE+fPoUQApZlYWVlRWrkzs5OhOn5+fnYtDi2yqKU4uOPP8aHH36IP//8E7///nuinQRBIGP2NExfuXJF9o9H9y2Xy7h796708r/++ivu378vNe327dtSvbe3tyP2HOYZsTadBBdRSkEpRS6Xg2mamKbv5XneFDbNZOjxfT9SO7uui+3tbdRqNWxtbQ155o2NDdy6dUvu8+jRo4jZaZqGSqXyz0AETdNkhpYkaVVVpSlMysgGq6nRHHlvbw/ffvtt5LmPPvoIX375pfz70aNHODw8jKx75513EocMpgIRMpkMGo0GDMMAISQyfhGeumVZ8DwPkxoIg542CIJIGTgK+y4tLeHTTz/F+vq6XPP06VM8fPgwsreqqvjggw+SQYRpGniUUqyurqJer6Pdbo91aKqqyrp4GqYVRQE5K1czmczQ/Vwuhzt37mB+fh6VSgVXr14duv/zzz/j/v37Y9/j1q1bQzH8H4H9YeFeLBZj19TrddTrdWQymUTGQ9BfVVUYhhHBtfL5PD7//PPIc7VaDQ8ePMCzZ8/G7ruwsIBPPvnk1ULAhUIBOzs7aLfbsvKJs39FUaCdFRGpVCq25u52u9jf38dvv/2Gra2tWH9hWRbu3buHSfjAhTCyaWlpaQl//PEHKKVD41jjbFrXNVy7di3iH3Z3d/HDDz+g1+uh0+lMjAaGYeDrr79O1MKZQsAAsLKygufPn6NcLscC95xzaJqOzc3NsWFvtIBIcrLffPMNlpaWpse9ZzFdRClFpVLBwcEBrl69GkFIw5atqqp48803Y+1+Er333nu4e/fuEKg41fvNqnmXSqUwPz+PTqeDYrEoi/qQobDWHRc9JrV1KpUKbt++jY2Njb8nFMyQ8vk8Dg4OwBhDLpeThT/nXMb7cantIJwUakY2m8XKygo2NzextraGf9J4pLPqWoZUKpVwfHSMXC6HXC4Hx3GgqipM08RpDGJZKBTw2WefwTRN2LaNQqGAYrH4UhryLz1kxTYL5m3s7e7ixrvvwrIsGIaBk1YLTrsFO52OrM9ms2Pj9MuiVzJSRSmFIAT7+/swTRPHx8d4/PgxCsXS1Dj6Ra4Lq3fSQ4P3BAQgRj6LPCsA9Fu2hq5jb28P29vbAAiy2QwY5whGG3EEICAT20aEkP46Mnx/dLwjFkQ4n+c+Y2dgvnsSaM85h+Ac/OzvgDHwM+/MGAPj/Z+cDY9f1GqHMr1VFAWKqpwP1ai0P/+tqlDPPpPriAKinBc9hBAQRYES/j5wxULAw9IZlhoXHIKfMyh4/7OwQ9FHPhj4GWNBEKDn++idAQleryd/930fQeDD9wMIziBAQAigqhSarkHX+kPohmFA1w2YpgFN06DpOjRK5SB8/wBUqKoiI4AiBHB2KKGERf8b4iU9ehoEgCAERBAIIuTE/KCEVVUF5xyU8oj05UEJASHO58HG2Z7oWwAUQqAQAoSMjFyhNMd9NljuhrzEMRyJ05J50n9k1EZH7Xfw5cnZc0l+IO6zOD9yvve57Y6q8Oi7j/vsQslJRAMmhLdZDOIJgWGZkene9ZVlZLOI+bNII5RZZ2SvIymvIiN77Zi+lP+4chkn+y/nP678nSna/xYaBzgWCgWQJ0+eiGq1iv39/Vf+UmGCEQ7HhbCSEAKu62Jubk7+9DwPlmWh0+nANE04jgPTNOVYSPjcYNISIqqEEGiahlQqhdXVVfxnALmZvvwlgi72AAAAAElFTkSuQmCC";
CTATAudioButtonImaged.prototype = Object.create(CTATImageButtonComponent.prototype);
CTATAudioButtonImaged.prototype.constructor = CTATAudioButtonImaged;
var CTATComponent = function(a, b, d, f, g, c, e) {
  function h(a) {
    l.ctatdebug("setSelected ()");
    l.backgroundColor = !0 === a ? "#cccccc" : "#eeeeee";
  }
  CTATCompBase.call(this, a, b, d, f, g, c, e);
  this.ctatdebug("CTATComponent (" + this.getX() + "," + this.getY() + "," + this.getWidth() + "," + this.getHeight() + ")");
  var k = !1, l = this, q = {}, p = {buttonDefault:"", buttonHover:"", buttonClicked:"", buttonDisabled:""};
  this.assignImages = function(a, b, c, d) {
    l.ctatdebug("assignImages ()");
    for (var e in p) {
      l.ctatdebug("Check: " + p[e]);
    }
    p.buttonDefault = a;
    p.buttonClicked = b;
    p.buttonDisabled = c;
    p.buttonHover = d;
  };
  this.loadImages = function() {
    l.ctatdebug("loadImages ()");
    var a = 0, b = 0, c = null;
    for (c in p) {
      b++;
    }
    l.ctatdebug("Loading " + b + " images ...");
    var d = function() {
      l.ctatdebug("Image " + q[c].src + " loaded");
      ++a >= b && (l.ctatdebug("Images loaded!"), l.hasImages = !0, l.getGrCanvas().drawTutor());
    };
    for (c in p) {
      l.ctatdebug("Loading: " + p[c] + " ..."), q[c] = new Image, q[c].src = p[c], q[c].onload = d;
    }
  };
  this.init = function() {
    l.ctatdebug("init ()");
    this.loadImages();
    canvas.addEventListener("keydown", function(a) {
      l.ctatdebug("keydown (" + getKey(a) + ")");
      switch(getKey(a)) {
        case 37:
          l.ctatdebug("left arrow key pressed!");
          break;
        case 39:
          l.ctatdebug("right arrow key pressed!");
      }
    });
    canvas.addEventListener("click", function(a) {
      l.ctatdebug("click ()");
      var b = a.pageX - ctatcanvas.offsetLeft;
      a = a.pageY - ctatcanvas.offsetTop;
      b > l.getX() && b < l.getX() + l.getWidth() && a > l.getY() && a < l.getY() + l.getHeight() && (l.ctatdebug("click (" + b + "," + a + ")"), h(!0), l.getGrCanvas.drawTutor());
    });
    canvas.addEventListener("mousemove", function(a) {
      var b = a.pageX - ctatcanvas.offsetLeft;
      a = a.pageY - ctatcanvas.offsetTop;
      b > l.getX() && b < l.getX() + l.getWidth() && a > l.getY() && a < l.getY() + l.getHeight() ? !1 === k && (l.ctatdebug("mouseIn (" + b + "," + a + ")"), h(!0), l.getGrCanvas().drawTutor(), k = !0) : !0 === k && (l.ctatdebug("mouseOut (" + b + "," + a + ")"), h(!1), l.getGrCanvas().drawTutor(), k = !1);
    });
  };
  this.CTATInvalidate = function() {
    l.getGrCanvas.drawTutor();
  };
};
CTATComponent.prototype = Object.create(CTATCompBase);
CTATComponent.prototype.constructor = CTATComponent;
var CTATComplexSAI = function(a, b, d, f) {
  CTATSAI.call(this, a, b, d, f);
  var g = this;
  this.addSelectionActionInput = function(a, b, d) {
    g.ctatdebug("addSelectionActionInput (" + a + "," + b + "," + d + ")");
    g.addSelection(a);
    g.addAction(b);
    d && g.setInput(d);
  };
};
CTATComplexSAI.prototype = Object.create(CTATSAI.prototype);
CTATComplexSAI.prototype.constructor = CTATComplexSAI;
var CTATParameter = function(a, b) {
  this.paramName = a;
  this.paramValue = b;
};
Number.EPSILON || (Number.EPSILON = 2.220446049250313E-16);
Number.MAX_SAFE_INTEGER || (Number.MAX_SAFE_INTEGER = 9007199254740991);
Number.MIN_SAFE_INTEGER || (Number.MIN_SAFE_INTEGER = -9007199254740991);
Number.isFinite || (Number.isFinite = function(a) {
  return "number" !== typeof a || a !== a || Infinity === a || -Infinity === a ? !1 : !0;
});
Number.isInteger || (Number.isInteger = function(a) {
  return "number" === typeof a && isFinite(a) && -9007199254740992 < a && 9007199254740992 > a && Math.floor(a) === a;
});
Math.cbrt || (Math.cbrt = function(a) {
  var b = Math.pow(Math.abs(a), 1 / 3);
  return 0 > a ? -b : b;
});
Math.clz32 || (Math.clz32 = function(a) {
  return (a = Number(a) >>> 0) ? 32 - a.toString(2).length : 32;
});
Math.expm1 || (Math.expm1 = function(a) {
  return Math.exp(a) - 1;
});
Math.fround || (Math.fround = function(a) {
  var b = new Float32Array(1);
  return b[0] = a, b[0];
});
Math.hypot || (Math.hypot = function() {
  for (var a = 0, b = arguments.length, d = 0;d < b;d++) {
    if (Infinity === arguments[d] || -Infinity === arguments[d]) {
      return Infinity;
    }
    a += arguments[d] * arguments[d];
  }
  return Math.sqrt(a);
});
Math.imul || (Math.imul = function(a, b) {
  var d = a & 65535, f = b & 65535;
  return d * f + ((a >>> 16 & 65535) * f + d * (b >>> 16 & 65535) << 16 >>> 0) | 0;
});
Math.log10 || (Math.log10 = function(a) {
  return Math.log(a) / Math.LN10;
});
Math.log1p || (Math.log1p = function(a) {
  return Math.log(1 + a);
});
Math.log2 || (Math.log2 = function(a) {
  return Math.log(a) / Math.LN2;
});
Math.sign || (Math.sign = function(a) {
  return isNaN(a) ? NaN : 0 === a ? a : 0 < a ? 1 : -1;
});
Math.trunc || (Math.trunc = function(a) {
  return 0 > a ? Math.ceil(a) : Math.floor(a);
});
Math.sinh || (Math.sinh = function(a) {
  a = Math.exp(a);
  return (a - 1 / a) / 2;
});
Math.cosh || (Math.cosh = function(a) {
  a = Math.exp(a);
  return (a + 1 / a) / 2;
});
Math.tanh || (Math.tanh = function(a) {
  if (Infinity === a) {
    return 1;
  }
  if (-Infinity === a) {
    return -1;
  }
  a = Math.exp(2 * a);
  return (a - 1) / (a + 1);
});
Math.asinh || (Math.asinh = function(a) {
  return -Infinity === a ? a : Math.log(a + Math.sqrt(a * a + 1));
});
Math.acosh || (Math.acosh = function(a) {
  return a + Math.sqrt(a * a - 1);
});
Math.atanh || (Math.atanh = function(a) {
  return Math.log((1 + a) / (1 - a)) / 2;
});
Array.prototype.indexOf || (Array.prototype.indexOf = function(a, b) {
  var d;
  if (null == this) {
    throw new TypeError('"this" is null or not defined');
  }
  var f = Object(this), g = f.length >>> 0;
  if (0 === g) {
    return -1;
  }
  d = +b || 0;
  Infinity === Math.abs(d) && (d = 0);
  if (d >= g) {
    return -1;
  }
  for (d = Math.max(0 <= d ? d : g - Math.abs(d), 0);d < g;) {
    if (d in f && f[d] === a) {
      return d;
    }
    d++;
  }
  return -1;
});
Array.prototype.lastIndexOf || (Array.prototype.lastIndexOf = function(a) {
  if (void 0 === this || null === this) {
    throw new TypeError;
  }
  var b, d = Object(this), f = d.length >>> 0;
  if (0 === f) {
    return -1;
  }
  b = f - 1;
  1 < arguments.length && (b = Number(arguments[1]), b != b ? b = 0 : 0 != b && b != 1 / 0 && b != -(1 / 0) && (b = (0 < b || -1) * Math.floor(Math.abs(b))));
  for (b = 0 <= b ? Math.min(b, f - 1) : f - Math.abs(b);0 <= b;b--) {
    if (b in d && d[b] === a) {
      return b;
    }
  }
  return -1;
});
Array.prototype.every || (Array.prototype.every = function(a, b) {
  var d, f;
  if (null == this) {
    throw new TypeError("this is null or not defined");
  }
  var g = Object(this), c = g.length >>> 0;
  if ("function" !== typeof a) {
    throw new TypeError;
  }
  1 < arguments.length && (d = b);
  for (f = 0;f < c;) {
    var e;
    if (f in g && (e = g[f], !a.call(d, e, f, g))) {
      return !1;
    }
    f++;
  }
  return !0;
});
Array.prototype.some || (Array.prototype.some = function(a) {
  if (void 0 === this || null === this) {
    throw new TypeError;
  }
  var b = Object(this), d = b.length >>> 0;
  if ("function" !== typeof a) {
    throw new TypeError;
  }
  for (var f = 2 <= arguments.length ? arguments[1] : void 0, g = 0;g < d;g++) {
    if (g in b && a.call(f, b[g], g, b)) {
      return !0;
    }
  }
  return !1;
});
Array.prototype.filter || (Array.prototype.filter = function(a) {
  if (void 0 === this || null === this) {
    throw new TypeError;
  }
  var b = Object(this), d = b.length >>> 0;
  if ("function" !== typeof a) {
    throw new TypeError;
  }
  for (var f = [], g = 2 <= arguments.length ? arguments[1] : void 0, c = 0;c < d;c++) {
    if (c in b) {
      var e = b[c];
      a.call(g, e, c, b) && f.push(e);
    }
  }
  return f;
});
Array.prototype.forEach || (Array.prototype.forEach = function(a, b) {
  var d, f;
  if (null == this) {
    throw new TypeError(" this is null or not defined");
  }
  var g = Object(this), c = g.length >>> 0;
  if ("function" !== typeof a) {
    throw new TypeError(a + " is not a function");
  }
  1 < arguments.length && (d = b);
  for (f = 0;f < c;) {
    var e;
    f in g && (e = g[f], a.call(d, e, f, g));
    f++;
  }
});
Array.prototype.map || (Array.prototype.map = function(a, b) {
  var d, f, g;
  if (null == this) {
    throw new TypeError(" this is null or not defined");
  }
  var c = Object(this), e = c.length >>> 0;
  if ("function" !== typeof a) {
    throw new TypeError(a + " is not a function");
  }
  1 < arguments.length && (d = b);
  f = Array(e);
  for (g = 0;g < e;) {
    var h;
    g in c && (h = c[g], h = a.call(d, h, g, c), f[g] = h);
    g++;
  }
  return f;
});
Array.prototype.reduce || (Array.prototype.reduce = function(a) {
  if (null === this || "undefined" === typeof this) {
    throw new TypeError("Array.prototype.reduce called on null or undefined");
  }
  if ("function" !== typeof a) {
    throw new TypeError(a + " is not a function");
  }
  var b = Object(this), d = b.length >>> 0, f = 0, g;
  if (2 <= arguments.length) {
    g = arguments[1];
  } else {
    for (;f < d && !f in b;) {
      f++;
    }
    if (f >= d) {
      throw new TypeError("Reduce of empty array with no initial value");
    }
    g = b[f++];
  }
  for (;f < d;f++) {
    f in b && (g = a(g, b[f], f, b));
  }
  return g;
});
Array.prototype.reduceRight || (Array.prototype.reduceRight = function(a) {
  if (null === this || "undefined" === typeof this) {
    throw new TypeError("Array.prototype.reduce called on null or undefined");
  }
  if ("function" !== typeof a) {
    throw new TypeError(a + " is not a function");
  }
  var b = Object(this), d = (b.length >>> 0) - 1, f;
  if (2 <= arguments.length) {
    f = arguments[1];
  } else {
    for (;0 <= d && !d in b;) {
      d--;
    }
    if (0 > d) {
      throw new TypeError("Reduce of empty array with no initial value");
    }
    f = b[d--];
  }
  for (;0 <= d;d--) {
    d in b && (f = a(f, b[d], d, b));
  }
  return f;
});
Array.from || (Array.from = function() {
  var a = Object.prototype.toString, b = function(b) {
    return "function" === typeof b || "[object Function]" === a.call(b);
  }, d = Math.pow(2, 53) - 1;
  return function(a) {
    var g = Object(a);
    if (null == a) {
      throw new TypeError("Array.from requires an array-like object - not null or undefined");
    }
    var c, e;
    if (1 < arguments.length) {
      c = arguments[1];
      if (!b(c)) {
        throw new TypeError("Array.from: when provided, the second argument must be a function");
      }
      2 < arguments.length && (e = arguments[2]);
    }
    var h;
    h = Number(g.length);
    h = isNaN(h) ? 0 : 0 !== h && isFinite(h) ? (0 < h ? 1 : -1) * Math.floor(Math.abs(h)) : h;
    h = Math.min(Math.max(h, 0), d);
    for (var k = b(this) ? Object(new this(h)) : Array(h), l = 0, q;l < h;) {
      q = g[l], k[l] = c ? "undefined" === typeof e ? c(q, l) : c.call(e, q, l) : q, l += 1;
    }
    k.length = h;
    return k;
  };
}());
Array.of || (Array.of = function() {
  return Array.prototype.slice.call(arguments);
});
Array.prototype.copyWithin || (Array.prototype.copyWithin = function(a, b, d) {
  if (null == this) {
    throw new TypeError("this is null or not defined");
  }
  var f = Object(this), g = f.length >>> 0;
  a >>= 0;
  a = 0 > a ? Math.max(g + a, 0) : Math.min(a, g);
  b >>= 0;
  b = 0 > b ? Math.max(g + b, 0) : Math.min(b, g);
  d = void 0 === d ? g : d >> 0;
  g = Math.min((0 > d ? Math.max(g + d, 0) : Math.min(d, g)) - b, g - a);
  d = 1;
  b < a && a < b + g && (d = -1, b += g - 1, a += g - 1);
  for (;0 < g;) {
    b in f ? f[a] = f[b] : delete f[a], b += d, a += d, g--;
  }
  return f;
});
Array.prototype.fill || (Array.prototype.fill = function(a, b, d) {
  if (null == this) {
    throw new TypeError("this is null or not defined");
  }
  var f = Object(this), g = f.length >>> 0;
  b >>= 0;
  b = 0 > b ? Math.max(g + b, 0) : Math.min(b, g);
  d = void 0 === d ? g : d >> 0;
  for (g = 0 > d ? Math.max(g + d, 0) : Math.min(d, g);b < g;) {
    f[b] = a, b++;
  }
  return f;
});
Array.prototype.find || (Array.prototype.find = function(a, b) {
  if (null == this) {
    throw new TypeError("Array.prototype.find called on null or undefined");
  }
  if ("function" !== typeof a) {
    throw new TypeError("predicate must be a function");
  }
  for (var d = Object(this), f = d.length >>> 0, g, c = 0;c < f;c++) {
    if (c in d && (g = d[c], a.call(b, g, c, d))) {
      return g;
    }
  }
});
Array.prototype.findIndex || (Array.prototype.findIndex = function(a, b) {
  if (null == this) {
    throw new TypeError("Array.prototype.find called on null or undefined");
  }
  if ("function" !== typeof a) {
    throw new TypeError("predicate must be a function");
  }
  for (var d = Object(this), f = d.length >>> 0, g, c = 0;c < f;c++) {
    if (c in d && (g = d[c], a.call(b, g, c, d))) {
      return c;
    }
  }
  return -1;
});
Array.prototype.includes || (Array.prototype.includes = function(a, b) {
  var d = Object(this), f = parseInt(d.length) || 0;
  if (0 === f) {
    return !1;
  }
  var g = parseInt(b) || 0;
  0 <= g || (g = f + g, 0 > g && (g = 0));
  for (var c;g < f;) {
    c = d[g];
    if (a === c || a !== a && c !== c) {
      return !0;
    }
    g++;
  }
  return !1;
});
Date.prototype.toISOString || function() {
  function a(a) {
    a = String(a);
    1 === a.length && (a = "0" + a);
    return a;
  }
  Date.prototype.toISOString = function() {
    return this.getUTCFullYear() + "-" + a(this.getUTCMonth() + 1) + "-" + a(this.getUTCDate()) + "T" + a(this.getUTCHours()) + ":" + a(this.getUTCMinutes()) + ":" + a(this.getUTCSeconds()) + "." + String((this.getUTCMilliseconds() / 1E3).toFixed(3)).slice(2, 5) + "Z";
  };
}();
String.prototype.startsWith || (String.prototype.startsWith = function(a, b) {
  b = b || 0;
  return this.lastIndexOf(a, b) === b;
});
String.prototype.endsWith || (String.prototype.endsWith = function(a, b) {
  var d = this.toString();
  if (void 0 === b || b > d.length) {
    b = d.length;
  }
  b -= a.length;
  d = d.indexOf(a, b);
  return -1 !== d && d === b;
});
String.prototype.includes || (String.prototype.includes = function() {
  return -1 !== String.prototype.indexOf.apply(this, arguments);
});
String.fromCodePoint || function() {
  var a = function() {
    try {
      var a = {}, b = Object.defineProperty, d = b(a, a, a) && b;
    } catch (f) {
    }
    return d;
  }(), b = String.fromCharCode, d = Math.floor, f = function() {
    var a = [], c, e, f = -1, k = arguments.length;
    if (!k) {
      return "";
    }
    for (var l = "";++f < k;) {
      e = Number(arguments[f]);
      if (!isFinite(e) || 0 > e || 1114111 < e || d(e) != e) {
        throw RangeError("Invalid code point: " + e);
      }
      65535 >= e ? a.push(e) : (e -= 65536, c = (e >> 10) + 55296, e = e % 1024 + 56320, a.push(c, e));
      if (f + 1 == k || 16384 < a.length) {
        l += b.apply(null, a), a.length = 0;
      }
    }
    return l;
  };
  a ? a(String, "fromCodePoint", {value:f, configurable:!0, writable:!0}) : String.fromCodePoint = f;
}();
String.prototype.codePointAt || function() {
  var a = function(a) {
    if (null == this) {
      throw TypeError();
    }
    var d = String(this), f = d.length, g = a ? Number(a) : 0;
    g != g && (g = 0);
    if (!(0 > g || g >= f)) {
      return a = d.charCodeAt(g), 55296 <= a && 56319 >= a && f > g + 1 && (d = d.charCodeAt(g + 1), 56320 <= d && 57343 >= d) ? 1024 * (a - 55296) + d - 56320 + 65536 : a;
    }
  };
  Object.defineProperty ? Object.defineProperty(String.prototype, "codePointAt", {value:a, configurable:!0, writable:!0}) : String.prototype.codePointAt = a;
}();
String.prototype.repeat || (String.prototype.repeat = function(a) {
  if (null == this) {
    throw new TypeError("can't convert " + this + " to object");
  }
  var b = "" + this;
  a = +a;
  a != a && (a = 0);
  if (0 > a) {
    throw new RangeError("repeat count must be non-negative");
  }
  if (Infinity == a) {
    throw new RangeError("repeat count must be less than infinity");
  }
  a = Math.floor(a);
  if (0 == b.length || 0 == a) {
    return "";
  }
  if (268435456 <= b.length * a) {
    throw new RangeError("repeat count must not overflow maximum string size");
  }
  for (var d = "";;) {
    1 == (a & 1) && (d += b);
    a >>>= 1;
    if (0 == a) {
      break;
    }
    b += b;
  }
  return d;
});
"undefined" === typeof Iterator && (Iterator = function(a) {
  if (!(this instanceof arguments.callee)) {
    return new arguments.callee(a);
  }
  var b = 0, d = [];
  if (a && "object" === typeof a) {
    if (Array.isArray(a)) {
      for (;d.length < a.length;) {
        d.push(a[d.length]);
      }
    } else {
      for (var f in a) {
        a.hasOwnProperty(f) && d.push(f);
      }
    }
    this.next = function() {
      return b < d.length ? {value:d[b++], done:!1} : {value:void 0, done:!0};
    };
  }
}, Iterator.prototype = Object.create(Object.prototype), Iterator.prototype.constructor = Iterator);
"undefined" === typeof Map || Map.prototype.keys || (Map.prototype.keys = function() {
  var a = [];
  this.forEach(function(b, d) {
    a.push(d);
  });
  return new Iterator(a);
});
"undefined" === typeof Map || Map.prototype.values || (Map.prototype.values = function() {
  var a = [];
  this.forEach(function(b, d) {
    a.push(b);
  });
  return new Iterator(a);
});
"undefined" === typeof Map || Map.prototype.entries || (Map.prototype.entries = function() {
  var a = [];
  this.forEach(function(b, d) {
    a.push([d, b]);
  });
  return new Iterator(a);
});
"undefined" === typeof Set || Set.prototype.keys || (Set.prototype.keys = function() {
  var a = [];
  this.forEach(function(b) {
    a.push(b);
  });
  return new Iterator(a);
});
"undefined" === typeof Set || Set.prototype.values || (Set.prototype.values = function() {
  var a = [];
  this.forEach(function(b) {
    a.push(b);
  });
  return new Iterator(a);
});
"undefined" === typeof Set || Set.prototype.entries || (Set.prototype.entries = function() {
  var a = [];
  this.forEach(function(b) {
    a.push([b, b]);
  });
  return new Iterator(a);
});
(function(a) {
  function b() {
    var a = arguments[0], c = b.cache;
    c[a] && c.hasOwnProperty(a) || (c[a] = b.parse(a));
    return b.format.call(null, c[a], arguments);
  }
  function d(a) {
    return Object.prototype.toString.call(a).slice(8, -1).toLowerCase();
  }
  var f = /[^s]/, g = /[def]/, c = /^[^\x25]+/, e = /^\x25{2}/, h = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/, k = /^([a-z_][a-z_\d]*)/i, l = /^\.([a-z_][a-z_\d]*)/i, q = /^\[(\d+)\]/, p = /^[\+\-]/;
  b.format = function(a, c) {
    var e = 1, h = a.length, k = "", l = [], m, q, F, x, H = !0, u = "";
    for (m = 0;m < h;m++) {
      if (k = d(a[m]), "string" === k) {
        l[l.length] = a[m];
      } else {
        if ("array" === k) {
          F = a[m];
          if (F[2]) {
            for (k = c[e], q = 0;q < F[2].length;q++) {
              if (!k.hasOwnProperty(F[2][q])) {
                throw Error(b("[sprintf] property '%s' does not exist", F[2][q]));
              }
              k = k[F[2][q]];
            }
          } else {
            k = F[1] ? c[F[1]] : c[e++];
          }
          "function" == d(k) && (k = k());
          if (f.test(F[8]) && "number" != d(k) && isNaN(k)) {
            throw new TypeError(b("[sprintf] expecting number but found %s", d(k)));
          }
          g.test(F[8]) && (H = 0 <= k);
          switch(F[8]) {
            case "b":
              k = k.toString(2);
              break;
            case "c":
              k = String.fromCharCode(k);
              break;
            case "d":
              k = parseInt(k, 10);
              break;
            case "e":
              k = F[7] ? k.toExponential(F[7]) : k.toExponential();
              break;
            case "f":
              k = F[7] ? parseFloat(k).toFixed(F[7]) : parseFloat(k);
              break;
            case "o":
              k = k.toString(8);
              break;
            case "s":
              k = (k = String(k)) && F[7] ? k.substring(0, F[7]) : k;
              break;
            case "u":
              k >>>= 0;
              break;
            case "x":
              k = k.toString(16);
              break;
            case "X":
              k = k.toString(16).toUpperCase();
          }
          if (!H || g.test(F[8]) && F[3]) {
            u = H ? "+" : "-", k = k.toString().replace(p, "");
          }
          q = F[4] ? "0" == F[4] ? "0" : F[4].charAt(1) : " ";
          x = F[6] - (u + k).length;
          x = F[6] ? Array(x + 1).join(q) : "";
          l[l.length] = F[5] ? u + k + x : 0 == q ? u + x + k : x + u + k;
        }
      }
    }
    return l.join("");
  };
  b.cache = {};
  b.parse = function(a) {
    for (var b = [], d = [], f = 0;a;) {
      if (null !== (b = c.exec(a))) {
        d[d.length] = b[0];
      } else {
        if (null !== (b = e.exec(a))) {
          d[d.length] = "%";
        } else {
          if (null !== (b = h.exec(a))) {
            if (b[2]) {
              var f = f | 1, g = [], m = b[2], p = [];
              if (null !== (p = k.exec(m))) {
                for (g[g.length] = p[1];"" !== (m = m.substring(p[0].length));) {
                  if (null !== (p = l.exec(m))) {
                    g[g.length] = p[1];
                  } else {
                    if (null !== (p = q.exec(m))) {
                      g[g.length] = p[1];
                    } else {
                      throw new SyntaxError("[sprintf] failed to parse named argument key");
                    }
                  }
                }
              } else {
                throw new SyntaxError("[sprintf] failed to parse named argument key");
              }
              b[2] = g;
            } else {
              f |= 2;
            }
            if (3 === f) {
              throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
            }
            d[d.length] = b;
          } else {
            throw new SyntaxError("[sprintf] unexpected placeholder");
          }
        }
      }
      a = a.substring(b[0].length);
    }
    return d;
  };
  var m = function(a, c, d) {
    d = (c || []).slice(0);
    d.splice(0, 0, a);
    return b.apply(null, d);
  };
  "undefined" !== typeof exports ? (exports.sprintf = b, exports.vsprintf = m) : (a.sprintf = b, a.vsprintf = m, "function" === typeof define && define.amd && define(function() {
    return {sprintf:b, vsprintf:m};
  }));
})("undefined" === typeof window ? this : window);
var CTATMsgType = function() {
  CTATBase.call(this, "CTATMsgType", "");
};
CTATMsgType.findProperty = function(a, b) {
  var d = a.toLowerCase(), f = "<" + b.toLowerCase() + ">", g = d.indexOf(f) + f.length, d = d.indexOf("</" + b.toLowerCase() + ">");
  if (g < f.length || 0 > d) {
    return null;
  }
  f = {};
  f.start = g;
  f.end = d;
  return f;
};
CTATMsgType.makeValues = function(a) {
  if (null == a) {
    return "";
  }
  if ("string" == typeof a) {
    return a;
  }
  if (a.constructor && "Array" == a.constructor.name) {
    if (!a.length) {
      return "";
    }
    for (var b = 0, d, f = "<value>" + (null == (d = a[b++]) ? "" : d.toString());b < a.length;) {
      f += "</value><value>" + (null == (d = a[b++]) ? "" : d.toString());
    }
    return f + "</value>";
  }
  return a.outerHTML ? a.outerHTML : a.toString();
};
CTATMsgType.setProperty = function(a, b, d) {
  var f = CTATMsgType.findProperty(a, b), g = "";
  f ? (g = a.slice(0, f.start), g += CTATMsgType.makeValues(d), g += a.slice(f.end, a.length)) : (f = a.indexOf("</properties>"), g = a.slice(0, f), g += "<" + b + ">" + CTATMsgType.makeValues(d) + "</" + b + ">", g += a.slice(f, a.length));
  return g;
};
CTATMsgType.getProperty = function(a, b) {
  var d = CTATMsgType.findProperty(a, b);
  return d ? a.slice(d.start, d.end) : "";
};
CTATMsgType.valueToArray = function(a) {
  if (!a.startsWith("<value>")) {
    return null;
  }
  var b = a.substring(7);
  if (!a.endsWith("</value>")) {
    return null;
  }
  b = b.substring(0, b.length - 8);
  b = b.split("</value><value>");
  ctatdebug("valueToArray(" + a + ") returns " + b);
  return b;
};
CTATMsgType.getValue = function(a, b) {
  var d = CTATMsgType.valueToArray(a);
  return !d || d.length <= b ? null : d[b];
};
CTATMsgType.getMessageType = function(a) {
  return CTATMsgType.getProperty(a, "MessageType");
};
CTATMsgType.getTransactionID = function(a) {
  return CTATMsgType.getProperty(a, CTATMessage.TRANSACTION_ID_TAG);
};
CTATMsgType.setTransactionID = function(a, b) {
  return CTATMsgType.setProperty(a, CTATMessage.TRANSACTION_ID_TAG, b);
};
CTATMsgType.isCorrectOrIncorrect = function(a) {
  return "string" == typeof a ? CTATMsgType.CorrectTypes[a.toLowerCase()] ? !0 : !1 : !1;
};
CTATMsgType.hasTextFeedback = function(a) {
  return "string" == typeof a ? CTATMsgType.TextFeedbackTypes[a.toLowerCase()] ? !0 : !1 : !1;
};
CTATMsgType.isHintResponse = function(a) {
  return "string" == typeof a ? CTATMsgType.HintResponseTypes[a.toLowerCase()] ? !0 : !1 : !1;
};
CTATMsgType.isDoneMessage = function(a) {
  var b = CTATMsgType.getProperty(a, "Selection");
  a = CTATMsgType.getProperty(a, "Action");
  if (!b || !a) {
    return !1;
  }
  b = b.toString().toLowerCase();
  a = a.toString().toLowerCase();
  var d = CTATMsgType.DONE.toLowerCase();
  if (d != b && d != CTATMsgType.getValue(b, 0)) {
    return !1;
  }
  b = CTATMsgType.BUTTON_PRESSED.toLowerCase();
  return b != a && b != CTATMsgType.getValue(a, 0) ? !1 : !0;
};
CTATMsgType.getSAIArraysFromElement = function(a, b) {
  for (var d = {selection:[], action:[], input:[]}, f = b.getElementChildren(a), g = 0;g < f.length;g++) {
    var c = f[g];
    switch(b.getElementName(c)) {
      case "Selection":
        for (var c = b.getElementChildren(c), e = 0;e < c.length;e++) {
          d.selection.push(b.getNodeTextValue(c[e]));
        }
        break;
      case "Action":
        c = b.getElementChildren(c);
        for (e = 0;e < c.length;e++) {
          d.action.push(b.getNodeTextValue(c[e]));
        }
        break;
      case "Input":
        c = b.getElementChildren(c);
        for (e = 0;e < c.length;e++) {
          d.input.push(b.getNodeTextValue(c[e]));
        }
        break;
      case "properties":
        return CTATMsgType.getSAIArraysFromElement(c, b);
    }
  }
  return d;
};
Object.defineProperty(CTATMsgType, "CorrectTypes", {enumerable:!1, configurable:!1, writable:!1, value:{correctaction:1, incorrectaction:1, lispcheckaction:1}});
Object.defineProperty(CTATMsgType, "TextFeedbackTypes", {enumerable:!1, configurable:!1, writable:!1, value:{showhintsmessage:1, successmessage:1, buggymessage:1, wrongusermessage:1, nohintmessage:1, highlightmsg:1, showhintsmessagefromlisp:1}});
Object.defineProperty(CTATMsgType, "HintResponseTypes", {enumerable:!1, configurable:!1, writable:!1, value:{showhintsmessage:1, nohintmessage:1, showhintsmessagefromlisp:1}});
Object.defineProperty(CTATMsgType, "BUGGY_MSG", {enumerable:!1, configurable:!1, writable:!1, value:"BuggyMsg"});
Object.defineProperty(CTATMsgType, "DONE", {enumerable:!1, configurable:!1, writable:!1, value:"Done"});
Object.defineProperty(CTATMsgType, "BUTTON_PRESSED", {enumerable:!1, configurable:!1, writable:!1, value:"ButtonPressed"});
Object.defineProperty(CTATMsgType, "DEFAULT_STUDENT_ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:"Student"});
Object.defineProperty(CTATMsgType, "DEFAULT_TOOL_ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:"Tutor"});
Object.defineProperty(CTATMsgType, "UNGRADED_TOOL_ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:"Tutor (unevaluated)"});
Object.defineProperty(CTATMsgType, "DEFAULT_ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:CTATMsgType.DEFAULT_STUDENT_ACTOR});
Object.defineProperty(CTATMsgType, "ANY_ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:"Any"});
Object.defineProperty(CTATMsgType, "SHOW_ALL_FEEDBACK", {enumerable:!1, configurable:!1, writable:!1, value:"Show All Feedback"});
Object.defineProperty(CTATMsgType, "DELAY_FEEDBACK", {enumerable:!1, configurable:!1, writable:!1, value:"Delay Feedback"});
Object.defineProperty(CTATMsgType, "HIDE_ALL_FEEDBACK", {enumerable:!1, configurable:!1, writable:!1, value:"Hide All Feedback"});
Object.defineProperty(CTATMsgType, "HIDE_BUT_COMPLETE", {enumerable:!1, configurable:!1, writable:!1, value:"Hide feedback but require all steps"});
Object.defineProperty(CTATMsgType, "HIDE_BUT_ENFORCE", {enumerable:!1, configurable:!1, writable:!1, value:"Hide feedback but enforce constraints"});
Object.defineProperty(CTATMsgType, "DEFAULT_OUT_OF_ORDER_MESSAGE", {enumerable:!1, configurable:!1, writable:!1, value:"HIGHLIGHTEDSTEP"});
Object.defineProperty(CTATMsgType, "NOT_DONE_MSG", {enumerable:!1, configurable:!1, writable:!1, value:"NOTDONE"});
Object.defineProperty(CTATMsgType, "PREVIOUS_FOCUS", {enumerable:!1, configurable:!1, writable:!1, value:"PreviousFocus"});
Object.defineProperty(CTATMsgType, "ASSOCIATED_RULES", {enumerable:!1, configurable:!1, writable:!1, value:"AssociatedRules"});
Object.defineProperty(CTATMsgType, "BEGIN_GO_TO_STATE", {enumerable:!1, configurable:!1, writable:!1, value:"BeginGoToState"});
Object.defineProperty(CTATMsgType, "END_GO_TO_STATE", {enumerable:!1, configurable:!1, writable:!1, value:"EndGoToState"});
Object.defineProperty(CTATMsgType, "BUGGY_MESSAGE", {enumerable:!1, configurable:!1, writable:!1, value:"BuggyMessage"});
Object.defineProperty(CTATMsgType, "CORRECT_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"CorrectAction"});
Object.defineProperty(CTATMsgType, "HINT_REQUEST", {enumerable:!1, configurable:!1, writable:!1, value:"HintRequest"});
Object.defineProperty(CTATMsgType, "INCORRECT_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"InCorrectAction"});
Object.defineProperty(CTATMsgType, "INTERFACE_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"InterfaceAction"});
Object.defineProperty(CTATMsgType, "INTERFACE_IDENTIFICATION", {enumerable:!1, configurable:!1, writable:!1, value:"InterfaceIdentification"});
Object.defineProperty(CTATMsgType, "PROBLEM_RESTORE_END", {enumerable:!1, configurable:!1, writable:!1, value:"ProblemRestoreEnd"});
Object.defineProperty(CTATMsgType, "PROBLEM_SUMMARY_REQUEST", {enumerable:!1, configurable:!1, writable:!1, value:"ProblemSummaryRequest"});
Object.defineProperty(CTATMsgType, "PROBLEM_SUMMARY_RESPONSE", {enumerable:!1, configurable:!1, writable:!1, value:"ProblemSummaryResponse"});
Object.defineProperty(CTATMsgType, "SET_PREFERENCES", {enumerable:!1, configurable:!1, writable:!1, value:"SetPreferences"});
Object.defineProperty(CTATMsgType, "SHOW_HINTS_MESSAGE", {enumerable:!1, configurable:!1, writable:!1, value:"ShowHintsMessage"});
Object.defineProperty(CTATMsgType, "SUCCESS_MESSAGE", {enumerable:!1, configurable:!1, writable:!1, value:"SuccessMessage"});
Object.defineProperty(CTATMsgType, "START_STATE_END", {enumerable:!1, configurable:!1, writable:!1, value:"StartStateEnd"});
Object.defineProperty(CTATMsgType, "STATE_GRAPH", {enumerable:!1, configurable:!1, writable:!1, value:"StateGraph"});
Object.defineProperty(CTATMsgType, "UNTUTORED_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"UntutoredAction"});
Object.defineProperty(CTATMsgType, "CompletionValue", {enumerable:!1, configurable:!1, writable:!1, value:["incomplete", "complete"]});
CTATMsgType.prototype = Object.create(CTATBase.prototype);
CTATMsgType.prototype.constructor = CTATMsgType;
"undefined" !== typeof module && (module.exports = CTATMsgType);
var ProblemStateSaver = function(a) {
  CTATBase.call(this, "ProblemStateSaver", a);
  this.tracer = a;
  var b = this, d = [], f = "", g = "", c = 0;
  this.saveAsYouGo = function(e) {
    b.ctatdebug("saveAsYouGo() curriculum_service_url " + f + ", tracer " + a);
    if (a && e) {
      var h = {};
      h.session_id = a.getSessionID();
      h.authenticity_token = g;
      h.summary = e.toXML(!1);
      h.problem_state = ProblemStateSaver.MESSAGES_TAG;
      for (var k = 0;k < d.length;++k) {
        h.problem_state += d[k];
      }
      h.problem_state += ProblemStateSaver.MESSAGES_TAG.replace("<", "</");
      ++c;
      b.ctatdebug("saveAsYouGo[" + c + "] to send problem_state length " + h.problem_state.length);
      CTATLMS.saveProblemState(h);
      CTATLMS.gradeStudent(parseInt(e.getCorrect()), parseInt(e.getRequiredSteps()));
    } else {
      b.ctatdebug("Error: no tracer or no problem summary available, aborting save as you go");
    }
  };
  this.setCurriculumServiceUrl = function(a) {
    b.ctatdebug("ProblemStateSaver.setCurriculumServiceUrl() old " + f + ", new " + a);
    f = a;
  };
  this.setAuthenticityToken = function(a) {
    b.ctatdebug("ProblemStateSaver.setAuthenticityToken() old " + g + ", new " + a);
    a && (g = a);
  };
  this.getProblemState = function() {
    return d;
  };
  this.getProblemStateLength = function() {
    return d.length;
  };
};
ProblemStateSaver.prototype = Object.create(CTATBase.prototype);
ProblemStateSaver.prototype.constructor = ProblemStateSaver;
ProblemStateSaver.prototype.appendToProblemState = function(a, b, d) {
  if (d || b.mustSaveForRestore() && ProblemStateSaver.mustSaveForRestore(CTATMsgType.getMessageType(a))) {
    b = this.getProblemState(), a = this.editForProblemState(a), b.push(a);
  }
};
Object.defineProperty(ProblemStateSaver, "XML_PROLOGUE", {enumerable:!1, configurable:!1, writable:!1, value:/<\? *[xX][mM][lL][^?]*\?>/});
Object.defineProperty(ProblemStateSaver, "LEADING_WHITE_SPACE", {enumerable:!1, configurable:!1, writable:!1, value:/^\s+</m});
Object.defineProperty(ProblemStateSaver, "MESSAGES_TAG", {enumerable:!1, configurable:!1, writable:!1, value:"<messages>"});
ProblemStateSaver.prototype.editForProblemState = function(a) {
  var b = a.split(ProblemStateSaver.XML_PROLOGUE), d = b[0], f;
  for (f = 1;f < b.length;++f) {
    d += b[f];
  }
  b = d.split(ProblemStateSaver.LEADING_WHITE_SPACE);
  d = b[0];
  for (f = 1;f < b.length;++f) {
    d.endsWith("\n") && (d = d.slice(0, -1)), d.endsWith("\r") && (d = d.slice(0, -1)), d += "<" + b[f];
  }
  this.ctatdebug("ProblemStateSaver.editForProblemState(" + a + ")\n returns " + d);
  return d;
};
ProblemStateSaver.omitFromRestore = {init:!1};
ProblemStateSaver.mustSaveForRestore = function(a) {
  ProblemStateSaver.omitFromRestore.init || (ProblemStateSaver.omitFromRestore[CTATMsgType.ASSOCIATED_RULES.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.BUGGY_MESSAGE.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.CORRECT_ACTION.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.INCORRECT_ACTION.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.INTERFACE_IDENTIFICATION.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.PROBLEM_RESTORE_END.toLowerCase()] = 
  !0, ProblemStateSaver.omitFromRestore[CTATMsgType.PROBLEM_SUMMARY_REQUEST.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.PROBLEM_SUMMARY_RESPONSE.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.SET_PREFERENCES.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.SHOW_HINTS_MESSAGE.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore[CTATMsgType.SUCCESS_MESSAGE.toLowerCase()] = !0, ProblemStateSaver.omitFromRestore.init = !0);
  return a && ProblemStateSaver.omitFromRestore[a.toLowerCase()] ? !1 : !0;
};
ProblemStateSaver.prototype.forwardToInterface = function(a, b, d) {
  var f = CTATMsgType.getMessageType(a);
  this.ctatdebug("PSS.forwardToInterface(" + f + ") problemState.length " + this.getProblemState().length + ", outputStatus " + d);
  if (d && d.isOutputSuppressed()) {
    return !1;
  }
  CTAT.ToolTutor.sendToInterface(a, b);
  d && d.transition(CTATMsgType.getMessageType(a));
  return !0;
};
ProblemStateSaver.prototype.processMessage = function(a) {
  this.ctatdebug("ProblemStateSaver.processMessage(" + a + ")");
};
"undefined" !== typeof module && (module.exports = ProblemStateSaver);
var ProblemStateRestorer = function(a) {
  CTATBase.call(this, "ProblemStateRestorer", a);
  var b = this, d = null;
  this.getRestoreProblemUrl = function() {
    return d;
  };
  this.setRestoreProblemUrl = function(a) {
    d = a;
  };
  this.toString = function() {
    return "[" + d + ": 0]";
  };
  this.retrieveMessages = function(d) {
    console.log("retrieveMessages(" + d + ", ...)");
    d.mustRetrieveProblemState() ? (a.stopWorking(1), CTATLMS.getProblemState(b.process)) : console.log("Retrieval status indicates that we should not retrieve");
  };
  this.process = function(d) {
    if ("string" != typeof d) {
      console.log("ProblemStateRestorer.process() called with parameter not a string: ", typeof d), a.enqueueForRestore([]);
    } else {
      if (d.slice(0, ProblemStateSaver.MESSAGES_TAG.length) != ProblemStateSaver.MESSAGES_TAG) {
        console.log("ProblemStateRestorer.process() called with unrecognized string: ", d.slice(0, 20)), a.enqueueForRestore([]);
      } else {
        var g = [];
        if ("string" == typeof d && (d = d.split(/<\/?messages>/), b.ctatdebug("msgsArr.length " + d.length + ", msgsArr[1].length " + (d[1] ? d[1].length : -1)), !(2 > d.length))) {
          d = d[1].split("<message>");
          b.ctatdebug("problemStateArr.length " + d.length);
          for (var c = 0, e = !1, h = 1;h < d.length;++h) {
            var k = "<message>" + d[h], l = CTATMsgType.getMessageType(k);
            CTATMsgType.STATE_GRAPH == l ? e = !0 : CTATMsgType.START_STATE_END == l ? e = !1 : e ? c++ : (a.getProblemStateSaver().appendToProblemState(k, null, !0), g.push(k));
            b.ctatdebug("problemStateArr[" + h + "] " + (e ? "omit " : "keep ") + l + " omitted " + c + " kept " + g.length);
          }
        }
        a.enqueueForRestore(g);
      }
    }
  };
};
ProblemStateRestorer.prototype = Object.create(CTATBase.prototype);
ProblemStateRestorer.prototype.constructor = ProblemStateRestorer;
"undefined" !== typeof module && (module.exports = ProblemStateRestorer);
var CTATExampleTracerException = function(a) {
  CTATBase.call(this, "CTATExampleTracerException", "");
  this.toString = function() {
    return a;
  };
};
CTATExampleTracerException.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerException.prototype.constructor = CTATExampleTracerException;
"undefined" !== typeof module && (module.exports = CTATExampleTracerException);
var CTATStep = function(a, b) {
  CTATBase.call(this, "CTATStep", a);
  var d = 0, f = null, g = 0, c = 0;
  this.ctatdebug("entering CTATStep(" + a + ", " + b + ") constructor");
  this.incrementFirstHints = function() {
    d++;
  };
  this.incrementNCorrect = function() {
    g++;
  };
  this.incrementErrors = function() {
    c++;
  };
  this.setLastResult = function(a) {
    f = a;
  };
  this.getLastResult = function() {
    return f;
  };
  this.getResult = function() {
    return b;
  };
  this.getNCorrect = function() {
    return g;
  };
  this.getNErrors = function() {
    return c;
  };
  this.getNFirstHints = function() {
    return d;
  };
  this.ctatdebug("in CTATStep(" + a + ", " + b + ") constructor");
  switch(b) {
    case CTATStep.StepResult[3]:
      this.incrementNCorrect();
      break;
    case CTATStep.StepResult[1]:
      this.incrementErrors();
      break;
    case CTATStep.StepResult[2]:
      this.incrementFirstHints();
  }
  this.ctatdebug("exiting CTATStep constructor");
};
Object.defineProperty(CTATStep, "StepResult", {enumerable:!1, configurable:!1, writable:!1, value:["UNTRIED", "INCORRECT", "HINT", "CORRECT"]});
CTATStep.prototype = Object.create(CTATBase.prototype);
CTATStep.prototype.constructor = CTATStep;
"undefined" !== typeof module && (module.exports = CTATStep);
var CTATProblemSummary = function(a, b, d) {
  CTATBase.call(this, "CTATProblemSummary", "");
  if (null === a || "undefined" === typeof a || 1 > a.length) {
    throw new CTATExampleTracerException("problemName null or empty");
  }
  var f = Number.MAX_VALUE, g = b, c = 0, e = new Date, h = {}, k = 0, l = 0, q = 0, p = 0, m = 0, w = 0, t = 0, z = CTATMsgType.CompletionValue[0], y = this;
  this.getTimeElapsed = function() {
    return c;
  };
  this.getUniqueCorrectUnassisted = function() {
    return w;
  };
  this.getHintsOnly = function() {
    var a = 0, b;
    for (b in h) {
      CTATStep.StepResult[2] == h[b].getResult() && 1 > h[b].getNErrors() && ++a;
    }
    return a;
  };
  this.getErrorsOnly = function() {
    var a = 0, b;
    for (b in h) {
      CTATStep.StepResult[1] == h[b].getResult() && 1 > h[b].getNFirstHints() && ++a;
    }
    return a;
  };
  this.getUniqueSteps = function() {
    var a = 0, b;
    for (b in h) {
      a++;
    }
    return a;
  };
  this.getRequiredSteps = function() {
    return f;
  };
  this.setRequiredSteps = function(a) {
    f = a;
  };
  this.getCorrect = function() {
    return k;
  };
  this.toXML = function(b) {
    var d;
    d = "" + (' ProblemName="' + a + '"');
    d += ' CompletionStatus="' + z + '"';
    d += ' Correct="' + k + '"';
    d += ' UniqueCorrect="' + m + '"';
    d += ' UniqueCorrectUnassisted="' + w + '"';
    d += ' Hints="' + l + '"';
    d += ' UniqueHints="' + p + '"';
    d += ' HintsOnly="' + y.getHintsOnly() + '"';
    d += ' Errors="' + q + '"';
    d += ' UniqueErrors="' + t + '"';
    d += ' ErrorsOnly="' + y.getErrorsOnly() + '"';
    d += ' UniqueSteps="' + y.getUniqueSteps() + '"';
    d += ' RequiredSteps="' + y.getRequiredSteps() + '"';
    d += ' TimeElapsed="' + c + '"';
    var e = y.getSkills() ? y.getSkills().toXML(b) : "";
    return b ? "&lt;ProblemSummary" + d + "&gt;" + e + "&lt;/ProblemSummary&gt;" : "<ProblemSummary" + d + ">" + e + "</ProblemSummary>";
  };
  this.getSkills = function() {
    return g;
  };
  this.setSkills = function(a) {
    g = a;
  };
  this.stopTimer = function() {
    var a = new Date;
    c += a.getTime() - e.getTime();
    return a;
  };
  this.restartTimer = function() {
    e = y.stopTimer();
    return c;
  };
  this.addHint = function(a) {
    y.ctatdebug("addHint(" + a + ")");
    var b = h[a];
    null !== b && "undefined" !== typeof b ? (1 > b.getNFirstHints() && ++p, b.incrementFirstHints()) : (b = new CTATStep(a, CTATStep.StepResult[2]), h[a] = b, p++);
    l++;
    b.setLastResult(CTATStep.StepResult[2]);
    y.ctatdebug("exiting addHint() hint count " + l + ", trial " + b);
  };
  this.addError = function(a) {
    y.ctatdebug("addError(" + a + ")");
    var b = h[a];
    null !== b && "undefined" !== typeof b ? (1 > b.getNCorrect() && 1 > b.getNErrors() && ++t, b.incrementErrors()) : (b = new CTATStep(a, CTATStep.StepResult[1]), h[a] = b, t++);
    q++;
    b.setLastResult(CTATStep.StepResult[1]);
    y.ctatdebug("exiting addError() error count " + q + ", trial " + b);
  };
  this.addCorrect = function(a) {
    var b = h[a];
    y.ctatdebug("entering addCorrect(" + a + ") trial " + b);
    b ? (1 > b.getNCorrect() && 1 > b.getNErrors() && (++m, 1 > b.getNFirstHints() && w++), b.incrementNCorrect()) : (y.ctatdebug("to call CTATStep(" + a + ", StepResult " + CTATStep.StepResult[3]), b = new CTATStep(a, CTATStep.StepResult[3]), h[a] = b, m++, w++);
    k++;
    b.setLastResult(CTATStep.StepResult[3]);
    y.ctatdebug("exiting addCorrect() correct count " + k + ", trial " + b);
  };
  this.setCompletionStatus = function(a, b) {
    y.ctatdebug("setCompletionStatus(" + a + ", " + b + ")");
    if (CTATMsgType.CompletionValue[1] != z || b) {
      z = a;
    }
  };
  this.getCompletionStatus = function() {
    return z;
  };
};
CTATProblemSummary.prototype = Object.create(CTATBase.prototype);
CTATProblemSummary.prototype.constructor = CTATProblemSummary;
"undefined" !== typeof module && (module.exports = CTATProblemSummary);
var CTATMatcher = function(a, b, d) {
  CTATBase.call(this, "CTATMatcher", "");
  this.lastResult = null;
  var f = new CTATSAI("", "", ""), g = d, c = CTATMsgType.DEFAULT_ACTOR, e = !1, h = this;
  this.resetMatcher = function() {
  };
  this.getSelection = function() {
    return h.getDefaultSelection();
  };
  this.getAction = function() {
    return h.getDefaultAction();
  };
  this.getInput = function() {
    return h.getDefaultInput();
  };
  this.getActor = function() {
    return c;
  };
  this.setCaseInsensitive = function(a) {
    g = a;
  };
  this.getEvaluatedInput = function(a, b) {
    return h.getInput();
  };
  this.getTraversalIncrement = function() {
    return 1;
  };
  this.getTutorSAI = function(a, b, c) {
    a = String(c).toLowerCase() == CTATExampleTracerLink.CORRECT_ACTION.toLowerCase() ? a : h.getDefaultSAI();
    console.log("CTATMatcher.getTutorSAI() superclass method called, should be subclass;\n  returning: " + a);
    return a;
  };
  this.getDefaultSelection = function() {
    return h.getDefaultSAI().getSelection();
  };
  this.getDefaultAction = function() {
    return h.getDefaultSAI().getAction();
  };
  this.getDefaultInput = function() {
    return h.getDefaultSAI().getInput();
  };
  this.getDefaultSAI = function() {
    return f;
  };
  this.setDefaultSAI = function(a) {
    f = a;
  };
  this.getDefaultActor = function() {
    switch(String(getActor()).toLowerCase()) {
      case CTATMsgType.DEFAULT_STUDENT_ACTOR.toLowerCase():
        return CTATMsgType.DEFAULT_STUDENT_ACTOR;
      case CTATMsgType.DEFAULT_TOOL_ACTOR.toLowerCase():
        return CTATMsgType.DEFAULT_TOOL_ACTOR;
      case CTATMsgType.UNGRADED_TOOL_ACTOR.toLowerCase():
        return CTATMsgType.DEFAULT_TOOL_ACTOR;
      case CTATMsgType.ANY_ACTOR.toLowerCase():
        return CTATMsgType.DEFAULT_TOOL_ACTOR;
      default:
        return console.log("CTATMatcher.getDefaultActor() unexpected value for actor: " + c + "; returning " + CTATMsgType.DEFAULT_ACTOR), CTATMsgType.DEFAULT_ACTOR;
    }
  };
  this.getInput = function() {
    return h.getDefaultInput();
  };
  this.getCaseInsensitive = function() {
    return g;
  };
  this.match = function(a, b, c, d, e) {
    console.log("CTATMatcher superclass method called: match(" + a + ", " + b + ", " + c + ", " + d + ")");
    return !1;
  };
  this.matchForHint = function(a, b, c, d) {
    console.log("CTATMatcher superclass method called: matchForHint(" + a + ", " + b + ", " + c + ", vt)");
    return !1;
  };
  this.matchActor = function(a) {
    a = String(a).toUpperCase();
    var b = String(h.getActor()).toUpperCase();
    ctatdebug("CTATMatcher.matchActor(" + a + ") myActor is " + b);
    return CTATMsgType.ANY_ACTOR.toString().toUpperCase() == b || CTATMsgType.UNGRADED_TOOL_ACTOR.toString().toUpperCase() == b && CTATMsgType.DEFAULT_TOOL_ACTOR.toString().toUpperCase() == a || CTATMsgType.UNGRADED_TOOL_ACTOR.toString().toUpperCase() == a && CTATMsgType.DEFAULT_TOOL_ACTOR.toString().toUpperCase() == b ? !0 : b == a;
  };
  this.getDefaultSelectionArray = function() {
    return h.getDefaultSAI().getSelectionArray();
  };
  this.getDefaultActionArray = function() {
    return h.getDefaultSAI().getActionArray();
  };
  this.getDefaultInputArray = function() {
    return h.getDefaultSAI().getInputArray();
  };
  this.getLastResult = function() {
    return null === h.lastResult || "undefined" === typeof h.lastResult ? "" : h.lastResult.toString();
  };
  this.setActor = function(a) {
    ctatdebug("CTATMatcher --\x3e in setActor(" + a + ")");
    if (null === a || "undefined" === typeof a) {
      a = CTATMsgType.DEFAULT_ACTOR;
    }
    a = String(a).toLowerCase().trim();
    c = "tool" == a ? CTATMsgType.DEFAULT_TOOL_ACTOR : a == CTATMsgType.DEFAULT_STUDENT_ACTOR.toLowerCase() ? CTATMsgType.DEFAULT_STUDENT_ACTOR : a == CTATMsgType.DEFAULT_TOOL_ACTOR.toLowerCase() ? CTATMsgType.DEFAULT_TOOL_ACTOR : a == CTATMsgType.UNGRADED_TOOL_ACTOR.toLowerCase() ? CTATMsgType.UNGRADED_TOOL_ACTOR : a == CTATMsgType.ANY_ACTOR.toLowerCase() ? CTATMsgType.ANY_ACTOR : CTATMsgType.DEFAULT_ACTOR;
  };
  this.array2ConcatString = function(a) {
    var b = "";
    if (null == a) {
      return b;
    }
    if (!Array.isArray(a)) {
      return a.toString();
    }
    a.forEach(function(a) {
      null != a && (b += a.toString() + "\n");
    });
    return b.substring(0, 0 < b.length ? b.length - 1 : 0);
  };
  this.matchConcatenation = function(a) {
    return h.matchSingle(h.array2ConcatString(a));
  };
  this.isLinkTriggered = function() {
    return e;
  };
  this.setLinkTriggered = function(a) {
    e = a;
  };
  this.evaluateReplacement = function(a, b, c) {
    return "";
  };
  this.replaceInput = function() {
    return !!h.getReplacementFormula();
  };
  this.getReplacementFormula = function() {
    return "";
  };
};
CTATMatcher.prototype.toString = function() {
  console.log("Error: CTATMatcher.toString() called; should be overridden in subclass");
  return "This is CTATMatcher.";
};
CTATMatcher.prototype.setParameter = function(a, b, d) {
};
CTATMatcher.isTutorActor = function(a, b) {
  return CTATMsgType.DEFAULT_TOOL_ACTOR.toUpperCase() === a.toUpperCase() || CTATMsgType.UNGRADED_TOOL_ACTOR.toUpperCase() === a.toUpperCase() || b && CTATMsgType.ANY_ACTOR.toUpperCase() === a.toUpperCase() ? !0 : !1;
};
Object.defineProperty(CTATMatcher, "NON_SINGLE", {enumerable:!1, configurable:!1, writable:!1, value:-1});
Object.defineProperty(CTATMatcher, "SELECTION", {enumerable:!1, configurable:!1, writable:!1, value:0});
Object.defineProperty(CTATMatcher, "ACTION", {enumerable:!1, configurable:!1, writable:!1, value:1});
Object.defineProperty(CTATMatcher, "INPUT", {enumerable:!1, configurable:!1, writable:!1, value:2});
Object.defineProperty(CTATMatcher, "VECTOR", {enumerable:!1, configurable:!1, writable:!1, value:3});
Object.defineProperty(CTATMatcher, "ACTOR", {enumerable:!1, configurable:!1, writable:!1, value:"Actor"});
CTATMatcher.prototype = Object.create(CTATBase.prototype);
CTATMatcher.prototype.constructor = CTATMatcher;
"undefined" !== typeof module && (module.exports = CTATMatcher);
var CTATTreeNode = {};
(function() {
  var a;
  a = function() {
    function a() {
    }
    a.operators = [["CONST"], ["VAR"], ["EXP", "SQRT"], ["UPLUS", "UMINUS"], ["ITIMES", "TIMES", "DIVIDE"], ["IDIVIDE", "REM"], ["PLUS", "MINUS"], "LESS LESSEQUAL EQUAL NOTEQUAL GREATEREQUAL GREATER".split(" ")];
    a.relationalOperators = "LESS LESSEQUAL EQUAL NOTEQUAL GREATEREQUAL GREATER".split(" ");
    a.operatorPrecedence = function(a, b) {
      return Math.sign(this.operators.findIndex(function(b) {
        return b.includes(a);
      }) - this.operators.findIndex(function(a) {
        return a.includes(b);
      }));
    };
    a.operatorStrings = {EXP:"^", SQRT:"|", UPLUS:"+", UMINUS:"-", ITIMES:"", TIMES:"*", DIVIDE:"/", IDIVIDE:"//", REM:"%", PLUS:"+", MINUS:"-", LESS:"<", LESSEQUAL:"<=", EQUAL:"=", NOTEQUAL:"!=", GREATEREQUAL:">=", GREATER:">"};
    a.toOperatorString = function(a) {
      return this.operatorStrings[a] || "";
    };
    a.diff = function(a, b) {
      return a.filter(function(a) {
        return !b.includes(a);
      });
    };
    a.prototype.addParens = function() {
      this.parens++;
      return this;
    };
    a.prototype.toString = function(a) {
      var b, g;
      this.negated() && this.setParens("MINUS");
      this.inverted() && this.setParens("DIVIDE");
      this.inverted() && (a = "1/" + a);
      this.negated() && (a = "-" + a);
      b = 0;
      for (g = this.parens;0 <= g ? b < g : b > g;0 <= g ? ++b : --b) {
        a = "(" + a + ")";
      }
      return a;
    };
    a.prototype.setParens = function(d, f) {
      var g;
      null == f && (f = !1);
      g = this.negated() ? "UMINUS" : this.inverted() ? "DIVIDE" : this.operator;
      g = a.operatorPrecedence(d, g);
      if (0 > g || 0 === g && f) {
        this.parens = 1;
      }
      return this;
    };
    a.prototype.evaluate = function(a) {
      return this.sign * Math.pow(a, this.exp);
    };
    a.prototype.equals = function(a) {
      return a && this.operator === a.operator && this.sign === a.sign && this.exp === a.exp && this.parens === a.parens;
    };
    a.prototype.simplify = function(a) {
      this.methods = a;
      return this.simplifyNode(this.methods);
    };
    a.prototype.simplifyNode = function(a) {
      var b, g, c, e;
      this.methods = a;
      e = this;
      c = this.methods;
      a = 0;
      for (b = c.length;a < b;a++) {
        g = c[a], e = e[g].call(e), e.methods = this.methods;
      }
      delete e.methods;
      return e;
    };
    a.prototype.simpleFlatten = function() {
      return this;
    };
    a.prototype.flatten = function() {
      this.parens = 0;
      return this;
    };
    a.prototype.computeConstants = function() {
      return this;
    };
    a.prototype.combineSimilar = function() {
      return this;
    };
    a.prototype.expand = function() {
      return this;
    };
    a.prototype.distribute = function() {
      return this;
    };
    a.prototype.removeIdentity = function() {
      return this;
    };
    a.prototype.sort = function() {
      return this;
    };
    a.prototype.spreadIdentity = function() {
      return this;
    };
    a.prototype.stripIdentity = function() {
      return this;
    };
    a.prototype.multiplyOne = function() {
      return (new CTATMultiplicationNode("TIMES", [new CTATConstantNode(1), this])).popNegation().pushNegation();
    };
    a.prototype.powerOne = function() {
      return (new CTATPowerNode("EXP", this, new CTATConstantNode(1))).popInversion().pushInversion().popNegation();
    };
    a.prototype.compare = function(d, f) {
      return a.operatorPrecedence(this.operator, d.operator);
    };
    a.prototype.compareSigns = function(a, b) {
      return (Math.sign(this.sign - a.sign) || Math.sign(this.exp - a.exp)) * b;
    };
    a.prototype.countVariables = function() {
      return 0;
    };
    a.prototype.pushNegation = function() {
      return this;
    };
    a.prototype.popNegation = function() {
      return this;
    };
    a.prototype.pushInversion = function() {
      return this;
    };
    a.prototype.popInversion = function() {
      return this;
    };
    a.prototype.negate = function() {
      this.sign = -this.sign;
      return this;
    };
    a.prototype.invert = function() {
      this.exp = -this.exp;
      return this;
    };
    a.prototype.addition = function() {
      return "PLUS" === this.operator;
    };
    a.prototype.subtraction = function() {
      return "MINUS" === this.operator;
    };
    a.prototype.multiplication = function() {
      return "TIMES" === this.operator;
    };
    a.prototype.division = function() {
      return "DIVIDE" === this.operator;
    };
    a.prototype.intDivision = function() {
      return "IDIVIDE" === this.operator;
    };
    a.prototype.power = function() {
      return "EXP" === this.operator;
    };
    a.prototype.root = function() {
      return "SQRT" === this.operator;
    };
    a.prototype.negation = function() {
      return "UMINUS" === this.operator;
    };
    a.prototype.constant = function(a) {
      return !1;
    };
    a.prototype.integer = function() {
      return !1;
    };
    a.prototype.negated = function() {
      return 0 > this.sign;
    };
    a.prototype.inverted = function() {
      return 0 > this.exp;
    };
    a.prototype.parented = function() {
      return 0 < this.parens;
    };
    a.prototype.even = function() {
      return !1;
    };
    return a;
  }();
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATTreeNode = a;
}).call(this);
var CTATUnaryNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l) {
      this.operator = a;
      this.base = b;
      this.parens = null != f ? f : 0;
      this.sign = null != g ? g : 1;
      this.exp = null != l ? l : 1;
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.base, this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      return d.__super__.toString.call(this, "" + CTATTreeNode.toOperatorString(this.operator) + this.base.toString());
    };
    d.prototype.evaluate = function() {
      this.negation() && (this.sign = -this.sign);
      return d.__super__.evaluate.call(this, this.base.evaluate());
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.base.equals(a.base);
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.base = this.base.simplify(this.methods);
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.flatten = function() {
      d.__super__.flatten.apply(this, arguments);
      this.negation() && this.negate();
      return this.pushNegation().pushInversion().base;
    };
    d.prototype.compare = function(a, b) {
      return d.__super__.compare.apply(this, arguments) || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return this.base.countVariables();
    };
    d.prototype.pushNegation = function() {
      this.negated() && (this.negate(), this.base.negate());
      return this;
    };
    d.prototype.pushInversion = function() {
      this.inverted() && (this.invert(), this.base.invert());
      return this;
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATUnaryNode = a;
}).call(this);
var CTATAdditionNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l) {
      this.operator = a;
      this.terms = b;
      this.parens = null != f ? f : 0;
      this.sign = null != g ? g : 1;
      this.exp = null != l ? l : 1;
      this.subtraction() && this.terms[1].negate();
      this.operator = "PLUS";
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.terms.map(function(a) {
        return a.clone();
      }), this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      return d.__super__.toString.call(this, this.terms.reduce(function(a) {
        return function(b, d) {
          d.setParens(a.operator);
          return "" + b + (b && !d.negated() ? "+" : "") + d.toString();
        };
      }(this)));
    };
    d.prototype.evaluate = function() {
      return d.__super__.evaluate.call(this, this.terms.reduce(function(a, b) {
        return a + b.evaluate();
      }, 0));
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.terms.length === a.terms.length && this.terms.every(function(b, d) {
        return b.equals(a.terms[d]);
      });
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.terms = this.terms.map(function(a) {
        return function(b) {
          return b.simplify(a.methods);
        };
      }(this));
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.simpleFlatten = function() {
      this.terms = this.terms.reduce(function(a, b) {
        b.inverted() || b.parented() || !b.addition() ? a.push(b) : a.push.apply(a, b.pushNegation().terms);
        return a;
      }, []);
      return this;
    };
    d.prototype.flatten = function() {
      d.__super__.flatten.apply(this, arguments);
      this.simpleFlatten();
      return this.pushNegation();
    };
    d.prototype.computeConstants = function() {
      var a;
      a = 0;
      this.terms = this.terms.filter(function(b) {
        return b.constant() ? (a += b.evaluate(), !1) : !0;
      });
      0 === a && 0 !== this.terms.length || this.terms.unshift(new CTATConstantNode(a));
      return 1 < this.terms.length ? this : this.pushInversion().terms[0];
    };
    d.prototype.combineSimilar = function() {
      var a;
      a = [];
      this.terms.forEach(function(b) {
        var d, f;
        f = b.constant() ? [null, b] : (b = b.multiplyOne(), [b, b.factors.shift()]);
        return (d = a.find(function(a) {
          var b;
          return null != (b = a[0]) ? b.equals(f[0]) : void 0;
        })) ? d[1] += f[1].evaluate() : a.push([f[0], f[1].evaluate()]);
      });
      this.terms = a.reduce(function(a, b) {
        0 !== b[1] && (b[1] = (new CTATConstantNode(b[1])).popNegation(), b[0] ? (b[0].factors.unshift(b[1]), a.push(b[0].removeIdentity())) : a.push(b[1]));
        return a;
      }, []);
      if (1 < this.terms.length) {
        return this;
      }
      1 !== this.terms.length && (this.terms[0] = new CTATConstantNode(0));
      return this.pushInversion().terms[0];
    };
    d.prototype.removeIdentity = function() {
      var a;
      a = this.terms.filter(function(a) {
        return !a.constant(0);
      });
      this.terms = a.length ? a : this.terms.slice(0, 1);
      return 1 < this.terms.length ? this : this.pushInversion().terms[0];
    };
    d.prototype.sort = function() {
      this.spreadIdentity();
      this.terms = this.terms.sort(function(a, b) {
        return -a.compare(b, !0);
      });
      return this.stripIdentity();
    };
    d.prototype.spreadIdentity = function() {
      this.terms = this.terms.map(function(a) {
        return a.multiplyOne();
      });
      return this;
    };
    d.prototype.stripIdentity = function() {
      this.terms = this.terms.map(function(a) {
        return a.removeIdentity();
      });
      return this;
    };
    d.prototype.compare = function(a, b) {
      var f;
      return (f = d.__super__.compare.apply(this, arguments)) || this.countVariables() - a.countVariables() || this.terms.some(function(d, g) {
        return f = d.compare(a.terms[g], b);
      }) && f || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return this.terms.reduce(function(a, b) {
        return a + b.countVariables();
      }, 0);
    };
    d.prototype.pushNegation = function() {
      this.negated() && (this.negate(), this.terms.forEach(function(a) {
        return a.negate();
      }));
      return this;
    };
    d.prototype.popNegation = function() {
      this.terms[0].negated() && (this.negate(), this.terms.forEach(function(a) {
        return a.negate();
      }));
      return this;
    };
    d.prototype.pushInversion = function() {
      this.inverted() && (this.invert(), this.terms[0].invert());
      return this;
    };
    d.prototype.even = function() {
      return !this.inverted && this.terms.every(function(a) {
        return a.even();
      });
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATAdditionNode = a;
}).call(this);
var CTATIntDivisionNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l, q) {
      this.operator = a;
      this.dividend = b;
      this.divisor = f;
      this.parens = null != g ? g : 0;
      this.sign = null != l ? l : 1;
      this.exp = null != q ? q : 1;
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.dividend.clone(), this.divisor.clone(), this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      this.dividend.setParens(this.operator);
      this.divisor.setParens(this.operator, !0);
      return d.__super__.toString.call(this, "" + this.dividend.toString() + CTATTreeNode.toOperatorString(this.operator) + this.divisor.toString());
    };
    d.prototype.evaluate = function() {
      return d.__super__.evaluate.call(this, function() {
        switch(this.operator) {
          case "REM":
            return this.dividend.evaluate() % this.divisor.evaluate();
          case "IDIVIDE":
            return Math.floor(this.dividend.evaluate() / this.divisor.evaluate());
        }
      }.call(this));
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.dividend.equals(a.dividend) && this.divisor.equals(a.divisor);
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.dividend = this.dividend.simplify(this.methods);
      this.divisor = this.divisor.simplify(this.methods);
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.computeConstants = function() {
      return this.dividend.constant() && this.divisor.constant() ? new CTATConstantNode(this.evaluate()) : this;
    };
    d.prototype.removeIdentity = function() {
      return this.divisor.constant(1) ? (this.intDivision() || (this.dividend = new CTATConstantNode(0)), this.pushNegation().pushInversion().dividend) : this.popNegation();
    };
    d.prototype.compare = function(a, b) {
      return d.__super__.compare.apply(this, arguments) || this.dividend.compare(a.dividend, b) || this.divisor.compare(a.divisor, b) || this.operator !== a.operator && (this.intDivision() && -1 || 1) || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return this.dividend.countVariables() + divisor.countVariables();
    };
    d.prototype.pushNegation = function() {
      this.intDivision() && this.negated() && (this.negate(), this.dividend.negate());
      return this;
    };
    d.prototype.pushInversion = function() {
      this.intDivision() && this.inverted() && (this.invert(), this.dividend.invert());
      return this;
    };
    d.prototype.popNegation = function() {
      this.divisor.negated() && (this.divisor.negate(), this.intDivision() && this.dividend.negate());
      return this;
    };
    d.prototype.even = function() {
      return !this.inverted && "REM" === this.operator && this.dividend.even() && this.divisor.even();
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATIntDivisionNode = a;
}).call(this);
var CTATMultiplicationNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l) {
      this.operator = a;
      this.factors = b;
      this.parens = null != f ? f : 0;
      this.sign = null != g ? g : 1;
      this.exp = null != l ? l : 1;
      this.division() && this.factors[1].invert();
      this.operator = "TIMES";
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.factors.map(function(a) {
        return a.clone();
      }), this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      return d.__super__.toString.call(this, this.factors.reduce(function(a) {
        return function(b, d) {
          var f;
          d.setParens(a.operator);
          f = d.inverted() ? (d.invert(), "/") : /^\d/.test(d = d.toString()) && /\d$/.test(b) ? "*" : "";
          return "" + b + f + d;
        };
      }(this), this.factors[0].inverted() ? "1" : ""));
    };
    d.prototype.evaluate = function() {
      return d.__super__.evaluate.call(this, this.factors.reduce(function(a, b) {
        return a * b.evaluate();
      }, 1));
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.factors.length === a.factors.length && this.factors.every(function(b, d) {
        return b.equals(a.factors[d]);
      });
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.factors = this.factors.map(function(a) {
        return function(b) {
          return b.simplify(a.methods);
        };
      }(this));
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.simpleFlatten = function() {
      this.factors = this.factors.reduce(function(a, b) {
        b.parented() || !b.multiplication() ? a.push(b) : a.push.apply(a, b.pushNegation().pushInversion().factors);
        return a;
      }, []);
      return this;
    };
    d.prototype.flatten = function() {
      d.__super__.flatten.apply(this, arguments);
      this.simpleFlatten();
      return this.popNegation();
    };
    d.prototype.computeConstants = function() {
      var a;
      a = 1;
      this.factors = this.factors.filter(function(b) {
        return b.constant() ? (a *= b.evaluate(), !1) : !0;
      });
      1 === a && 0 !== this.factors.length || this.factors.unshift(new CTATConstantNode(a));
      return 1 < this.factors.length ? this : this.pushNegation().pushInversion().factors[0];
    };
    d.prototype.combineSimilar = function() {
      var a;
      a = [];
      this.factors.forEach(function(b) {
        var d, f, g, q;
        q = b.constant() ? [null, b] : b.power() ? b.exponent.constant() ? (b.pushInversion(), [b.base, b.exponent]) : (b.exponent = b.exponent.multiplyOne(), [b, b.exponent.factors.shift()]) : (b = b.powerOne(), [b.base, b.exponent]);
        return (d = a.find(function(a) {
          var b;
          return null != (b = a[0]) ? b.equals(q[0]) : void 0;
        })) ? d[1] += (null != (f = q[1]) ? f.evaluate() : void 0) || 1 : a.push([q[0], (null != (g = q[1]) ? g.evaluate() : void 0) || 1]);
      });
      this.factors = a.reduce(function(a, b) {
        0 !== b[1] && (b[1] = (new CTATConstantNode(b[1])).popNegation(), b[0] ? b[1].constant(1) ? a.push(b[0]) : b[0].power() ? (b[0].exponent.factors.unshift(b[1]), a.push(b[0])) : a.push(new CTATPowerNode("EXP", b[0], b[1])) : a.push(b[1]));
        return a;
      }, []);
      if (1 < this.factors.length) {
        return this;
      }
      1 !== this.factors.length && (this.factors[0] = new CTATConstantNode(1));
      return this.pushNegation().pushInversion().factors[0];
    };
    d.prototype.distribute = function() {
      var a, b;
      a = this.factors.filter(function(a) {
        return !a.inverted();
      });
      b = this.factors.filter(function(a) {
        return a.inverted();
      });
      return !this.distributedOrSingle(a) || !this.distributedOrSingle(b) || this.single(a) && b.length && this.distributed(b) ? (this.distributed(b) ? (a = this.distributeFactors(this.factors), b = []) : this.distributed(a) ? (b = this.distributeFactors(this.factors), a = []) : (a = this.distributeFactors(a), b = this.distributeFactors(b)), this.factors = b.length ? a.length ? [this.packTerms(a), this.packTerms(b).invert()] : [this.packTerms(b).invert()] : [this.packTerms(a)], 1 < this.factors.length ? 
      this : this.pushNegation().pushInversion().factors[0]) : this;
    };
    d.prototype.distributedOrSingle = function(a) {
      return this.distributed(a) || this.single(a);
    };
    d.prototype.distributed = function(a) {
      return a.every(function(a) {
        return !a.addition();
      });
    };
    d.prototype.single = function(a) {
      return 1 === a.length && a[0].addition();
    };
    d.prototype.distributeFactors = function(a) {
      var b;
      b = a[0].addition() ? a[0].terms.map(function(a) {
        return a.multiplication() ? a.pushNegation().factors : [a];
      }) : [[a[0]]];
      a.slice(1).forEach(function(a) {
        var c;
        return a.addition() ? 1 === b.length ? b = a.terms.map(function(a) {
          var c;
          c = b[0].map(function(a) {
            return a.clone();
          });
          a.multiplication() ? c.push.apply(c, a.pushNegation().factors) : c.push(a);
          return c;
        }) : b = b.reduce(function(b, c) {
          b.push.apply(b, a.terms.map(function(a) {
            var b;
            b = c.map(function(a) {
              return a.clone();
            });
            a.multiplication() ? b.push.apply(b, a.pushNegation().factors.map(function(a) {
              return a.clone();
            })) : b.push(a.clone());
            return b;
          }));
          return b;
        }, []) : 1 === b.length ? a.multiplication() ? (c = b[0]).push.apply(c, a.pushNegation().factors) : b[0].push(a) : b.forEach(function(c, d) {
          var f;
          return a.multiplication() ? (f = b[d]).push.apply(f, a.pushNegation().factors.map(function(a) {
            return a.clone();
          })) : b[d].push(a.clone());
        });
      });
      return b;
    };
    d.prototype.packTerms = function(a) {
      var b;
      b = ["computeConstants", "combineSimilar", "expand", "removeIdentity", "sort"];
      return (new CTATAdditionNode("PLUS", a.map(function(a) {
        return (new d("TIMES", a)).popNegation().simplifyNode(b);
      }))).popNegation().simplifyNode(b);
    };
    d.prototype.removeIdentity = function() {
      var a;
      this.popNegation();
      a = this.factors.filter(function(a) {
        return !a.constant(1);
      });
      this.factors = a.length ? a : this.factors.slice(0, 1);
      (a = this.factors.find(function(a) {
        return a.constant(0);
      })) && this.factors.every(function(a) {
        return !a.inverted() && (!a.power() || a.exponent.constant());
      }) && (this.factors = [a]);
      return 1 < this.factors.length ? this : this.pushNegation().pushInversion().factors[0];
    };
    d.prototype.sort = function() {
      this.spreadIdentity();
      this.factors = this.factors.sort(function(a, b) {
        return a.compare(b);
      });
      return this.stripIdentity();
    };
    d.prototype.spreadIdentity = function() {
      this.factors = this.factors.map(function(a) {
        return a.powerOne();
      });
      return this;
    };
    d.prototype.stripIdentity = function() {
      this.factors = this.factors.map(function(a) {
        return a.removeIdentity();
      });
      return this.popNegation();
    };
    d.prototype.multiplyOne = function() {
      this.factors[0].constant() || this.factors.unshift(new CTATConstantNode(1));
      return this.pushNegation();
    };
    d.prototype.compare = function(a, b) {
      var f, k;
      return (k = d.__super__.compare.apply(this, arguments)) || this.countVariables() - a.countVariables() || (f = a.factors.slice(0).reverse()) && this.factors.slice(0).reverse().some(function(a, c) {
        return k = a.compare(f[c], b);
      }) && k || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return this.factors.reduce(function(a, b) {
        return a + b.countVariables();
      }, 0);
    };
    d.prototype.pushNegation = function() {
      this.negated() && (this.negate(), this.factors[0].negate());
      return this;
    };
    d.prototype.popNegation = function() {
      this.factors.forEach(function(a) {
        return function(b) {
          if (b.negated()) {
            return a.negate(), b.negate();
          }
        };
      }(this));
      return this;
    };
    d.prototype.pushInversion = function() {
      this.inverted() && (this.invert(), this.factors.forEach(function(a) {
        return a.invert();
      }));
      return this;
    };
    d.prototype.even = function() {
      return !this.inverted() && this.factors.every(function(a) {
        return a.integer();
      }) && this.factors.some(function(a) {
        return a.even();
      });
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATMultiplicationNode = a;
}).call(this);
var CTATConstantNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g) {
      this.value = a;
      this.parens = null != b ? b : 0;
      this.sign = null != f ? f : 1;
      this.exp = null != g ? g : 1;
      this.operator = "CONST";
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.value, this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      return d.__super__.toString.call(this, this.value.toString());
    };
    d.prototype.evaluate = function() {
      return d.__super__.evaluate.call(this, this.value);
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.value === a.value;
    };
    d.prototype.multiplyOne = function() {
      return this;
    };
    d.prototype.powerOne = function() {
      return this;
    };
    d.prototype.compare = function(a, b) {
      b = null != b ? 1 : -1;
      return d.__super__.compare.apply(this, arguments) || Math.sign(Math.abs(this.evaluate()) - Math.abs(a.evaluate())) * b || this.compareSigns(a, b);
    };
    d.prototype.popNegation = function() {
      0 > this.value && (this.negate(), this.value = -this.value);
      return this;
    };
    d.prototype.constant = function(a) {
      return null == a || this.evaluate() === a;
    };
    d.prototype.integer = function() {
      return Math.floor(this.evaluate()) === this.value;
    };
    d.prototype.even = function() {
      return 0 === this.evaluate() % 2;
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATConstantNode = a;
}).call(this);
var CTATRelationNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l, q) {
      this.operator = a;
      this.left = b;
      this.right = f;
      this.parens = null != g ? g : 0;
      this.sign = null != l ? l : 1;
      this.exp = null != q ? q : 1;
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.left.clone(), this.right.clone(), this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      var a;
      this.left.setParens(this.operator);
      this.right.setParens(this.operator);
      a = CTATTreeNode.toOperatorString(this.operator);
      return d.__super__.toString.call(this, "" + this.left.toString() + a + this.right.toString());
    };
    d.prototype.evaluate = function() {
      var a, b;
      a = this.left.evaluate();
      b = this.right.evaluate();
      switch(this.operator) {
        case "LESS":
          return a < b;
        case "GREATER":
          return a > b;
        case "LESSEQUAL":
          return a <= b;
        case "GREATEREQUAL":
          return a >= b;
        case "EQUAL":
          return a === b;
        case "NOTEQUAL":
          return a !== b;
      }
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.left.equals(a.left) && this.right.equals(a.right);
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.left = this.left.simplify(this.methods);
      this.right = this.right.simplify(this.methods);
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.computeConstants = function() {
      return this.left.constant() && this.right.constant() ? new CTATConstantNode(this.evaluate()) : this;
    };
    d.prototype.sort = function() {
      var a;
      switch(this.operator) {
        case "GREATER":
          this.operator = "LESS";
          a = [this.right, this.left];
          this.left = a[0];
          this.right = a[1];
          break;
        case "GREATEREQUAL":
          this.operator = "LESSEQUAL";
          a = [this.right, this.left];
          this.left = a[0];
          this.right = a[1];
          break;
        case "EQUAL":
        ;
        case "NOTEQUAL":
          0 > this.left.compare(this.right) && (a = [this.right, this.left], this.left = a[0], this.right = a[1]);
      }
      return this;
    };
    d.prototype.countVariables = function() {
      return this.left.countVariables() + this.right.countVariables();
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATRelationNode = a;
}).call(this);
var CTATVariableNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l) {
      this.variableTable = a;
      this.variable = b;
      this.parens = null != f ? f : 0;
      this.sign = null != g ? g : 1;
      this.exp = null != l ? l : 1;
      this.operator = "VAR";
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.variableTable, this.variable, this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      return d.__super__.toString.call(this, this.variable);
    };
    d.prototype.evaluate = function() {
      var a;
      return d.__super__.evaluate.call(this, (null != (a = this.variableTable) ? a.get(this.variable) : void 0) || function() {
        try {
          return eval(this.variable);
        } catch (a) {
          return NaN;
        }
      }.call(this));
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.variable === a.variable;
    };
    d.prototype.compare = function(a, b) {
      b = null != b ? -1 : 1;
      return d.__super__.compare.apply(this, arguments) || this.variable > a.variable && b || this.variable < a.variable && -b || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return 1;
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATVariableNode = a;
}).call(this);
var CTATPowerNode = {};
(function() {
  var a, b = function(a, b) {
    function c() {
      this.constructor = a;
    }
    for (var e in b) {
      d.call(b, e) && (a[e] = b[e]);
    }
    c.prototype = b.prototype;
    a.prototype = new c;
    a.__super__ = b.prototype;
    return a;
  }, d = {}.hasOwnProperty;
  a = function(a) {
    function d(a, b, f, g, l, q) {
      this.operator = a;
      this.base = b;
      this.exponent = f;
      this.parens = null != g ? g : 0;
      this.sign = null != l ? l : 1;
      this.exp = null != q ? q : 1;
    }
    b(d, a);
    d.prototype.clone = function() {
      return new d(this.operator, this.base.clone(), this.exponent.clone(), this.parens, this.sign, this.exp);
    };
    d.prototype.toString = function() {
      this.base.setParens(this.operator);
      this.exponent.setParens(this.operator);
      return d.__super__.toString.call(this, "" + this.base.toString() + CTATTreeNode.toOperatorString(this.operator) + this.exponent.toString());
    };
    d.prototype.evaluate = function() {
      return d.__super__.evaluate.call(this, Math.pow(this.base.evaluate(), this.exponent.evaluate()));
    };
    d.prototype.equals = function(a) {
      return d.__super__.equals.call(this, a) && this.base.equals(a.base) && this.exponent.equals(a.exponent);
    };
    d.prototype.simplify = function(a) {
      this.methods = a;
      this.base = this.base.simplify(this.methods);
      this.exponent = this.exponent.simplify(this.methods);
      return d.__super__.simplify.apply(this, arguments);
    };
    d.prototype.flatten = function() {
      var a, b;
      d.__super__.flatten.apply(this, arguments);
      this.operator = "EXP";
      this.popNegation().popInversion();
      return this.base.power() ? (b = CTATTreeNode.diff(this.methods, ["flatten"]), a = this.base.exponent.multiplication() ? this.base.exponent.pushNegation().pushInversion().factors : [this.base.exponent], this.exponent.multiplication() ? a.push.apply(a, this.exponent.pushNegation().pushInversion().factors) : a.push(this.exponent), this.base.exponent = (new CTATMultiplicationNode("TIMES", a)).simplifyNode(b), this.pushBaseNegation().pushBaseInversion().base) : this;
    };
    d.prototype.computeConstants = function() {
      return this.base.constant() && (this.exponent.constant() || this.exponent.multiplication() && this.exponent.factors[0].constant()) ? (this.exponent.constant() ? (this.base = new CTATConstantNode(this.evaluate()), this.exponent = null) : (this.base = new CTATConstantNode((new d("EXP", this.base, this.exponent.factors.shift())).evaluate()), 1 === this.exponent.factors.length && (this.exponent = this.exponent.pushNegation().pushInversion().factors[0])), this.exponent ? this : this.pushBaseNegation().pushBaseInversion().base) : 
      this;
    };
    d.prototype.powerOne = function() {
      this.exponent = this.exponent.multiplyOne();
      return this.pushInversion();
    };
    d.prototype.expand = function() {
      var a, b, d;
      if (this.base.addition() && (this.exponent.integer() && 1 < this.exponent.value || this.exponent.multiplication() && this.exponent.factors[0].integer() && 1 < this.exponent.factors[0].value)) {
        this.exponent.integer() ? (a = this.exponent, this.exponent = null) : (a = this.exponent.factors.shift(), 1 === this.exponent.factors.length && (this.exponent = this.exponent.pushNegation().pushInversion().factors[0]));
        b = [this.base];
        d = 1;
        for (a = a.evaluate();1 <= a ? d < a : d > a;1 <= a ? ++d : --d) {
          b.push(this.base.clone());
        }
        this.base = (new CTATMultiplicationNode("TIMES", b)).simplifyNode(["distribute"]);
        return this.exponent ? this : this.pushBaseNegation().pushBaseInversion().base;
      }
      return this;
    };
    d.prototype.distribute = function() {
      var a;
      return this.base.multiplication() || this.exponent.addition() ? (a = this.base.multiplication() ? this.base.pushNegation().pushInversion().factors : [this.base], a = this.exponent.addition() ? a.reduce(function(a) {
        return function(b, c) {
          b.push.apply(b, a.exponent.terms.map(function(a) {
            return [c.clone(), a.clone()];
          }));
          return b;
        };
      }(this), []) : a.map(function(a) {
        return function(b) {
          return [b, a.exponent.clone()];
        };
      }(this)), this.base = this.packFactors(a), this.pushBaseNegation().pushBaseInversion().base) : this;
    };
    d.prototype.packFactors = function(a) {
      var b;
      b = CTATTreeNode.diff(this.methods, ["flatten"]);
      return new CTATMultiplicationNode("TIMES", a.map(function(a) {
        return (new d("EXP", a[0], a[1])).simplifyNode(b);
      }));
    };
    d.prototype.removeIdentity = function() {
      this.popInversion();
      if (this.exponent.constant(0)) {
        return this.base = new CTATConstantNode(1), this.pushBaseNegation().base;
      }
      if (this.base.constant(0)) {
        return this.pushBaseInversion().base;
      }
      if (this.exponent.constant(1)) {
        return this.pushBaseNegation().pushBaseInversion().base;
      }
      this.exponent = this.exponent.removeIdentity();
      return this;
    };
    d.prototype.compare = function(a, b) {
      return d.__super__.compare.apply(this, arguments) || (this.countVariables() - a.countVariables()) * (b ? -1 : 1) || this.exponent.compare(a.exponent, b) || this.base.compare(a.base, b) || this.compareSigns(a, b);
    };
    d.prototype.countVariables = function() {
      return this.base.countVariables() * (this.exponent.constant() ? Math.abs(this.exponent.evaluate()) : Infinity);
    };
    d.prototype.pushBaseNegation = function() {
      this.negated() && (this.negate(), this.base.negate());
      return this;
    };
    d.prototype.pushInversion = function() {
      this.inverted() && (this.invert(), this.exponent.negate());
      return this;
    };
    d.prototype.pushBaseInversion = function() {
      this.inverted() && (this.invert(), this.base.invert());
      return this;
    };
    d.prototype.popNegation = function() {
      this.base.negated() && this.exponent.constant() && (this.base.negate(), this.exponent.even() || this.negate());
      return this;
    };
    d.prototype.popInversion = function() {
      this.exponent.negated() && (this.invert(), this.exponent.negate());
      this.base.inverted() && (this.invert(), this.base.invert());
      return this;
    };
    d.prototype.even = function() {
      return !this.inverted() && this.base.even() && this.exponent.integer();
    };
    return d;
  }(CTATTreeNode);
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATPowerNode = a;
}).call(this);
var CTATAlgebraGrammar = {}, parser = function() {
  function a() {
    this.yy = {};
  }
  var b = function(a, b, c, d) {
    c = c || {};
    for (d = a.length;d--;c[a[d]] = b) {
    }
    return c;
  }, d = [1, 6], f = [1, 7], g = [1, 10], c = [1, 11], e = [1, 12], h = [1, 13], k = [1, 21], l = [1, 22], q = [5, 7, 8, 9, 10, 11, 12, 13, 15, 26], p = [1, 23], m = [1, 24], w = [1, 26], t = [1, 27], z = [5, 7, 8, 9, 10, 11, 12, 13, 15, 16, 18, 20, 21, 24, 25, 26, 27, 28], y = [5, 7, 8, 9, 10, 11, 12, 13, 15, 16, 18, 20, 21, 23, 24, 25, 26, 27, 28], b = {trace:function() {
  }, yy:{}, symbols_:{error:2, expression:3, relational:4, EOF:5, arithmetic:6, LESS:7, GREATER:8, LESSEQUAL:9, GREATEREQUAL:10, EQUAL:11, NOTEQUAL:12, PLUS:13, term:14, MINUS:15, TIMES:16, signedfactor:17, DIVIDE:18, factor:19, IDIVIDE:20, REM:21, atom:22, EXP:23, SQRT:24, LPAREN:25, RPAREN:26, VARIABLE:27, NUMBER:28, $accept:0, $end:1}, terminals_:{2:"error", 5:"EOF", 7:"LESS", 8:"GREATER", 9:"LESSEQUAL", 10:"GREATEREQUAL", 11:"EQUAL", 12:"NOTEQUAL", 13:"PLUS", 15:"MINUS", 16:"TIMES", 18:"DIVIDE", 
  20:"IDIVIDE", 21:"REM", 23:"EXP", 24:"SQRT", 25:"LPAREN", 26:"RPAREN", 27:"VARIABLE", 28:"NUMBER"}, productions_:[0, [3, 2], [4, 3], [4, 3], [4, 3], [4, 3], [4, 3], [4, 3], [4, 1], [6, 3], [6, 3], [6, 1], [14, 3], [14, 3], [14, 2], [14, 3], [14, 3], [14, 1], [17, 2], [17, 2], [17, 1], [19, 3], [19, 2], [19, 1], [22, 3], [22, 1], [22, 1]], performAction:function(a, b, c, d, e, f, g) {
    b = f.length - 1;
    switch(e) {
      case 1:
        return f[b - 1];
      case 2:
        this.$ = new d.CTATRelationNode("LESS", f[b - 2], f[b]);
        break;
      case 3:
        this.$ = new d.CTATRelationNode("GREATER", f[b - 2], f[b]);
        break;
      case 4:
        this.$ = new d.CTATRelationNode("LESSEQUAL", f[b - 2], f[b]);
        break;
      case 5:
        this.$ = new d.CTATRelationNode("GREATEREQUAL", f[b - 2], f[b]);
        break;
      case 6:
        this.$ = new d.CTATRelationNode("EQUAL", f[b - 2], f[b]);
        break;
      case 7:
        this.$ = new d.CTATRelationNode("NOTEQUAL", f[b - 2], f[b]);
        break;
      case 8:
      ;
      case 11:
      ;
      case 17:
      ;
      case 20:
      ;
      case 23:
        this.$ = f[b];
        break;
      case 9:
        this.$ = new d.CTATAdditionNode("PLUS", [f[b - 2], f[b]]);
        break;
      case 10:
        this.$ = new d.CTATAdditionNode("MINUS", [f[b - 2], f[b]]);
        break;
      case 12:
        this.$ = new d.CTATMultiplicationNode("TIMES", [f[b - 2], f[b]]);
        break;
      case 13:
        this.$ = new d.CTATMultiplicationNode("DIVIDE", [f[b - 2], f[b]]);
        break;
      case 14:
        this.$ = new d.CTATMultiplicationNode("ITIMES", [f[b - 1], f[b]]);
        break;
      case 15:
        this.$ = new d.CTATIntDivisionNode("IDIVIDE", f[b - 2], f[b]);
        break;
      case 16:
        this.$ = new d.CTATIntDivisionNode("REM", f[b - 2], f[b]);
        break;
      case 18:
        this.$ = new d.CTATUnaryNode("UPLUS", f[b]);
        break;
      case 19:
        this.$ = new d.CTATUnaryNode("UMINUS", f[b]);
        break;
      case 21:
        this.$ = new d.CTATPowerNode("EXP", f[b - 2], f[b]);
        break;
      case 22:
        this.$ = new d.CTATPowerNode("SQRT", f[b], new d.CTATConstantNode(.5));
        break;
      case 24:
        this.$ = f[b - 1].addParens();
        break;
      case 25:
        this.$ = new d.CTATVariableNode(d.variableTable, a);
        break;
      case 26:
        this.$ = new d.CTATConstantNode(Number(a));
    }
  }, table:[{3:1, 4:2, 6:3, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {1:[3]}, {5:[1, 14]}, {5:[2, 8], 7:[1, 15], 8:[1, 16], 9:[1, 17], 10:[1, 18], 11:[1, 19], 12:[1, 20], 13:k, 15:l}, b(q, [2, 11], {22:9, 19:25, 16:p, 18:m, 20:w, 21:t, 24:g, 25:c, 27:e, 28:h}), b(z, [2, 17]), {13:d, 15:f, 17:28, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {13:d, 15:f, 17:29, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, b(z, [2, 20]), b(z, [2, 23], {23:[1, 30]}), {13:d, 15:f, 17:31, 19:8, 22:9, 24:g, 25:c, 27:e, 
  28:h}, {6:32, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, b(y, [2, 25]), b(y, [2, 26]), {1:[2, 1]}, {6:33, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {6:34, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {6:35, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {6:36, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {6:37, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {6:38, 13:d, 14:4, 15:f, 17:5, 19:8, 22:9, 
  24:g, 25:c, 27:e, 28:h}, {13:d, 14:39, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {13:d, 14:40, 15:f, 17:5, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {13:d, 15:f, 17:41, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {13:d, 15:f, 17:42, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, b(z, [2, 14]), {13:d, 15:f, 17:43, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, {13:d, 15:f, 17:44, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, b(z, [2, 18]), b(z, [2, 19]), {13:d, 15:f, 17:45, 19:8, 22:9, 24:g, 25:c, 27:e, 28:h}, b(z, [2, 22]), {13:k, 
  15:l, 26:[1, 46]}, {5:[2, 2], 13:k, 15:l}, {5:[2, 3], 13:k, 15:l}, {5:[2, 4], 13:k, 15:l}, {5:[2, 5], 13:k, 15:l}, {5:[2, 6], 13:k, 15:l}, {5:[2, 7], 13:k, 15:l}, b(q, [2, 9], {22:9, 19:25, 16:p, 18:m, 20:w, 21:t, 24:g, 25:c, 27:e, 28:h}), b(q, [2, 10], {22:9, 19:25, 16:p, 18:m, 20:w, 21:t, 24:g, 25:c, 27:e, 28:h}), b(z, [2, 12]), b(z, [2, 13]), b(z, [2, 15]), b(z, [2, 16]), b(z, [2, 21]), b(y, [2, 24])], defaultActions:{14:[2, 1]}, parseError:function(a, b) {
    if (b.recoverable) {
      this.trace(a);
    } else {
      var c = function(a, b) {
        this.message = a;
        this.hash = b;
      };
      c.prototype = Error;
      throw new c(a, b);
    }
  }, parse:function(a) {
    var b = [0], c = [null], d = [], e = this.table, f = "", g = 0, h = 0, k = 0, l = d.slice.call(arguments, 1), m = Object.create(this.lexer), q = {}, p;
    for (p in this.yy) {
      Object.prototype.hasOwnProperty.call(this.yy, p) && (q[p] = this.yy[p]);
    }
    m.setInput(a, q);
    q.lexer = m;
    q.parser = this;
    "undefined" == typeof m.yylloc && (m.yylloc = {});
    p = m.yylloc;
    d.push(p);
    var w = m.options && m.options.ranges;
    this.parseError = "function" === typeof q.parseError ? q.parseError : Object.getPrototypeOf(this).parseError;
    for (var t, z, y, R, T = {}, Y, S;;) {
      y = b[b.length - 1];
      if (this.defaultActions[y]) {
        R = this.defaultActions[y];
      } else {
        if (null === t || "undefined" == typeof t) {
          t = void 0, t = m.lex() || 1, "number" !== typeof t && (t = this.symbols_[t] || t);
        }
        R = e[y] && e[y][t];
      }
      if ("undefined" === typeof R || !R.length || !R[0]) {
        var W = "";
        S = [];
        for (Y in e[y]) {
          this.terminals_[Y] && 2 < Y && S.push("'" + this.terminals_[Y] + "'");
        }
        W = m.showPosition ? "Parse error on line " + (g + 1) + ":\n" + m.showPosition() + "\nExpecting " + S.join(", ") + ", got '" + (this.terminals_[t] || t) + "'" : "Parse error on line " + (g + 1) + ": Unexpected " + (1 == t ? "end of input" : "'" + (this.terminals_[t] || t) + "'");
        this.parseError(W, {text:m.match, token:this.terminals_[t] || t, line:m.yylineno, loc:p, expected:S});
      }
      if (R[0] instanceof Array && 1 < R.length) {
        throw Error("Parse Error: multiple actions possible at state: " + y + ", token: " + t);
      }
      switch(R[0]) {
        case 1:
          b.push(t);
          c.push(m.yytext);
          d.push(m.yylloc);
          b.push(R[1]);
          t = null;
          z ? (t = z, z = null) : (h = m.yyleng, f = m.yytext, g = m.yylineno, p = m.yylloc, 0 < k && k--);
          break;
        case 2:
          S = this.productions_[R[1]][1];
          T.$ = c[c.length - S];
          T._$ = {first_line:d[d.length - (S || 1)].first_line, last_line:d[d.length - 1].last_line, first_column:d[d.length - (S || 1)].first_column, last_column:d[d.length - 1].last_column};
          w && (T._$.range = [d[d.length - (S || 1)].range[0], d[d.length - 1].range[1]]);
          y = this.performAction.apply(T, [f, h, g, q, R[1], c, d].concat(l));
          if ("undefined" !== typeof y) {
            return y;
          }
          S && (b = b.slice(0, -2 * S), c = c.slice(0, -1 * S), d = d.slice(0, -1 * S));
          b.push(this.productions_[R[1]][0]);
          c.push(T.$);
          d.push(T._$);
          R = e[b[b.length - 2]][b[b.length - 1]];
          b.push(R);
          break;
        case 3:
          return !0;
      }
    }
  }}, d = function() {
    return {EOF:1, parseError:function(a, b) {
      if (this.yy.parser) {
        this.yy.parser.parseError(a, b);
      } else {
        throw Error(a);
      }
    }, setInput:function(a, b) {
      this.yy = b || this.yy || {};
      this._input = a;
      this._more = this._backtrack = this.done = !1;
      this.yylineno = this.yyleng = 0;
      this.yytext = this.matched = this.match = "";
      this.conditionStack = ["INITIAL"];
      this.yylloc = {first_line:1, first_column:0, last_line:1, last_column:0};
      this.options.ranges && (this.yylloc.range = [0, 0]);
      this.offset = 0;
      return this;
    }, input:function() {
      var a = this._input[0];
      this.yytext += a;
      this.yyleng++;
      this.offset++;
      this.match += a;
      this.matched += a;
      a.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++;
      this.options.ranges && this.yylloc.range[1]++;
      this._input = this._input.slice(1);
      return a;
    }, unput:function(a) {
      var b = a.length, c = a.split(/(?:\r\n?|\n)/g);
      this._input = a + this._input;
      this.yytext = this.yytext.substr(0, this.yytext.length - b);
      this.offset -= b;
      a = this.match.split(/(?:\r\n?|\n)/g);
      this.match = this.match.substr(0, this.match.length - 1);
      this.matched = this.matched.substr(0, this.matched.length - 1);
      c.length - 1 && (this.yylineno -= c.length - 1);
      var d = this.yylloc.range;
      this.yylloc = {first_line:this.yylloc.first_line, last_line:this.yylineno + 1, first_column:this.yylloc.first_column, last_column:c ? (c.length === a.length ? this.yylloc.first_column : 0) + a[a.length - c.length].length - c[0].length : this.yylloc.first_column - b};
      this.options.ranges && (this.yylloc.range = [d[0], d[0] + this.yyleng - b]);
      this.yyleng = this.yytext.length;
      return this;
    }, more:function() {
      this._more = !0;
      return this;
    }, reject:function() {
      if (this.options.backtrack_lexer) {
        this._backtrack = !0;
      } else {
        return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {text:"", token:null, line:this.yylineno});
      }
      return this;
    }, less:function(a) {
      this.unput(this.match.slice(a));
    }, pastInput:function() {
      var a = this.matched.substr(0, this.matched.length - this.match.length);
      return (20 < a.length ? "..." : "") + a.substr(-20).replace(/\n/g, "");
    }, upcomingInput:function() {
      var a = this.match;
      20 > a.length && (a += this._input.substr(0, 20 - a.length));
      return (a.substr(0, 20) + (20 < a.length ? "..." : "")).replace(/\n/g, "");
    }, showPosition:function() {
      var a = this.pastInput(), b = Array(a.length + 1).join("-");
      return a + this.upcomingInput() + "\n" + b + "^";
    }, test_match:function(a, b) {
      var c, d;
      this.options.backtrack_lexer && (d = {yylineno:this.yylineno, yylloc:{first_line:this.yylloc.first_line, last_line:this.last_line, first_column:this.yylloc.first_column, last_column:this.yylloc.last_column}, yytext:this.yytext, match:this.match, matches:this.matches, matched:this.matched, yyleng:this.yyleng, offset:this.offset, _more:this._more, _input:this._input, yy:this.yy, conditionStack:this.conditionStack.slice(0), done:this.done}, this.options.ranges && (d.yylloc.range = this.yylloc.range.slice(0)));
      if (c = a[0].match(/(?:\r\n?|\n).*/g)) {
        this.yylineno += c.length;
      }
      this.yylloc = {first_line:this.yylloc.last_line, last_line:this.yylineno + 1, first_column:this.yylloc.last_column, last_column:c ? c[c.length - 1].length - c[c.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + a[0].length};
      this.yytext += a[0];
      this.match += a[0];
      this.matches = a;
      this.yyleng = this.yytext.length;
      this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]);
      this._backtrack = this._more = !1;
      this._input = this._input.slice(a[0].length);
      this.matched += a[0];
      c = this.performAction.call(this, this.yy, this, b, this.conditionStack[this.conditionStack.length - 1]);
      this.done && this._input && (this.done = !1);
      if (c) {
        return c;
      }
      if (this._backtrack) {
        for (var e in d) {
          this[e] = d[e];
        }
      }
      return !1;
    }, next:function() {
      if (this.done) {
        return this.EOF;
      }
      this._input || (this.done = !0);
      var a, b, c;
      this._more || (this.match = this.yytext = "");
      for (var d = this._currentRules(), e = 0;e < d.length;e++) {
        if ((b = this._input.match(this.rules[d[e]])) && (!a || b[0].length > a[0].length)) {
          if (a = b, c = e, this.options.backtrack_lexer) {
            a = this.test_match(b, d[e]);
            if (!1 !== a) {
              return a;
            }
            if (this._backtrack) {
              a = !1;
            } else {
              return !1;
            }
          } else {
            if (!this.options.flex) {
              break;
            }
          }
        }
      }
      return a ? (a = this.test_match(a, d[c]), !1 !== a ? a : !1) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {text:"", token:null, line:this.yylineno});
    }, lex:function() {
      var a = this.next();
      return a ? a : this.lex();
    }, begin:function(a) {
      this.conditionStack.push(a);
    }, popState:function() {
      return 0 < this.conditionStack.length - 1 ? this.conditionStack.pop() : this.conditionStack[0];
    }, _currentRules:function() {
      return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules;
    }, topState:function(a) {
      a = this.conditionStack.length - 1 - Math.abs(a || 0);
      return 0 <= a ? this.conditionStack[a] : "INITIAL";
    }, pushState:function(a) {
      this.begin(a);
    }, stateStackSize:function() {
      return this.conditionStack.length;
    }, options:{}, performAction:function(a, b, c, d) {
      switch(c) {
        case 1:
          return 25;
        case 2:
          return 26;
        case 3:
          return 23;
        case 4:
          return 23;
        case 5:
          return 24;
        case 6:
          return 24;
        case 7:
          return 16;
        case 8:
          return 20;
        case 9:
          return 18;
        case 10:
          return 21;
        case 11:
          return 15;
        case 12:
          return 13;
        case 13:
          return 9;
        case 14:
          return 10;
        case 15:
          return 7;
        case 16:
          return 8;
        case 17:
          return 11;
        case 18:
          return 12;
        case 19:
          return 28;
        case 20:
          return 28;
        case 21:
          return 27;
        case 22:
          return 5;
      }
    }, rules:[/^(?:\s+)/, /^(?:\()/, /^(?:\))/, /^(?:\*\*)/, /^(?:\^)/, /^(?:\|)/, /^(?:\u221a)/, /^(?:\*)/, /^(?:\/\/)/, /^(?:\/)/, /^(?:%)/, /^(?:-)/, /^(?:\+)/, /^(?:<=)/, /^(?:>=)/, /^(?:<)/, /^(?:>)/, /^(?:==)/, /^(?:!=)/, /^(?:(([0-9])+\.?([0-9])*|\.([0-9])+)([Ee][+-]?([0-9])+)?)/, /^(?:(0[Bb]([0-1])+|0[Oo]([0-7])+|0[Xx]([0-9A-Fa-f])+))/, /^(?:([A-Za-z]))/, /^(?:$)/], conditions:{INITIAL:{rules:[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22], inclusive:!0}}};
  }();
  b.lexer = d;
  a.prototype = b;
  b.Parser = a;
  return new a;
}();
"undefined" !== typeof require && "undefined" !== typeof exports && (exports.parser = parser, exports.Parser = parser.Parser, exports.parse = function() {
  return parser.parse.apply(parser, arguments);
}, exports.main = function(a) {
  a[1] || (console.log("Usage: " + a[0] + " FILE"), process.exit(1));
  a = require("fs").readFileSync(require("path").normalize(a[1]), "utf8");
  return exports.parser.parse(a);
}, "undefined" !== typeof module && require.main === module && exports.main(process.argv.slice(1)));
var CTATAlgebraParser = {};
(function() {
  var a;
  a = function() {
    function a(b) {
      this.parser = new parser.Parser;
      this.parser.yy = {CTATRelationNode:CTATRelationNode, CTATAdditionNode:CTATAdditionNode, CTATMultiplicationNode:CTATMultiplicationNode, CTATIntDivisionNode:CTATIntDivisionNode, CTATUnaryNode:CTATUnaryNode, CTATPowerNode:CTATPowerNode, CTATVariableNode:CTATVariableNode, CTATConstantNode:CTATConstantNode, CTATTreeNode:CTATTreeNode};
      this.parser.yy.variableTable = b;
    }
    a.none = ["simpleFlatten"];
    a.partial = ["flatten", "removeIdentity", "sort"];
    a.full = "flatten computeConstants combineSimilar expand distribute removeIdentity sort".split(" ");
    a.prototype.algParse = function(d) {
      try {
        return this.parser.parse(String(d)).simplify(a.none);
      } catch (f) {
        return null;
      }
    };
    a.prototype.algEvaluate = function(a) {
      try {
        return this.parser.parse(String(a)).evaluate();
      } catch (b) {
        return null;
      }
    };
    a.prototype.algPartialSimplify = function(d) {
      try {
        return this.parser.parse(String(d)).simplify(a.partial).toString();
      } catch (f) {
        return null;
      }
    };
    a.prototype.algSimplify = function(d) {
      try {
        return this.parser.parse(String(d)).simplify(a.full).toString();
      } catch (f) {
        return null;
      }
    };
    a.prototype.algValid = function(a) {
      return null != this.algParse(a);
    };
    a.prototype.algValued = function(a) {
      var b;
      return null != (b = this.algEvaluate(a)) ? !isNaN(b) : null;
    };
    a.prototype.algPartialSimplified = function(a) {
      var b, g;
      return null != (b = this.algPartialSimplify(a)) && null != (g = this.algParse(a)) ? b.toString() === g.toString() : null;
    };
    a.prototype.algSimplified = function(a) {
      var b, g;
      return null != (b = this.algSimplify(a)) && null != (g = this.algParse(a)) ? b.toString() === g.toString() : null;
    };
    a.prototype.algIdentical = function(a, b) {
      var g, c;
      return null != (g = this.algParse(a)) && null != (c = this.algParse(b)) ? g.equals(c) : null;
    };
    a.prototype.algEqual = function(a, b) {
      var g, c;
      return null != (g = this.algEvaluate(a)) && null != (c = this.algEvaluate(b)) ? g === c : null;
    };
    a.prototype.algPartialEquivalent = function(a, b) {
      var g, c;
      return null != (g = this.algPartialSimplify(a)) && null != (c = this.algPartialSimplify(b)) ? g === c : null;
    };
    a.prototype.algEquivalent = function(a, b) {
      var g, c;
      return null != (g = this.algSimplify(a)) && null != (c = this.algSimplify(b)) ? g === c : null;
    };
    a.prototype.isAlgValid = a.prototype.algValid;
    a.prototype.algEval = a.prototype.algEvaluate;
    a.prototype.algStrictEquivTermsSameOrder = a.prototype.algPartialEquivalent;
    a.prototype.algEquivTermsSameOrder = a.prototype.algPartialEquivalent;
    a.prototype.algStrictEquivTerms = a.prototype.algPartialEquivalent;
    a.prototype.algEquivTerms = a.prototype.algPartialEquivalent;
    a.prototype.algEquiv = a.prototype.algEquivalent;
    a.prototype.isSimplified = a.prototype.algSimplified;
    a.prototype.calc = a.prototype.algEvaluate;
    a.prototype.calca = function(a) {
      return (+this.algEvaluate(a)).toFixed(2);
    };
    a.prototype.simplify = a.prototype.algSimplify;
    a.prototype.algebraicEqual = a.prototype.algEqual;
    a.prototype.patternMatches = a.prototype.algIdentical;
    a.prototype.polyTermsEqual = function(d, f) {
      return this.parser.parse(d).simplify(a.partial).equals(this.parser.parse(f).simplify(a.partial));
    };
    a.prototype.algebraicMatches = a.prototype.algEquivalent;
    a.prototype.expressionMatches = a.prototype.algEquivalent;
    return a;
  }();
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATAlgebraParser = a;
}).call(this);
var CTATFormulaFunctions = {};
(function() {
  var a, b, d, f, g, c, e, h, k, l, q, p = [].slice;
  g = /^(\d+)?(?:$|(?:\s|^)(\d+)\/(\d+)$)/;
  f = /^\d+(\.\d\d)?$/;
  c = RegExp("((\\d+)\\.?(\\d+)?|\\.(\\d+))([Ee]([+-]?\\d+))?", "g");
  l = /^[+-]?((\d+)\.?(\d+)?|\.(\d+))([Ee]([+-]?\d+))?$/;
  k = /^\s*\(\s*([+-]?((\d+)\.?(\d+)?|\.(\d+))([Ee]([+-]?\d+))?)\s*\,\s*([+-]?((\d+)\.?(\d+)?|\.(\d+))([Ee]([+-]?\d+))?)\s*\)\s*$/;
  h = /([bcdfghjklmnpqrstvwxz]|qu)y$/;
  e = /([bcdfghjklmnpqrstvwxz]o|[sc]h|s)$/;
  q = function(a, b) {
    var c;
    null == b && (b = !1);
    var d, e, f, g;
    f = null != (c = a[4]) ? c : a[2] + (a[3] || "");
    g = [];
    d = 0;
    for (e = f.length;d < e;d++) {
      c = f[d], (b || (b = "0" !== c)) && g.push(c);
    }
    return g.length;
  };
  d = function(a) {
    return (a[4] || a[3] || "").length - +(a[6] || 0);
  };
  b = function(a, b, c) {
    var d, e;
    return isNaN(d = +a) || isNaN(e = +b) ? c(String(a).toLowerCase(), String(b).toLowerCase()) : c(d, e);
  };
  a = function() {
    function a() {
    }
    a.printf = ("undefined" !== typeof window && null !== window ? window : global).sprintf;
    a.sum = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : []).reduce(function(a, b) {
        return a + +b;
      }, 0);
    };
    a.mod = function(a, b) {
      return Math.round(a) % Math.round(b);
    };
    a.modf = function(a, b) {
      return a % b;
    };
    a.IEEEremainder = a.modf;
    a.isFactor = function(a, b) {
      return 1 !== +a && 0 === b % a;
    };
    a.isMultiple = function(a, b) {
      return 0 === a % b;
    };
    a.isUnit = function(a) {
      return 1 === +a;
    };
    a.isAny = function(a, b) {
      return this.isFactor(a, b) || this.isMultiple(a, b) || this.isUnit(a);
    };
    a.gcf = function(a, b) {
      var c;
      c = [Math.abs(a), Math.abs(b)];
      a = c[0];
      for (b = c[1];0 < b;) {
        c = [b, a % b], a = c[0], b = c[1];
      }
      return a;
    };
    a.lcm = function(a, b) {
      return Math.abs(a * b) / this.gcf(a, b);
    };
    a.integerInRange = function(a, b, c) {
      var d;
      null == b && (b = -Infinity);
      null == c && (c = Infinity);
      return Math.round(b) <= (d = Math.round(a)) && d <= Math.round(c);
    };
    a.fmtDecimal = function(a, b) {
      null == b && (b = 2);
      return (+a).toFixed(Math.round(+b));
    };
    a.fmtNormal = function(a, b) {
      null == b && (b = 6);
      return this.fmtDecimal(a, b).replace(/\.0+$|(\..+?)0+$/, "$1");
    };
    a.fmtDollar = function(a, b) {
      null == b && (b = "");
      a = this.fmtDecimal(a);
      b = b.toLowerCase();
      0 <= b.indexOf("i") && (a = a.replace(/\.00$/, ""));
      return 0 <= b.indexOf("d") ? "$" + a : a;
    };
    a.dollarEquals = function() {
      var a, b;
      a = arguments[0];
      b = 2 <= arguments.length ? p.call(arguments, 1) : [];
      a = this.fmtDollar(a, "i");
      return b.some(function(b) {
        return function(c) {
          return a === b.fmtDollar(c, "i");
        };
      }(this));
    };
    a.matchWithPrecision = function(a, c) {
      var d, e;
      return (d = String(a).match(l)) && (e = String(c).match(l)) && q(d) === q(e) && b(a, c, function(a, b) {
        return a === b;
      });
    };
    a.matchWithoutPrecision = function(a, c) {
      var e, f;
      return (e = String(a).match(l)) && (f = String(c).match(l)) && (a = q(e) > q(f) ? (+a).toFixed(d(f)) : String(a)) && b(a, c, function(a, b) {
        return a === b;
      });
    };
    a.constantsConform = function() {
      var a, b;
      a = arguments[0];
      b = 2 <= arguments.length ? p.call(arguments, 1) : [];
      b = b.map(function(a) {
        return "string" === typeof a ? new RegExp("^" + a + "$", "i") : a;
      });
      return (a.match(c) || []).every(function(a) {
        return b.some(function(b) {
          return b.test(a);
        });
      });
    };
    a.constantsDollar = function(a) {
      return this.constantsConform(a, f);
    };
    a.isNumber = function(a, b, c) {
      null == b && (b = !0);
      return (b || "number" === typeof a) && !isNaN(a = +a) && (!c || a === Math.round(a));
    };
    a.isInteger = function(a, b) {
      return this.isNumber(a, b, !0);
    };
    a.isVar = function(a) {
      return /^\s*[a-zA-Z]\s*$/.test(a);
    };
    a.makeFraction = function(a, b, c) {
      null != b && null == c && (c = [0, a, b], a = c[0], b = c[1], c = c[2]);
      a = +a || 0;
      b = +b || 0;
      c = +c || 1;
      return this.isInteger(a) && this.isInteger(b) && this.isInteger(c) ? (a ? a + (b ? " " : "") : "") + (b ? b + (1 === c ? "" : "/" + c) : "") : null;
    };
    a.fractionMake = a.makeFraction;
    a.getWhole = function(a) {
      return null != (a = a.match(g)) ? a[1] || "0" : null;
    };
    a.getNumerator = function(a) {
      return null != (a = a.match(g)) ? a[2] || "0" : null;
    };
    a.getDividend = a.getNumerator;
    a.getDenominator = function(a) {
      return null != (a = a.match(g)) ? a[3] || "1" : null;
    };
    a.getDivisor = a.getDenominator;
    a.convertToMixed = function(a) {
      return null != (a = a.match(g)) ? (a[1] = (+a[1] || 0) + Math.floor((+a[2] || 0) / (+a[3] || 1)), a[2] = (+a[2] || 0) % (+a[3] || 1), this.makeFraction(a[1], a[2], a[3])) : null;
    };
    a.convertToImproper = function(a) {
      return null != (a = a.match(g)) ? (a[2] = (+a[1] || 0) * (+a[3] || 1) + (+a[2] || 0), a[1] = 0, null == a[3] && (a[3] = 1), this.makeFraction(a[1], a[2], a[3])) : null;
    };
    a.evaluateFraction = function(a) {
      return null != (a = a.match(g)) ? ((+a[1] || 0) * (+a[3] || 1) + (+a[2] || 0)) / (+a[3] || 1) : null;
    };
    a.divEvaluate = a.evaluateFraction;
    a.simplifyFraction = function(a) {
      var b;
      return null != (a = a.match(g)) ? (null != a[1] && null != a[2] && (a[1] = +a[1] + Math.floor(+a[2] / +a[3]), a[2] = +a[2] % +a[3]), b = null != a[2] ? this.gcf(+a[2], +a[3]) : 1, this.makeFraction(a[1], a[2] / b, a[3] / b)) : null;
    };
    a.fractionsimplify = a.simplifyFraction;
    a.simplifyMixed = a.simplifyFraction;
    a.simplifiedFraction = function(a) {
      var b;
      return null != (b = this.simplifyFraction(a)) ? b === a : null;
    };
    a.isSimplifiedMixed = a.simplifiedFraction;
    a.fractionEquals = function(a, b) {
      var c, d;
      return null != (c = this.evaluateFraction(a)) && null != (d = this.evaluateFraction(b)) ? c === d : null;
    };
    a.simplifiedFractionEquals = function(a, b) {
      var c, d;
      return null != (c = this.simplifiedFraction(a)) && null != (d = this.simplifiedFraction(b)) ? c && d && this.fractionEquals(a, b) : null;
    };
    a.rationalEquals = function(a, b) {
      return this.matchWithoutPrecision(+b || this.evaluateFraction(b), +a || this.evaluateFraction(a));
    };
    a.concat = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : []).reduce(function(a, b) {
        return a + b;
      }, "");
    };
    a.quote = function(a) {
      return '"' + a + '"';
    };
    a.replaceAll = function(a, b, c) {
      return a.replace(new RegExp(b, "g"), c);
    };
    a.regExMatch = function(a, b, c) {
      return ("string" === typeof a ? new RegExp(a, c) : a).test(b);
    };
    a.rm1coeff = function(a) {
      if (null != a) {
        return a.replace(/(^|[^0-9])1([a-zA-Z])/g, "$1$2");
      }
    };
    a.setMatches = function(a, b, c) {
      var d, e;
      d = a.split(c);
      e = b.split(c);
      return e.every(function(a) {
        return d.includes(a);
      }) && d.every(function(a) {
        return e.includes(a);
      });
    };
    a.pointInRange = function(a, b, c, d, e) {
      var f, g, h;
      if (f = null != b ? "function" === typeof b.match ? b.match(k) : void 0 : void 0) {
        e = [f[1], f[8], c, d], b = e[0], c = e[1], d = e[2], e = e[3];
      }
      null == d && (d = 0);
      null == e && (e = d);
      return (f = a.match(k)) && b - d <= (g = f[1]) && g <= +b + +d && c - e <= (h = f[8]) && h <= +c + +e;
    };
    a.plural = function(a, b, c, d) {
      var f;
      if (!b || 2 > a) {
        return b;
      }
      null == c && (c = h.test(f = b.toLowerCase()) ? "y" : "");
      if (!b.endsWith(c)) {
        return b;
      }
      null == d && (d = h.test(f) ? "ies" : e.test(f) ? "es" : "s");
      c.length && (b = b.split(c)[0]);
      return b + (/[A-Z]/.test(b[b.length - 1]) ? d.toUpperCase() : d);
    };
    a.totalTableDec = function(a, b, c, d) {
      return 1E3 * (+a || 0) + 100 * (+b || 0) + 10 * (+c || 0) + (+d || 0);
    };
    a.columnCell = function(a, b, c, d, e, f, g, h, k, l) {
      switch(k) {
        case "r1c1":
        ;
        case "r2c1":
        ;
        case "r3c1":
          return l ? a : e;
        case "r1c2":
        ;
        case "r2c2":
        ;
        case "r3c2":
          return l ? b : f;
        case "r1c3":
        ;
        case "r2c3":
        ;
        case "r3c3":
          return l ? c : g;
        case "r1c4":
        ;
        case "r2c4":
        ;
        case "r3c4":
          return l ? d : h;
        default:
          return 0;
      }
    };
    a.first = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : [])[0];
    };
    a.last = function() {
      var a;
      a = 1 <= arguments.length ? p.call(arguments, 0) : [];
      return a[a.length - 1];
    };
    a.chooseRandomly = function() {
      var a;
      a = 1 <= arguments.length ? p.call(arguments, 0) : [];
      return a[Math.floor(Math.random() * a.length)];
    };
    a.firstNonNull = function() {
      var a;
      return null != (a = (1 <= arguments.length ? p.call(arguments, 0) : []).find(function(a) {
        return null != a;
      })) ? a : null;
    };
    a.valueOrZero = function() {
      var a;
      return null != (a = (1 <= arguments.length ? p.call(arguments, 0) : []).find(function(a) {
        return null != a;
      })) ? a : 0;
    };
    a.hasValue = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : []).every(function(a) {
        return null != a;
      });
    };
    a.equals = function() {
      var a, b, c;
      b = arguments[0];
      c = 2 <= arguments.length ? p.call(arguments, 1) : [];
      return isNaN(a = +b) ? c.every(function(a) {
        return b === a;
      }) : c.every(function(b) {
        return a === +b;
      });
    };
    a.memberOf = function() {
      var a, b, c;
      b = arguments[0];
      c = 2 <= arguments.length ? p.call(arguments, 1) : [];
      return isNaN(a = +b) ? c.some(function(a) {
        return b === a;
      }) : c.some(function(b) {
        return a === +b;
      });
    };
    a.greaterThan = function(a, c) {
      return b(a, c, function(a, b) {
        return a > b;
      });
    };
    a.lessThan = function(a, c) {
      return b(a, c, function(a, b) {
        return a < b;
      });
    };
    a.greaterThanOrEqual = function(a, c) {
      return b(a, c, function(a, b) {
        return a >= b;
      });
    };
    a.lessThanOrEqual = function(a, c) {
      return b(a, c, function(a, b) {
        return a <= b;
      });
    };
    a.equal = function(a, c) {
      return b(a, c, function(a, b) {
        return a === b;
      });
    };
    a.notEqual = function(a, c) {
      return b(a, c, function(a, b) {
        return a !== b;
      });
    };
    a.and = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : []).reduce(function(a, b) {
        return a && b;
      }, !0);
    };
    a.or = function() {
      return (1 <= arguments.length ? p.call(arguments, 0) : []).reduce(function(a, b) {
        return a || b;
      }, !1);
    };
    a.not = function(a) {
      return !a;
    };
    a.ifThen = function(a, b, c) {
      return a ? b : c;
    };
    a.assign = function(a, b) {
      var c, d, e, f, g, h;
      h = "undefined" !== typeof window && null !== window ? window : global;
      d = a.split(".");
      e = 2 <= d.length ? p.call(d, 0, c = d.length - 1) : (c = 0, []);
      f = d[c++];
      c = 0;
      for (g = e.length;c < g;c++) {
        d = e[c], h = null != h[d] ? h[d] : h[d] = {};
      }
      return h[f] = b;
    };
    a.performInterfaceAction = function(a, b, c) {
      return CTAT.ToolTutor.sendToInterface((new CTATTutoringServiceMessageBuilder).createInterfaceActionMessage(CTATMessage.makeTransactionId(), new CTATSAI(a, b, c)));
    };
    return a;
  }();
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATFormulaFunctions = a;
}).call(this);
var CTATVariableTableCount = 0, CTATVariableTable = function() {
  function a(b) {
    var d = {}, c;
    for (c in b) {
      !0 === b.hasOwnProperty(c) && (d[c] = "object" !== typeof b[c] ? b[c] : a(b[c]));
    }
    return d;
  }
  CTATBase.call(this, "CTATVariableTable", "");
  CTATVariableTableCount++;
  var b = {}, d = this;
  this.toString = function() {
    var a = "", d;
    for (d in b) {
      0 < a.length && (a += ", "), a = a + d + "=" + b[d];
    }
    return "{ " + a + " }";
  };
  this.clone = function() {
    ctatdebug("CTATVariableTable --\x3e in clone; this " + this + ", this.getTable() " + this.getTable);
    var d = new CTATVariableTable;
    ctatdebug("CTATVariableTable --\x3e in clone; copy " + d + ", copy.setTable() " + d.setTable);
    d.setTable(a(b));
    ctatdebug("CTATVariableTable --\x3e out of clone");
    return d;
  };
  this.put = function(a, g) {
    d.ctatdebug("CTATVariableTable.put(" + a + ", " + g + ") typeof value " + typeof g);
    var c;
    if (a) {
      if (0 > a.indexOf(".")) {
        b[a] = g;
      } else {
        var e = a.split(".");
        if ("object" !== typeof b[e[0]] || null === b[e[0]]) {
          b[e[0]] = {};
        }
        c = b[e[0]];
        for (var h = 1;h < e.length - 1;h++) {
          if ("object" !== typeof c[e[h]] || null === c[e[h]]) {
            c[e[h]] = {}, c = c[e[h]];
          }
        }
        c[e[h]] = g;
      }
    } else {
      console.log("CTATVariableTable.put() warning: null or empty variable name '" + a + "'");
    }
    return d;
  };
  this.getTable = function() {
    return b;
  };
  this.setTable = function(a) {
    b = a;
  };
  this.get = function(a) {
    if (0 > a.indexOf(".")) {
      return null === b[a] || "undefined" === typeof b[a] ? null : b[a];
    }
    var d = a.split(".");
    if (null === b[d[0]] || "undefined" === typeof b[d[0]]) {
      return null;
    }
    a = b[d[0]];
    for (var c = 1;c < d.length - 1;c++) {
      if (null === a[d[c]] || "undefined" === typeof a[d[c]]) {
        return null;
      }
      a = a[d[c]];
    }
    return null === a[d[c]] || "undefined" === typeof a[d[c]] ? null : a[d[c]];
  };
};
Object.defineProperty(CTATVariableTable, "serialVersionUID", {enumerable:!1, configurable:!1, writable:!1, value:"201403071830L"});
CTATVariableTable.standardizeType = function(a) {
  if ("string" != typeof a || 1 > a.trim().length) {
    return a;
  }
  if ((!0).toString() == a) {
    return !0;
  }
  if ((!1).toString() == a) {
    return !1;
  }
  if ("null" == a) {
    return null;
  }
  var b = Number(a);
  return isNaN(b) ? a : b;
};
CTATVariableTable.valueAsString = function(a) {
  return "string" == typeof a ? a : String(a);
};
CTATVariableTable.nameAsString = function(a) {
  return a ? a + "_String" : null;
};
CTATVariableTable.prototype = Object.create(CTATBase.prototype);
CTATVariableTable.prototype.constructor = CTATVariableTable;
"undefined" !== typeof module && (module.exports = CTATVariableTable);
var CTATFormulaParser = {};
(function() {
  var a, b, d, f = [].slice, g = [].indexOf || function(a) {
    for (var b = 0, d = this.length;b < d;b++) {
      if (b in this && this[b] === a) {
        return b;
      }
    }
    return -1;
  };
  b = /(?!["'])([A-Za-z][\w\.]*)(?![\w"'(])/g;
  d = "abstract arguments boolean break byte case catch char class const continue debugger default delete do double else enum eval export extends false final finally float for function goto if implements import in instanceof int interface let long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof var void volatile while with yield Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf".split(" ");
  a = function() {
    function a(b) {
      var c, d, g;
      this.variableTable = b;
      this.algebraParser = new CTATAlgebraParser;
      this.keys = [];
      this.values = [];
      g = "EPSILON MAX_VALUE MIN_VALUE POSITIVE_INFINITY NEGATIVE_INFINITY isFinite isInteger isNaN parseFloat parseInt".split(" ");
      b = 0;
      for (d = g.length;b < d;b++) {
        c = g[b], this.keys.push(c), this.values.push(Number[c]);
      }
      g = "toExponential toFixed toLocaleString toPrecision toString valueOf".split(" ");
      b = 0;
      for (d = g.length;b < d;b++) {
        c = g[b], this.keys.push(c), this.values.push(function(a) {
          return function() {
            var b, c;
            c = arguments[0];
            b = 2 <= arguments.length ? f.call(arguments, 1) : [];
            return a.apply(c, b);
          };
        }(Number.prototype[c]));
      }
      g = "E LN10 LN2 LOG10E LOG2E PI SQRT1_2 SQRT2 abs acos acosh asin asinh atan atanh atan2 cbrt ceil clz32 cos cosh exp expm1 floor fround hypot imul log log10 log1p log2 max min pow random round sign sin sinh sqrt tan tanh trunc".split(" ");
      b = 0;
      for (d = g.length;b < d;b++) {
        c = g[b], this.keys.push(c), this.values.push(Math[c]);
      }
      g = ["fromCharCode", "fromCodePoint"];
      b = 0;
      for (d = g.length;b < d;b++) {
        c = g[b], this.keys.push(c), this.values.push(String[c]);
      }
      g = "charAt charCodeAt codePointAt concat contains endsWith indexOf lastIndexOf localeCompare match repeat replace search slice split startsWith substr substring toLocaleLowerCase toLocaleUpperCase toLowerCase toUpperCase trim valueOf".split(" ");
      d = 0;
      for (b = g.length;d < b;d++) {
        c = g[d], this.keys.push(c), this.values.push(function(a) {
          return function() {
            var b, c;
            c = arguments[0];
            b = 2 <= arguments.length ? f.call(arguments, 1) : [];
            return a.apply(c, b);
          };
        }(String.prototype[c]));
      }
      this.keys.push("length");
      this.values.push(function(a) {
        return a.length;
      });
      g = "algParse algEvaluate algPartialSimplify algSimplify algValid algValued algPartialSimplified algSimplified algIdentical algEqual algPartialEquivalent algEquivalent isAlgValid algEval algStrictEquivTermsSameOrder algEquivTermsSameOrder algStrictEquivTerms algEquivTerms algEquiv isSimplified calc calca simplify algebraicEqual patternMatches polyTermsEqual algebraicMatches expressionMatches".split(" ");
      d = 0;
      for (b = g.length;d < b;d++) {
        c = g[d], this.keys.push(c), this.values.push(function(a, b) {
          return function() {
            var c;
            c = 1 <= arguments.length ? f.call(arguments, 0) : [];
            return a.apply(b, c);
          };
        }(this.algebraParser[c], this.algebraParser));
      }
      for (c in CTATFormulaFunctions) {
        this.keys.push(c), this.values.push(function(a, b) {
          return function() {
            var c;
            c = 1 <= arguments.length ? f.call(arguments, 0) : [];
            return a.apply(b, c);
          };
        }(CTATFormulaFunctions[c], CTATFormulaFunctions));
      }
    }
    a.prototype.evaluate = function(a, c, k, l) {
      var q, p, m, w, t, z, y, r;
      try {
        t = "undefined" !== typeof window && null !== window ? window : global;
        q = function() {
          var a;
          a = [];
          for (m in t) {
            a.push(m);
          }
          return a;
        }().concat(["selection", "action", "input"]);
        y = null != (z = a.match(b)) ? z : [];
        p = 0;
        for (w = y.length;p < w;p++) {
          m = y[p], 0 > g.call(d, m) && CTATFormulaFunctions.assign(m, void 0);
        }
        for (m in r = this.variableTable.getTable()) {
          t[m] = r[m];
        }
        return function(a, b, c) {
          c.prototype = a.prototype;
          c = new c;
          a = a.apply(c, b);
          return Object(a) === a ? a : c;
        }(Function, ["selection", "action", "input"].concat(f.call(this.keys), ["return " + a.replace(/\\/g, "\\\\")]), function() {
        }).apply(t, [c, k, l].concat(f.call(this.values)));
      } catch (A) {
        return console.log(A), null;
      } finally {
        for (m in t) {
          null != m && 0 > g.call(q, m) && (r[m] = t[m], delete t[m]);
        }
      }
    };
    a.prototype.interpolateSplitPattern = /<%=|%>/;
    a.prototype.interpolate = function(a, b, c, d) {
      var f, g, m, w, t;
      w = a.split(this.interpolateSplitPattern);
      t = [];
      a = g = 0;
      for (m = w.length;g < m;a = ++g) {
        f = w[a], t.push(a % 2 ? this.evaluate(f, b, c, d) : f);
      }
      return t.join("");
    };
    return a;
  }();
  "undefined" !== typeof module && null !== module ? module.exports = a : this.CTATFormulaParser = a;
}).call(this);
var CTATSingleMatcher = function(a, b) {
  CTATMatcher.call(this, !0, a, b);
  var d = this, f = "", g = "";
  this.getSingle = function(a) {
    return f;
  };
  this.setSingle = function(a) {
    null === a || "undefined" === typeof a ? d.ctatdebug('CTATSingleMatcher --\x3e bad argument "' + a + '" to setSingle()') : f = a;
  };
  this.toString = function() {
    console.log("Error: CTATSingleMatcher.toString() called: should be overridden");
  };
  this.matchSingle = function(a) {
    console.log("Error: CTATSingleMatcher.matchSingle(" + a + ") called: should be overridden");
    return !1;
  };
  this.getReplacementFormula = function() {
    return g;
  };
  this.setReplacementFormula = function(a) {
    g = a ? a : "";
  };
  this.evaluateReplacement = function(a, b, f) {
    f = null;
    if (!g) {
      return f;
    }
    d.ctatdebug("CTATSingleMatcher.evaluateReplacement(" + a + ", " + b + ")");
    var k = a.getSelection(), l = a.getAction();
    a = CTATVariableTable.standardizeType(a.getInput());
    b || (b = new CTATVariableTable);
    b = new CTATFormulaParser(b);
    d.ctatdebug("CTATSingleMatcher calling CTATFormulaParser.evaluate(" + g + ", " + k + ", " + l + ", " + a + ")");
    try {
      f = b.evaluate(g, k, l, a);
    } catch (q) {
      d.ctatdebug("CTATSingleMatcher error from CTATFormulaParser.evaluate(" + g + ") " + q.name + ": " + q.message), f = null;
    }
    d.ctatdebug("CTATSingleMatcher.evaluateReplacement() returns " + f + ", type " + typeof f);
    return f;
  };
};
CTATSingleMatcher.prototype = Object.create(CTATMatcher.prototype);
CTATSingleMatcher.prototype.constructor = CTATSingleMatcher;
CTATSingleMatcher.prototype.matchConcatenation = function(a) {
  a = this.array2ConcatString(a);
  return this.matchSingle(a);
};
CTATSingleMatcher.prototype.match = function(a, b, d, f) {
  return this.matchConcatenation(a);
};
CTATSingleMatcher.prototype.setParameter = function(a, b, d) {
  this.ctatdebug("CTATSingleMatcher.setParameter(" + a + ", " + b + ", " + d + ") calling\n  " + this.setSingle.toString());
  this.setSingle(a);
};
"undefined" !== typeof module && (module.exports = CTATSingleMatcher);
var CTATExpressionMatcher = function(a, b) {
  function d(a, b, d, e, g) {
    h.ctatdebug("CTATExpressionMatcher.testVector[" + e + "](" + a + ", " + b + ", " + d + ", " + g + ") to call evaluate");
    var w = CTATVariableTable.standardizeType(d);
    h.ctatdebug("CTATExpressionMatcher.testVector typeof input " + typeof d + "; inputConv " + w + ", typeof " + typeof w);
    d = h.evaluate(a, b, w, g);
    h.ctatdebug("CTATExpressionMatcher.testVector evaluate(" + a + ", " + b + ", " + w + ", " + g + ") returned " + d + ", type " + typeof d);
    g = null;
    switch(e) {
      case CTATMatcher.SELECTION:
        g = a;
        break;
      case CTATMatcher.ACTION:
        g = b;
        break;
      case CTATMatcher.INPUT:
      ;
      case CTATMatcher.NON_SINGLE:
        g = w;
    }
    c = g;
    h.ctatdebug("CTATExpressionMatcher.testVector comparee " + g + ", type " + typeof g + ", relation " + f + "( " + CTATExpressionMatcher.RELATIONS[f] + " )");
    try {
      switch(f) {
        case CTATExpressionMatcher.BOOL_RELATION:
          return !!d;
        case CTATExpressionMatcher.EQ_RELATION:
          if (null == g) {
            return null == d;
          }
          if (null == d) {
            break;
          }
          return h.compareNumberOrString(g, d, f);
        case CTATExpressionMatcher.NOT_EQ_RELATION:
          return null == g ? null != d : null == d ? !0 : h.compareNumberOrString(g, d, f);
        case CTATExpressionMatcher.LT_RELATION:
        ;
        case CTATExpressionMatcher.GT_RELATION:
          if (null == g || null == d) {
            break;
          }
          return h.compareNumberOrString(g, d, f);
        case CTATExpressionMatcher.LTE_RELATION:
        ;
        case CTATExpressionMatcher.GTE_RELATION:
          if (null == g) {
            return null == d;
          }
          if (null != d) {
            return h.compareNumberOrString(g, d, f);
          }
        ;
      }
    } catch (t) {
    }
    return !1;
  }
  CTATSingleMatcher.call(this, a, b);
  var f = CTATExpressionMatcher.EQ_RELATION, g = b, c = null, e = !1, h = this;
  this.getLastInput = function() {
    h.ctatdebug("CTATExpressionMatcher.getLastInput() returns " + c);
    return c;
  };
  this.isEqualRelation = function() {
    h.ctatdebug("CTATExpressionMatcher --\x3e in isEqualRelation");
    return f === CTATExpressionMatcher.EQ_RELATION;
  };
  this.getEvaluatedInput = function(a, b) {
    h.ctatdebug("CTATExpressionMatcher --\x3e in getEvaluatedInput(" + a + ", " + b + ")");
    var c = CTATVariableTable.standardizeType(a.getInput()), c = h.evaluate(a.getSelection(), a.getAction(), c, b);
    h.ctatdebug("CTATExpressionMatcher.getEvaluatedInput() returns " + c);
    return c;
  };
  this.toString = function() {
    return CTATExpressionMatcher.RELATIONS[f] + ' "' + g + '"';
  };
  this.matchSingle = function(a) {
    throw new CTATExampleTracerException("UnsupportedOperationException");
  };
  this.setInputExpression = function(a) {
    g = a;
  };
  this.setRelation = function(a) {
    f = a;
  };
  this.interpolate = function(a, b, c, d) {
    try {
      var e = new CTATVariableTable;
      return (new CTATFormulaParser(e)).interpolate(a, b, c, d);
    } catch (f) {
      return null;
    }
  };
  this.evaluate = function(a, b, c, d) {
    if ("undefined" == typeof d || null == d) {
      d = new CTATVariableTable;
    }
    h.ctatdebug("CTATExpressionMatcher.evaluate(..., vt=" + d + ") creating CTATFormulaParser");
    d = new CTATFormulaParser(d);
    h.ctatdebug("calling CTATFormulaParser.evaluate(" + h.getInputExpression() + ", " + a + ", " + b + ", " + c + ")");
    try {
      return d.evaluate(h.getInputExpression(), a, b, c);
    } catch (e) {
      return h.ctatdebug("CTATExpressionMatcher --\x3e " + e.name + ": " + e.message), null;
    }
  };
  this.matchConcatenation = function(b, c, f, g) {
    b = h.array2ConcatString(b);
    null === c || "undefined" === typeof c || null === f || "undefined" === typeof f ? e = d(b, null, null, a, g) : (c = h.array2ConcatString(c), f = h.array2ConcatString(f), e = d(b, c, f, a, g));
    return e;
  };
  this.match = function(a, b, c, d, e) {
    return h.matchConcatenation(a, b, c, e);
  };
  this.getInputExpression = function() {
    return g;
  };
  (function() {
    if (null !== b && "undefined" !== typeof b) {
      var a;
      a = b.indexOf('"');
      var c = b.lastIndexOf('"');
      0 <= a && 0 <= c ? (a = b.substring(a + 1, c), c = b.substring(0, b.indexOf(" ")), f = CTATExpressionMatcher.nameToRelation(c)) : a = b;
      h.setInputExpression(a);
    }
  })();
};
Object.defineProperty(CTATExpressionMatcher, "EQ_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:0});
Object.defineProperty(CTATExpressionMatcher, "LT_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:1});
Object.defineProperty(CTATExpressionMatcher, "GT_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:2});
Object.defineProperty(CTATExpressionMatcher, "NOT_EQ_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:3});
Object.defineProperty(CTATExpressionMatcher, "GTE_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:4});
Object.defineProperty(CTATExpressionMatcher, "LTE_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:5});
Object.defineProperty(CTATExpressionMatcher, "BOOL_RELATION", {enumerable:!1, configurable:!1, writable:!1, value:6});
Object.defineProperty(CTATExpressionMatcher, "RELATIONS", {enumerable:!1, configurable:!1, writable:!1, value:"= < > != >= <= boolean".split(" ")});
CTATExpressionMatcher.nameToRelation = function(a) {
  for (var b = 0;b < CTATExpressionMatcher.RELATIONS.length;b++) {
    if (a == CTATExpressionMatcher.RELATIONS[b]) {
      return b;
    }
  }
  return CTATExpressionMatcher.EQ_RELATION;
};
CTATExpressionMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATExpressionMatcher.prototype.constructor = CTATExpressionMatcher;
CTATExpressionMatcher.prototype.setParameter = function(a, b, d) {
  a = d.getNodeTextValue(a);
  this.ctatdebug("CTATExpressionMatcher.setParameter(" + b + ", " + a + ")");
  "InputExpression" == b ? this.setInputExpression(a) : "relation" == b && this.setRelation(CTATExpressionMatcher.nameToRelation(a));
};
CTATExpressionMatcher.prototype.compareNumberOrString = function(a, b, d) {
  a = String(a);
  b = String(b);
  var f = Number(a), g = Number(b);
  if (isNaN(f) || isNaN(g)) {
    switch(d) {
      case CTATExpressionMatcher.EQ_RELATION:
        return a == b;
      case CTATExpressionMatcher.NOT_EQ_RELATION:
        return a != b;
      case CTATExpressionMatcher.LT_RELATION:
        return a.toLowerCase() < b.toLowerCase();
      case CTATExpressionMatcher.GT_RELATION:
        return a.toLowerCase() > b.toLowerCase();
      case CTATExpressionMatcher.LTE_RELATION:
        return a.toLowerCase() <= b.toLowerCase();
      case CTATExpressionMatcher.GTE_RELATION:
        return a.toLowerCase() >= b.toLowerCase();
      case CTATExpressionMatcher.BOOL_RELATION:
        return !!b;
      default:
        return !1;
    }
  } else {
    switch(d) {
      case CTATExpressionMatcher.EQ_RELATION:
        return f == g;
      case CTATExpressionMatcher.NOT_EQ_RELATION:
        return f != g;
      case CTATExpressionMatcher.LT_RELATION:
        return f < g;
      case CTATExpressionMatcher.GT_RELATION:
        return f > g;
      case CTATExpressionMatcher.LTE_RELATION:
        return f <= g;
      case CTATExpressionMatcher.GTE_RELATION:
        return f >= g;
      case CTATExpressionMatcher.BOOL_RELATION:
        return !!g;
      default:
        return !1;
    }
  }
};
"undefined" !== typeof module && (module.exports = CTATExpressionMatcher);
var CTATExactMatcher = function(a, b) {
  CTATSingleMatcher.call(this, a, !0);
  var d = this;
  this.toString = function() {
    return d.getSingle().toString();
  };
  this.matchSingle = function(a) {
    var b = d.getSingle();
    ctatdebug("CTATExactMatcher --\x3e in matchSingle: s = " + a + ", singleval = " + b + ", caseInsensitive " + d.getCaseInsensitive() + ", " + typeof d.getCaseInsensitive());
    return d.getCaseInsensitive() ? String(a).toUpperCase() == String(b).toUpperCase() : String(a) == String(b);
  };
};
CTATExactMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATExactMatcher.prototype.constructor = CTATExactMatcher;
"undefined" !== typeof module && (module.exports = CTATExactMatcher);
var CTATVectorMatcher = function(a, b, d, f) {
  function g(a, b, d, f, g) {
    l.ctatdebug("CTATVectorMatcher --\x3e in _match(" + a + ", " + b + ", " + d + ", " + f + ")");
    if (0 === c.length || 0 === e.length || 0 === h.length) {
      c.push(new CTATExactMatcher(CTATMatcher.SELECTION, l.array2ConcatString(l.getDefaultSelectionArray()))), e.push(new CTATExactMatcher(CTATMatcher.ACTION, l.array2ConcatString(l.getDefaultActionArray()))), h.push(new CTATExactMatcher(CTATMatcher.INPUT, l.array2ConcatString(l.getDefaultInputArray())));
    }
    var z = [];
    z[CTATMatcher.SELECTION] = a;
    z[CTATMatcher.ACTION] = b;
    z[CTATMatcher.INPUT] = d;
    for (var y = 0;3 > y;y++) {
      var r = k[y][0], A = r instanceof CTATExpressionMatcher ? r.matchConcatenation(a, b, d, f) : r.matchConcatenation(z[y]);
      l.ctatdebug("CTATVectorMatcher --\x3e in _match[" + y + "] after " + r + ".concat returns: " + A);
      if (g) {
        g.push(A);
      } else {
        if (!1 === A) {
          return !1;
        }
      }
    }
    if (g) {
      for (a = 0;a < g.length;++a) {
        if (!g[a]) {
          return !1;
        }
      }
    }
    return !0;
  }
  CTATMatcher.call(this, !0, CTATMatcher.VECTOR, !0);
  var c = a instanceof Array ? a : [], e = b instanceof Array ? b : [], h = d instanceof Array ? d : [], k = [];
  k[CTATMatcher.SELECTION] = c;
  k[CTATMatcher.ACTION] = e;
  k[CTATMatcher.INPUT] = h;
  var l = this;
  this.match = function(a, b, c, d, e) {
    return !1 !== g(a, b, c, e) && l.matchActor(d) ? !0 : !1;
  };
  this.getMatchers = function(a) {
    return k[a];
  };
  this.getTutorSAI = function(a, b, c) {
    l.ctatdebug("CTATVectorMatcher.getTutorSAI(" + a + ", vt, " + c + ")");
    if (c && CTATExampleTracerLink.CORRECT_ACTION.toLowerCase() == c.toLowerCase()) {
      return a;
    }
    var d = [];
    if (g(a.getSelectionArray(), a.getActionArray(), a.getInputArray(), b, d)) {
      return c = a.clone(), a = l.evaluateReplacement(a, b, null), null != a && c.setInput("object" == typeof a ? a.toString() : a), c;
    }
    c = a.clone();
    for (a = 0;a < d.length;a++) {
      switch(a) {
        case CTATMatcher.SELECTION:
          if (d[a]) {
            continue;
          }
          c.setSelection(l.getDefaultSelection());
          c.setSelectionArray(l.getDefaultSelectionArray());
          break;
        case CTATMatcher.ACTION:
          if (d[a]) {
            continue;
          }
          c.setAction(l.getDefaultAction());
          c.setActionArray(l.getDefaultActionArray());
          break;
        case CTATMatcher.INPUT:
          if (d[a]) {
            continue;
          }
          c.setInput(l.getDefaultInput());
          c.setInputArray(l.getDefaultInputArray());
          break;
        default:
          console.log("CTATVectorMatcher.getTutorSAI() unexpected no. of details: " + a);
      }
    }
    return c;
  };
  this.getInputMatcher = function() {
    var a = h[0];
    return a instanceof CTATExactMatcher && a.toString() === "".toString() ? l.getDefaultInput() : a.toString();
  };
  this.getActionMatcher = function() {
    var a = e[0];
    return a instanceof CTATExactMatcher && a.toString() === "".toString() ? l.getDefaultAction() : a.toString();
  };
  this.getSelectionMatcher = function() {
    var a = c[0];
    return a instanceof CTATExactMatcher && a.toString() === "".toString() ? l.getDefaultSelection() : a.toString();
  };
  this.getSingleMatcher = function(a) {
    return "selection".toString().toUpperCase() === a.toString().toUpperCase() ? c[0] : "action".toString().toUpperCase() === a.toString().toUpperCase() ? e[0] : h[0];
  };
  this.getSelection = function() {
    return 0 === c.length ? l.getDefaultSelection() : c[0].toString();
  };
  this.getAction = function() {
    return 0 === e.length ? l.getDefaultAction() : e[0].getAction();
  };
  this.setDefaultSelection = function(a) {
    return 0 === c.length ? l.internalSetDefaultSelection(a) : c[0].setDefaultSelection(a);
  };
  this.setDefaultAction = function(a) {
    return 0 === e.length ? l.internalSetDefaultAction(a) : e[0].setDefaultAction(a);
  };
  this.setDefaultInput = function(a) {
    return 0 === h.length ? l.internalSetDefaultInput(a) : h[0].setDefaultInput(a);
  };
  this.getEvaluatedInput = function(a, b) {
    if (0 === h.length) {
      return l.getInput();
    }
    var c = h[0];
    return !1 === c instanceof CTATExpressionMatcher ? l.getInput() : !0 === c.isEqualRelation() ? c.getEvaluatedInput(a, b) : l.getInput();
  };
  this.matchForHint = function(a, b, d, e) {
    ctatdebug("CTATVectorMatcher.matchForHint(" + a + ", " + b + ", " + d + ", vt)");
    if (!l.matchActor(d)) {
      return !1;
    }
    b = !1;
    b = c[0];
    return b = Array.isArray(a) ? b.matchConcatenation(a, l.getDefaultActionArray(), l.getDefaultInputArray(), e) : b.matchConcatenation([a], l.getDefaultActionArray(), l.getDefaultInputArray(), e);
  };
  this.setCaseInsensitive = function(a) {
    ctatdebug("CTATVectorMatcher.setCaseInsensitive(" + a + ")");
    for (var b = 0;b < k.length;++b) {
      if (Array.isArray(k[b])) {
        for (var c = 0;c < k[b].length;++c) {
          k[b][c].setCaseInsensitive(a);
        }
      } else {
        k[b] instanceof CTATMatcher && k[b].setCaseInsensitive(a);
      }
    }
  };
  this.toString = function() {
    return "this is CTATVectorMatcher";
  };
  this.getReplacementFormula = function() {
    var a = h[0];
    return null === a || "undefined" === typeof a ? null : a.getReplacementFormula();
  };
  this.evaluateReplacement = function(a, b, c) {
    return h[0].evaluateReplacement(a, b, c);
  };
  this.setActor(f);
};
CTATVectorMatcher.prototype = Object.create(CTATMatcher.prototype);
CTATVectorMatcher.prototype.constructor = CTATVectorMatcher;
"undefined" !== typeof module && (module.exports = CTATVectorMatcher);
var CTATExampleTracerLink = function(a, b, d) {
  CTATBase.call(this, "CTATExampleTracerLink", "(" + b + "-" + d + ")");
  var f = "undefined" === typeof a || null === a ? null : a, g = null, c = "undefined" === typeof b || null === b ? null : b, e = "undefined" === typeof d || null === d ? null : d, h = null, k = 1, l = 1, q = "CORRECT_ACTION", p = [], m = !1, w = null, t = "", z = null, y = null, r = this;
  this.getUniqueID = function() {
    return f;
  };
  this.getMatcher = function() {
    r.ctatdebug("CTATExampleTracerLink --\x3e in getMatcher");
    return h;
  };
  this.isCorrect = function() {
    return q == CTATExampleTracerLink.CORRECT_ACTION;
  };
  this.matchesSAI = function(a, b, c) {
    var d = r.getMatcher();
    r.ctatdebug("CTATExampleTracerLink --\x3e in matchesSAI(); matcher " + d + ", typeof " + typeof d + ", sai " + a);
    a = d.match(a.getSelectionArray(), a.getActionArray(), a.getInputArray(), b, c);
    r.ctatdebug("CTATExampleTracerLink --\x3e out of matchesSAI: result = " + a);
    return a;
  };
  this.matchesSAIforHint = function(a, b, c, d) {
    r.ctatdebug("CTATExampleTracerLink --\x3e in matchesSAIforHint(" + a + ", " + b + ") selectionArray " + a.getSelectionArray());
    if (!1 === r.getMatcher().matchForHint(a.getSelectionArray(), a.getActionArray(), b, d)) {
      return r.ctatdebug("CTATExampleTracerLink --\x3e matchesSAIforHint() returning false because no match"), !1;
    }
    if (null !== c && "undefined" !== typeof c && !0 === c.getWantReportableHints() && (a = null === r.getAllHints() || "undefined" === typeof r.getAllHints() ? 0 : r.getAllHints().length, 1 > a)) {
      return r.ctatdebug("CTATExampleTracerLink --\x3e matchesSAIforHint() returning false nStaticHints " + a + "< 1"), !1;
    }
    r.ctatdebug("CTATExampleTracerLink --\x3e matchesSAIforHint() returning true");
    return !0;
  };
  this.getDepth = function() {
    return g;
  };
  this.getBuggyMsg = function() {
    return t;
  };
  this.getSuccessMsg = function() {
    return w;
  };
  this.getType = function() {
    return q;
  };
  this.getPrevNode = function() {
    return c;
  };
  this.getNextNode = function() {
    return e;
  };
  this.setPrevNode = function(a) {
    c = a;
  };
  this.setNextNode = function(a) {
    e = a;
  };
  this.toString = function() {
    var a;
    a = "[link " + r.getUniqueID();
    a += " (" + r.getPrevNode() + "-" + r.getNextNode();
    a += ") " + r.getType();
    return a + "]";
  };
  this.getTutorSAI = function(a, b) {
    return r.getMatcher().getTutorSAI(a, b, r.getActionType());
  };
  this.getEvaluatedInput = function(a, b) {
    return r.getMatcher().getEvaluatedInput(a, b);
  };
  this.setDepth = function(a) {
    g = a;
  };
  this.getMaxTraversals = function() {
    return k;
  };
  this.isDone = function() {
    var a = String(r.getDefaultSAI().getSelection()).toLowerCase(), b = String(r.getDefaultSAI().getAction()).toLowerCase(), a = CTATMsgType.DONE.toLowerCase() == a && CTATMsgType.BUTTON_PRESSED.toLowerCase() == b;
    r.ctatdebug("CTATExampleTracerLink.isDone() returns " + a);
    return a;
  };
  this.interpolateHints = function(a) {
    r.ctatdebug("CTATExampleTracerLink --\x3e interpolateHints(" + a + ")");
    var b = [];
    if (null === p || "undefined" === typeof p || 0 === p.length) {
      return b;
    }
    null == a && (a = new CTATVariableTable);
    var c = new CTATFormulaParser(a);
    p.forEach(function(a) {
      if (!(1 > String(a).trim().length)) {
        var d = r.getDefaultSAI().getSelection(), e = r.getDefaultSAI().getAction(), f = CTATVariableTable.standardizeType(r.getDefaultSAI().getInput());
        r.ctatdebug("CTATExampleTracerLink.interpolateHints() calling fp.interpolate(" + a + ", " + d + ", " + e + ", " + f + ")");
        a = c.interpolate(a, d, e, f);
        r.ctatdebug("CTATExampleTracerLink.interpolateHints() calling fp.interpolate() returns " + a);
        b.push(a);
      }
    });
    r.ctatdebug("CTATExampleTracerLink --\x3e out of interpolateHints " + b);
    return b;
  };
  this.getHints = function() {
    r.ctatdebug("CTATExampleTracerLink --\x3e in getHints");
    var a = [];
    r.interpolateHints(null).forEach(function(b) {
      r.ctatdebug("CTATExampleTracerLink --\x3e in getHints loop");
      b.toString() !== "".toString() && a.push(b);
    });
    r.ctatdebug("CTATExampleTracerLink --\x3e out of getHints");
    return a;
  };
  this.getAllNonEmptyHints = function() {
    var a = [];
    p.forEach(function(b) {
      b.trim().toString() !== "".toString() && a.push(b);
    });
    return a;
  };
  this.isTraversable = function() {
    return 1 > r.getMaxTraversals() ? !1 : CTATExampleTracerLink.CORRECT_ACTION.toString().toUpperCase() == r.getActionType().toString().toUpperCase() || CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString().toUpperCase() == r.getActionType().toString().toUpperCase() ? !0 : !1;
  };
  this.replaceInput = function() {
    return CTATExampleTracerLink.CORRECT_ACTION.toString().toUpperCase() !== r.getActionType().toString().toUpperCase() && CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString().toUpperCase() !== r.getActionType().toString().toUpperCase() ? !1 : r.getMatcher().replaceInput();
  };
  this.evaluateReplacement = function(a, b, c) {
    return r.getMatcher().evaluateReplacement(a, b, c);
  };
  this.getActor = function() {
    return r.getMatcher().getActor();
  };
  this.getDefaultSAI = function() {
    r.ctatdebug(r.toString() + ".getSAI(): " + (h ? h.getDefaultSAI() : "(matcher null)"));
    return h.getDefaultSAI();
  };
  this.getActionType = function() {
    return q;
  };
  this.getMinTraversals = function() {
    return l;
  };
  this.getIsPreferredLink = function() {
    return m;
  };
  this.getAllHints = function() {
    return p;
  };
  this.setMatcher = function(a) {
    h = a;
  };
  this.addHint = function(a) {
    null !== a && "undefined" !== typeof a && a.toString() !== "".toString() && p.push(a);
  };
  this.setSelection = function(a) {
    r.getMatcher().setDefaultSelection(null === a[0] || "undefined" === typeof a[0] ? "" : a[0].toString());
  };
  this.setAction = function(a) {
    r.getMatcher().setDefaultAction(null === a[0] || "undefined" === typeof a[0] ? "" : a[0].toString());
  };
  this.setActionType = function(a) {
    if (null === a || "undefined" === typeof a || a.toString() !== CTATExampleTracerLink.CORRECT_ACTION.toString() && a.toString() !== CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString() && a.toString() !== CTATExampleTracerLink.BUGGY_ACTION.toString() && a.toString() !== CTATExampleTracerLink.HINT_ACTION.toString() && a.toString() !== CTATExampleTracerLink.UNTRACEABLE_ERROR.toString() && a.toString() !== CTATExampleTracerLink.CLT_ERROR_ACTION.toString() && a.toString() !== CTATExampleTracerLink.GIVEN_ACTION.toString()) {
      throw new CTATExampleTracerException("invalid action type " + q);
    }
    q = a;
  };
  this.setBuggyMsg = function(a) {
    t = a;
  };
  this.setSuccessMsg = function(a) {
    w = a;
  };
  this.setMinTraversalsStr = function(a) {
    if (null === a || "undefined" === typeof a || 1 > a.length) {
      l = 1;
    } else {
      try {
        l = parseInt(a.trim()), isNaN(l) && (l = 1);
      } catch (b) {
        l = 1;
      }
    }
  };
  this.setMaxTraversalsStr = function(a) {
    if (null === a || "undefined" === typeof a || 1 > a.length) {
      k = l;
    } else {
      try {
        k = parseInt(a.trim()), isNaN(k) && (k = 1);
      } catch (b) {
        k = l;
      }
    }
  };
  this.setUniqueID = function(a) {
    f = a;
  };
  this.addSkillName = function(a) {
    r.ctatdebug("ETLink[" + f + "].addSkillName(" + a + ")");
    if ("unnamed" !== a) {
      if (null === y || "undefined" === typeof y) {
        y = [];
      }
      -1 < y.indexOf(a) || (y.push(a), r.ctatdebug("ETLink.addSkillName() return with skillNames " + y));
    }
  };
  this.getSkillNames = function() {
    if (null === y || "undefined" === typeof y) {
      y = [];
    }
    return y;
  };
  this.isTutorPerformed = function(a) {
    if (CTATExampleTracerLink.CORRECT_ACTION.toUpperCase() !== r.getActionType().toUpperCase()) {
      return !1;
    }
    var b = r.getMatcher();
    if (null === b || "undefined" === typeof b || null !== a && "undefined" !== typeof a && a !== b.isLinkTriggered()) {
      return !1;
    }
    a = r.getActor();
    return CTATMatcher.isTutorActor(a, !0) ? !0 : !1;
  };
  this.setIsPreferredLink = function(a) {
    r.ctatdebug("ETLink.setIsPreferredLink() was " + m + ", now " + a);
    m = a;
  };
  this.setVisualData = function(a) {
    z = a;
  };
  this.getVisualData = function() {
    return z;
  };
};
CTATExampleTracerLink.compareLinkTypes = function(a, b) {
  ctatdebug("CTATExampleTracerLink --\x3e in compareLinkTypes(" + a + ", " + b + ")");
  return null === a || "undefined" === typeof a ? null === b || "undefined" === typeof b ? 0 : 1 : null === b || "undefined" === typeof b ? -1 : a.toString() === b.toString() ? 0 : a.toString() === CTATExampleTracerLink.CORRECT_ACTION.toString() ? -1 : b.toString() === CTATExampleTracerLink.CORRECT_ACTION.toString() ? 1 : a.toString() === CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString() ? -1 : b.toString() === CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString() ? 1 : a.toString() === CTATExampleTracerLink.BUGGY_ACTION.toString() ? 
  -1 : b.toString() === CTATExampleTracerLink.BUGGY_ACTION.toString() ? 1 : 0;
};
Object.defineProperty(CTATExampleTracerLink, "BUGGY_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Buggy Action"});
Object.defineProperty(CTATExampleTracerLink, "FIREABLE_BUGGY_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Fireable Buggy Action"});
Object.defineProperty(CTATExampleTracerLink, "CORRECT_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Correct Action"});
Object.defineProperty(CTATExampleTracerLink, "NO_MODEL", {enumerable:!1, configurable:!1, writable:!1, value:"NO-MODEL"});
Object.defineProperty(CTATExampleTracerLink, "HINT_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Hint Action"});
Object.defineProperty(CTATExampleTracerLink, "UNTRACEABLE_ERROR", {enumerable:!1, configurable:!1, writable:!1, value:"Untraceable Error"});
Object.defineProperty(CTATExampleTracerLink, "CLT_ERROR_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Error Action"});
Object.defineProperty(CTATExampleTracerLink, "GIVEN_ACTION", {enumerable:!1, configurable:!1, writable:!1, value:"Given Action"});
Object.defineProperty(CTATExampleTracerLink, "SUCCESS", {enumerable:!1, configurable:!1, writable:!1, value:"SUCCESS"});
CTATExampleTracerLink.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerLink.prototype.constructor = CTATExampleTracerLink;
"undefined" !== typeof module && (module.exports = CTATExampleTracerLink);
var CTATRegexMatcher = function(a, b) {
  CTATSingleMatcher.call(this, a, !0);
  var d = null, f = null, g = this;
  this.toString = function() {
    return d;
  };
  this.setSinglePattern = function(a) {
    "undefined" === typeof a || null === a ? console.log("CTATRegexMatcher: null or undefined pattern") : (d = a, f = g.getCaseInsensitive() ? new RegExp(a, "i") : new RegExp(a));
  };
  this.setSingle = function(a) {
    g.setSinglePattern(a);
  };
  this.matchSingle = function(a) {
    if (null == a) {
      return null == getSingle();
    }
    if (null == f) {
      return console.log("Error: CTATRegexMatcher.matchSingle called before pattern has been set"), !1;
    }
    var b = f.exec(a);
    return null != b && b[0] == a;
  };
};
CTATRegexMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATRegexMatcher.prototype.constructor = CTATRegexMatcher;
"undefined" !== typeof module && (module.exports = CTATRegexMatcher);
var CTATExampleTracerNode = function(a, b) {
  CTATBase.call(this, "CTATExampleTracerNode", a);
  var d = null, f = "", g = b ? b : new Set, c = new Set;
  g.forEach(function(a, b, d) {
    b.isCorrect() && c.add(b);
  });
  var e = new Set, h = this;
  this.toString = function() {
    return "node" + a;
  };
  this.getNodeID = function() {
    return a;
  };
  this.getNodeName = function() {
    return f;
  };
  this.setNodeName = function(a) {
    h.ctatdebug("CTATExampleTracerGraph --\x3e in setNodeName(" + a + ")");
    f = a;
  };
  this.getOutLinks = function() {
    ctatdebug("CTATExampleTracerNode --\x3e getOutLinks");
    return g;
  };
  this.getCorrectOutLinks = function() {
    return c;
  };
  this.addOutLink = function(a) {
    ctatdebug("CTATExampleTracerNode --\x3e addOutLink( " + a + " )");
    g.add(a);
    a.isCorrect() && c.add(a);
  };
  this.clearInLinks = function() {
    e = new Set;
  };
  this.addInLink = function(a) {
    e.add(a);
  };
  this.getInLinks = function() {
    return e;
  };
  this.getOutDegree = function() {
    return g.size;
  };
  this.getCorrectOutDegree = function() {
    return c.size;
  };
  this.setVisualData = function(a) {
    d = a;
  };
  this.getVisualData = function() {
    return d;
  };
};
CTATExampleTracerNode.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerNode.prototype.constructor = CTATExampleTracerNode;
"undefined" !== typeof module && (module.exports = CTATExampleTracerNode);
var CTATVersionComparator = function() {
  CTATBase.call(this, "CTATVersionComparator", "");
  this.compare = function(a, b) {
    if (null === a || "undefined" === typeof a) {
      return null === b || "undefined" === typeof b ? 0 : -1;
    }
    if (null === b || "undefined" === typeof b) {
      return 1;
    }
    var d = 0, f = a.split("."), g = b.split("."), c;
    for (c = 0;c < Math.min(f.length, g.length);c++) {
      try {
        var e = parseInt(f[c]), h = parseInt(g[c]), d = e < h ? -1 : e > h ? 1 : 0;
        if (0 !== d) {
          return d;
        }
      } catch (k) {
        if (d = f[c].toString() < g[c].toString() ? -1 : f[c].toString() > g[c].toString() ? 1 : 0, 0 !== d) {
          return d;
        }
      }
    }
    return c < f.length ? 1 : c < g.length ? -1 : a.toString() < b.toString() ? -1 : a.toString() > b.toString() ? 1 : 0;
  };
};
CTATVersionComparator.prototype = Object.create(CTATBase.prototype);
CTATVersionComparator.prototype.constructor = CTATVersionComparator;
CTATVersionComparator.vc = new CTATVersionComparator;
"undefined" !== typeof module && (module.exports = CTATVersionComparator);
var CTATExampleTracerSkill = function(a, b, d, f, g, c, e) {
  CTATBase.call(this, "CTATExampleTracerSkill", b);
  var h = null == a || "" == a.trim() ? b : b + " " + a, k = f, l = /^0*[xX]([0-9a-fA-F]+)$/.test(e) ? parseInt(e, 16) : /^(\-|\+)?[0-9]+$/.test(e) ? parseInt(e, 10) : CTATExampleTracerSkill.DEFAULT_HISTORY, q = 0, p = 0, m = CTATExampleTracerSkill.SKILL_BAR_DELIMITER_v2_11, w = CTATExampleTracerSkill.DEFAULT_MASTERY_THRESHOLD, t = null, z = this;
  this.getSkillName = function() {
    return h;
  };
  this.getCategory = function() {
    var a = h.indexOf(" ");
    return 0 > a ? "" : h.substring(a + 1);
  };
  this.setTransactionNumber = function(a) {
    q = a;
  };
  this.updatePKnown = function(a) {
    return k = CTATExampleTracerSkill.updatePKnownStatic(a, d, k, g, c);
  };
  this.updateHistory = function(a) {
    return l = CTATExampleTracerSkill.updateHistoryStatic(a, l);
  };
  this.changeOpportunityCount = function(a) {
    return p += a;
  };
  this.getTransactionNumber = function() {
    return q;
  };
  this.getSkillBarString = function(a) {
    var b = this.getSkillName(), b = b + this.getSkillBarDelimiter() + k, b = b + this.getSkillBarDelimiter() + (this.hasReachedMastery() ? "1" : "0");
    !0 === a && (b = b + this.getSkillBarDelimiter() + this.getLabel());
    return b.toString();
  };
  this.getSkillBarDelimiter = function() {
    return m;
  };
  this.toXML = function(a) {
    var b;
    b = "" + (' name="' + CTATExampleTracerSkill.getName(h) + '"');
    b += ' category="' + z.getCategory() + '"';
    b += ' pKnown="' + k + '"';
    b += ' pLearn="' + c + '"';
    b += ' pGuess="' + d + '"';
    b += ' pSlip="' + g + '"';
    b += ' history="' + l + '"';
    return a ? "&lt;Skill" + b + " /&gt;" : "<Skill" + b + " />";
  };
  this.hasReachedMastery = function() {
    return null === k || "undefined" === typeof k ? !1 : k >= w;
  };
  this.getLabel = function() {
    return null === t || "undefined" === typeof t || 1 > t.length ? CTATExampleTracerSkill.getName(h) : t;
  };
  this.setVersion = function(a) {
    null !== a && "undefined" !== typeof a && 0 < a.length && (m = CTATExampleTracerSkill.versionToSkillBarDelimiter(a));
  };
  this.setLabel = function(a) {
    t = a;
  };
  this.setDescription = function(a) {
  };
  CTATExampleTracerSkill.makeStepID = function(a, b) {
    for (var c = "", d = 0, e = a;2 > d++;e = b) {
      if (!(null === e || "undefined" === typeof e || 1 > e.length)) {
        for (var f = !1, g = 0;g < e.length;g++) {
          if (null !== e[g] && "undefined" !== typeof e[g]) {
            var h = e[g].toString();
            1 > h.length || e === a && ("hint".toString().toUpperCase() === h.toString().toUpperCase() || "help".toString().toUpperCase() === h.toString().toUpperCase()) || e === b && CTATMsgType.PREVIOUS_FOCUS.toString().toUpperCase() === h.toString().toUpperCase() || (c = c + (f ? "," : "[") + h, f = !0);
          }
        }
        !0 === f && (c += "]");
      }
    }
    return c.toString();
  };
  CTATExampleTracerSkill.updateHistoryStatic = function(a, b) {
    var c, d = 1 << CTATExampleTracerSkill.MAX_INTEGER_SHIFT;
    c = b << 1 | (a.toString().toUpperCase() === CTATExampleTracerSkill.CORRECT.toString().toUpperCase() ? 1 : 0);
    return c & d ? c ^ d : c;
  };
  CTATExampleTracerSkill.updatePKnownStatic = function(a, b, c, d, e) {
    var f = 0;
    if (a.toString().toUpperCase() === CTATExampleTracerSkill.CORRECT.toString().toUpperCase()) {
      b = +(b * (1 - c)).toFixed(2), c = +(c * (1 - d)).toFixed(2), f = +(c / (c + b)).toFixed(2);
    } else {
      if (a.toString().toUpperCase() === CTATExampleTracerSkill.INCORRECT.toString().toUpperCase() || a.toString().toUpperCase() === CTATExampleTracerSkill.HINT.toString().toUpperCase()) {
        d = +(c * d).toFixed(2), c = +((1 - c) * (1 - b)).toFixed(2), f = +(d / (d + c)).toFixed(2);
      }
    }
    return +(f + e * (1 - f)).toFixed(2);
  };
  CTATExampleTracerSkill.getName = function(a) {
    var b = a.indexOf(" ");
    return 0 > b ? a : a.substring(0, b);
  };
  CTATExampleTracerSkill.versionToSkillBarDelimiter = function(a) {
    return null === a || "undefined" === typeof a ? CTATExampleTracerSkill.SKILL_BAR_DELIMITER_v2_10 : 0 <= CTATVersionComparator.vc.compare(a, "2.11") ? CTATExampleTracerSkill.SKILL_BAR_DELIMITER_v2_11 : CTATExampleTracerSkill.SKILL_BAR_DELIMITER_v2_10;
  };
};
Object.defineProperty(CTATExampleTracerSkill, "MAX_INTEGER_SHIFT", {enumerable:!1, configurable:!1, writable:!1, value:31});
Object.defineProperty(CTATExampleTracerSkill, "HINT", {enumerable:!1, configurable:!1, writable:!1, value:"hint"});
Object.defineProperty(CTATExampleTracerSkill, "CORRECT", {enumerable:!1, configurable:!1, writable:!1, value:"correct"});
Object.defineProperty(CTATExampleTracerSkill, "INCORRECT", {enumerable:!1, configurable:!1, writable:!1, value:"incorrect"});
Object.defineProperty(CTATExampleTracerSkill, "SKILL_BAR_DELIMITER_v2_10", {enumerable:!1, configurable:!1, writable:!1, value:"="});
Object.defineProperty(CTATExampleTracerSkill, "SKILL_BAR_DELIMITER_v2_11", {enumerable:!1, configurable:!1, writable:!1, value:"`"});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_MASTERY_THRESHOLD", {enumerable:!1, configurable:!1, writable:!1, value:.95});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_P_GUESS", {enumerable:!1, configurable:!1, writable:!1, value:.2});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_P_KNOWN", {enumerable:!1, configurable:!1, writable:!1, value:.3});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_P_SLIP", {enumerable:!1, configurable:!1, writable:!1, value:.3});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_P_LEARN", {enumerable:!1, configurable:!1, writable:!1, value:.15});
Object.defineProperty(CTATExampleTracerSkill, "DEFAULT_HISTORY", {enumerable:!1, configurable:!1, writable:!1, value:0});
CTATExampleTracerSkill.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerSkill.prototype.constructor = CTATExampleTracerSkill;
"undefined" !== typeof module && (module.exports = CTATExampleTracerSkill);
var CTATWildcardMatcher = function(a, b) {
  function d(a) {
    if (null == a || "undefined" === typeof a) {
      return null;
    }
    var b = (new String(a)).replace(RegExp("\\?", "g"), "."), d = b.replace(RegExp("\\*", "g"), ".*"), h = d.replace(RegExp("\\[\\!", "g"), "[^");
    f.ctatdebug("CTATWildcardMatcher.convertToFullRegex(" + a + ") after qm: " + b + "; after aster: " + d + "; after negate: " + h + ";");
    return h;
  }
  CTATRegexMatcher.call(this, a, b);
  var f = this;
  this.toString = function() {
    return null;
  };
  this.setSingle = function(a) {
    f.simpleSinglePattern = a;
    f.setSinglePattern.call(f, d(a));
  };
  this.setSingle(b);
  this.simpleSinglePattern = b;
};
CTATWildcardMatcher.prototype = Object.create(CTATRegexMatcher.prototype);
CTATWildcardMatcher.prototype.constructor = CTATWildcardMatcher;
"undefined" !== typeof module && (module.exports = CTATWildcardMatcher);
var CTATAnyMatcher = function(a, b) {
  CTATSingleMatcher.call(this, a, !0);
  this.toString = function() {
    return "*";
  };
  this.matchSingle = function(a) {
    return !0;
  };
};
CTATAnyMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATAnyMatcher.prototype.constructor = CTATAnyMatcher;
"undefined" !== typeof module && (module.exports = CTATAnyMatcher);
var CTATExampleTracerPathComparator = function() {
  CTATBase.call(this, "CTATExampleTracerPathComparator", "");
  var a = this;
  this.compare = function(b, d) {
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare");
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.isDonePath(): " + b.isDonePath());
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p2.isDonePath(): " + d.isDonePath());
    if (!0 === b.isDonePath() && !1 === d.isDonePath()) {
      return -1;
    }
    if (!0 === d.isDonePath() && !1 === b.isDonePath()) {
      return 1;
    }
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p2.isIncorrectPath(): " + d.isIncorrectPath());
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.isIncorrectPath()(): " + b.isIncorrectPath());
    if (!0 === d.isIncorrectPath() && !1 === b.isIncorrectPath()) {
      return -1;
    }
    if (!0 === b.isIncorrectPath() && !1 === d.isIncorrectPath()) {
      return 1;
    }
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.getNumberOfPreferredPrefixLinks(): " + b.getNumberOfPreferredPrefixLinks());
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p2.getNumberOfPreferredPrefixLinks(): " + d.getNumberOfPreferredPrefixLinks());
    var f = b.getNumberOfPreferredPrefixLinks(), g = d.getNumberOfPreferredPrefixLinks();
    if (f > g) {
      return -1;
    }
    if (f < g) {
      return 1;
    }
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.getNumberOfSuboptimalLinks(): " + b.getNumberOfSuboptimalLinks());
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p2.getNumberOfSuboptimalLinks(): " + d.getNumberOfSuboptimalLinks());
    f = b.getNumberOfSuboptimalLinks();
    g = d.getNumberOfSuboptimalLinks();
    if (f < g) {
      return -1;
    }
    if (f > g) {
      return 1;
    }
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.getNumberOfPreferredLinks(): " + b.getNumberOfPreferredLinks());
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p2.getNumberOfPreferredLinks(): " + d.getNumberOfPreferredLinks());
    f = b.getNumberOfPreferredLinks();
    g = d.getNumberOfPreferredLinks();
    if (f > g) {
      return -1;
    }
    if (f < g) {
      return 1;
    }
    f = b.getLinks().size;
    g = d.getLinks().size;
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.getLinks().size: " + f);
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in compare p1.getLinks().size: " + g);
    if (f < g) {
      return -1;
    }
    if (f > g) {
      return 1;
    }
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e out of comapre, about to call breakByLowerLinkID");
    return a.breakByLowerLinkID(b, d);
  };
  this.breakByLowerLinkID = function(b, d) {
    a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID");
    var f = b.getSortedLinks(), g = d.getSortedLinks(), c = null, e = null, h = 0, k = 0;
    do {
      a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID in do while"), k >= f.length ? (a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID path 1 is shorter"), h = -1) : k >= g.length ? (a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID path 2 is shorter"), h = 1) : (a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID path are same, compare IDS"), c = f[k], e = g[k]), k++;
    } while (0 === h && c.getUniqueID() === e.getUniqueID());
    0 === h && (a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID result is zero: " + c.getUniqueID()), a.ctatdebug("CTATExampleTracerPathComparator --\x3e in breakByLowerLinkID result is zero: " + e.getUniqueID()), h = c.getUniqueID() < e.getUniqueID() ? -1 : 1);
    return h;
  };
};
CTATExampleTracerPathComparator.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerPathComparator.prototype.constructor = CTATExampleTracerPathComparator;
"undefined" !== typeof module && (module.exports = CTATExampleTracerPathComparator);
var CTATExampleTracerPath = function(a) {
  CTATBase.call(this, "CTATExampleTracerPath", "");
  var b = new Set;
  "undefined" !== typeof a && null !== a && a.forEach(function(a) {
    ctatdebug("CTATExampleTracerPath --\x3e in constructor building links with " + a);
    b.add(a);
  });
  var d = null, f = null, g = null, c = null, e = null, h = null, k = this;
  this.isIncorrectPath = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in isIncorrectPath");
    if (null !== h && "undefined" !== typeof h) {
      return h;
    }
    var a = !1;
    k.getLinks().forEach(function(b) {
      !0 !== a && b.getType().toString() === CTATExampleTracerLink.BUGGY_ACTION.toString() && (a = h = !0);
    });
    if (!0 === a) {
      return !0;
    }
    h = !1;
    ctatdebug("CTATExampleTracerPath --\x3e out of isIncorrectPath");
    return !1;
  };
  this.getNumberOfSuboptimalLinks = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in getNumberOfSuboptimalLinks");
    k.getSortedLinks();
    if (null !== c && "undefined" !== typeof c) {
      return c;
    }
    var a = 0;
    k.getLinks().forEach(function(b) {
      CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString() === b.getType().toString() && a++;
    });
    c = a;
    ctatdebug("CTATExampleTracerPath --\x3e out of getNumberOfSuboptimalLinks");
    return a;
  };
  this.getNumberOfPreferredPrefixLinks = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in getNumberOfPreferredPrefixLinks");
    if (null !== f && "undefined" !== typeof f) {
      return f;
    }
    var a = 0, b = !1;
    k.getSortedLinks().forEach(function(c) {
      !0 !== b && (!0 === c.getIsPreferredLink() ? a++ : b = !0);
    });
    f = a;
    ctatdebug("CTATExampleTracerPath --\x3e out of getNumberOfPreferredPrefixLinks");
    return a;
  };
  this.size = function() {
    return b.size;
  };
  this.containsAll = function(a) {
    var b = !0;
    if (a) {
      for (var c = 0;b && c < a.length;++c) {
        b = k.getLinks().has(a[c]);
      }
    }
    k.ctatdebug("CTATExampleTracerPath containsAll(testLinks.length " + a.length + ") returning " + b);
    return b;
  };
  this.getLinksRestricted = function(a) {
    ctatdebug("CTATExampleTracerPath --\x3e in getLinksRestricted");
    var c = CTATExampleTracerPath.getDeepestLink(a), d = new Set;
    b.forEach(function(a) {
      a.getDepth() <= c.getDepth() && d.add(a);
    });
    ctatdebug("CTATExampleTracerPath --\x3e out of getLinksRestricted");
    return d;
  };
  this.getLinks = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in getLinks");
    return b;
  };
  this.getSortedLinks = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in getSortedLinks that.getLinks(): " + k.getLinks());
    d = [];
    k.getLinks().forEach(function(a) {
      d.push(a);
    });
    ctatdebug("CTATExampleTracerPath --\x3e in getSortedLinks sortedLinks.length(): " + d.length);
    d.sort(function(a, b) {
      return a.getDepth() - b.getDepth();
    });
    ctatdebug("CTATExampleTracerPath --\x3e out of getSortedLinks, returning " + d);
    return d;
  };
  this.isDonePath = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in isDonePath");
    if (null !== e && "undefined" !== typeof e) {
      return e;
    }
    var a = !1;
    k.getLinks().forEach(function(b) {
      !0 !== a && !0 === b.isDone() && (a = e = !0);
    });
    if (!0 === a) {
      return !0;
    }
    e = !1;
    ctatdebug("CTATExampleTracerPath --\x3e out of isDonePath");
    return !1;
  };
  this.addLink = function(a) {
    ctatdebug("CTATExampleTracerPath --\x3e in addLink (" + a + ")");
    b.add(a);
    h = e = c = g = f = d = null;
    ctatdebug("CTATExampleTracerPath --\x3e out of addLink");
  };
  this.getNumberOfPreferredLinks = function() {
    ctatdebug("CTATExampleTracerPath --\x3e in getNumberOfPreferredLinks");
    if (null !== g && "undefined" !== typeof g) {
      return g;
    }
    var a = 0;
    k.getLinks().forEach(function(b) {
      !0 === b.getIsPreferredLink() && a++;
    });
    g = a;
    ctatdebug("CTATExampleTracerPath --\x3e out of getNumberOfPreferredLinks");
    return a;
  };
  this.subpath = function(a) {
    for (var b = new CTATExampleTracerPath, c = k.getSortedLinks(), d = 0;d < c.length;++d) {
      if (b.addLink(c[d]), c[d].getNextNode() == a.getNodeID()) {
        return b;
      }
    }
    return null;
  };
  this.toString = function() {
    var a = "CTATExampleTracerPath: links";
    k.getSortedLinks().forEach(function(b) {
      a += " " + b;
    });
    return a;
  };
  CTATExampleTracerPath.getDeepestLink = function(a) {
    ctatdebug("CTATExampleTracerPath --\x3e in getDeepestLink");
    var b = null;
    a.forEach(function(a) {
      if (null === b || "undefined" === typeof b || b.getDepth() < a.getDepth()) {
        b = a;
      }
    });
    ctatdebug("CTATExampleTracerPath --\x3e out of getDeepestLink");
    return b;
  };
  CTATExampleTracerPath.getBestPath = function(a) {
    ctatdebug("CTATExampleTracerPath --\x3e in getBestPath");
    var b = null, c = new CTATExampleTracerPathComparator;
    a.forEach(function(a) {
      ctatdebug("CTATExampleTracerPath --\x3e in getBestPath loop");
      if (null === b || "undefined" === typeof b || 0 < c.compare(b, a)) {
        b = a;
      }
    });
    ctatdebug("CTATExampleTracerPath --\x3e out of getBestPath");
    return b;
  };
};
CTATExampleTracerPath.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerPath.prototype.constructor = CTATExampleTracerPath;
"undefined" !== typeof module && (module.exports = CTATExampleTracerPath);
var CTATRangeMatcher = function(a, b) {
  CTATSingleMatcher.call(this, a, !0);
  var d = 0, f = 0;
  this.toString = function() {
    return "[ " + d + " , " + f + " ]";
  };
  this.setMinimum = function(a) {
    try {
      d = parseFloat(a);
    } catch (b) {
      throw new CTATExampleTracerException('Number format exception while parsing minimum value "' + a + '": ' + b);
    }
  };
  this.setMaximum = function(a) {
    try {
      f = parseFloat(a);
    } catch (b) {
      throw new CTATExampleTracerException('Number format exception while parsing maximum value "' + a + '": ' + b);
    }
  };
  this.matchSingle = function(a) {
    var b;
    try {
      b = parseFloat(a);
    } catch (e) {
      throw new CTATExampleTracerException("Number format exception while parsing .");
    }
    return d <= b && b <= f ? !0 : !1;
  };
};
CTATRangeMatcher.prototype = Object.create(CTATSingleMatcher.prototype);
CTATRangeMatcher.prototype.constructor = CTATRangeMatcher;
CTATRangeMatcher.prototype.setParameter = function(a, b) {
  switch((b ? b : "").toString().trim().toLowerCase()) {
    case "minimum":
      this.setMinimum(a);
      break;
    case "maximum":
      this.setMaximum(a);
      break;
    default:
      console.log('CTATRangeMatcher.setParameter() undefined parameter name "' + b + '"'), this.setMinimum(a), this.setMaximum(a);
  }
};
CTATRangeMatcher.prototype.match = function(a, b, d, f) {
  return this.matchSingle(a, b, d, f);
};
"undefined" !== typeof module && (module.exports = CTATRangeMatcher);
var CTATMatcherComparator = function() {
  CTATBase.call(this, "CTATMatcherComparator", "");
  CTATMatcherComparator.compare = function(a, b) {
    ctatdebug("CTATMatcherComparator--\x3e in compare");
    var d = CTATMatcherComparator.compareBasedOnType(a, b);
    if (0 !== d || !1 === a instanceof CTATVectorMatcher && !1 === b instanceof CTATVectorMatcher) {
      return d;
    }
    d = CTATMatcherComparator.compareBasedOnType(a.getSingleMatcher("input"), b.getSingleMatcher("input"));
    if (0 !== d) {
      return d;
    }
    d = CTATMatcherComparator.compareBasedOnType(a.getSingleMatcher("selection"), b.getSingleMatcher("selection"));
    return 0 !== d ? d : CTATMatcherComparator.compareBasedOnType(a.getSingleMatcher("action"), b.getSingleMatcher("action"));
  };
  CTATMatcherComparator.compareBasedOnType = function(a, b) {
    ctatdebug("CTATMatcherComparator --\x3e in compareBasedOnType");
    for (var d in CTATMatcherComparator.matcherPrecedenceOrder) {
      if (CTATMatcherComparator.matcherPrecedenceOrder.hasOwnProperty(d) && a instanceof CTATMatcherComparator.matcherPrecedenceOrder[d]) {
        break;
      }
    }
    for (var f in CTATMatcherComparator.matcherPrecedenceOrder) {
      if (CTATMatcherComparator.matcherPrecedenceOrder.hasOwnProperty(f) && b instanceof CTATMatcherComparator.matcherPrecedenceOrder[f]) {
        break;
      }
    }
    return d < f ? 1 : d > f ? -1 : 0;
  };
};
Object.defineProperty(CTATMatcherComparator, "matcherPrecedenceOrder", {enumerable:!1, configurable:!1, writable:!1, value:{0:CTATExactMatcher, 1:CTATRangeMatcher, 2:CTATExpressionMatcher, 3:CTATWildcardMatcher, 4:CTATRegexMatcher, 5:CTATAnyMatcher}});
CTATMatcherComparator.prototype = Object.create(CTATBase.prototype);
CTATMatcherComparator.prototype.constructor = CTATMatcherComparator;
"undefined" !== typeof module && (module.exports = CTATMatcherComparator);
new CTATMatcherComparator;
var CTATExampleTracerLinkComparator = function(a, b) {
  CTATBase.call(this, "CTATExampleTracerLinkComparator", "");
  this.compare = function(d, f) {
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l1.getUniqueID(): " + d.getUniqueID());
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l2.getUniqueID(): " + f.getUniqueID());
    var g = d.getType(), c = f.getType(), g = CTATExampleTracerLink.compareLinkTypes(g, c);
    if (0 !== g) {
      return ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare m: " + g), g;
    }
    g = b.nonEmptyHints(d, a.getVariableTable());
    c = b.nonEmptyHints(f, a.getVariableTable());
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare h1, h2: " + g + ", " + c);
    if (0 < g && 0 >= c) {
      return -1;
    }
    if (0 >= g && 0 < c) {
      return 1;
    }
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l1.getDepth(), l2.getDepth(): " + d.getDepth() + ", " + f.getDepth());
    if (d.getDepth() < f.getDepth()) {
      return -1;
    }
    if (d.getDepth() > f.getDepth()) {
      return 1;
    }
    g = a.getTraversalCount(d) - d.getMinTraversals();
    c = a.getTraversalCount(f) - f.getMinTraversals();
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare tc1, tc2: " + g + ", " + c);
    if (0 > g && 0 <= c) {
      return -1;
    }
    if (0 <= g && 0 > c) {
      return 1;
    }
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l1.getIsPreferredLink(): " + d.getIsPreferredLink());
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l2.getIsPreferredLink(): " + f.getIsPreferredLink());
    if (d.getIsPreferredLink()) {
      return -1;
    }
    if (f.getIsPreferredLink()) {
      return 1;
    }
    if (0 !== (g = CTATMatcherComparator.compare(d.getMatcher(), f.getMatcher()))) {
      return g;
    }
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l1.getUniqueID(): " + d.getUniqueID());
    ctatdebug("CTATExampleTracerLinkComparator --\x3e in compare l2.getUniqueID(): " + f.getUniqueID());
    return d.getUniqueID() < f.getUniqueID() ? -1 : 1;
  };
};
CTATExampleTracerLinkComparator.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerLinkComparator.prototype.constructor = CTATExampleTracerLinkComparator;
"undefined" !== typeof module && (module.exports = CTATExampleTracerLinkComparator);
var CTATExampleTracerInterpretation = function(a) {
  CTATBase.call(this, "CTATExampleTracerInterpretation", "");
  var b = [], d = {}, f = new CTATVariableTable, g = new Set;
  a.forEach(function(a) {
    g.add(a);
  });
  var c = CTATExampleTracerLink.CORRECT_ACTION, e = null, h = this;
  this.getVariableTable = function() {
    return f;
  };
  this.setVariableTable = function(a) {
    f = a;
  };
  this.getTraversalCount = function(a) {
    a = d[a.getUniqueID()];
    return "undefined" === typeof a || null === a ? 0 : a[0];
  };
  this.getPaths = function() {
    return g;
  };
  this.clone = function() {
    var a = new CTATExampleTracerInterpretation(g);
    a.addTraversedLinks(b);
    for (var h in d) {
      d.hasOwnProperty(h) && a.putInlinkIdTraversalCountMap(h, d[h].slice());
    }
    a.setWorstLinkType(c);
    h = f.clone();
    a.setVariableTable(h);
    e && a.setPathToDone(new CTATExampleTracerPath(e.getLinks()));
    ctatdebug("CTATExampleTracerInterpretation --\x3e out of clone");
    return a;
  };
  this.addTraversedLinks = function(a) {
    b = b.concat(a);
  };
  this.putInlinkIdTraversalCountMap = function(a, b) {
    ctatdebug("CTATExampleTracerInterpretation --\x3e in putInlinkIdTraversalCountMap");
    ctatdebug("CTATExampleTracerInterpretation --\x3e in putInlinkIdTraversalCountMap key: " + a);
    ctatdebug("CTATExampleTracerInterpretation --\x3e in putInlinkIdTraversalCountMap value: " + b);
    d[a] = b;
  };
  this.setWorstLinkType = function(a) {
    c = a;
  };
  this.addLink = function(a) {
    !a.isTraversable() || e && e.getLinks().has(a) || (e = null);
    ctatdebug("CTATExampleTracerInterpretation.addLink(" + (a && a.getUniqueID()) + ") pathToDone " + (e && e.size()));
    b.push(a);
    var f = a.getMatcher(), f = null === f || "undefined" === typeof f ? 1 : f.getTraversalIncrement(), g = d[a.getUniqueID()];
    null !== g && "undefined" !== typeof g ? g[0] += f : (g = [], g.push(f), d[a.getUniqueID()] = g);
    a = a.getType();
    0 > CTATExampleTracerLink.compareLinkTypes(c, a) && (c = a);
  };
  this.setPathToDone = function(a) {
    e = a;
  };
  this.getPathToDone = function(a) {
    if (e) {
      return e;
    }
    var c = a.getStartNode();
    c && a.getDoneStates().forEach(function(d) {
      e || (e = a.getBestSubpath(c, d, b));
    });
    return e;
  };
  this.countStepsForScore = function(a) {
    var b = Number.MAX_VALUE;
    (a = h.getPathToDone(a)) && a.getLinks() && (b = 0, a.getLinks().forEach(function(a) {
      if (!CTATMatcher.isTutorActor(a.getActor(), !0)) {
        var c = h.getTraversalCount(a);
        a = a.getMinTraversals();
        b = c > a ? b + c : b + a;
      }
    }));
    return b;
  };
  this.updateVariableTable = function(a, b, c) {
    var d = a, e = a.getInput();
    null !== b && "undefined" !== typeof b && (e = b, d = new CTATSAI(a.getSelection(), a.getAction(), e));
    f.put("link" + c.getUniqueID() + ".selection", a.getSelection());
    f.put("link" + c.getUniqueID() + ".action", a.getAction());
    b = "link" + c.getUniqueID() + ".input";
    f.put(b, e);
    f.put(CTATVariableTable.nameAsString(e), CTATVariableTable.valueAsString(e));
    if (CTATExampleTracerLink.CORRECT_ACTION.toString().toUpperCase() === c.getActionType().toString().toUpperCase() || CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString().toUpperCase() === c.getActionType().toString().toUpperCase()) {
      a = a.getSelection(), null !== a && "undefined" !== typeof a && 0 < a.length && f.put(a, e);
    }
    return d;
  };
  this.getLastMatchedLink = function() {
    return 0 === b.length ? null : b[b.length - 1];
  };
  this.getMatchedLinks = function() {
    return b;
  };
  this.getType = function() {
    return c;
  };
  this.isTraversed = function(a, b) {
    ctatdebug("CTATExampleTracerInterpretation --\x3e in isTraversed: " + a.getUniqueID());
    var c = d[a.getUniqueID()];
    if (null === c || "undefined" === typeof c) {
      return ctatdebug("CTATExampleTracerInterpretation --\x3e in isTraversed in if condition (traversalCount === null): " + (null === c)), ctatdebug("CTATExampleTracerInterpretation --\x3e in isTraversed in if condition (typeof(traversalCount) === 'undefined'): " + ("undefined" === typeof c)), !0 === b ? 0 >= a.getMinTraversals() : !1;
    }
    ctatdebug("CTATExampleTracerInterpretation --\x3e in isTraversed out of if condition traversalCount[0]: " + c[0]);
    ctatdebug("CTATExampleTracerInterpretation --\x3e in isTraversed out of if condition link.getMinTraversals(): " + a.getMinTraversals());
    return c[0] >= a.getMinTraversals();
  };
  this.toString = function() {
    var a = "{";
    b.forEach(function(b) {
      a += b.getUniqueID() + ", ";
    });
    a.substring(a.length - 2, a.length).toString() === ", ".toString() && (a = a.substring(0, a.length - 2));
    a += " (" + (null === g || "undefined" === typeof g ? -1 : g.size) + " paths)";
    a += " var tbl " + f;
    return a += "}";
  };
};
CTATExampleTracerInterpretation.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerInterpretation.prototype.constructor = CTATExampleTracerInterpretation;
"undefined" !== typeof module && (module.exports = CTATExampleTracerInterpretation);
var CTATExampleTracerInterpretationComparator = function() {
  CTATBase.call(this, "CTATExampleTracerInterpretationComparator", "");
  var a = this;
  this.compare = function(b, d) {
    a.ctatdebug("CTATExampleTracerInterpretationComparator --\x3e in compare");
    var f = b.getType(), g = CTATExampleTracerLink.compareLinkTypes(f, d.getType());
    ctatdebug("CTATExampleTracerInterpretationComparator comparing i1Type: " + b.getType());
    ctatdebug("CTATExampleTracerInterpretationComparator comparing i2Type: " + d.getType());
    ctatdebug("CTATExampleTracerInterpretationComparator comparing link types result: " + g);
    if (0 !== g) {
      return ctatdebug("CTATExampleTracerInterpretationComparator result is not equal to 0"), 0 > g ? 1 : -1;
    }
    if (CTATExampleTracerLink.BUGGY_ACTION.toString().toUpperCase() === f.toString().toUpperCase() && (ctatdebug("CTATExampleTracerInterpretationComparator checking for buggy actions"), f = b.getLastMatchedLink(), g = d.getLastMatchedLink(), f = CTATMatcherComparator.compare(f.getMatcher(), g.getMatcher()), 0 !== f)) {
      return f;
    }
    var g = CTATExampleTracerPath.getBestPath(b.getPaths()), f = CTATExampleTracerPath.getBestPath(d.getPaths()), c = new Set;
    c.add(g);
    c.add(f);
    g = CTATExampleTracerPath.getBestPath(c);
    ctatdebug("CTATExampleTracerInterpretationComparator found best path: " + (g === f));
    g.getLinks().forEach(function(b) {
      a.ctatdebug("My best link==: " + b.getUniqueID());
    });
    return g === f ? -1 : 1;
  };
};
CTATExampleTracerInterpretationComparator.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerInterpretationComparator.prototype.constructor = CTATExampleTracerInterpretationComparator;
"undefined" !== typeof module && (module.exports = CTATExampleTracerInterpretationComparator);
var CTATExampleTracerEvent = function(a, b, d) {
  CTATBase.call(this, "CTATExampleTracerEvent", b ? b.toString() : "null");
  var f = "", g = !1, c = CTATExampleTracerLink.NO_MODEL, e = !1, h = null, k = null, l = "student", q = null, p = null, m = "", w = null, t = null, z = null, y = null, r = null, A = [], E = !1, G = null, F = null, x = this;
  this.getActor = function() {
    return l;
  };
  this.setActor = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e setActor(" + a + ")");
    l = a;
  };
  this.getStudentSAI = function() {
    x.ctatdebug("CTATExampleTracerEvent.getStudentSAI() returning type " + typeof h + ", value " + h);
    return h;
  };
  this.setStudentSAI = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setStudentSAI(" + a + ")");
    null !== a && "undefined" !== typeof a && (h = a);
    x.ctatdebug("CTATExampleTracerEvent --\x3e out of setStudentSAI");
  };
  this.getPreloadedLinkMatches = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getPreloadedLinkMatches");
    return t;
  };
  this.setTutorSAI = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setTutorSAI");
    null !== a && "undefined" !== typeof a && (k = a);
    x.ctatdebug("CTATExampleTracerEvent --\x3e out of setTutorSAI");
  };
  this.setNumberOfInterpretations = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setNumberOfInterpretations( " + a + " )");
  };
  this.getTransactionID = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getTransactionID() returning " + f);
    return f;
  };
  this.setTransactionID = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setTransactionID( " + a + " )");
    f = a;
  };
  this.setDoneStepFailed = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setDoneStepFailed( " + a + " )");
    g = a;
  };
  this.setHintRequest = function(a) {
    e = a;
  };
  this.getHintRequest = function() {
    return e;
  };
  this.setResult = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setResult( " + a + " )");
    c = a;
  };
  this.isSolverResult = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in isSolverResult");
    return !1;
  };
  this.getResult = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getResult() returning " + c);
    return c;
  };
  this.setReportableLink = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setReportableLink(" + a + ")");
    q = a;
  };
  this.setReportableInterpretation = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setReportableInterpretation(" + a + ")");
    p = a;
  };
  this.setStepID = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setStepID(" + a + ")");
    m = a ? a.toString() : "";
  };
  this.setReportableVariableTable = function(a) {
    y = a.clone();
  };
  this.setSuccessOrBuggyMsg = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setSuccessOrBuggyMsg(" + a + ")");
    r = a;
  };
  this.setReportableHints = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setReportableHints(" + a + ")");
    A = Array.isArray(a) && 0 < a.length ? a : [];
  };
  this.getWantReportableHints = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getWantReportableHints() returning " + E);
    return E;
  };
  this.setOutOfOrder = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setOutOfOrder(" + a + ")");
    w = a;
  };
  this.isOutOfOrder = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getOutOfOrder() returning " + w);
    return w;
  };
  this.setEvaluatedInput = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setEvaluatedInput(" + a + ")");
    if (null === z || "undefined" === typeof z) {
      z = [];
    }
    z.push(a);
  };
  this.addPreloadedLinkMatch = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in addPreloadedLinkMatch(" + a + ")");
    if (null === t || "undefined" === typeof t) {
      t = [];
    }
    t.push(a);
  };
  this.setInterpolatedSAI = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setInterpolatedSAI(" + a + ")");
    a && (G = a);
  };
  this.getInterpolatedSAI = function() {
    return G ? G : x.getStudentSAI();
  };
  this.setInterpolatedHints = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setInterpolatedHints(" + a + ")");
    null !== F && "undefined" !== typeof F && (F.length = 0);
    null !== a && "undefined" !== typeof a && (F = a.slice(0));
    x.ctatdebug("CTATExampleTracerEvent --\x3e out of setInterpolatedHints");
  };
  this.setWantReportableHints = function(a) {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in setWantReportableHints(" + a + ")");
    E = a;
  };
  this.getSuccessOrBuggyMsg = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getSuccessOrBuggyMsg() returning " + r);
    return r;
  };
  this.getReportableHints = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getReportableHints() returning " + A);
    return A;
  };
  this.getReportableLink = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getReportableLink() returning " + q);
    return q;
  };
  this.getReportableVariableTable = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getReportableVariableTable() returning " + y);
    return y;
  };
  this.getReportableInterpretation = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getReportableInterpretation() returning " + p);
    return p;
  };
  this.getStepID = function() {
    x.ctatdebug("CTATExampleTracerEvent --\x3e in getStepID() returning " + m);
    return m;
  };
  this.getTutorSelection = function() {
    return null === k || "undefined" === typeof k ? null : k.getSelectionArray();
  };
  this.getTutorAction = function() {
    return null === k || "undefined" === typeof k ? null : k.getActionArray();
  };
  this.getTutorInput = function() {
    return null !== z && "undefined" !== typeof z ? x.getEvaluatedInputArray() : null !== k && "undefined" !== typeof k ? k.getInputArray() : null;
  };
  this.getEvaluatedInputArray = function() {
    return z;
  };
  this.toString = function() {
    var a;
    a = "[" + x.getResult();
    null !== x.getStudentSAI() && "undefined" !== typeof x.getStudentSAI() && (a += ", StudentSAI " + x.getStudentSAI());
    null !== x.getReportableLink() && "undefined" !== typeof x.getReportableLink() && (a += ", reportableLink " + x.getReportableLink());
    !0 === x.isDoneStepFailed() && (a += ", doneStepFailed");
    null !== x.getTutorSAI() && "undefined" !== typeof x.getTutorSAI() && (a += ", TutorSAI " + x.getTutorSAI());
    return a + "]";
  };
  this.isDoneStepFailed = function() {
    return g;
  };
  this.getTutorSAI = function() {
    return k;
  };
  this.setStudentSAI(b);
  this.setActor(d);
};
CTATExampleTracerEvent.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerEvent.prototype.constructor = CTATExampleTracerEvent;
"undefined" !== typeof module && (module.exports = CTATExampleTracerEvent);
var CTATExampleTracerTracer_count = 0, CTATExampleTracerTracer = function(a, b) {
  function d(a, b, c) {
    if (!a) {
      return a;
    }
    b = new CTATFormulaParser(b);
    u.ctatdebug("CTATETT.interpolate(" + a + ",vt," + c + ")");
    var d = c.getSelection(), e = c.getAction();
    c = c.getInput();
    c = CTATVariableTable.standardizeType(c);
    u.ctatdebug("CTATETT.interpolate() calling CTATFP.interpolate(" + a + ", " + d + ", " + e + ", " + c);
    a = b.interpolate(a, d, e, c);
    u.ctatdebug("CTATETT.interpolate() returning " + a);
    return a;
  }
  function f(a, b, c, e, f, g) {
    null == e && (e = f.getLastMatchedLink());
    if (b) {
      u.ctatdebug("finishEvaluate -- in if Branch doUpdate()");
      E.push(a.getStudentSAI());
      e != f.getLastMatchedLink() && (f.addLink(e), a.setResult(e.getActionType()));
      if (c.toString() === CTATExampleTracerLink.CORRECT_ACTION.toString() || c.toString() === CTATExampleTracerLink.FIREABLE_BUGGY_ACTION.toString()) {
        u.ctatdebug("In evaluate -- in first branch doUpdate()");
        g.forEach(function(a) {
          a.getLastMatchedLink().getType().toString() === CTATExampleTracerLink.BUGGY_ACTION.toString() && (u.ctatdebug("In evaluate -- deleting an incorrect interp"), g["delete"](a));
        });
        u.ctatdebug("In evaluate -- to call setInterpretations(), if 0 < newInterps.size " + g.size);
        0 < g.size && p(g);
        for (var h in A) {
          A.hasOwnProperty(h) && delete A[h];
        }
        u.ctatdebug("In evaluate -- out of DoUpdate if branch");
      } else {
        u.ctatdebug("In evaluate -- in else branch of doUpdate");
        a.setNumberOfInterpretations(0);
        for (var k in A) {
          A.hasOwnProperty(k) && delete A[k];
        }
        g.forEach(function(a) {
          A[a.getLastMatchedLink().getUniqueID()] = a.getLastMatchedLink();
        });
      }
      c.toString() === CTATExampleTracerLink.BUGGY_ACTION.toString() && E.splice(E.length - 1, 1);
    }
    a.isSolverResult() || (u.ctatdebug("In evaluate inside the solver result if condition + " + c), a.setResult(c));
    u.ctatdebug("In evaluate out the solver result if condition");
    a.setReportableLink(e);
    a.setReportableInterpretation(f);
    a.setReportableVariableTable(f.getVariableTable());
    a.getHintRequest() || (b = e.getTutorSAI(a.getInterpolatedSAI(), f.getVariableTable()), u.ctatdebug("In evaluate -- TUTORSAI: " + b + ", studentSAI was " + a.getStudentSAI()), a.setTutorSAI(b));
    b = c == CTATExampleTracerLink.CORRECT_ACTION ? e.getSuccessMsg() : e.getBuggyMsg();
    a.setSuccessOrBuggyMsg(d(b, f.getVariableTable(), a.getStudentSAI()));
    a.getHintRequest() && (f = e.interpolateHints(f.getVariableTable()), a.setInterpolatedHints(f), u.ctatdebug("In evaluate after calling setInterpolatedHints"), Array.isArray(f) && 0 < f.length ? a.setReportableHints(f) : a.setReportableHints(e.getHints()), u.ctatdebug("In evaluate --\x3e after setReportableHints"));
    u.ctatdebug("In evaluate after fireExampleTracerEvent");
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of finishEvaluate");
    return c.toString() !== CTATExampleTracerLink.BUGGY_ACTION.toString();
  }
  function g(a, b, c, d) {
    u.ctatdebug("checkDoneStep() hintTrace " + b + ", sai " + a.getStudentSAI() + ", exitOnIncorrectDone " + G.exitOnIncorrectDone() + ", hideButRequireSteps " + G.hideButRequireSteps() + ", nInterps " + d.size);
    if (!a.getStudentSAI().isDone()) {
      return null;
    }
    if (G.exitOnIncorrectDone()) {
      return a.setDoneStepFailed(!1), null;
    }
    if (!b && G.hideButRequireSteps()) {
      b = G.getDoneLinks();
      u.ctatdebug("checkDoneStep getDoneLinks().size " + b.size);
      b = b.values();
      for (var e;!(e = b.next()).done;) {
        if (G.pathToLinkIsSubset(e.value, H)) {
          return a.setDoneStepFailed(!1), 1 > d.size ? f(a, c, CTATExampleTracerLink.CORRECT_ACTION, e.value, u.getBestInterpretation(), u.getInterpretationsInternal()) : f(a, c, CTATExampleTracerLink.CORRECT_ACTION, e.value, q(d), d);
        }
      }
    }
    1 > d.size && a.setDoneStepFailed(!0);
    return null;
  }
  function c(a, b, c) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e _evaluate(" + a + ", " + b + ", " + c + ")");
    F = a;
    var d = new Set, m = a.getPreloadedLinkMatches();
    u.ctatdebug("interps # : " + r.length);
    u.ctatdebug("interps: " + r);
    r.forEach(function(f) {
      u.ctatdebug("In evaluate -- entered the interpretations loop");
      if ("undefined" === typeof m || null === m) {
        u.ctatdebug("In evaluate -- entered if check for saiLinkMatches"), m = h(a.getStudentSAI(), a.getActor(), b, f.getVariableTable(), a), u.ctatdebug("In evaluate -- exiting if check for saiLinkMatches");
      } else {
        for (var g = 0;g < m.length;++g) {
          e(a.getStudentSAI(), !0, m[g], m[g].getActor(), f.getVariableTable());
        }
      }
      u.ctatdebug("Link matches # : " + m.length);
      m.forEach(function(b) {
        u.ctatdebug("In evaluate -- entered the saiLinkMatches loop + " + b);
        if (f.getTraversalCount(b) >= b.getMaxTraversals()) {
          return u.ctatdebug("In evaluate -- skipped a saiLinkMatches loop \n Skipped due to max traversals" + b.getMaxTraversals()), !1;
        }
        var e = f.clone();
        u.ctatdebug("In evaluate size of getPaths " + e.getPaths().size);
        e.getPaths().forEach(function(c) {
          u.ctatdebug("In evaluate -- looping through the newInterp.getPaths()\n Examining path: " + c);
          !1 === k(b, e, c, !1, a) && (u.ctatdebug("In evaluate -- in if condition, checking if isPathOK"), e.getPaths()["delete"](c), u.ctatdebug("In evaluate -- out of if condition, checking if isPathOK\n Tried to delete path."));
        });
        u.ctatdebug("In evaluate -- done looping through the newInterp.getPaths(), size " + e.getPaths().size);
        if (0 < e.getPaths().size) {
          u.ctatdebug("In evaluate -- if number of paths is greater than 0");
          e.addLink(b);
          u.ctatdebug("In evaluate -- new link added");
          if (!0 === c) {
            u.ctatdebug("In evaluate -- we are in the doUpdate if condition");
            var g = l(b, a.getStudentSAI(), e);
            u.ctatdebug("In evaluate -- updatingVariable table");
            a.setInterpolatedSAI(e.updateVariableTable(a.getStudentSAI(), g, b));
            u.ctatdebug("In evaluate -- done updatingVariable table: " + e.getVariableTable());
          }
          d.add(e);
          u.ctatdebug("In evaluate -- added new interp");
        }
        u.ctatdebug("In evaluate -- out of saiLinkMatches loop");
      });
      u.ctatdebug("In evaluate -- out of interpretation loops");
    });
    a.setNumberOfInterpretations(d.size);
    u.ctatdebug("In evaluate -- number of interpretations " + d.size + " set");
    var p = g(a, b, c, d);
    if (null != p) {
      return p.valueOf();
    }
    if (0 === d.size) {
      return u.ctatdebug("In evaluate -- if condition no new interpretations"), 0 !== m.length && !0 === m[0].isDone() && a.setDoneStepFailed(!0), a.setResult(CTATExampleTracerLink.NO_MODEL), u.ctatdebug("In evaluate -- if condition no new interpretations returning false"), !1;
    }
    p = q(d);
    u.ctatdebug("In evaluate -- just found bestInterp");
    var t = null;
    !0 === a.isSolverResult() ? (u.ctatdebug("In evaluate -- in if branch of isSolverResult"), t = CTATExampleTracerLink.NO_MODEL.toString().toUpperCase() === a.getResult().toString().toUpperCase() ? CTATExampleTracerLink.BUGGY_ACTION.toString() : a.getResult().toString()) : (u.ctatdebug("In evaluate -- in else branch of isSolverResult"), t = p.getLastMatchedLink().getType());
    return f(a, c, t, null, p, d);
  }
  function e(a, b, c, d, e) {
    var f = b && c.isCorrect();
    if ("undefined" != typeof H[c.getUniqueID()] || c.matchesSAIforHint(a, d, null, e)) {
      H[c.getUniqueID()] = f;
    }
    u.ctatdebug("updateMatchedSelections(): link " + c.getUniqueID() + ", matched " + b + ", newResult " + f + ", matchedSelections[link] " + H[c.getUniqueID()]);
  }
  function h(a, b, c, d, f) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in findSAIMatchingLinks(" + a + ", " + b + ", " + c + ")");
    var g = [];
    G.getLinks().forEach(function(h) {
      if (!1 === c) {
        u.ctatdebug("Calling link.matchesSAI() on link " + h + ", sai " + a);
        var k = h.matchesSAI(a, b, d);
        u.ctatdebug("Result from link.matchesSAI() on link " + h + ": " + k + ", typeof " + typeof k);
        !0 === k && g.push(h);
        G.hideButRequireSteps() && e(a, k, h, b, d);
      } else {
        !0 === h.matchesSAIforHint(a, b, f, d) && g.push(h);
      }
    });
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of findSAIMatchingLinks: #matchingLinks " + g.length);
    return g;
  }
  function k(a, b, c, d, e) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK");
    var f = null;
    if (!0 === d) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK in demonstrate mode");
      var g = b.getMatchedLinks().slice();
      g.push(a);
      f = c.getLinksRestricted(g);
    } else {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK NOT in demonstrate mode"), f = c.getLinks();
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK path.getLinks() " + c.getLinks().size);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK pathLinks " + f.size);
    if (!0 === d) {
      var h = [], k = !0;
      b.getMatchedLinks().forEach(function(a) {
        !1 !== k && (!1 === G.observesOrderingConstraints(h, a, f, e) || !1 === w(b, a, f) ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK returning false1"), k = !1) : h.push(a));
      });
      if (!1 === k) {
        return u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK returning false2"), !1;
      }
    }
    if (a.getType().toString() === CTATExampleTracerLink.BUGGY_ACTION.toString()) {
      if (!1 === G.isIncorrectLinkOK(b.getMatchedLinks(), a, f, b)) {
        return u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK returning false3"), !1;
      }
    } else {
      if (!1 === G.observesOrderingConstraints(b.getMatchedLinks(), a, f, e)) {
        return u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK returning false4"), !1;
      }
      if (!1 === w(b, a, f)) {
        return u.ctatdebug("CTATExampleTracerTracer --\x3e in isPathOK returning false5"), !1;
      }
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of isPathOK returning true");
    return !0;
  }
  function l(a, b, c) {
    u.ctatdebug("CTATExampleTracerTracer.replaceInput(" + a + ", " + b + ", ...)");
    if (null === a || "undefined" === typeof a || !1 === a.replaceInput()) {
      return u.ctatdebug("replaceInput false, returning null"), null;
    }
    a = a.evaluateReplacement(b, c.getVariableTable(), u);
    u.ctatdebug("CTATExampleTracerTracer.replaceInput() returning " + a);
    return a;
  }
  function q(a) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in findBestInterpretation");
    var b = new CTATExampleTracerInterpretationComparator, c = null;
    a.forEach(function(a) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in findBestInterpretation iteration");
      null === c || "undefined" === typeof c ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in findBestInterpretation first if condition"), c = a) : (u.ctatdebug("CTATExampleTracerTracer --\x3e in findBestInterpretation else of first if condition"), 0 < b.compare(a, c) && (u.ctatdebug("CTATExampleTracerTracer --\x3e in findBestInterpretation second if condition"), c = a));
    });
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of findBestInterpretation");
    return c;
  }
  function p(a) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in setInterpretations");
    r.length = 0;
    0 === a.size ? u.ctatdebug("CTATExampleTracerTracer --\x3e returning from setInterpretations") : (u.ctatdebug("CTATExampleTracerTracer --\x3e setInterpretations c.size: " + a.size), a.forEach(function(a) {
      r.push(a);
    }), x = null, u.ctatdebug("CTATExampleTracerTracer --\x3e out of setInterpretations"));
  }
  function m() {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getAllPaths");
    var a = G.findAllPaths();
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getAllPaths: #paths " + a.size);
    a.forEach(function(a) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getAllPaths loopring through paths");
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getAllPaths size of path" + a.getLinks().size);
    });
    return a;
  }
  function w(a, b, c) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in doneStepOK: link " + b + ", isDone() " + b.isDone());
    if (null === b || "undefined" === typeof b || !1 === b.isDone()) {
      return u.ctatdebug("doneStepOK in first if condition"), !0;
    }
    if (b.isDone() && G.exitOnIncorrectDone()) {
      return !0;
    }
    if (b.getType().toString() === CTATExampleTracerLink.BUGGY_ACTION.toString()) {
      return u.ctatdebug("doneStepOK in second if condition"), !0;
    }
    u.ctatdebug("doneStepOK before loop");
    var d = !0;
    c.forEach(function(c) {
      !1 === d ? u.ctatdebug("CTATExampleTracerTracer --\x3e we are breaking from the loop") : c.getUniqueID() === b.getUniqueID() ? u.ctatdebug("CTATExampleTracerTracer --\x3e inside second if condition") : a.getTraversalCount(c) < c.getMinTraversals() && (u.ctatdebug("CTATExampleTracerTracer --\x3e we should return false from the second if condition"), d = !1);
    });
    if (!1 === d) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e out of doneStepOK returning false"), !1;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of doneStepOK returning true");
    return !0;
  }
  function t(a, b) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink");
    var c = null !== b && "undefined" !== typeof b && null !== b[0] && "undefined" !== typeof b[0] ? b[0] : null;
    if (null === c || "undefined" === typeof c) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink first if condition"), c = u.getBestInterpretation();
    }
    null !== b && "undefined" !== typeof b && (b[0] = c);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink interp.getPaths(): " + c.getPaths().size);
    var d = CTATExampleTracerPath.getBestPath(c.getPaths());
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink path: " + d);
    var e = z(c, d, a, !1);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink highestLink: " + e);
    if (null !== e && "undefined" !== typeof e) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink returning highestLink"), e;
    }
    var f = null;
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink returning path.getLinks() " + d.getLinks().size);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink returning path.getSortedLinks() " + d.getSortedLinks());
    var g = !1, h = null;
    d.getSortedLinks().forEach(function(b) {
      !0 !== g && (u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink in for loop" + b), f = b, c.getTraversalCount(b) < b.getMaxTraversals() && (!1 === a || 0 < u.nonEmptyHints(b, c.getVariableTable())) && G.observesOrderingConstraints(c.getMatchedLinks(), b, d.getLinks(), null) && w(c, b, d.getLinks()) && (u.ctatdebug("CTATExampleTracerTracer --\x3e in _getBestNextLink in link: " + b), h = b, g = !0));
    });
    if (!0 === g) {
      return h;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of _getBestNextLink, returning: " + f);
    return null;
  }
  function z(a, b, c, d) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink");
    var e = new CTATExampleTracerEvent(u, null, CTATMsgType.DEFAULT_STUDENT_ACTOR), f = !0, g = [];
    b.getSortedLinks().forEach(function(b) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink in loop link.getUniqueID(): " + b.getUniqueID());
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink in loop interp.isTraversed(link, countOptionalAsTraversed): " + a.isTraversed(b, d));
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink in loop isNoOp(link): " + y(b));
      !0 === a.isTraversed(b, d) || !0 === y(b) ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink in if condition"), f = !0) : (!0 === f && (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink in second if condition"), G.getNode(b.getPrevNode()).getOutLinks().forEach(function(b) {
        c && 1 > u.nonEmptyHints(b, a.getVariableTable()) || a.getTraversalCount(b) >= b.getMaxTraversals() || (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink pushing outlink: " + b.getUniqueID()), g.push(b));
      })), f = null === b || "undefined" === typeof b ? !1 : b.getMinTraversals() <= a.getTraversalCount(b));
    });
    g.sort(function(b, c) {
      return (new CTATExampleTracerLinkComparator(a, u)).compare(b, c);
    });
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink before sorting");
    var h = !1, l = null;
    g.forEach(function(c) {
      !0 !== h && (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink after sorting in fro loop"), !0 === k(c, a, b, !1, e) ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink after sorting first if"), l = c, h = !0) : a.getPaths().forEach(function(d) {
        !0 !== h && (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink after sorting in inner loop"), b !== d && (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink after sorting second if"), !0 === k(c, a, d, !1, e) && (u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink after sorting third if"), l = c, h = !0)));
      }));
    });
    if (!0 === h) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e in getHighestUntraversedLink returning: " + l.getUniqueID()), l;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of getHighestUntraversedLink");
    return null;
  }
  function y(a) {
    return null === a || "undefined" === typeof a ? !1 : 1 > a.getMinTraversals() && 1 > a.getMaxTraversals();
  }
  CTATBase.call(this, "CTATExampleTracerTracer", a);
  var r = null, A = null, E = null, G = a, F = null;
  CTATExampleTracerTracer_count++;
  var x = null, H = {}, u = this;
  this.getMatchedSelections = function() {
    return H;
  };
  this.getLastResult = function() {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getResult");
    return F;
  };
  this.resetTracer = function() {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer entering");
    null === r || "undefined" === typeof r ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer making interpretations array"), r = []) : (u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer clearing interpretations array"), r.length = 0);
    var a = new CTATExampleTracerInterpretation(m());
    u.ctatdebug("CTATExampleTracerTracer tempInterp--\x3e in resetTracer tempInterp " + a);
    null !== b && "undefined" !== typeof b && (u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer startStateVT if condition"), a.setVariableTable(b));
    r.push(a);
    x = a;
    if (null === A || "undefined" === typeof A) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer incorrectActionMatches if condition"), A = {};
    } else {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer else branch of incorrectActionMatches if condition");
      for (var c in A) {
        A.hasOwnProperty(c) && delete A[c];
      }
    }
    H = {};
    null === E || "undefined" === typeof E ? (u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer last if condition"), E = []) : (u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer else branch of last if condition"), E.length = 0);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in resetTracer before iterating over all the links in the graphs");
    G.getLinks().forEach(function(a) {
      a.getMatcher().resetMatcher();
    });
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of resetTracer");
  };
  this.evaluate = function(a) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in public evaluate(), calling private _evaluate; given event " + a);
    return c(a, !1, !0);
  };
  this.nonEmptyHints = function(a, b) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in nonEmptyHints");
    if (null === a || "undefined" === typeof a) {
      return 0;
    }
    var c = a.interpolateHints(b);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in nonEmptyHints: link.interpolateHints() " + a.interpolateHints().length);
    if (null === c || "undefined" === typeof c || 1 > c.length) {
      return 0;
    }
    for (var d = 0, e = 0;e < c.length;++e) {
      0 < String(c[e]).trim().length && d++;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e returning from nonEmptyHints " + d);
    return d;
  };
  this.traceForHint = function(a) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in traceForHint");
    var b = c(a, !0, !1);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in traceForHint return from evaluate " + b);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in traceForHint result from evaluate " + a.getResult().toString());
    u.ctatdebug("CTATExampleTracerTracer --\x3e in traceForHint link   from evaluate " + a.getReportableLink());
    if (a.getResult().toString() === CTATExampleTracerLink.CORRECT_ACTION.toString()) {
      return b = a.getReportableLink(), a.setTutorSAI(new CTATSAI(a.getStudentSAI().getSelection(), b.getDefaultSAI().getAction(), b.getDefaultSAI().getInput())), a.setActor(CTATMsgType.DEFAULT_STUDENT_ACTOR), u.ctatdebug("CTATExampleTracerTracer --\x3e traceForHint returning hintLink " + b + ", result " + a), b;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of traceForHint, returning null");
    return null;
  };
  this.matchForHint = function(a) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in matchForHint");
    var b = null, b = null === a.getStudentSAI() || "undefined" === typeof a.getStudentSAI() ? null : a.getStudentSAI().getSelectionArray();
    if (null !== b && "undefined" !== typeof b && 0 < b.length && (u.ctatdebug("CTATExampleTracerTracer --\x3e in matchForHint first if"), a.setWantReportableHints(!0), b = u.traceForHint(a), null !== b && "undefined" !== typeof b && 0 < a.getReportableHints().length)) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e matchForHint via traceForHint returning " + b + ", result " + a), b;
    }
    b = u.getBestNextLink(!0, a);
    u.ctatdebug("CTATExampleTracerTracer --\x3e matchForHint() traceForHint via getBestNextLink returning " + b);
    return b;
  };
  this.getBestNextLink = function(a, b) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink");
    var c = [], d = t(a, c);
    if (null === d || "undefined" === typeof d) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink returning null"), null;
    }
    if (d.getType().toString() === CTATExampleTracerLink.BUGGY_ACTION.toString()) {
      return u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink return null no correct suboptimal step"), null;
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink else branch");
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink got interp " + (null == c ? "null" : c[0]));
    if (b) {
      var e = d.interpolateHints(c[0].getVariableTable());
      b.setInterpolatedHints(e);
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink setInterpolatedHints");
      Array.isArray(e) && 0 < e.length ? b.setReportableHints(e) : b.setReportableHints(d.getHints());
      u.ctatdebug("In evaluate --\x3e after setReportableHints");
      b.setReportableLink(d);
      b.setReportableInterpretation(c[0]);
      b.setResult(d.getType());
      b.setTutorSAI(d.getDefaultSAI());
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestNextLink return etLink");
    return d;
  };
  this.doHint = function(a, b, c, d, e, f) {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint");
    var g = c = c = null;
    if (f && null !== b && "undefined" !== typeof b && 1 < b.length && b[1].toString() === CTATMsgType.PREVIOUS_FOCUS.toString() && null !== a && "undefined" !== typeof a && 1 < a.length && null !== a[1] && "undefined" !== typeof a[1] && a[1].toString() !== "null".toString() && (u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint first if condition"), c = [], c.push(a[1]), 2 < b.length)) {
      for (u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint inner if condition"), g = [], a = 2;a < b.length;a++) {
        u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint for loop " + a), g.push(b[a]);
      }
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint out of if condition");
    b = new CTATExampleTracerEvent(u, new CTATSAI(c, g, null), d);
    b.setHintRequest(!0);
    u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint result: " + b);
    c = u.matchForHint(b);
    Array.isArray(e) && (u.ctatdebug("CTATExampleTracerTracer --\x3e in doHint last if condition"), e.push(b));
    u.ctatdebug("CTATExampleTracerTracer --\x3e returning from doHint: " + c);
    return c;
  };
  this.getBestInterpretation = function() {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestInterpretation");
    if (null === x || "undefined" === typeof x) {
      u.ctatdebug("CTATExampleTracerTracer --\x3e in getBestInterpretation in if condition"), x = q(u.getInterpretationsInternal());
    }
    u.ctatdebug("CTATExampleTracerTracer --\x3e out of getBestInterpretation " + (null === x || void 0 === x));
    return x;
  };
  this.getInterpretationsInternal = function() {
    u.ctatdebug("CTATExampleTracerTracer --\x3e in getInterpretationsInternal");
    return r;
  };
  this.toString = function() {
    var a = "TracerState\n";
    null === r ? a += "(no interpretations)\n" : r.forEach(function(b) {
      a += b.toString() + "\n";
    });
    return a;
  };
  this.addInterfaceVariablesFromEvent = function(a) {
    if (a) {
      var b = a.getTutorSelection();
      a = a.getTutorInput();
      u.addInterfaceVariables(b, a);
    }
  };
  this.addInterfaceVariables = function(a, c) {
    u.ctatdebug("CTATExampleTracerTracer.addInterfaceVariables(" + a + ", " + c + ")");
    if (a && c) {
      var d = a.length;
      d > c.length && (d = c.length);
      for (var e = 0;e < d;e++) {
        a[e] && (b.put(a[e], CTATVariableTable.standardizeType(c[e])), b.put(CTATVariableTable.nameAsString(a[e]), CTATVariableTable.valueAsString(c[e])));
      }
      u.ctatdebug("CTATExampleTracerTracer.addInterfaceVariables() startStateVT " + b);
      r && r.forEach(function(b) {
        if (b = b.getVariableTable()) {
          for (var e = 0;e < d;e++) {
            a[e] && (b.put(a[e], CTATVariableTable.standardizeType(c[e])), b.put(CTATVariableTable.nameAsString(a[e]), CTATVariableTable.valueAsString(c[e])));
          }
          u.ctatdebug("CTATExampleTracerTracer.addInterfaceVariables() interp.vt " + b);
        }
      });
    }
  };
  this.findCurrentState = function() {
    u.ctatdebug("Entering findCurrentState");
    var a = u.getBestInterpretation();
    return a && a.getLastMatchedLink() && a.getLastMatchedLink().isDone() ? a.getLastMatchedLink().getNextNode() : (a = t(!1, [a])) ? a.getPrevNode() : G ? G.getStartNode() : null;
  };
};
CTATExampleTracerTracer.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerTracer.prototype.constructor = CTATExampleTracerTracer;
"undefined" !== typeof module && (module.exports = CTATExampleTracerTracer);
var CTATLinkGroup = function() {
  CTATBase.call(this, "CTATLinkGroup", "");
};
CTATLinkGroup.prototype = Object.create(CTATBase.prototype);
CTATLinkGroup.prototype.constructor = CTATLinkGroup;
"undefined" !== typeof module && (module.exports = CTATLinkGroup);
var CTATDefaultLinkGroup = function(a, b, d, f) {
  CTATLinkGroup.call(this, "CTATDefaultLinkGroup", a);
  var g = a, c = b, e = d, h = new Set;
  null !== f && "undefined" !== typeof f && f.forEach(function(a) {
    h.add(a);
  });
  var k = new Set, l = null, q = null, p = this;
  p.ctatdebug("CTATDefaultLinkGroup constructor group name: " + a);
  p.ctatdebug("CTATDefaultLinkGroup constructor group isOrdered: " + b);
  p.ctatdebug("CTATDefaultLinkGroup constructor group isReenterable: " + d);
  this.setOrdered = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in setOrdered group name: " + g);
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in setOrdered:: " + a);
    c = a;
  };
  this.setName = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in setName: " + a);
    g = a;
  };
  this.containsLink = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in containsLink: " + a.getUniqueID());
    return h.has(a);
  };
  this.removeLink = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in removeLink: " + a.getUniqueID());
    return h["delete"](a);
  };
  this.getParent = function() {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in getParent");
    return l;
  };
  this.addLink = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in addLink: " + a.getUniqueID());
    h.add(a);
  };
  this.getIsOrdered = function() {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in getIsOrdered: " + c);
    return c;
  };
  this.getIsReenterable = function() {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in getIsReenterable: " + e);
    return e;
  };
  this.getSubgroups = function() {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in getSubgroups");
    return k;
  };
  this.getLinks = function() {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in getLinks");
    return h;
  };
  this.setReenterable = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in setReenterable: " + a);
    e = a;
  };
  this.setParent = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in setParent: " + a.getName());
    l = a;
  };
  this.addSubgroup = function(a) {
    p.ctatdebug("CTATDefaultLinkGroup --\x3e in addSubgroup groupName: " + a.getName());
    k.add(a);
  };
  this.getName = function() {
    return g;
  };
  this.getDefaultBuggyMsg = function() {
    return q;
  };
  this.setDefaultBuggyMsg = function(a) {
    q = "" == a ? null : a;
  };
  this.toString = function() {
    return "Group Name: " + this.getName();
  };
};
CTATDefaultLinkGroup.prototype = Object.create(CTATLinkGroup.prototype);
CTATDefaultLinkGroup.prototype.constructor = CTATDefaultLinkGroup;
"undefined" !== typeof module && (module.exports = CTATDefaultLinkGroup);
InternalGroupIterator = function(a, b) {
  CTATBase.call(this, "InternalGroupIterator", a);
  var d = this, f = b.length, g = [], c = 0;
  a.getSubgroups().forEach(function(a) {
    a && g.push(a);
  });
  b.push(d);
  d.ctatdebug("InternalGroupIterator() constructor group " + a + ", stack.length " + b.length + ", sgList.length " + g.length);
  this.toString = function() {
    return "{" + a + " at " + f + " with " + g.length + " subgroups}";
  };
  this.next = function() {
    return c >= g.length ? (b.pop(), d.ctatdebug("InternalGroupIterator at deepest next() returning " + a + " with stack.length " + b.length), {value:a, done:!1}) : (new InternalGroupIterator(g[c++], b)).next();
  };
};
InternalGroupIterator.prototype = Object.create(CTATBase.prototype);
InternalGroupIterator.prototype.constructor = InternalGroupIterator;
var CTATGroupIterator = function(a) {
  CTATBase.call(this, "CTATGroupIterator", a);
  this.ctatdebug("CTATGroupIterator(" + a + ") begin constructor");
  var b = null;
  this.next = function() {
    null === b && (b = [], new InternalGroupIterator(a, b));
    return 0 >= b.length ? {value:null, done:!0} : b[b.length - 1].next();
  };
};
CTATGroupIterator.prototype = Object.create(CTATBase.prototype);
CTATGroupIterator.prototype.constructor = CTATGroupIterator;
"undefined" !== typeof module && (module.exports = CTATGroupIterator);
var CTATGroupModel = function() {
  CTATBase.call(this, "CTATGroupModel", "");
  var a = this;
  this.clear = function() {
  };
  this.setDefaultReenterable = function(a) {
  };
  this.setGroupOrdered = function(a, d) {
  };
  this.getTopLevelGroup = function() {
  };
  this.setGroupName = function(a, d) {
  };
  this.addLinkToGroup = function(a, d) {
  };
  this.isGroupOrdered = function(a) {
  };
  this.isGroupReenterable = function(a) {
  };
  this.isLinkInGroup = function() {
  };
  this.getGroupsContainingLink = function(a) {
  };
  this.getGroupLinkCount = function(b) {
    return a.getGroupLinks(b).size;
  };
  this.getLowestLevelGroupOfLink = function(a) {
  };
  this.getGroupSubgroups = function(a) {
  };
  this.getUniqueLinks = function(a) {
  };
  this.getGroupLinks = function(a) {
  };
  this.removeLinkFromGroup = function(a, d) {
  };
  this.getGroupParent = function(a) {
  };
  this.addGroup = function(a, d, f) {
  };
  this.setGroupReenterable = function(a, d) {
  };
};
CTATGroupModel.prototype = Object.create(CTATBase.prototype);
CTATGroupModel.prototype.constructor = CTATGroupModel;
"undefined" !== typeof module && (module.exports = CTATGroupModel);
var CTATDefaultGroupModel = function() {
  function a(a, c, d) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in internalRemoveLinkFromGroupRecursive");
    !0 === a.containsLink(c) && (k.getGroupSubgroups(a).forEach(function(a) {
      k.removeLinkFromGroup(a, c);
    }), (a !== e || d) && b(a, c));
  }
  function b(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in internalRemoveLinkFromGroup");
    return a.removeLink(b);
  }
  function d(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getImmediateGroupOfLink");
    var c = null, e = !1, f = null;
    k.getGroupSubgroups(b).forEach(function(b) {
      !0 !== e && !0 === k.isLinkInGroup(b, a) && (c = d(a, b), f = null !== c && "undefined" !== typeof c ? c : b, e = !0);
    });
    return !0 === e ? f : null;
  }
  function f(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getNaturalContainingGroup");
    if (b.size === k.getGroupLinks(a).size) {
      throw k.getGroupLinks(a).forEach(function(c) {
        if (!1 === b.has(c)) {
          throw new CTATExampleTracerException("Invalid link selection: Partial overlap with existing group: " + a);
        }
      }), new CTATExampleTracerException("Group containing this set of links already exists: " + a);
    }
    if (b.size >= k.getGroupLinks(a).size) {
      throw new CTATExampleTracerException("Invalid link selection: Partial overlap with existing group: " + a);
    }
    var c = !1, d = null;
    b.forEach(function(e) {
      if (!0 !== c) {
        if (!1 === k.isLinkInGroup(a, e)) {
          throw new CTATExampleTracerException("Invalid link selection: Partial overlap with existing group: " + a);
        }
        k.getGroupSubgroups(a).forEach(function(g) {
          !0 !== c && !0 === k.isLinkInGroup(g, e) && (k.getGroupLinkCount(g) >= b.size ? (d = f(g, b), c = !0) : k.getGroupLinks(g).forEach(function(c) {
            if (!1 === b.has(c)) {
              throw new CTATExampleTracerException("Invalid link selection: Partial overlap with existing group: " + a);
            }
          }));
        });
      }
    });
    return !0 === c ? d : a;
  }
  function g(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addSubgroupPreserveSanity parent: " + a.getName());
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addSubgroupPreserveSanity child: " + b.getName());
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addSubgroupPreserveSanity size: " + k.getGroupSubgroups(a).size);
    k.getGroupSubgroups(a).forEach(function(d) {
      var e = k.getGroupLinks(d);
      if (0 === e.size) {
        k.getGroupSubgroups(a)["delete"](d), c(b, d);
      } else {
        var f = null, g = !1;
        e.forEach(function(a) {
          !1 === g && (f = a, g = !0);
        });
        !0 === k.isLinkInGroup(b, f) && (k.getGroupSubgroups(a)["delete"](d), c(b, d));
      }
    });
    c(a, b);
  }
  function c(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addSubgroup");
    a.addSubgroup(b);
    b.setParent(a);
  }
  CTATGroupModel.call(this);
  var e = null, h = !1, k = this;
  this.clear = function() {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in clear");
    e = new CTATDefaultLinkGroup("defaultName", !0, h, null);
  };
  this.setDefaultReenterable = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in setDefaultReenterable");
    h = a;
  };
  this.setGroupOrdered = function(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in setGroupOrdered");
    a.setOrdered(b);
  };
  this.getTopLevelGroup = function() {
    ctatdebug("CTATDefaultGroupModel --\x3e in getTopLevelGroup");
    return e;
  };
  this.setGroupName = function(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in setGroupName");
    a.setName(b);
  };
  this.addLinkToGroup = function(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addLinkToGroup");
    for (k.removeLinkFromGroup(e, b);null !== a && "undefined" !== typeof a;a = k.getGroupParent(a)) {
      var c = a, d = b;
      k.ctatdebug("CTATDefaultGroupModel --\x3e in internalAddLinkToGroup");
      c.addLink(d);
    }
  };
  this.isGroupOrdered = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in isGroupOrdered group name: " + a.getName());
    k.ctatdebug("CTATDefaultGroupModel --\x3e in isGroupOrdered: " + a.getIsOrdered());
    return a.getIsOrdered();
  };
  this.isGroupReenterable = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in isGroupReenterable");
    return a.getIsReenterable();
  };
  this.isLinkInGroup = function(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in isLinkInGroup");
    return a.containsLink(b);
  };
  this.getGroupsContainingLink = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupsContainingLink(" + a + "): TopLevel " + e + ", typeof(TopLevel) " + typeof e);
    var b = new Set, c = new CTATGroupIterator(e);
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupsContainingLink before loop: groupIter " + c + ", typeof(groupIter) " + typeof c);
    for (var d = c.next();!d.done;d = c.next()) {
      d = d.value, !0 === k.isLinkInGroup(d, a) && b.add(d);
    }
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupsContainingLink returning groups.size " + b.size);
    return b;
  };
  this.getLowestLevelGroupOfLink = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getLowestLevelGroupOfLink");
    var b = d(a, e);
    return null !== b && "undefined" !== typeof b ? b : !0 === k.isLinkInGroup(e, a) ? e : null;
  };
  this.getGroupSubgroups = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupSubgroups");
    return null !== a && "undefined" !== typeof a ? a.getSubgroups() : null;
  };
  this.getUniqueLinks = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getUniqueLinks");
    var b = new Set;
    k.getGroupLinks(a).forEach(function(a) {
      b.add(a);
    });
    k.getGroupSubgroups(a).forEach(function(a) {
      k.getGroupLinks(a).forEach(function(a) {
        b["delete"](a);
      });
    });
    return b;
  };
  this.getGroupLinks = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupLinks: " + a.getName());
    return a.getLinks();
  };
  this.removeLinkFromGroup = function(b, c) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in removeLinkFromGroup");
    a(b, c, !1);
  };
  this.getGroupParent = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupParent");
    return a.getParent();
  };
  this.addGroup = function(a, b, c) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addGroup");
    var d = null;
    try {
      d = f(e, c);
    } catch (w) {
      return w.toString();
    }
    a = new CTATDefaultLinkGroup(a, b, h, c);
    k.ctatdebug("CTATDefaultGroupModel --\x3e in addGroup after creating new group");
    g(d, a);
    return "";
  };
  this.setGroupReenterable = function(a, b) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in setGroupReenterable");
    a.setReenterable(b);
  };
  this.createIdToLinkMap = function() {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in createIdToLinkMap");
    var a = {};
    k.getGroupLinks(e).forEach(function(b) {
      a[b.getUniqueID()] = b;
    });
    return a;
  };
  this.getGroupByName = function(a) {
    k.ctatdebug("CTATDefaultGroupModel --\x3e in getGroupByName TopLevel has: " + e.getSubgroups().size);
    for (var b = new CTATGroupIterator(e), c = b.next();!c.done;c = b.next()) {
      if (c = c.value, k.getGroupName(c).toString() === a.toString()) {
        return c;
      }
    }
    return null;
  };
  this.getGroupName = function(a) {
    return a.getName();
  };
  k.clear();
};
CTATDefaultGroupModel.prototype = Object.create(CTATGroupModel.prototype);
CTATDefaultGroupModel.prototype.constructor = CTATDefaultGroupModel;
"undefined" !== typeof module && (module.exports = CTATDefaultGroupModel);
var CTATExampleTracerGraph = function(a, b, d) {
  function f(a, b, d) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in isOrderOK");
    if (b.isDone() && B.exitOnIncorrectDone()) {
      return !0;
    }
    for (var f = c(b), g = 0;g < f.length;g++) {
      var k = f[g];
      if (!0 === D.isGroupOrdered(k)) {
        if (g !== f.length - 1) {
          if (!1 === e(k, h(f[g + 1], d), a, d)) {
            return !1;
          }
        } else {
          if (!1 === e(k, b, a, d)) {
            return !1;
          }
        }
      }
    }
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of isOrderOK");
    return !0;
  }
  function g(a, b, d) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in isReenteringOK");
    b = c(b);
    for (var e = !0, f = 0;f < b.length;f++) {
      if (!0 === e && !1 === D.isGroupReenterable(b[f])) {
        for (var e = !1, g = 0;g < a.length;g++) {
          if (!0 === D.isLinkInGroup(b[f], a[g])) {
            e = !0;
          } else {
            if (!0 === e) {
              return !1;
            }
          }
        }
      } else {
        if (!1 === e) {
          break;
        }
      }
    }
    if (0 !== a.length) {
      var h = c(a[a.length - 1]);
      B.ctatdebug("CTATExampleTracerGraph --\x3e in isReentrableOK: exitedGroups null? " + (null === h));
      B.ctatdebug("CTATExampleTracerGraph --\x3e in isReentrableOK: exitedGroups undefined? " + ("undefined" === typeof h));
      B.ctatdebug("CTATExampleTracerGraph --\x3e in isReentrableOK: exitedGroups last traversedLink " + a[a.length - 1].getUniqueID());
      B.ctatdebug("CTATExampleTracerGraph --\x3e in isReentrableOK: exitedGroups length " + (h ? h.length : null));
      b.forEach(function(a) {
        h.splice(h.indexOf(a), 1);
      });
      h.forEach(function(a) {
        !0 === D.isGroupReenterable(a) && h.splice(h.indexOf(a), 1);
      });
      var l = !0;
      h.forEach(function(b) {
        !1 !== l && d.forEach(function(c) {
          !1 !== l && k(a, c) < c.getMinTraversals() && !0 === D.isLinkInGroup(b, c) && (l = !1);
        });
      });
      if (!1 === l) {
        return !1;
      }
    }
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of isReenteringOK");
    return !0;
  }
  function c(a) {
    B.ctatdebug("in findGroupsOfLink(link " + a + "): typeof(groupModel) " + typeof D);
    a = D.getGroupsContainingLink(a);
    B.ctatdebug("in findGroupsOfLink groupsSet.size " + a.size);
    var b = [];
    a.forEach(function(a) {
      B.ctatdebug("in findGroupsOfLink group element " + a.getName());
      b.push(a);
    });
    b.sort(function(a, b) {
      return D.getGroupLinkCount(b) - D.getGroupLinkCount(a);
    });
    return b;
  }
  function e(a, b, c, d) {
    var e = -1, f = null, g = Number.MAX_VALUE, l = null;
    D.getGroupSubgroups(a).forEach(function(a) {
      if (!1 === D.isLinkInGroup(a, b) && 0 !== D.getGroupLinkCount(a)) {
        var k = h(a, d);
        null !== k && "undefined" !== typeof k && (k = k.getDepth(), k < b.getDepth() && k > e && (!1 === q(a) || !0 === p(a, c)) && (e = k, f = a), k > b.getDepth() && k < g && (!1 === q(a) || !0 === p(a, c)) && (g = k, l = a));
      }
    });
    D.getUniqueLinks(a).forEach(function(a) {
      if (!0 === d.has(a)) {
        var h = a.getDepth();
        h < b.getDepth() && h > e && (0 < a.getMinTraversals() || -1 < c.indexOf(a)) && (e = h, f = a);
        h > b.getDepth() && h < g && (0 < a.getMinTraversals() || -1 < c.indexOf(a)) && (g = h, l = a);
      }
    });
    if (null !== f && "undefined" !== typeof f) {
      if (f instanceof CTATExampleTracerLink) {
        if (k(c, f) < f.getMinTraversals()) {
          return !1;
        }
      } else {
        if (f instanceof CTATLinkGroup && !1 === m(f, c, d)) {
          return !1;
        }
      }
    }
    return null !== l && "undefined" !== typeof l && (l instanceof CTATExampleTracerLink && -1 < c.indexOf(l) || l instanceof CTATLinkGroup && !0 === p(l, c)) ? !1 : !0;
  }
  function h(a, b) {
    var c = Number.MAX_VALUE, d = null;
    D.getGroupLinks(a).forEach(function(a) {
      a.getDepth() < c && !0 === b.has(a) && (c = a.getDepth(), d = a);
    });
    return d;
  }
  function k(a, b) {
    for (var c = 0, d = 0;d < a.length;d++) {
      b === a[d] && c++;
    }
    return c;
  }
  function l(a, b, c) {
    var d = !1, e = !0, f = !1;
    (new CTATExampleTracerPath(b)).getSortedLinks().forEach(function(b) {
      if (!1 !== e && !0 !== f) {
        if (!1 === d) {
          !0 === D.isLinkInGroup(a, b) && (d = !0);
        } else {
          if (!1 === D.isLinkInGroup(a, b)) {
            f = !0;
            return;
          }
        }
        c.getTraversalCount(b) < b.getMaxTraversals() && (e = !1);
      }
    });
    return !1 === e ? !1 : !0;
  }
  function q(a) {
    var b = !0;
    D.getGroupLinks(a).forEach(function(a) {
      !1 !== b && 0 !== a.getMinTraversals() && (b = !1);
    });
    return !1 === b ? !1 : !0;
  }
  function p(a, b) {
    for (var c = 0;c < b.length;c++) {
      if (!0 === D.isLinkInGroup(a, b[c])) {
        return !0;
      }
    }
    return !1;
  }
  function m(a, b, c) {
    var d = !0;
    D.getGroupLinks(a).forEach(function(a) {
      !1 !== d && !0 === c.has(a) && k(b, a) < a.getMinTraversals() && (d = !1);
    });
    return !1 === d ? !1 : !0;
  }
  function w() {
    for (var a = 0;a < r.length;a++) {
      r[a].clearInLinks();
    }
    var b = B.getStartNode();
    null !== b && "undefined" !== typeof b && null !== b.getOutLinks() && "undefined" !== typeof b.getOutLinks() && (a = 0, b.getOutLinks().forEach(function(b) {
      t(b, a++);
    }));
  }
  function t(a, b) {
    ctatdebug("updateInLinkSubGraph(" + a + ", " + b + ")");
    var c = B.getNode(a.getNextNode());
    if (null !== c && "undefined" !== typeof c) {
      c.addInLink(a);
      var d = 0;
      c.getOutLinks().forEach(function(a) {
        t(a, d++);
      });
    }
  }
  function z(a) {
    var b = B.getNode(a.getPrevNode());
    if (null !== b && "undefined" !== typeof b) {
      var c = -1;
      b.getInLinks().forEach(function(a) {
        -1 === a.getDepth() && z(a);
        a.getDepth() > c && (c = a.getDepth());
      });
      a.setDepth(c + 1);
    }
  }
  CTATBase.call(this, "CTATExampleTracerGraph", "visualdata");
  var y = null, r = null, A = null, E = null, G = null, F = null, x = new Set, H = new Set, u = null, D = null, C = CTATMsgType.SHOW_ALL_FEEDBACK, B = this;
  this.getFeedbackPolicy = function() {
    return C;
  };
  this.setFeedbackPolicy = function(a) {
    B.ctatdebug("Graph.setFeedbackPolicy(" + a + ") old policy " + C);
    C = "false" === a ? CTATMsgType.SHOW_ALL_FEEDBACK : "true" === a ? CTATMsgType.HIDE_ALL_FEEDBACK : a;
  };
  this.hideButRequireSteps = function() {
    return C == CTATMsgType.HIDE_BUT_COMPLETE;
  };
  this.exitOnIncorrectDone = function() {
    switch(C) {
      case CTATMsgType.HIDE_ALL_FEEDBACK:
      ;
      case CTATMsgType.HIDE_BUT_ENFORCE:
        return !0;
      default:
        return !1;
    }
  };
  this.getDefaultBuggyMsg = function() {
    return D.getTopLevelGroup() ? D.getTopLevelGroup().getDefaultBuggyMsg() : null;
  };
  this.getLinks = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getLinks");
    return A;
  };
  this.addLink = function(a, b) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in addLink");
    A.push(a);
    a.isDone() ? H.add(a) : H["delete"](a);
    null === b || "undefined" === typeof b ? D.addLinkToGroup(D.getTopLevelGroup(), a) : D.addLinkToGroup(b, a);
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of addLink");
  };
  this.addNode = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in addNode");
    r.push(a);
    E[a.getNodeID()] = a;
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of addNode");
  };
  this.findAllPaths = function() {
    ctatdebug("CTATExampleTracerGraph --\x3e in findAllPaths " + B.getStartNode().getNodeID());
    return B.findPathsFromNode(B.getStartNode());
  };
  this.pathToLinkIsSubset = function(a, b) {
    var c = B.getNode(a.getPrevNode());
    B.ctatdebug("pathToLinkIsSubset(" + a + ") sourceNode " + c.getNodeID());
    if (0 < a.getMinTraversals() && "undefined" == typeof b[a.getUniqueID()]) {
      return !1;
    }
    if (c == B.getStartNode()) {
      return !0;
    }
    for (c = c.getInLinks().values();!(c = c.next()).done;) {
      return B.pathToLinkIsSubset(c.value, b);
    }
    return !1;
  };
  this.observesOrderingConstraints = function(a, b, c, d) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in observesOrderingConstraints");
    null !== d && "undefined" !== typeof d && (B.ctatdebug("CTATExampleTracerGraph --\x3e in observesOrderingConstraints initializing out of order false"), d.setOutOfOrder(!1));
    if (null === c || "undefined" === typeof c || 0 === c.size || null === b || "undefined" === typeof b) {
      return B.ctatdebug("CTATExampleTracerGraph --\x3e returning first true observesOrderingConstraints"), !0;
    }
    if (b.isDone() && B.exitOnIncorrectDone()) {
      return B.ctatdebug("CTATExampleTracerGraph.observesOrderingConstraints --\x3e returning true for doneStep && exitOnIncorrectDone"), !0;
    }
    if (!0 === c.has(b) && !0 === f(a, b, c) && !0 === g(a, b, c)) {
      return B.ctatdebug("CTATExampleTracerGraph.observesOrderingConstraints --\x3e returning isOrderOK true && isisReenteringOK() true"), !0;
    }
    null !== d && "undefined" !== typeof d && (B.ctatdebug("CTATExampleTracerGraph --\x3e in observesOrderingConstraints setting out of order true"), d.setOutOfOrder(!0));
    B.ctatdebug("CTATExampleTracerGraph --\x3e returning false observesOrderingConstraints");
    return !1;
  };
  this.isIncorrectLinkOK = function(a, b, c, d) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in isIncorrectLinkOK");
    var e = !1, g = null, h = !0, k = !1;
    B.getNode(b.getPrevNode()).getOutLinks().forEach(function(b) {
      !0 !== k && !1 !== h && b.getType().toString() !== CTATExampleTracerLink.BUGGY_ACTION.toString() && !0 === c.has(b) && (e = !0, !1 === f(a, b, c) ? h = !1 : (g = b, k = !0));
    });
    if (!1 === h || null === g || "undefined" === typeof g) {
      return !1;
    }
    if (!1 === e) {
      return B.ctatdebug("isIncorrectLinkOK(): no siblings of link in path"), !1;
    }
    if (!0 === e && (b = B.getSmallestContainingGroup(b), !0 === D.isLinkInGroup(b, g) && !1 === D.isGroupOrdered(b) && !0 === l(b, c, d))) {
      return !1;
    }
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of isIncorrectLinkOK");
    return !0;
  };
  this.getNode = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getNode(" + a + ") returning " + E[a]);
    return E[a];
  };
  this.findPathsFromNode = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in findPathsFromNode outlinks " + a.getOutLinks().size);
    var b = new Set;
    if (!a || 0 === a.getOutLinks().size) {
      return b.add(new CTATExampleTracerPath(null)), b;
    }
    B.ctatdebug("CTATExampleTracerGraph --\x3e before forEach ");
    a.getOutLinks().forEach(function(a) {
      B.ctatdebug("CTATExampleTracerGraph --\x3e in forEach " + a.getType().toString());
      if (a.getType().toString() != CTATExampleTracerLink.BUGGY_ACTION.toString()) {
        var c = B.findPathsFromNode(B.getNode(a.getNextNode()));
        B.ctatdebug("findPathsFromNode childPaths.size " + c.size);
        c.forEach(function(c) {
          B.ctatdebug("findPathsFromNode childPath.size " + c.size + ", outLink " + a);
          c.addLink(a);
          b.add(c);
        });
      }
    }, a);
    0 === b.size && b.add(new CTATExampleTracerPath(null));
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of findPathsFromNode " + b.size);
    return b;
  };
  this.getDoneStates = function() {
    return x;
  };
  this.checkForDoneState = function(a) {
    if (a.isDone() && a.isTraversable()) {
      var b = B.getNode(a.getNextNode());
      B.ctatdebug("CTATExampleTracerGraph.addDoneState(linkID " + a.getUniqueID() + ") adding destNode " + b);
      x.add(b);
    }
  };
  this.getBestSubpath = function(a, b, c) {
    if (!a || !b) {
      return null;
    }
    var d = B.findPathsFromNode(a), e = new Set;
    d.forEach(function(a) {
      a = a.subpath(b);
      !a || c && !a.containsAll(c) || e.add(a);
    });
    B.ctatdebug("CTATExampleTracerGraph.getBestSubpath(" + a + ", " + b + ", [" + (c ? c.length : -1) + "]) pathsFrom " + d.size + ", pathsFromTo " + e.size);
    return 1 > e.size ? null : CTATExampleTracerPath.getBestPath(e);
  };
  this.getStartNode = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getStartNode() returning " + G);
    return G;
  };
  this.getLinkByID = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getLinkByID");
    for (var b = 0;b < A.length;b++) {
      if (A[b].getUniqueID() === a) {
        return A[b];
      }
    }
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of getLinkByID");
    return null;
  };
  this.setStartNode = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in setStartNode(" + a + ")");
    G = a;
  };
  this.getStudentStartsHereNode = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e getStudentStartsHereNode() returns " + F);
    return F;
  };
  this.setStudentStartsHereNode = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in setStudentStartsHereNode(" + a + ")");
    F = a;
  };
  this.getExampleTracer = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getExampleTracer() returning " + y);
    return y;
  };
  this.forDebugging = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in forDebugging");
    B.ctatdebug("Nodes in the graph -- ids");
    r.forEach(function(a) {
      B.ctatdebug(a.getNodeID());
    });
    B.ctatdebug("Links in the graph -- ids, from, to");
    A.forEach(function(a) {
      B.ctatdebug(a);
    });
  };
  this.getSmallestContainingGroup = function(a) {
    return D.getLowestLevelGroupOfLink(a);
  };
  this.redoLinkDepths = function() {
    w();
    B.getLinks().forEach(function(a) {
      a.setDepth(-1);
    });
    B.getLinks().forEach(function(a) {
      -1 === a.getDepth() && z(a);
    });
  };
  this.getGroupModel = function() {
    return D;
  };
  this.setVisualData = function(a) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in setVisualData");
    u = a;
  };
  this.getVisualData = function() {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in getVisualData() returning " + u);
    return u;
  };
  this.getDoneLinks = function() {
    return H;
  };
  (function(a, b) {
    B.ctatdebug("CTATExampleTracerGraph --\x3e in initGraph (" + a + " , " + b);
    A = [];
    r = [];
    E = {};
    if (null === D || "undefined" === typeof D) {
      D = new CTATDefaultGroupModel, B.ctatdebug("CTATExampleTracerGraph --\x3e created a group model from here");
    }
    D.clear();
    D.setDefaultReenterable(!b);
    D.setGroupOrdered(D.getTopLevelGroup(), a);
    D.setGroupName(D.getTopLevelGroup(), CTATExampleTracerGraph.TOP_LEVEL);
    y = new CTATExampleTracerTracer(B, d);
    B.ctatdebug("CTATExampleTracerGraph --\x3e out of initGraph");
  })(!a, b);
};
Object.defineProperty(CTATExampleTracerGraph, "TOP_LEVEL", {enumerable:!1, configurable:!1, writable:!1, value:"Top Level"});
CTATExampleTracerGraph.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerGraph.prototype.constructor = CTATExampleTracerGraph;
"undefined" !== typeof module && (module.exports = CTATExampleTracerGraph);
var CTATGraphParser = function() {
  function a(a) {
    ctatdebug("processEdge()");
    for (var d = new CTATExampleTracerLink(null, null, null), f = e.getElementChildren(a), g, h, k, l, m, p = a = -1, x = CTATMsgType.DEFAULT_ACTOR, H = !1, u = 0;u < f.length;u++) {
      "sourceID" === e.getElementName(f[u]) && (a = parseInt(e.getNodeTextValue(f[u])), d.setPrevNode(a));
      "destID" === e.getElementName(f[u]) && (p = parseInt(e.getNodeTextValue(f[u])), d.setNextNode(p));
      if ("rule" === e.getElementName(f[u])) {
        for (var D = e.getElementChildren(f[u]), C = 0;C < D.length;C++) {
          "text" === e.getElementName(D[C]) && d.addSkillName(e.getNodeTextValue(D[C]).toString());
        }
      }
      if ("actionLabel" === e.getElementName(f[u])) {
        for (d.setIsPreferredLink("false" != e.getElementAttr(f[u], "preferPathMark")), d.setMinTraversalsStr(e.getElementAttr(f[u], "minTraversals")), d.setMaxTraversalsStr(e.getElementAttr(f[u], "maxTraversals")), D = e.getElementChildren(f[u]), C = 0;C < D.length;C++) {
          "uniqueID" === e.getElementName(D[C]) && (m = e.getNodeTextValue(D[C]), d.setUniqueID(parseInt(e.getNodeTextValue(D[C]))));
          "message" === e.getElementName(D[C]) && (l = new CTATMessage(D[C]));
          "actionType" === e.getElementName(D[C]) && d.setActionType(e.getNodeTextValue(D[C]));
          "buggyMessage" === e.getElementName(D[C]) && d.setBuggyMsg(e.getNodeTextValue(D[C]));
          "successMessage" === e.getElementName(D[C]) && d.setSuccessMsg(e.getNodeTextValue(D[C]));
          "hintMessage" === e.getElementName(D[C]) && d.addHint(e.getNodeTextValue(D[C]));
          if ("matchers" === e.getElementName(D[C])) {
            for (var B = e.getElementChildren(D[C]), J = 0;J < B.length;J++) {
              "Selection" === e.getElementName(B[J]) && (g = b(B[J], 0)), "Action" === e.getElementName(B[J]) && (h = b(B[J], 1)), "Input" === e.getElementName(B[J]) && (k = b(B[J], 2)), "Actor" === e.getElementName(B[J]) && (x = e.getNodeTextValue(B[J]), H = (H = e.getElementAttr(B[J], "linkTriggered")) && "false" != H.toLowerCase().trim() ? !0 : !1);
            }
          }
          if ("matcher" === e.getElementName(D[C])) {
            h = D[C];
            g = e.getElementAttr(h, "replacementFormula");
            h = e.getElementChildren(h);
            var J = B = x = k = void 0, I = CTATMsgType.DEFAULT_ACTOR;
            k = new CTATExactMatcher(CTATMatcher.SELECTION, null);
            for (var x = new CTATExactMatcher(CTATMatcher.ACTION, null), M = 0;M < h.length;M++) {
              if ("matcherType" === e.getElementName(h[M]) && ("ExactMatcher" === e.getNodeTextValue(h[M]) && (J = CTATExactMatcher), "RegexMatcher" === e.getNodeTextValue(h[M]) && (J = CTATRegexMatcher), "AnyMatcher" === e.getNodeTextValue(h[M]) && (J = CTATAnyMatcher), "RangeMatcher" === e.getNodeTextValue(h[M]) && (J = CTATRangeMatcher), "WildcardMatcher" === e.getNodeTextValue(h[M]) && (J = CTATWildcardMatcher), "ExpressionMatcher" === e.getNodeTextValue(h[M]) && (J = CTATExpressionMatcher)), 
              "matcherParameter" === e.getElementName(h[M])) {
                var O = e.getElementAttr(h[M], "name");
                "selection" == O && k.setParameter(e.getNodeTextValue(h[M]));
                "action" == O && x.setParameter(e.getNodeTextValue(h[M]));
                "input" == O && (B = B ? B : new J(CTATMatcher.INPUT, null), B.setParameter(e.getNodeTextValue(h[M])));
                "actor" == O && (I = e.getNodeTextValue(h[M]));
                "minimum" == O && (B = B ? B : new J(CTATMatcher.INPUT, null), B.setParameter(e.getNodeTextValue(h[M]), "minimum"));
                "maximum" == O && (B = B ? B : new J(CTATMatcher.INPUT, null), B.setParameter(e.getNodeTextValue(h[M]), "maximum"));
              }
            }
            B.setReplacementFormula(g);
            x = [[k], [x], [B], I];
            g = x[0];
            h = x[1];
            k = x[2];
            x = x[3];
          }
        }
      }
    }
    c.getStartNode() && p == c.getStartNode().getNodeID() && console.log("***WARNING*** edge " + m + " destination is graph startNode " + c.getStartNode());
    m = new CTATVectorMatcher(g, h, k, x);
    m.setDefaultSAI(l.getSAI());
    m.setCaseInsensitive(q);
    m.setLinkTriggered(H);
    d.setMatcher(m);
    ctatdebug("GraphParser.processEdge() " + a + "->" + p + ", edge " + d);
    c.getNode(a).addOutLink(d);
    c.checkForDoneState(d);
    return d;
  }
  function b(a, b) {
    f.ctatdebug("processMatchers()");
    for (var c = e.getElementChildren(a), d = [], g = 0;g < c.length;g++) {
      if ("matcher" === e.getElementName(c[g])) {
        for (var h = null, k = e.getElementAttr(c[g], "replacementFormula"), l = e.getElementChildren(c[g]), m = 0;m < l.length;m++) {
          if ("matcherType" === e.getElementName(l[m])) {
            switch(h = e.getNodeTextValue(l[m]), f.ctatdebug("CTATGraphParser.processMatchers() matcherType[" + m + "] = " + h), h) {
              case "ExactMatcher":
                h = new CTATExactMatcher(b, null);
                break;
              case "RegexMatcher":
                h = new CTATRegexMatcher(b, null);
                break;
              case "AnyMatcher":
                h = new CTATAnyMatcher(b, null);
                break;
              case "RangeMatcher":
                h = new CTATRangeMatcher(b, null);
                break;
              case "WildcardMatcher":
                h = new CTATWildcardMatcher(b, null);
                break;
              case "ExpressionMatcher":
                h = new CTATExpressionMatcher(b, null);
                break;
              default:
                console.log("CTATGraphParser.processMatchers() unknown matcherType[" + m + "] = " + h + "; using CTATExactMatcher"), h = new CTATExactMatcher(b, null);
            }
          }
          if ("matcherParameter" === e.getElementName(l[m])) {
            var p = e.getElementAttr(l[m], "name");
            "single" === p ? h.setParameter(e.getNodeTextValue(l[m])) : "minimum" === p ? h.setParameter(e.getNodeTextValue(l[m]), "minimum") : "maximum" === p ? h.setParameter(e.getNodeTextValue(l[m]), "maximum") : h.setParameter(l[m], p, e);
          }
        }
        h && h.setReplacementFormula(k);
        d.push(h);
      }
    }
    return d;
  }
  function d(a, b) {
    var c = new Set;
    if ("group" !== e.getElementName(a)) {
      return c;
    }
    var f = e.getElementAttr(a, "name");
    ctatdebug("readGroupFromXML group name: " + f);
    var g = "true" === e.getElementAttr(a, "ordered");
    ctatdebug("readGroupFromXML group isOrdered typeof: " + typeof g);
    ctatdebug("readGroupFromXML group isOrdered: " + g);
    for (var h = function(a) {
      c.add(a);
    }, k = e.getElementChildren(a), m = 0;m < k.length;m++) {
      if ("link" === e.getElementName(k[m])) {
        var p = Number(e.getElementAttr(k[m], "id")), q = b[p];
        if (null !== q || void 0 !== q) {
          ctatdebug("Added link ID : " + p), c.add(q);
        }
      }
      "group" === e.getElementName(k[m]) && (ctatdebug("encountered a subgroup"), d(k[m], b).forEach(h));
    }
    l.addGroup(f, g, c);
    l.setGroupReenterable(l.getGroupByName(f), !0);
    return c;
  }
  CTATBase.call(this, "CTATGraphParser", "__undefined__");
  var f = this, g, c, e = new CTATXML, h = null, k = [];
  new XMLSerializer;
  var l, q = !0, p = !0, m = [];
  this.getLockWidget = function() {
    return p;
  };
  this.parseGraph = function(b, f) {
    ctatdebug("parseBRD()");
    var z = 0, y = e.getElementAttr(b, "startStateNodeName"), r = "true" === e.getElementAttr(b, "unordered");
    q = "false" != String(e.getElementAttr(b, "caseInsensitive")).toLowerCase();
    p = e.getElementAttr(b, "lockWidget");
    var A = new CTATVariableTable;
    c = new CTATExampleTracerGraph(r, !1, A);
    var E = e.getElementChildren(b), A = e.getElementAttr(b, "suppressStudentFeedback");
    if (null === A || void 0 === A) {
      A = CTATMsgType.SHOW_ALL_FEEDBACK;
    }
    c.setFeedbackPolicy(A);
    f.setFeedbackSuppressed(A);
    A = e.getElementAttr(b, "highlightRightSelection");
    f.setHighlightRightSelection("false" != A);
    var G = e.getElementAttr(b, "confirmDone");
    "true" !== G && "false" !== G && (G = c.getFeedbackPolicy() === CTATMsgType.HIDE_ALL_FEEDBACK ? "true" : "false");
    f.setHintPolicy(e.getElementAttr(b, "hintPolicy"));
    f.setOutOfOrderMessage(e.getElementAttr(b, "outOfOrderMessage"));
    for (var F = null, x = 0;x < E.length;x++) {
      switch(e.getElementName(E[x])) {
        case "startNodeMessages":
          k = e.getElementChildren(E[x]);
          break;
        case "node":
          z++;
          var H;
          H = E[x];
          ctatdebug("processNode(" + H + ")");
          var u = e.getElementChildren(H), D = -1;
          H = "";
          for (var C = 0;C < u.length;C++) {
            switch(e.getElementName(u[C])) {
              case "uniqueID":
                D = parseInt(e.getNodeTextValue(u[C]));
                break;
              case "text":
                H = e.getNodeTextValue(u[C]);
            }
          }
          u = new CTATExampleTracerNode(D, new Set);
          "" !== H && u.setNodeName(H);
          H = u;
          c.addNode(H);
          1 == z && (c.setStartNode(H), c.setStudentStartsHereNode(H));
          H.getNodeName() == y && c.setStudentStartsHereNode(H);
          break;
        case "edge":
          c.addLink(a(E[x]));
          break;
        case "EdgesGroups":
          F = E[x];
          break;
        case "productionRule":
          var B = E[x];
          ctatdebug("processSkill()");
          H = void 0;
          for (var C = "unknown", u = void 0, D = null, B = e.getElementChildren(B), J = 0;J < B.length;J++) {
            var I = e.getElementName(B[J]);
            "ruleName" === I && (H = e.getNodeTextValue(B[J]), ctatdebug("ruleName=" + H));
            "productionSet" === I && (C = e.getNodeTextValue(B[J]), ctatdebug("productionSet=" + C));
            "label" === I && (u = e.getNodeTextValue(B[J]), ctatdebug("label=" + C));
            "description" === I && (D = e.getNodeTextValue(B[J]), ctatdebug("description=" + C));
          }
          C = new CTATExampleTracerSkill(C, H, CTATExampleTracerSkill.DEFAULT_P_GUESS, CTATExampleTracerSkill.DEFAULT_P_KNOWN, CTATExampleTracerSkill.DEFAULT_P_SLIP, CTATExampleTracerSkill.DEFAULT_P_LEARN, CTATExampleTracerSkill.DEFAULT_HISTORY);
          null != u ? C.setLabel(u) : C.setLabel(H);
          null != D ? C.setDescription(D) : C.setDescription(H);
          m.push(C);
      }
    }
    if (F) {
      z = e.getElementAttr(F, "ordered");
      if (null === z || "undefined" == typeof isordered) {
        z = !r;
      }
      ctatdebug("parseGraph() value of isOrdered = " + z);
      ctatdebug("parseGraph() value of isUnordered = " + r);
      ctatdebug("parseGraph() typeof isOrdered: " + typeof z);
      ctatdebug("parseGraph()typeof isUnordered: " + typeof r);
      y = F;
      E = z;
      ctatdebug("processGroup()");
      l = c.getGroupModel();
      z = l.createIdToLinkMap();
      l.setGroupOrdered(l.getTopLevelGroup(), E);
      ctatdebug("processGroup() name of group: " + l.getGroupName(l.getTopLevelGroup()));
      ctatdebug("processGroup() group isOrdered?: " + l.isGroupOrdered(l.getTopLevelGroup()));
      ctatdebug("processGroup() order of group: isOrdered= " + E);
      ctatdebug("processGroup() order of group: isOrdered typeof= " + typeof E);
      y = e.getElementChildren(y);
      for (E = 0;E < y.length;E++) {
        switch(e.getElementName(y[E])) {
          case "group":
            d(y[E], z);
            break;
          case "outOfOrderMessage":
            l.getTopLevelGroup().setDefaultBuggyMsg(e.getNodeTextValue(y[E]));
        }
      }
    }
    z = f.getSkillBarVector();
    if (!z || 1 > z.length) {
      ctatdebug("No existing skills. Add skills from BRD."), f.addGraphSkills(m), z = f.getSkillBarVector();
    }
    h = (new CTATTutorMessageBuilder).createStateGraphMessage(q, r, p, f.isFeedbackSuppressed(), A, G, z);
    c.redoLinkDepths();
    g = c.getExampleTracer();
    g.resetTracer();
    c.forDebugging();
    ctatdebug("Graph loaded.");
    return {gr:c, tracer:g, ssm:k, sgMsg:h};
  };
};
CTATGraphParser.prototype = Object.create(CTATBase.prototype);
CTATGraphParser.prototype.constructor = CTATGraphParser;
"undefined" !== typeof module && (module.exports = CTATGraphParser);
var SCORMProblemSummary = function() {
  CTATBase.call(this, "SCORMProblemSummary", "");
};
Object.defineProperty(SCORMProblemSummary, "LESSON_STATUS", {enumerable:!1, configurable:!1, writable:!1, value:"cmi.core.lesson_status"});
Object.defineProperty(SCORMProblemSummary, "RAW_SCORE", {enumerable:!1, configurable:!1, writable:!1, value:"cmi.core.score.raw"});
Object.defineProperty(SCORMProblemSummary, "EXIT", {enumerable:!1, configurable:!1, writable:!1, value:"cmi.core.exit"});
Object.defineProperty(SCORMProblemSummary, "SESSION_TIME", {enumerable:!1, configurable:!1, writable:!1, value:"cmi.core.session_time"});
Object.defineProperty(SCORMProblemSummary, "ExitReason", {enumerable:!1, configurable:!1, writable:!1, value:{timeout:"time-out", suspend:"suspend", logout:"logout", done:" "}});
Object.defineProperty(SCORMProblemSummary, "LessonStatus", {enumerable:!1, configurable:!1, writable:!1, value:{passed:"passed", completed:"completed", failed:"failed", incomplete:"incomplete", browsed:"browsed", notAttempted:"not attempted"}});
SCORMProblemSummary.getLessonStatus = function(a) {
  return CTATMsgType.CompletionValue[1] == a.getCompletionStatus() ? SCORMProblemSummary.LessonStatus.completed : SCORMProblemSummary.LessonStatus.incomplete;
};
SCORMProblemSummary.getRawScore = function(a) {
  var b = a.getUniqueSteps();
  return 0 == b ? 0 : parseInt(100 * (a.getUniqueCorrectUnassisted() / b + .005));
};
SCORMProblemSummary.getExitReason = function(a) {
  return SCORMProblemSummary.ExitReason.suspend;
};
SCORMProblemSummary.getSessionTime = function(a) {
  var b = a.getTimeElapsed();
  a = b % 1E3;
  var b = (b - a) / 1E3, d = b / 60, f = d / 60, b = b % 60;
  9999 < f && (f = 9999, d = b = 99, a = 990);
  return sprintf("%04d:%02d:%02d.%02d", f, d, b, a / 10);
};
SCORMProblemSummary.getProblemSummaryElements = function(a) {
  var b = sprintf("<%s>%s</%s>", SCORMProblemSummary.LESSON_STATUS, SCORMProblemSummary.getLessonStatus(a), SCORMProblemSummary.LESSON_STATUS), d = sprintf("<%s>%d</%s>", SCORMProblemSummary.RAW_SCORE, SCORMProblemSummary.getRawScore(a), SCORMProblemSummary.RAW_SCORE), f = sprintf("<%s>%s</%s>", SCORMProblemSummary.EXIT, SCORMProblemSummary.getExitReason(a), SCORMProblemSummary.EXIT);
  a = sprintf("<%s>%s</%s>", SCORMProblemSummary.SESSION_TIME, SCORMProblemSummary.getSessionTime(a), SCORMProblemSummary.SESSION_TIME);
  return b + d + f + a;
};
CTATMsgType.prototype = Object.create(CTATBase.prototype);
CTATMsgType.prototype.constructor = SCORMProblemSummary;
"undefined" !== typeof module && (module.exports = SCORMProblemSummary);
var CTATMessageTank = function(a, b) {
  function d(a) {
    p.ctatdebug("entering updateProblemSummary()");
    a && e.forEach(function(b) {
      if (b.msgType == CTATMsgType.ASSOCIATED_RULES) {
        var d = b.evt;
        p.ctatdebug("entering updateProblemSummaryWithEvent(" + d + ")");
        if (d) {
          b = d.getResult();
          d.getHintRequest() && (b = CTATExampleTracerLink.HINT_ACTION);
          var e = CTATMsgType.CompletionValue[0];
          a.setCompletionStatus(e, CTATGlobals.confirmDone);
          var f = b && b == CTATExampleTracerLink.CORRECT_ACTION, g = !1, h = null, k = d.getStudentSAI();
          k && (h = k.getSelection()) && (g = "done" == String(h).toLowerCase());
          p.ctatdebug("updateProblemSummary() Completion status " + e + ", doneStep " + g + ", correct " + f);
          g && (e = f ? CTATMsgType.CompletionValue[1] : CTATMsgType.CompletionValue[0], a.setCompletionStatus(e, !0));
          e == CTATMsgType.CompletionValue[1] ? (a.stopTimer(), c && c.setOutputStatus(CTATProblemStateStatus.complete)) : a.restartTimer();
          e = d.getActor();
          p.ctatdebug("updateProblemSummmary() actor " + e + ", indicatorObj " + b);
          CTATMatcher.isTutorActor(e) || (d = d.getStepID(), CTATTutorMessageBuilder.isHint(b) ? a.addHint(d) : CTATTutorMessageBuilder.isCorrect(b) ? null !== b && "undefined" !== typeof b && a.addCorrect(d) : a.addError(d));
        }
      }
    });
  }
  function f(a) {
    switch(p.suppressFeedback(a, c.getFeedbackPolicy())) {
      case CTATMsgType.SHOW_ALL_FEEDBACK:
        return !1;
      case CTATMsgType.DELAY_FEEDBACK:
        a = a.msg;
        var b = CTATMsgType.getProperty(a, "Selection");
        p.ctatdebug("CTATMessageTank.addToDelayedFeedbackTank(\n  " + a + ") selection " + b);
        b && (c.getDelayedFeedback()[b.toLowerCase()] = a);
        return !0;
      case CTATMsgType.HIDE_ALL_FEEDBACK:
        return !0;
      case CTATMsgType.HIDE_BUT_COMPLETE:
        return !0;
      case CTATMsgType.HIDE_BUT_ENFORCE:
        return !0;
      default:
        return !1;
    }
  }
  function g(a, b) {
    for (var c = new CTATMessageTank(a, null), d = 0;d < b.length;++d) {
      var e = b[d];
      p.ctatdebug("sendNewTankful() mto[" + d + "] msgType " + e.msgType);
      c.addToMessageTank(e.msgType, e.msg, e.evt, null);
    }
    c.flushMessageTank(null, !0);
  }
  CTATBase.call(this, "CTATMessageTank", b);
  var c = a, e = null, h = null, k = null, l = new Set;
  l.add("SuccessMessage");
  l.add("BuggyMessage");
  l.add("HighlightMsg");
  l.add("NotDoneMessage");
  var q = b, p = this, m = /^([^:]+):([0-9]+)$/;
  this.toString = function() {
    p.ctatdebug("toString tank " + e);
    if (!e || 1 > e.length) {
      return "MessageTank empty";
    }
    var a = "";
    e.forEach(function(b) {
      a += b.msgType + ", ";
    });
    return "MessageTank[" + a.substr(0, a.length - 2) + "]";
  };
  this.setTransaction_id = function(a) {
    q = a;
  };
  this.enqueueToolActionToStudent = function(a, b, d, e) {
    p.ctatdebug("Entering enqueueToolActionToStudent(" + a + ", " + b + ", " + d + ", " + e + ")");
    var f = CTATMsgType.INTERFACE_ACTION;
    p.ctatdebug("entering enqueueMessageToStudent()");
    var g = CTATMessage.makeTransactionId();
    a = new CTATSAI(a, b, d);
    b = (new CTATTutoringServiceMessageBuilder).createInterfaceActionMessage(g, a);
    b = CTATMsgType.setProperty(b, CTATTutorMessageBuilder.TRIGGER, "DATA");
    b = CTATMsgType.setProperty(b, CTATTutorMessageBuilder.SUBTYPE, null === e || "undefined" === typeof e || 1 > e.length ? CTATTutorMessageBuilder.TUTOR_PERFORMED : e);
    e = new CTATExampleTracerEvent(c, a, CTATMsgType.DEFAULT_TOOL_ACTOR);
    e.setTransactionID(g);
    p.addToMessageTank(f, b, e, a);
    return g;
  };
  this.addToMessageTank = function(a, b, c, d) {
    p.ctatdebug("Entering addToMessageTank(" + a + ", " + b + ", " + c + ")");
    if (b) {
      e || (e = [], h = {}, k = {});
      var f = {};
      f.msgType = a;
      f.msg = b;
      f.evt = c;
      f.sai = d;
      e.push(f);
      h[a] = h[a] ? h[a] + 1 : 1;
      a = c.getResult();
      c.getHintRequest() && (a = CTATExampleTracerLink.HINT_ACTION);
      k[a] = k[a] ? k[a] + 1 : 1;
      p.ctatdebug("Exiting addToMessageTank() this " + p.toString());
    }
  };
  this.flushMessageTank = function(a, b) {
    p.ctatdebug("Entering flushMessageTank(" + a + ", " + b + ")");
    if (e && !(1 > e.length)) {
      d(a);
      p.ctatdebug("flushMessageTank() after updateProblemSummary; messageTank.length " + e.length + ", transaction_id " + q);
      for (var l = [], y = [], r = 0;r < e.length;++r) {
        var A = e[r];
        if (A.msg) {
          var E = A.msgType, G = A.evt;
          p.ctatdebug("entering processInterfaceVariables() msgType " + E + ", evt " + G);
          E && (p.ctatdebug("entering processInterfaceVariables() et " + c + ", tracer " + (c ? c.getTracer() : null)), E = E.toLowerCase(), 0 !== E.indexOf("correct") && 0 !== E.indexOf("interfaceaction") || c.getTracer().addInterfaceVariablesFromEvent(G));
          if (!(E = f(A))) {
            var E = A, G = y, F = void 0, x = void 0;
            if (!(E && E.sai && (F = E.sai.getAction()) && (x = m.exec(F))) || 3 > x.length || 1 >= x[2]) {
              E = !1;
            } else {
              var H = G.length - 1, H = 0 > H ? null : G[H];
              E.msg = E.msg.replace(F, x[1]);
              H && H.timeout == x[2] ? H.msgTuples.push(E) : G.push({timeout:Number(x[2]), msgTuples:[E]});
              E = !0;
            }
          }
          E || l.push(A.msg);
        }
      }
      p.ctatdebug("flushMessageTank(): msgBundle.length " + l.length + ", delayedMsgsBundle.length " + y.length);
      for (r = 0;r < y.length;++r) {
        A = y[r], p.ctatdebug("processDelayedMsgs() delayedMsgs.timeout " + A.timeout + ", .msgTuples.length " + A.msgTuples.length), setTimeout(g, A.timeout, c, A.msgTuples);
      }
      0 < l.length && (p.ctatdebug("Bottom of flushMessageTank(); to send bundle of length " + l.length + " via " + c), c.sendBundle(l) && (p.ctatdebug("CTATMessageTank.shouldSaveNow() resultTypes " + k + ", msgTypes " + h), (k[CTATExampleTracerLink.CORRECT_ACTION] || k[CTATExampleTracerLink.FIREABLE_BUGGY_ACTION] || h.CorrectAction || h.InterfaceAction || h.UntutoredAction) && c.getOutputStatus().isSendingSavedMsgsForRestore() && (CTATGlobalFunctions.isInstructorMode() ? p.ctatdebug("We're in reviewer mode: we shouldn't save as we go") : 
      c.getProblemStateSaver().saveAsYouGo(a))), p.ctatdebug("Exiting flushMessageTank() #CorrectAction " + h.CorrectAction + ", #InterfaceAction " + h.InterfaceAction + ", #UntutoredAction " + h.UntutoredAction));
      h = e = q = null;
    }
  };
  this.flushDelayedFeedback = function() {
    p.ctatdebug("Entering flushDelayedFeedback()");
    var a = c.getDelayedFeedback(), b;
    for (b in a) {
      a.hasOwnProperty(b) && CTAT.ToolTutor.sendToInterface(a[b]);
    }
    c.clearDelayedFeedback();
  };
  this.suppressFeedback = function(a, b) {
    p.ctatdebug("CTATMessageTank.suppressFeedback(" + a.msgType + ", " + b + ")");
    var c = null;
    b == CTATMsgType.SHOW_ALL_FEEDBACK ? (p.ctatdebug("if.1"), c = b) : CTATMsgType.hasTextFeedback(a.msgType) ? (p.ctatdebug("if.2"), b == CTATMsgType.HIDE_ALL_FEEDBACK || b == CTATMsgType.HIDE_BUT_ENFORCE ? (p.ctatdebug("if.2.1"), c = b) : (p.ctatdebug("if.2.2"), (c = CTATMsgType.getProperty(a.msg, CTATMsgType.BUGGY_MSG)) && -1 != c.toLowerCase().indexOf(CTATMsgType.NOT_DONE_MSG.toLowerCase()) ? (p.ctatdebug("if.2.2.1"), c = CTATMsgType.SHOW_ALL_FEEDBACK) : (p.ctatdebug("if.2.2.2"), c = CTATMsgType.HIDE_ALL_FEEDBACK))) : 
    CTATMsgType.isCorrectOrIncorrect(a.msgType) ? (p.ctatdebug("if.3: " + a.msg), CTATMsgType.isDoneMessage(a.msg) ? (p.ctatdebug("if.3.1"), c = CTATMsgType.SHOW_ALL_FEEDBACK) : (p.ctatdebug("if.3.2"), c = b)) : (p.ctatdebug("if.4"), c = CTATMsgType.SHOW_ALL_FEEDBACK);
    p.ctatdebug("CTATMessageTank.suppressFeedback() returning " + c);
    return c;
  };
};
Object.defineProperty(CTATMessageTank, "END_OF_TRANSACTION", {enumerable:!1, configurable:!1, writable:!1, value:"end_of_transaction"});
CTATMessageTank.prototype = Object.create(CTATBase.prototype);
CTATMessageTank.prototype.constructor = CTATMessageTank;
"undefined" !== typeof module && (module.exports = CTATMessageTank);
var CTATHintPolicyEnum = function() {
};
Object.defineProperty(CTATHintPolicyEnum, "HINTS_UNBIASED", {enumerable:!0, configurable:!1, writable:!1, value:"Always Follow Best Path"});
Object.defineProperty(CTATHintPolicyEnum, "HINTS_BIASED_BY_CURRENT_SELECTION_ONLY", {enumerable:!0, configurable:!1, writable:!1, value:"Bias Hints by Current Selection Only"});
Object.defineProperty(CTATHintPolicyEnum, "HINTS_BIASED_BY_PRIOR_ERROR_ONLY", {enumerable:!0, configurable:!1, writable:!1, value:"Bias Hints by Prior Error Only"});
Object.defineProperty(CTATHintPolicyEnum, "HINTS_BIASED_BY_ALL", {enumerable:!0, configurable:!1, writable:!1, value:"Use Both Kinds of Bias"});
Object.defineProperty(CTATHintPolicyEnum, "DEFAULT", {enumerable:!0, configurable:!1, writable:!1, value:CTATHintPolicyEnum.HINTS_BIASED_BY_ALL});
CTATHintPolicyEnum.prototype = Object.create(Object.prototype);
CTATHintPolicyEnum.prototype.constructor = CTATHintPolicyEnum;
CTATHintPolicyEnum.lookup = function(a) {
  for (policy in CTATHintPolicyEnum) {
    if (CTATHintPolicyEnum[policy] == a) {
      return CTATHintPolicyEnum[policy];
    }
  }
  return CTATHintPolicyEnum.DEFAULT;
};
"undefined" !== typeof module && (module.exports = CTATHintPolicyEnum);
var CTATProblemStateStatus = function() {
  var a = "empty";
  this.getStatus = function() {
    return a;
  };
  this.setStatus = function(b) {
    a = b;
  };
};
Object.defineProperty(CTATProblemStateStatus, "empty", {enumerable:!1, configurable:!1, writable:!1, value:"empty"});
Object.defineProperty(CTATProblemStateStatus, "incompleteStartState", {enumerable:!1, configurable:!1, writable:!1, value:"incompleteStartState"});
Object.defineProperty(CTATProblemStateStatus, "startState", {enumerable:!1, configurable:!1, writable:!1, value:"startState"});
Object.defineProperty(CTATProblemStateStatus, "incomplete", {enumerable:!1, configurable:!1, writable:!1, value:"incomplete"});
Object.defineProperty(CTATProblemStateStatus, "goingToState", {enumerable:!1, configurable:!1, writable:!1, value:"goingToState"});
Object.defineProperty(CTATProblemStateStatus, "normalFeedback", {enumerable:!1, configurable:!1, writable:!1, value:"normalFeedback"});
Object.defineProperty(CTATProblemStateStatus, "complete", {enumerable:!1, configurable:!1, writable:!1, value:"complete"});
CTATProblemStateStatus.prototype = Object.create(CTATBase.prototype);
CTATProblemStateStatus.prototype.constructor = CTATProblemStateStatus;
CTATProblemStateStatus.prototype.isSendingSavedMsgsForRestore = function() {
  switch(this.getStatus()) {
    case CTATProblemStateStatus.normalFeedback:
    ;
    case CTATProblemStateStatus.complete:
      return !0;
    default:
      return !1;
  }
};
CTATProblemStateStatus.prototype.mustSaveForRestore = function() {
  switch(this.getStatus()) {
    case CTATProblemStateStatus.incomplete:
    ;
    case CTATProblemStateStatus.incompleteStartState:
    ;
    case CTATProblemStateStatus.goingToState:
      return !1;
    default:
      return !0;
  }
};
CTATProblemStateStatus.prototype.isOutputSuppressed = function() {
  switch(this.getStatus()) {
    case CTATProblemStateStatus.goingToState:
      return !0;
    default:
      return !1;
  }
};
CTATProblemStateStatus.prototype.isComplete = function() {
  return this.getStatus() == CTATProblemStateStatus.complete;
};
CTATProblemStateStatus.prototype.isIncomplete = function() {
  switch(this.getStatus()) {
    case CTATProblemStateStatus.incompleteStartState:
    ;
    case CTATProblemStateStatus.incomplete:
      return !0;
    default:
      return !1;
  }
};
CTATProblemStateStatus.prototype.mustRetrieveProblemState = function() {
  switch(this.getStatus()) {
    case CTATProblemStateStatus.incompleteStartState:
    ;
    case CTATProblemStateStatus.incomplete:
    ;
    case CTATProblemStateStatus.complete:
      return !0;
    default:
      return !1;
  }
};
CTATProblemStateStatus.prototype.transition = function(a, b) {
  var d = this.getStatus();
  if (CTATProblemStateStatus.complete != d) {
    switch(a) {
      case CTATMsgType.SET_PREFERENCES:
        CTATProblemStateStatus[b] && (CTATProblemStateStatus.incomplete == CTATProblemStateStatus[b] ? this.setStatus(CTATProblemStateStatus.incompleteStartState) : CTATProblemStateStatus.complete == CTATProblemStateStatus[b] ? this.setStatus(CTATProblemStateStatus.complete) : this.setStatus(CTATProblemStateStatus.startState));
        break;
      case CTATMsgType.STATE_GRAPH:
        this.getStatus() == CTATProblemStateStatus.incomplete || this.getStatus() == CTATProblemStateStatus.incompleteStartState ? this.setStatus(CTATProblemStateStatus.incompleteStartState) : this.setStatus(CTATProblemStateStatus.startState);
        break;
      case CTATMsgType.START_STATE_END:
        this.getStatus() == CTATProblemStateStatus.incompleteStartState ? this.setStatus(CTATProblemStateStatus.incomplete) : this.setStatus(CTATProblemStateStatus.normalFeedback);
        break;
      case CTATMsgType.PROBLEM_RESTORE_END:
      ;
      case CTATMsgType.END_GO_TO_STATE:
        this.setStatus(CTATProblemStateStatus.normalFeedback);
        break;
      case CTATMsgType.BEGIN_GO_TO_STATE:
        this.setStatus(CTATProblemStateStatus.goingToState);
    }
    ctatdebug("CTATProblemStateStatus.transition(" + a + ", " + b + ") old " + d + " => new " + this.getStatus());
    return this.getStatus();
  }
};
CTATProblemStateStatus.prototype.toString = function() {
  return "{" + this.getStatus() + "}";
};
var CTATSkills = function(a) {
  CTATBase.call(this, "CTATSkills", a ? String(a.length) : "");
  var b = {}, d = 0;
  a.forEach(function(a) {
    b[a.getSkillName().toLowerCase()] = a;
  });
  var f = new Set, g = this;
  this.toXML = function(a, d) {
    d || (d = "");
    var f = a ? "&lt;Skills&gt;" : "<Skills>", g = f.length, l;
    for (l in b) {
      b.hasOwnProperty(l) && b[l] && (f += d + b[l].toXML(a));
    }
    f += d && f.length > g ? "\n" : "";
    return f + (a ? "&lt;/Skills&gt;" : "</Skills>");
  };
  this.updateSkill = function(a, b, h) {
    var k = null, l = g.getSkill(b);
    null !== l && "undefined" !== typeof l && (l.setTransactionNumber(d), b = h + " " + b, f.has(b) || (f.add(b), l.updatePKnown(a), l.updateHistory(a), l.changeOpportunityCount(1)), CTATExampleTracerSkill.CORRECT.toString().toUpperCase() === a.toString().toUpperCase() && f["delete"](b), k = l);
    return k;
  };
  this.startTransaction = function() {
    ++d;
  };
  this.getSkill = function(a) {
    var d = null === a || "undefined" === typeof a ? null : a.toLowerCase(), d = b[d];
    g.ctatdebug("CTATSkills.getSkill(" + a + ") returns " + d);
    return d;
  };
  this.getSkillBarVector = function(a, e) {
    var f = [], g;
    for (g in b) {
      !0 === b.hasOwnProperty(g) && (!0 !== e && b[g].getTransactionNumber() !== d || f.push(b[g].getSkillBarString(a)));
    }
    return f;
  };
  this.setExternallyDefined = function(a) {
  };
  this.setVersion = function(a) {
    for (var d in b) {
      !0 === b.hasOwnProperty(d) && b[d].setVersion(a);
    }
  };
};
CTATSkills.prototype = Object.create(CTATBase.prototype);
CTATSkills.prototype.constructor = CTATSkills;
"undefined" !== typeof module && (module.exports = CTATSkills);
var CTATExampleTracer = function() {
  function a(a, c) {
    c ? I |= 1 << a : (I &= -65537 >> 16 - a, b());
  }
  function b() {
    m.ctatdebug("workTheQueue() working " + I + ", workQueue.length " + J.length + ", restoreQueue.length " + B.length);
    if (0 == I) {
      for (;0 != (I = 0 < J.length | (0 < B.length) << 1);) {
        var a = null, b = !1;
        0 < B.length ? (a = B.shift(), b = !0) : a = J.shift();
        if (!d(a, b)) {
          m.ctatdebug("workTheQueue() suspending workQueue.length " + J.length + ", restoreQueue.length " + B.length);
          m.stopWorking(b ? 1 : 0);
          break;
        }
        m.ctatdebug("workTheQueue() bottom workQueue.length " + J.length + ", restoreQueue.length " + B.length);
      }
    }
  }
  function d(a, b) {
    m.lastMessageAsString = a;
    var d = m.lastMessageAsXML = (new CTATXML).parseXML(a), e = m.lastMessage = new CTATMessage(d), h = e.getMessageType();
    m.ctatdebug("CTATExampleTracer.handleMessageFromInterface(msgType " + h + ")");
    switch(h) {
      case CTATMsgType.SET_PREFERENCES:
        return f(a, e, r, d), !1;
      case CTATMsgType.INTERFACE_IDENTIFICATION:
        return !0;
      case CTATMsgType.UNTUTORED_ACTION:
        return b && m.sendBundle([a]), g(a, e, r, d), !0;
      case CTATMsgType.INTERFACE_ACTION:
        return b && m.sendBundle([a]), c(a, e, r, d), !0;
      case CTATMsgType.PROBLEM_SUMMARY_REQUEST:
        return setTimeout(function(a) {
          a = m.getProblemSummary();
          m.ctatdebug("CTATExampleTracer.ProblemSummaryRequest getProblemSummary() " + m.getProblemSummary());
          var c = "<message><verb>NotePropertySet</verb><properties><MessageType>" + CTATMsgType.PROBLEM_SUMMARY_RESPONSE + "</MessageType>", c = c + SCORMProblemSummary.getProblemSummaryElements(a), c = c + ("<ProblemSummary>" + a.toXML(!0) + "</ProblemSummary>"), c = c + "<end_of_transaction>true</end_of_transaction></properties></message>", d = [];
          d.push(c);
          m.sendBundle(d);
          C.transition(CTATMsgType.PROBLEM_SUMMARY_RESPONSE, a.getCompletionStatus());
          m.ctatdebug("CTATExampleTracer.handleProblemSummaryRequest() sent result '" + c + "';");
          m.startWorking(b ? 1 : 0);
        }, 4E3), !1;
      case CTATMsgType.START_STATE_END:
        return C.transition(CTATMsgType.START_STATE_END), !0;
      case CTATMsgType.PROBLEM_RESTORE_END:
        return p(), !0;
      default:
        return console.log("CTATExampleTracer.handleMessageFromInterface(restoring " + b + ") " + (b ? "sending" : "unprocessed") + " message, type " + h + "\n  " + a), b && m.sendBundle([a]), !0;
    }
  }
  function f(a, b, c, d) {
    m.ctatdebug("SetPreferences received: " + a);
    M = !1;
    H = b.getProperty("problem_name");
    m.ctatdebug("SetPreferences.problem_name = " + H);
    a = c.getElementChildren(c.getElementChildren(d)[1]);
    for (b = 0;b < a.length;b++) {
      if (d = c.getElementName(a[b]), m.ctatdebug("SetPreferences eltName " + d), d) {
        switch(d.toLowerCase()) {
          case "question_file":
            w = c.getNodeTextValue(a[b]);
            break;
          case "skills":
            m.ctatdebug(" parseSkills(" + a[b] + ")");
            d = [];
            for (var e = r.getElementChildren(a[b]), f = 0;f < e.length;f++) {
              var g = r.getElementName(e[f]);
              if (g && "skill" == g.toLowerCase()) {
                var h = r.getElementAttr(e[f], "name");
                if (h && "" != h.trim()) {
                  var g = r.getElementAttr(e[f], "label"), k = r.getElementAttr(e[f], "pSlip"), l = r.getElementAttr(e[f], "description"), p = r.getElementAttr(e[f], "pKnown"), q = r.getElementAttr(e[f], "category"), t = r.getElementAttr(e[f], "pLearn"), x = r.getElementAttr(e[f], "pGuess"), y = r.getElementAttr(e[f], "history"), h = new CTATExampleTracerSkill(q, h, x, p, k, t, y);
                  h.setLabel(g);
                  h.setDescription(l);
                  d.push(h);
                }
              }
            }
            m.getProblemSummary().setSkills(new CTATSkills(d));
            break;
          case "problem_state_status":
            C.transition(CTATMsgType.SET_PREFERENCES, c.getNodeTextValue(a[b]));
            D || (D = new ProblemStateRestorer(m));
            m.ctatdebug("SetPreferences problemStateRestorer " + D);
            break;
          case "curriculum_service_url":
            CTATConfiguration.set("curriculum_service_url", c.getNodeTextValue(a[b]));
            break;
          case "restore_problem_url":
            D || (D = new ProblemStateRestorer(m));
            m.ctatdebug("SetPreferences problemStateRestorer " + D);
            CTATConfiguration.set("restoreProblemUrl", c.getNodeTextValue(a[b]));
            break;
          case "session_id":
            O = c.getNodeTextValue(a[b]);
            break;
          case "authenticity_token":
            u.setAuthenticityToken(c.getNodeTextValue(a[b]));
        }
      }
    }
    m.ctatdebug("questionFile " + w + ", outputStatus " + C + ", problemStateRestorer " + D);
    a = w;
    m.ctatdebug("retrieveBRD (" + a + ")");
    Q.retrieveXMLFile(a, c, m);
    D && D.retrieveMessages(C);
  }
  function g(a, b, c, d) {
    b = b.getTransactionID();
    m.ctatdebug("UntutoredAction (" + a + "), getTransactionID " + b);
    u.appendToProblemState(a, m.getOutputStatus(), !1);
    if (!M) {
      return !1;
    }
    m.setVariablesFromSAI(d, c);
    return !0;
  }
  function c(a, b, c, d) {
    m.ctatdebug("Interface action received.");
    c = b.getTransactionID();
    if (!M) {
      return !1;
    }
    m.messageTank = new CTATMessageTank(m, c);
    m.ctatdebug("MessageTank " + m.messageTank);
    m.ctatdebug("InterfaceAction (" + a + "), getTransactionID " + c);
    d = b.getSelectionArray().slice(0);
    var e = b.getActionArray().slice(0);
    m.ctatdebug("selectionArray " + d + ", message.getSelectionArray() " + b.getSelectionArray());
    !d[0] || "hint" != d[0].toLowerCase() && "help" != d[0].toLowerCase() ? (m.ctatdebug("calling doNewExampleTrace(null, " + b.getSAI() + ") sai.selectionArray " + b.getSAI().getSelectionArray() + " msg.selectionArray " + b.getSelectionArray()), l(null, b.getSAI(), "student", !0, c, a)) : (m.ctatdebug("handleInterfaceAction() hint request: hintPolicy " + E + ", errorSAI " + A), E === CTATHintPolicyEnum.HINTS_UNBIASED ? (1 < d.length && (d[1] = ""), 1 < e.length && (e[1] = "")) : E !== CTATHintPolicyEnum.HINTS_BIASED_BY_CURRENT_SELECTION_ONLY && 
    (E === CTATHintPolicyEnum.HINTS_BIASED_BY_PRIOR_ERROR_ONLY ? A && A.getSelection() ? (d.splice(1, 0, A.getSelection()), e.splice(1, 0, "PreviousFocus")) : (d[1] = "", e[1] = "") : E === CTATHintPolicyEnum.HINTS_BIASED_BY_ALL && A && A.getSelection() && (d.splice(1, 0, A.getSelection()), e[1] = CTATMsgType.PREVIOUS_FOCUS.toString())), m.startSkillTransaction(), a = [], d = t.doHint(d, e, b.getInputArray(), "student", a, !0), b = a[0], a = b.getReportableHints(), e = d ? "" + d.getUniqueID() : 
    "", b.setStepID(e), m.updateSkills(CTATExampleTracerSkill.HINT, d ? d.getSkillNames() : [], e), m.ctatdebug("Before building hint message: tutorSAI " + b.getTutorSAI() + ", hints " + a + ", edge # " + e), d = (new CTATTutorMessageBuilder).createHintMessage(a, b.getTutorSAI(), e, c), m.messageTank.addToMessageTank(CTATMsgType.SHOW_HINTS_MESSAGE, d, b, null), c = (new CTATTutorMessageBuilder).createAssociatedRulesMessageForHint(a, b.getTutorSAI(), q(CTATMsgType.DEFAULT_STUDENT_ACTOR), m.getSkillBarVector(!0), 
    e, c), m.messageTank.addToMessageTank(CTATMsgType.ASSOCIATED_RULES, c, b, null), c = m.getProblemSummary(b.getReportableInterpretation()), m.messageTank.flushMessageTank(c, !0), m.ctatdebug("handleInterfaceAction() sent hint result " + b), A = null);
    return !0;
  }
  function e(a, b, c) {
    var d = {tutorAdvice:null, msg:null, msgType:null};
    if (a.getReportableLink()) {
      return d.tutorAdvice = a.getSuccessOrBuggyMsg(), d.tutorAdvice && d.tutorAdvice.trim() ? (d.msg = c.createBuggyMessage(a.getTransactionID(), d.tutorAdvice), d.msgType = "BuggyMessage") : d.tutorAdvice = null, d;
    }
    m.ctatdebug("CTATET.createBuggyMessage() past getReportableLink()");
    if (a.isDoneStepFailed()) {
      return d.tutorAdvice = CTATMsgType.NOT_DONE_MSG, d.msg = c.createBuggyMessage(a.getTransactionID(), d.tutorAdvice), d.msgType = "BuggyMessage", d;
    }
    m.ctatdebug("CTATET.createBuggyMessage() past isDoneStepFailed()");
    var e = b && b.getTutorSAI() ? b.getTutorSAI().getSelection() : null, e = e && "" !== e.trim() ? e : null, f = a.getStudentSAI() ? a.getStudentSAI().getSelection() : null, f = f && "" !== f.trim() ? f : null;
    m.ctatdebug("CTATET.createBuggyMessage() past hintSelection0 " + e + ", studentSelection0 " + f);
    if (a.getResult() == CTATExampleTracerLink.NO_MODEL && a.isOutOfOrder() && e && e != f) {
      return m.ctatdebug("CTATET.createBuggyMessage() to create out of order"), m.isHighlightRightSelection() ? (d.tutorAdvice = m.getOutOfOrderMessage(), d.msg = c.createHighlightWidgetMessage(e, b.getTutorSAI().getAction(), d.tutorAdvice, a.getTransactionID()), d.msgType = "HighlightMsg", m.ctatdebug("createBuggyMessage() out of order with highlight; rtn: " + d)) : (d.tutorAdvice = CTATGlobals.languageManager.getString("OUTOFORDER"), d.msg = c.createBuggyMessage(a.getTransactionID, d.tutorAdvice), 
      d.msgType = "BuggyMessage", m.ctatdebug("createBuggyMessage() out of order without highlight; rtn: " + d)), d;
    }
    if (b = y.getDefaultBuggyMsg()) {
      return d.tutorAdvice = b, d.msg = c.createBuggyMessage(a.getTransactionID, d.tutorAdvice), d.msgType = "BuggyMessage", m.ctatdebug("createBuggyMessage() default buggy msg: " + d), d;
    }
    m.ctatdebug("createBuggyMessage() no buggy msg: " + d);
    return d;
  }
  function h(a, b, c, d) {
    m.ctatdebug("checkForTutorAction(" + a + ", " + b + ", " + c + ", " + d + ")");
    var e = [];
    e[0] = k(y.getNode(a), !0);
    e[1] = k(y.getNode(b), !1);
    m.ctatdebug("checkForTutorAction() links[0] " + e[0] + ", links[1] " + e[1] + ";");
    a = 0;
    if (e[0] === e[1]) {
      e[1] = null;
    } else {
      if (null === e[0] || "undefined" === typeof e[0]) {
        a = 1;
      }
    }
    b = null;
    m.messageTank || (m.messageTank = new CTATMessageTank(m, null));
    for (;a < e.length && null !== e[a] && "undefined" !== typeof e[a];++a) {
      if (null == c || "undefined" == typeof c) {
        b = l(e[a], e[a].getDefaultSAI(), e[a].getActor(), !0, null);
      } else {
        b = e[a].getEvaluatedInput(c, d.getReportableVariableTable());
        var f = e[a].getDefaultSAI().clone();
        f.setInput(b);
        b = l(e[a], f, e[a].getActor(), !0, null);
      }
    }
    m.ctatdebug("checkForTutorAction() returning " + b + ";");
    return b;
  }
  function k(a, b) {
    if (null === a || "undefined" === typeof a || 1 !== a.getCorrectOutDegree()) {
      return null;
    }
    var c = null;
    a.getCorrectOutLinks().forEach(function(a) {
      null === c && a.isTutorPerformed(b) && 0 < a.getMaxTraversals() && (c = a);
    });
    return c;
  }
  function l(a, b, c, d, f, g) {
    m.ctatdebug("doNewExampleTrace (link " + a + ", sai " + b + ", actor " + c + ", doTutorPerformedSteps " + d + ", transactionID " + f + ", origMsgTxt " + g);
    m.startSkillTransaction();
    var k = new CTATExampleTracerEvent(m, b, c);
    a && k.addPreloadedLinkMatch(a);
    var l = t.evaluate(k);
    m.ctatdebug("Evaluate returned : " + l + ", given link " + a + ", result " + k);
    a ? (m.ctatdebug("result.getTutorSelection() " + k.getTutorSelection()), m.ctatdebug("result.getTutorAction() " + k.getTutorAction()), m.ctatdebug("result.getTutorInput() " + k.getTutorInput()), m.ctatdebug("typeof(messageTank) " + typeof messageTank), f = k.getTutorSelection(), g = k.getTutorAction(), l = k.getTutorInput(), (f = m.messageTank.enqueueToolActionToStudent(f, g, l, CTATTutorMessageBuilder.TUTOR_PERFORMED)) && m.messageTank.setTransaction_id(f)) : k.getResult() != CTATExampleTracerLink.CORRECT_ACTION && 
    k.getResult() != CTATExampleTracerLink.FIREABLE_BUGGY_ACTION || u.appendToProblemState(g, m.getOutputStatus(), !1);
    k.setTransactionID(f);
    m.ctatdebug("finishNewExampleTrace(" + k + ", " + b + ", " + c + ", " + d + ")");
    g = k.getStudentSAI();
    var l = k.getTutorSAI(), p = k.getTransactionID(), r = new CTATTutorMessageBuilder, w = "", x = [];
    null !== k.getReportableLink() && "undefined" !== typeof k.getReportableLink() ? x[0] = k.getReportableLink() : x[0] = null;
    var x = x[0], y = null;
    if (k.isSolverResult()) {
      k.getResult();
    } else {
      if (k.getResult() === CTATExampleTracerLink.CORRECT_ACTION) {
        w = x ? "" + x.getUniqueID() : "", k.setStepID(w), CTATMsgType.UNGRADED_TOOL_ACTOR.toUpperCase() != c.toUpperCase() && m.messageTank.addToMessageTank(CTATMsgType.CORRECT_ACTION, r.createCorrectActionMessage(p, l), k, l), null !== x && "undefined" !== typeof x && m.updateSkills(CTATExampleTracerSkill.CORRECT, x.getSkillNames(), x.getUniqueID()), w = k.getSuccessOrBuggyMsg(), m.messageTank.addToMessageTank(CTATMsgType.ASSOCIATED_RULES, r.createAssociatedRulesMessageForAction(k.getResult(), 
        l, q(c), g, m.getSkillBarVector(!0, c), x.getUniqueID(), p, w), k, l), m.ctatdebug("finishNewExampleTrace() successMsg " + w), w && m.messageTank.addToMessageTank("SuccessMessage", r.createSuccessMessage(p, w), k, null), A = null, d && (y = h(x ? x.getNextNode() : null, t.findCurrentState(!1, !1), m.lastMessage ? m.lastMessage.getSAI() : null, k)) && (k = y);
      } else {
        m.messageTank.addToMessageTank(CTATMsgType.INCORRECT_ACTION, r.createInCorrectActionMessage(p, k.getInterpolatedSAI()), k, null);
        m.ctatdebug("about to do silent traceForHint(" + g + "), selectionArray " + g.getSelectionArray());
        var z = m.lastSilentHintResult = new CTATExampleTracerEvent(m, g, c);
        z.setHintRequest(!0);
        y = t.traceForHint(z);
        m.ctatdebug("silent hint result: " + z + "; hintLink " + y);
        y || (y = t.getBestNextLink(!1, z), m.ctatdebug("getBestNextLink result: " + z + "; hintLink " + y));
        l = z ? z.getTutorSAI() : null;
        y && (w = "" + y.getUniqueID(), k.setStepID(w));
        z = e(k, z, r);
        m.ctatdebug("createBuggyMessage() tutorAdvice: " + z.tutorAdvice + ";\n  msg " + z.msg);
        m.updateSkills(CTATExampleTracerSkill.INCORRECT, y ? y.getSkillNames() : [], w);
        m.messageTank.addToMessageTank(CTATMsgType.ASSOCIATED_RULES, r.createAssociatedRulesMessageForAction(k.getResult(), l && l.getSelection() ? l : g, q(c), g, m.getSkillBarVector(!0, c), w, p, z.tutorAdvice), k, null);
        z.msg && m.messageTank.addToMessageTank(z.msgType, z.msg, k);
        A = g;
        d && CTATExampleTracerLink.FIREABLE_BUGGY_ACTION == k.getResult() ? (y = h(x ? x.getNextNode() : null, t.findCurrentState(!1, !1), m.lastMessage ? m.lastMessage.getSAI() : null, k)) && (k = y) : k.isDoneStepFailed() && m.messageTank.flushDelayedFeedback();
      }
    }
    m.lastResult = k;
    l = m.getProblemSummary(k.getReportableInterpretation());
    m.ctatdebug("finishNewExampleTrace() to flushMessageTank");
    m.messageTank.flushMessageTank(l, !0);
    m.ctatdebug("finishNewExampleTrace() sent result " + k.getResult() + ", studentSAI " + g);
    m.ctatdebug("doNewExampleTrace(" + a + ", " + b + ", " + c + ", " + d + ", " + f + ") returns " + k);
    return k;
  }
  function q(a) {
    return "undefined" != typeof a && a && 0 <= a.toString().toLowerCase().indexOf("tutor") ? "Tutor" : "Student";
  }
  function p() {
    C.transition(CTATMsgType.PROBLEM_RESTORE_END);
    var a = m.getSkillBarVector(), b = [], c = new CTATTutorMessageBuilder;
    b.push(c.createMessage(CTATMsgType.START_STATE_END, null));
    b.push(c.createMessage(CTATMsgType.PROBLEM_RESTORE_END, a ? {Skills:a} : null));
    m.sendBundle(b);
  }
  CTATBase.call(this, "CTATExampleTracer", "tracer");
  var m = this, w = null, t, z, y, r = new CTATXML;
  new XMLSerializer;
  var A = null, E, G = !0, F = !1, x = null, H = null, u = new ProblemStateSaver(m);
  u.setAuthenticityToken(CTATCommLibrary.getAuthenticityToken());
  var D = null, C = new CTATProblemStateStatus, B = [], J = [], I = 0, M = !1, O = "", V = null;
  m.ctatdebug("CTATExampleTracer constructor outputStatus=" + C);
  this.messageTank = this.lastSilentHintResult = this.lastResult = this.lastMessage = this.lastMessageAsXML = this.lastMessageAsString = null;
  var Q = new CTATCommLibrary;
  this.receiveFromInterface = function(a) {
    m.ctatdebug("CTATExampleTracer.receiveFromInterface(" + a + ")");
    J.push(a);
    b();
  };
  this.setVariablesFromSAI = function(a, b) {
    var c = CTATMsgType.getSAIArraysFromElement(a, b);
    m.getTracer() && m.getTracer().addInterfaceVariables(c.selection, c.input);
  };
  this.traceLinks = function(a) {
    for (var b = [], c = 0;c < a.length && null !== a[c];++c) {
      m.messageTank = new CTATMessageTank(m, null), b.push(l(a[c], a[c].getDefaultSAI(), a[c].getActor(), !1, null)), m.ctatdebug("traceLinks[" + c + "] result " + b[c]);
    }
    return b;
  };
  this.enqueueForRestore = function(a) {
    m.ctatdebug("enqueueForRestore: got " + a.length + " message elements");
    B = B.concat(a);
    a = (new CTATTutorMessageBuilder).createMessage(CTATMsgType.PROBLEM_RESTORE_END, null);
    B.push(a);
    m.startWorking(1);
  };
  this.startWorking = function(b) {
    a(b, !1);
  };
  this.stopWorking = function(b) {
    a(b, !0);
  };
  this.processXML = function(a) {
    m.ctatdebug("processXML ()");
    if (null != a) {
      m.ctatdebug("No of children" + r.getElementChildren(a).length);
      var b = new CTATGraphParser, c = b.parseGraph(a, m);
      y = c.gr;
      t = c.tracer;
      a = c.ssm;
      var d = c.sgMsg;
      m.ctatdebug("sendStartStateMessages() nMsgs " + a.length + ", outputStatus " + C);
      for (var c = [], e = new XMLSerializer, f = null, g = 0;g < a.length;g++) {
        if ("message" == r.getElementName(a[g])) {
          var k = e.serializeToString(a[g]), l = CTATMsgType.getMessageType(k);
          CTATMsgType.UNTUTORED_ACTION != l && CTATMsgType.INTERFACE_ACTION != l || m.setVariablesFromSAI(a[g], r);
          CTATMsgType.START_STATE_END == l && (f = c, y.getFeedbackPolicy() != CTATMsgType.SHOW_ALL_FEEDBACK && (l = new CTATSAI("hint", "SetVisible", "false"), l = (new CTATTutoringServiceMessageBuilder).createInterfaceActionMessage("dummyTransactionID", l), f.push(l)), f = k, c.push((new CTATTutoringServiceMessageBuilder).createInterfaceConfigurationEnd()));
          c.push(k);
        }
      }
      d = c.unshift(d);
      f && (e = new CTATTutorMessageBuilder, c.splice(d, 0, e.createLockWidgetMsg(b.getLockWidget())));
      m.ctatdebug("sendStartStateMessages(): " + a.length + " elts, " + c.length + " strings, " + C);
      m.sendBundle(c);
      b = [];
      a = y.getStartNode();
      c = y.getStudentStartsHereNode();
      null !== a && null !== c && a.getNodeID() != c.getNodeID() && (b = y.getBestSubpath(a, c), m.ctatdebug("advanceToStudentStartsHere() path " + b), b = b.getSortedLinks(), b = m.traceLinks(b), m.ctatdebug("advanceToStudentStartsHere() results " + b));
      c = a = null;
      0 < b.length && (c = b[b.length - 1], b = c.getReportableLink(), null !== b && (a = b.getNextNode()));
      m.ctatdebug("advanceToStudentStartsHere() to check for TPA " + a + ", " + c);
      h(a, t.findCurrentState(!1, !1), null, c);
      C.isIncomplete() || (b = [], b.push((new CTATTutorMessageBuilder).createMessage(CTATMsgType.PROBLEM_RESTORE_END, null)), m.sendBundle([b]));
      M = !0;
    }
    m.startWorking(0);
  };
  this.addGraphSkills = function(a) {
    m.ctatdebug("adding graph skills: " + a.length);
    0 < a.length && (a = new CTATSkills(a), a.setExternallyDefined(!1), m.getProblemSummary().setSkills(a));
  };
  this.sendBundle = function(a) {
    m.ctatdebug("sending bundle #msgs = " + a.length + ", outputStatus " + C);
    for (var b = 0, c = 0;c < a.length;c++) {
      m.ctatdebug("Sending message #" + c);
      var d = a[c];
      0 >= c && (d = '<?xml version="1.0" encoding="UTF-8"?>' + d);
      u.forwardToInterface(d, c >= a.length - 1, C) && ++b;
    }
    return 0 < b;
  };
  this.setHintPolicy = function(a) {
    E = CTATHintPolicyEnum.lookup(a);
  };
  this.isHighlightRightSelection = function() {
    return G;
  };
  this.setHighlightRightSelection = function(a) {
    G = a;
  };
  this.updateSkills = function(a, b, c) {
    var d = [];
    m.ctatdebug("in updateSkills(" + b + ") with step ID = " + c + ", transaction result = " + a);
    var e = m.getProblemSummary().getSkills();
    if (null === e || "undefined" === typeof e) {
      return d;
    }
    b.forEach(function(b) {
      b = e.updateSkill(a, b, c);
      null !== b && "undefined" !== typeof b && d.push(b);
    });
    return d;
  };
  this.getSessionID = function() {
    return O;
  };
  this.getProblemSummary = function(a) {
    m.ctatdebug("Entering getProblemSummary() problemSummary " + x);
    if (null === x || "undefined" === typeof x) {
      var b = m.getProblemName();
      x = null === b || "undefined" === typeof b || 1 > b.length ? new CTATProblemSummary("NoProblemDefined", null, m.isFeedbackSuppressed()) : new CTATProblemSummary(b, null, m.isFeedbackSuppressed());
    }
    a && x.setRequiredSteps(a.countStepsForScore(y));
    return x;
  };
  this.getProblemName = function() {
    return H;
  };
  this.isFeedbackSuppressed = function() {
    return F;
  };
  this.setFeedbackSuppressed = function(a) {
    F = "false" === a ? !1 : "true" === a ? !0 : a === CTATMsgType.SHOW_ALL_FEEDBACK ? !1 : a === CTATMsgType.HIDE_ALL_FEEDBACK ? !0 : a === CTATMsgType.HIDE_BUT_ENFORCE ? !0 : a === CTATMsgType.HIDE_BUT_COMPLETE ? !0 : !1;
    m.ctatdebug("setFeedbackSuppressed(" + a + "): " + F);
  };
  this.getSkillBarVector = function(a, b) {
    var c = m.getProblemSummary().getSkills();
    return null === c || "undefined" === typeof c ? null : "Student" != q(b) ? null : "undefined" != typeof a && a ? c.getSkillBarVector(!1, !1) : c.getSkillBarVector(!0, !0);
  };
  this.startSkillTransaction = function() {
    var a = m.getProblemSummary().getSkills();
    a && a.startTransaction();
  };
  this.getProblemStateSaver = function() {
    return u;
  };
  this.getOutputStatus = function() {
    return C;
  };
  this.setOutputStatus = function(a) {
    var b = C.getStatus();
    m.ctatdebug("setOutputStatus() old " + b + ", new " + a);
    CTATProblemStateStatus[a] ? C.setStatus(CTATProblemStateStatus[a]) : (console.error("CTATExampleTracer.setOutputStatus() unexpected argument " + a), C.setStatus(CTATProblemStateStatus.empty));
  };
  this.getFeedbackPolicy = function() {
    return y ? y.getFeedbackPolicy() : CTATMsgType.SHOW_ALL_FEEDBACK;
  };
  this.getGraph = function() {
    return y;
  };
  this.getTracer = function() {
    return t;
  };
  this.getOutOfOrderMessage = function() {
    return z ? z : CTATMsgType.DEFAULT_OUT_OF_ORDER_MESSAGE;
  };
  this.setOutOfOrderMessage = function(a) {
    z = a;
  };
  this.getDelayedFeedback = function() {
    null == V && (V = {});
    return V;
  };
  this.clearDelayedFeedback = function() {
    V = null;
  };
  this.getQuestionFile = function(a) {
    if (!w || a) {
      return w;
    }
    a = w.split("/");
    return a[a.length - 1];
  };
};
CTATExampleTracer.prototype = Object.create(CTATBase.prototype);
CTATExampleTracer.prototype.constructor = CTATExampleTracer;
"undefined" !== typeof module && (module.exports = CTATExampleTracer);
var CTATExampleTracerGraphVisualData = function() {
  CTATBase.call(this, "CTATExampleTracerGraphVisualData", "visualdata");
};
CTATExampleTracerGraphVisualData.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerGraphVisualData.prototype.constructor = CTATExampleTracerGraphVisualData;
"undefined" !== typeof module && (module.exports = CTATExampleTracerGraphVisualData);
var CTATExampleTracerLinkVisualData = function() {
  CTATBase.call(this, "CTATExampleTracerLinkVisualData", "visualdata");
  var a = "****", b = "undefined", d = "****", f = "****";
  this.setID = function(b) {
    a = b;
  };
  this.getID = function() {
    return a;
  };
  this.setLabel = function(a) {
    b = a;
  };
  this.getLabel = function() {
    return b;
  };
  this.setSource = function(a) {
    d = a;
  };
  this.getSource = function() {
    return d;
  };
  this.setDestination = function(a) {
    f = a;
  };
  this.getDestination = function() {
    return f;
  };
};
CTATExampleTracerLinkVisualData.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerLinkVisualData.prototype.constructor = CTATExampleTracerLinkVisualData;
"undefined" !== typeof module && (module.exports = CTATExampleTracerLinkVisualData);
var CTATExampleTracerNodeVisualData = function() {
  CTATBase.call(this, "ExampleTracerNodeVisualData", "visualdata");
  var a = "****", b = "undefined", d = -1, f = -1, g = null;
  this.setID = function(b) {
    a = b;
  };
  this.getID = function() {
    return a;
  };
  this.setLabel = function(a) {
    b = a;
  };
  this.getLabel = function() {
    return b;
  };
  this.setX = function(a) {
    d = a;
  };
  this.getX = function() {
    return d;
  };
  this.setY = function(a) {
    f = a;
  };
  this.getY = function() {
    return f;
  };
  this.setVizReference = function(a) {
    g = a;
  };
  this.getVizReference = function() {
    return g;
  };
};
CTATExampleTracerNodeVisualData.prototype = Object.create(CTATBase.prototype);
CTATExampleTracerNodeVisualData.prototype.constructor = CTATExampleTracerNodeVisualData;
"undefined" !== typeof module && (module.exports = CTATExampleTracerNodeVisualData);

